<div class="card" id="card-vid">
    <div class="card-header"><strong>VID</strong> <small>without Verification</small></div>
    <div class="card-body">
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label" for="select-function">Function</label>
                    <div class="col-sm-8">
                        <select class="form-control form-control-sm" id="select-function" size="1">
                            <option value="verifyVid" selected> verifyVid</option>
                            <option value="getVIDRandom">getVIDRandom</option>
                            <option value="getEncryptedVidRandom">getEncryptedVidRandom</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <h6 class="mt-2 mb-4">Required Forms</h6>
        <!-- row -->
        <div class="row">
            <div class="col-sm-6" id="idn-wrapper">
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label" for="text-idn">ID Number</label>
                    <div class="col-sm-8">
                        <input class="form-control form-control-sm" type="text" id="text-idn" name="text-idn"
                            value="1234561234563">
                    </div>
                </div>
            </div>

            <div class="col-sm-6 d-none" id="encoding-wrapper">
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label" for="select-encoding">Encoding</label>
                    <div class="col-sm-8">
                        <select class="form-control form-control-sm" id="select-encoding" name="select-encoding"
                            size="1">
                            <option selected value="base64"> BASE64</option>
                            <option value="hex">HEX</option>
                            <option value="pem">PEM</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 d-none" id="padding-algorithm-wrapper">
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label" for="select-padding-algorithm">Padding Algorithm</label>
                    <div class="col-sm-8">
                        <select class="form-control form-control-sm" id="select-padding-algorithm"
                            name="select-padding-algorithm" size="1">
                            <option value="RSAES-OAEP">RSAES-OAEP</option>
                            <option selected value="RSAES-PKCS1-V1_5">RSAES-PKCS1-V1_5</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.row-->
        <div class="d-none" id="cert-wrapper">
            <label for="textarea-cert">Certificate to Envelop <small>(한정인(개인) signCert.der)</small></label>
            <textarea class="form-control form-control-sm" id="textarea-cert" name="textarea-cert"
                rows="4">-----BEGIN CERTIFICATE-----MIIFyzCCBLOgAwIBAgIEBVo2TTANBgkqhkiG9w0BAQsFADBKMQswCQYDVQQGEwJLUjENMAsGA1UECgwES0lDQTEVMBMGA1UECwwMQWNjcmVkaXRlZENBMRUwEwYDVQQDDAxzaWduR0FURSBDQTUwHhcNMjAwNjE3MDAyMjEwWhcNMjEwNzA4MTQ1OTU5WjCBkjELMAkGA1UEBhMCS1IxDTALBgNVBAoMBEtJQ0ExEzARBgNVBAsMCmxpY2Vuc2VkQ0ExFTATBgNVBAsMDOuTseuhneq4sOq0gDEZMBcGA1UECwwQS0lDQeqzoOqwneyEvO2EsDERMA8GA1UECwwI7IS87YSwUkExGjAYBgNVBAMMEe2VnOygleyduCjqsJzsnbgpMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAhk4R6nSzx2X4Kt751CtXj5oQOunvKXhzrieivDXc5qQviLMR+w6IqXHC/Z6q1jOagdArH9AQmKnD/26Tnhgud9jDVDmBaUns61scQ4GBD6VpkBtVsPe439nXOmsGU3ZLgf31YQfECzBk8zroWCvrsFFQC4uR3tkV768GQm6OwBk38JMPjJpqyZLR0ZzQJqBcepkI5iqmD+rYsMkm4HmLZY618egGP6mGGTmy9/l7xFGS2RiwSb7vtMLY/U94PkOR5XtQwH/k6EKfoZRTItDoRqsZKHpo189+rQExeBAC+748QK+Y+Yom/yYJda5MJgw7w1k4RIfwr0iXKWWgp8mLjQIDAQABo4ICbjCCAmowgY8GA1UdIwSBhzCBhIAU2L467EWZxZ7jnOqBH9IdErA2PoihaKRmMGQxCzAJBgNVBAYTAktSMQ0wCwYDVQQKDARLSVNBMS4wLAYDVQQLDCVLb3JlYSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eSBDZW50cmFsMRYwFAYDVQQDDA1LSVNBIFJvb3RDQSA0ggIQHTAdBgNVHQ4EFgQU/0odTZLJLQDtHlB+IhMY3lRtzCMwDgYDVR0PAQH/BAQDAgbAMHUGA1UdIARuMGwwagYKKoMajJpEBQIBAjBcMCwGCCsGAQUFBwIBFiBodHRwOi8vd3d3LnNpZ25nYXRlLmNvbS9jcHMuaHRtbDAsBggrBgEFBQcCAjAgHh7HdAAgx3jJncEcspQAIKz1x3jHeMmdwRzHhbLIsuQwgYgGA1UdEQSBgDB+gRVwdXJlMjcxM0BzaWduZ2F0ZS5jb22gZQYJKoMajJpECgEBoFgwVgwR7ZWc7KCV7J24KOqwnOyduCkwQTA/BgoqgxqMmkQKAQEBMDEwCwYJYIZIAWUDBAIBoCIEIAD0qdxBiV9bf4u4z0VtZWhXZAvsZyLJVMIgOYESyjm6MF8GA1UdHwRYMFYwVKBSoFCGTmxkYXA6Ly9sZGFwLnNpZ25nYXRlLmNvbTozODkvb3U9ZHA3cDIyNzk5LG91PWNybGRwLG91PUFjY3JlZGl0ZWRDQSxvPUtJQ0EsYz1LUjBEBggrBgEFBQcBAQQ4MDYwNAYIKwYBBQUHMAGGKGh0dHA6Ly9vY3NwLnNpZ25nYXRlLmNvbTo5MDIwL09DU1BTZXJ2ZXIwDQYJKoZIhvcNAQELBQADggEBABrkL9RsgVGNRjX7CIUFULklx6IOAFaSIEZUZsxtX1l3w3thW0GUnt4hXvN7RD4pqVxAgxiVJaU/jRqTUTUIxgpOGPRpQzlR7cfbBotAZI7R9WesIaUV/gAucTMIv1qNBDn9Bd9S68A49raWE91zpMRLjkDqyjrL9MyFgQWsIFj06bxc7gj6lGO5XDEiFx5ISmDCEHuZjpP1oMl/mbOC4m1ktz2w6uIWY4y9fe9Znzi4OkT9KNUlZ7cXFBGC1ZW8QS0coEs+V4C0X2e27pJDKXDq/ioxy9/LWauNNNaBvowwt3BXb687zsunDn7XWqu6KKekeVgZU8fzJdI6cRjK/p4=-----END CERTIFICATE-----</textarea>
        </div>

        <button class="btn btn-sm btn-pill btn-block btn-primary mb-4 mt-4" id="button-run" type="button">Run</button>

        <h6 class="mt-2 mb-4">Result</h6>
        <textarea class="form-control form-control-sm" id="textarea-result" name="textarea-result" rows="5"
            placeholder="결과가 여기에 표시됩니다."></textarea>

    </div>
</div>
<script>
    var func;
    $('#select-function').change(function () {
        func = $(this).val();
        $("#idn-wrapper, #encoding-wrapper, #padding-algorithm-wrapper, #cert-wrapper").addClass('d-none');

        if (func === "verifyVid")
            $("#idn-wrapper").removeClass('d-none');
        else if (func === "getVIDRandom")
            $("#encoding-wrapper").removeClass('d-none');
        else if (func === "getEncryptedVidRandom")
            $("#encoding-wrapper, #padding-algorithm-wrapper, #cert-wrapper").removeClass('d-none');
    })

    $('#button-run').click(function () {
        func = $("#select-function").val();
        if (func === "verifyVid") {
            var idn = $('#text-idn').val();
            html5DialogApi.verifyVid(idn, callback)
        }
        else if (func === "getVIDRandom") {
            var options = { outputEncoding: $('#select-encoding').val() };
            html5DialogApi.getVIDRandom(options, callback);
        }
        else if (func === "getEncryptedVidRandom") {
            var cert = $('#textarea-cert').val();
            var options = {
                outputEncoding: $('#select-encoding').val(),
                paddingAlg: $('#select-padding-algorithm').val()
            };
            html5DialogApi.getEncryptedVidRandom(cert, options, callback);
        }
    });

    var callback = function (result, error) {
        if (error) {
            $('#textarea-result').val(error.message);
            return;
        }
        $('#textarea-result').val(result);

        KICA_DIALOG.closeSelectCertificateDialog();
    }
</script>