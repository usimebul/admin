<div class="card" id="card-electronic-signature">
    <div class="card-header"><strong>Certificate</strong></div>
    <div class="card-body">
        <button class="btn btn-sm btn-pill btn-block btn-primary" id="button-get-certificate" type="button">Get
            Certificate</button>

        <hr>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label" for="text-username">User Name</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-username" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-vidRandom">VID Random</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-vidRandom" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-issuer">Issuer</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-issuer" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-issuerToString">Issuer String</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-issuerToString" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-policy">Policy</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-policy" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-validateFrom">Date From</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-validateFrom" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-validateTo">Date To</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-validateTo" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-usage">Usage</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-usage" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-policyToName">Usage to String</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-policyToName" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-version">version</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-version" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-userDN">User DN</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-userDN" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-issueDN">Issuer DN</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-issueDN" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-userKeyID">User Key ID</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-userKeyID" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-authorityKeyID">Authority Key ID</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-authorityKeyID" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-userPublicKeyAlgorithmID">User Public Key Algorithm
                        ID</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-userPublicKeyAlgorithmID" readonly
                            class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-signatureAlgorithmID">Signature Algorithm
                        ID</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-signatureAlgorithmID" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-keySize">Key Size</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-keySize" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-serial">Serial</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-serial" readonly class="form-control form-control-sm">
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-distributionPoints">Distribution Points</label>
                    <div class="col-sm-8">
                        <input type="text" id="text-distributionPoints" readonly class="form-control form-control-sm">
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label" for="text-certPEM">Sign Certificate</label>
                    <div class="col-sm-8">
                        <textarea class="form-control form-control-sm" id="text-certPEM" rows="9" readonly></textarea>
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-encryptCertPEM">Km Certificate</label>
                    <div class="col-sm-8">
                        <textarea class="form-control form-control-sm" id="text-encryptCertPEM" rows="9"
                            readonly></textarea>
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-singature">Signature</label>
                    <div class="col-sm-8">
                        <textarea class="form-control form-control-sm" id="text-singature" rows="4" readonly></textarea>
                    </div>

                    <label class="col-sm-4 col-form-label" for="text-publicKey">Public Key</label>
                    <div class="col-sm-8">
                        <textarea class="form-control form-control-sm" id="text-publicKey" rows="4" readonly></textarea>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<script>
    $('#button-get-certificate').click(function () {
        processLogic.init();
        processLogic.setProcessLogic("viewCertInfomationWithVID");

        NX_ShowDialog();
    });

    function SecuKitNXS_RESULT(cmd, res) {
        if (res.ERROR_CODE !== undefined) {
            // Error Message 출력
            $('.nx-cert-select').hide(); $('#nx-pki-ui-wrapper').hide(); KICA_Error.init();
            KICA_Error.setError(res.ERROR_CODE, res.ERROR_MESSAGE);
            var errorMsg = KICA_Error.getError();
            alert(errorMsg);
            return;
        }

        switch (cmd) {
            case "viewCertInfomationWithVID":
                var cmd = "result.viewCertInfomationWithVID";
                var param = JSON.stringify({
                    "certType": "SignCert",
                    "certID": res,
                    "isViewVID": true
                })
                secukitnxInterface.SecuKitNXS(cmd, param);
                break;

            case 'result':
                for (var [key, value] of Object.entries(res)) {
                    $("#text-" + key).val(value);
                }
                break;

            default: break;
        }
    }
</script>