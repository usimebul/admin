/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "localhost:9000/secukit-html5/dialog/";
/******/ 	// WebpackRequireFrom
/******/ 	Object.defineProperty(__webpack_require__, "p", {
/******/ 	  get: function () {
/******/ 	try {
/******/ 	  if (typeof webnpki_config.ui !== "string") {
/******/ 	    throw new Error("WebpackRequireFrom: 'webnpki_config.ui' is not a string or not available at runtime. See https://github.com/agoldis/webpack-require-from#troubleshooting");
/******/ 	  }
/******/ 	  return webnpki_config.ui;
/******/ 	} catch (e) {
/******/ 	  if (!false) {
/******/ 	    console.error(e);
/******/ 	  }
/******/ 	  return "localhost:9000/secukit-html5/dialog/";
/******/ 	}
/******/ 	 }
/******/ 	})
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 38);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (useSourceMap) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item, useSourceMap);

      if (item[2]) {
        return "@media ".concat(item[2], "{").concat(content, "}");
      }

      return content;
    }).join('');
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery) {
    if (typeof modules === 'string') {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, '']];
    }

    var alreadyImportedModules = {};

    for (var i = 0; i < this.length; i++) {
      // eslint-disable-next-line prefer-destructuring
      var id = this[i][0];

      if (id != null) {
        alreadyImportedModules[id] = true;
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = modules[_i]; // skip already imported module
      // this implementation is not 100% perfect for weird media query combinations
      // when a module is imported multiple times with different media queries.
      // I hope this will never occur (Hey this way we have smaller bundles)

      if (item[0] == null || !alreadyImportedModules[item[0]]) {
        if (mediaQuery && !item[2]) {
          item[2] = mediaQuery;
        } else if (mediaQuery) {
          item[2] = "(".concat(item[2], ") and (").concat(mediaQuery, ")");
        }

        list.push(item);
      }
    }
  };

  return list;
};

function cssWithMappingToString(item, useSourceMap) {
  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring

  var cssMapping = item[3];

  if (!cssMapping) {
    return content;
  }

  if (useSourceMap && typeof btoa === 'function') {
    var sourceMapping = toComment(cssMapping);
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot).concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
  }

  return [content].join('\n');
} // Adapted from convert-source-map (MIT)


function toComment(sourceMap) {
  // eslint-disable-next-line no-undef
  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
  var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
  return "/*# ".concat(data, " */");
}

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var stylesInDom = {};

var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

function listToStyles(list, options) {
  var styles = [];
  var newStyles = {};

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var css = item[1];
    var media = item[2];
    var sourceMap = item[3];
    var part = {
      css: css,
      media: media,
      sourceMap: sourceMap
    };

    if (!newStyles[id]) {
      styles.push(newStyles[id] = {
        id: id,
        parts: [part]
      });
    } else {
      newStyles[id].parts.push(part);
    }
  }

  return styles;
}

function addStylesToDom(styles, options) {
  for (var i = 0; i < styles.length; i++) {
    var item = styles[i];
    var domStyle = stylesInDom[item.id];
    var j = 0;

    if (domStyle) {
      domStyle.refs++;

      for (; j < domStyle.parts.length; j++) {
        domStyle.parts[j](item.parts[j]);
      }

      for (; j < item.parts.length; j++) {
        domStyle.parts.push(addStyle(item.parts[j], options));
      }
    } else {
      var parts = [];

      for (; j < item.parts.length; j++) {
        parts.push(addStyle(item.parts[j], options));
      }

      stylesInDom[item.id] = {
        id: item.id,
        refs: 1,
        parts: parts
      };
    }
  }
}

function insertStyleElement(options) {
  var style = document.createElement('style');

  if (typeof options.attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : undefined;

    if (nonce) {
      options.attributes.nonce = nonce;
    }
  }

  Object.keys(options.attributes).forEach(function (key) {
    style.setAttribute(key, options.attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  }

  if (sourceMap && btoa) {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {};
  options.attributes = typeof options.attributes === 'object' ? options.attributes : {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  var styles = listToStyles(list, options);
  addStylesToDom(styles, options);
  return function update(newList) {
    var mayRemove = [];

    for (var i = 0; i < styles.length; i++) {
      var item = styles[i];
      var domStyle = stylesInDom[item.id];

      if (domStyle) {
        domStyle.refs--;
        mayRemove.push(domStyle);
      }
    }

    if (newList) {
      var newStyles = listToStyles(newList, options);
      addStylesToDom(newStyles, options);
    }

    for (var _i = 0; _i < mayRemove.length; _i++) {
      var _domStyle = mayRemove[_i];

      if (_domStyle.refs === 0) {
        for (var j = 0; j < _domStyle.parts.length; j++) {
          _domStyle.parts[j]();
        }

        delete stylesInDom[_domStyle.id];
      }
    }
  };
};

/***/ }),
/* 2 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*
    PDFObject v2.1.1
    https://github.com/pipwerks/PDFObject
    Copyright (c) 2008-2018 Philip Hutchison
    MIT-style license: http://pipwerks.mit-license.org/
    UMD module pattern from https://github.com/umdjs/umd/blob/master/templates/returnExports.js
*/

(function(root,factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));}else {}}(this,function(){"use strict";if(typeof window==="undefined"||typeof navigator==="undefined"){return false;}
var pdfobjectversion="2.1.1",ua=window.navigator.userAgent,supportsPDFs,isIE,supportsPdfMimeType=(typeof navigator.mimeTypes['application/pdf']!=="undefined"),supportsPdfActiveX,isModernBrowser=(function(){return(typeof window.Promise!=="undefined");})(),isFirefox=(function(){return(ua.indexOf("irefox")!==-1);})(),isFirefoxWithPDFJS=(function(){if(!isFirefox){return false;}
return(parseInt(ua.split("rv:")[1].split(".")[0],10)>18);})(),isIOS=(function(){return(/iphone|ipad|ipod/i.test(ua.toLowerCase()));})(),createAXO,buildFragmentString,log,embedError,embed,getTargetElement,generatePDFJSiframe,generateEmbedElement;createAXO=function(type){var ax;try{ax=new ActiveXObject(type);}catch(e){ax=null;}
return ax;};isIE=function(){return!!(window.ActiveXObject||"ActiveXObject"in window);};supportsPdfActiveX=function(){return!!(createAXO("AcroPDF.PDF")||createAXO("PDF.PdfCtrl"));};supportsPDFs=(!isIOS&&(isFirefoxWithPDFJS||supportsPdfMimeType||(isIE()&&supportsPdfActiveX())));buildFragmentString=function(pdfParams){var string="",prop;if(pdfParams){for(prop in pdfParams){if(pdfParams.hasOwnProperty(prop)){string+=encodeURIComponent(prop)+"="+encodeURIComponent(pdfParams[prop])+"&";}}
if(string){string="#"+string;string=string.slice(0,string.length-1);}}
return string;};log=function(msg){if(typeof console!=="undefined"&&console.log){console.log("[PDFObject] "+msg);}};embedError=function(msg){log(msg);return false;};getTargetElement=function(targetSelector){var targetNode=document.body;if(typeof targetSelector==="string"){targetNode=document.querySelector(targetSelector);}else if(typeof jQuery!=="undefined"&&targetSelector instanceof jQuery&&targetSelector.length){targetNode=targetSelector.get(0);}else if(typeof targetSelector.nodeType!=="undefined"&&targetSelector.nodeType===1){targetNode=targetSelector;}
return targetNode;};generatePDFJSiframe=function(targetNode,url,pdfOpenFragment,PDFJS_URL,id){var fullURL=PDFJS_URL+"?file="+encodeURIComponent(url)+pdfOpenFragment;var scrollfix=(isIOS)?"-webkit-overflow-scrolling: touch; overflow-y: scroll; ":"overflow: hidden; ";var iframe="<div style='"+scrollfix+"position: absolute; top: 0; right: 0; bottom: 0; left: 0;'><iframe  "+id+" src='"+fullURL+"' style='border: none; width: 100%; height: 100%;' frameborder='0'></iframe></div>";targetNode.className+=" pdfobject-container";targetNode.style.position="relative";targetNode.style.overflow="auto";targetNode.innerHTML=iframe;return targetNode.getElementsByTagName("iframe")[0];};generateEmbedElement=function(targetNode,targetSelector,url,pdfOpenFragment,width,height,id){var style="";if(targetSelector&&targetSelector!==document.body){style="width: "+width+"; height: "+height+";";}else{style="position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;";}
targetNode.className+=" pdfobject-container";targetNode.innerHTML="<embed "+id+" class='pdfobject' src='"+url+pdfOpenFragment+"' type='application/pdf' style='overflow: auto; "+style+"'/>";return targetNode.getElementsByTagName("embed")[0];};embed=function(url,targetSelector,options){if(typeof url!=="string"){return embedError("URL is not valid");}
targetSelector=(typeof targetSelector!=="undefined")?targetSelector:false;options=(typeof options!=="undefined")?options:{};var id=(options.id&&typeof options.id==="string")?"id='"+options.id+"'":"",page=(options.page)?options.page:false,pdfOpenParams=(options.pdfOpenParams)?options.pdfOpenParams:{},fallbackLink=(typeof options.fallbackLink!=="undefined")?options.fallbackLink:true,width=(options.width)?options.width:"100%",height=(options.height)?options.height:"100%",assumptionMode=(typeof options.assumptionMode==="boolean")?options.assumptionMode:true,forcePDFJS=(typeof options.forcePDFJS==="boolean")?options.forcePDFJS:false,PDFJS_URL=(options.PDFJS_URL)?options.PDFJS_URL:false,targetNode=getTargetElement(targetSelector),fallbackHTML="",pdfOpenFragment="",fallbackHTML_default="<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>";if(!targetNode){return embedError("Target element cannot be determined");}
if(page){pdfOpenParams.page=page;}
pdfOpenFragment=buildFragmentString(pdfOpenParams);if(forcePDFJS&&PDFJS_URL){return generatePDFJSiframe(targetNode,url,pdfOpenFragment,PDFJS_URL,id);}else if(supportsPDFs||(assumptionMode&&isModernBrowser&&!isIOS)){return generateEmbedElement(targetNode,targetSelector,url,pdfOpenFragment,width,height,id);}else if(PDFJS_URL){return generatePDFJSiframe(targetNode,url,pdfOpenFragment,PDFJS_URL,id);}else{if(fallbackLink){fallbackHTML=(typeof fallbackLink==="string")?fallbackLink:fallbackHTML_default;targetNode.innerHTML=fallbackHTML.replace(/\[url\]/g,url);}
return embedError("This browser does not support embedded PDFs");}};return{embed:function(a,b,c){return embed(a,b,c);},pdfobjectversion:(function(){return pdfobjectversion;})(),supportsPDFs:(function(){return supportsPDFs;})()};}));

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! jQuery UI Virtual Keyboard v1.30.1 *//*
Author: Jeremy Satterfield
Maintained: Rob Garrison (Mottie on github)
Licensed under the MIT License

An on-screen virtual keyboard embedded within the browser window which
will popup when a specified entry field is focused. The user can then
type and preview their input before Accepting or Canceling.

This plugin adds default class names to match jQuery UI theme styling.
Bootstrap & custom themes may also be applied - See
https://github.com/Mottie/Keyboard#themes

Requires:
	jQuery v1.4.3+
	Caret plugin (included)
Optional:
	jQuery UI (position utility only) & CSS theme
	jQuery mousewheel

Setup/Usage:
	Please refer to https://github.com/Mottie/Keyboard/wiki

-----------------------------------------
Caret code modified from jquery.caret.1.02.js
Licensed under the MIT License:
http://www.opensource.org/licenses/mit-license.php
-----------------------------------------
*/
/*jshint browser:true, jquery:true, unused:false */
/*global require:false, define:false, module:false */
;(function (factory) {
	if (true) {
		!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(5)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else {}
}(function ($) {
	'use strict';
	var $keyboard = $.keyboard = function (el, options) {
	var o, base = this;

	base.version = '1.30.1';

	// Access to jQuery and DOM versions of element
	base.$el = $(el);
	base.el = el;

	// Add a reverse reference to the DOM object
	base.$el.data('keyboard', base);

	base.init = function () {
		base.initialized = false;
		var k, position, tmp,
			kbcss = $keyboard.css,
			kbevents = $keyboard.events;
		base.settings = options || {};
		// shallow copy position to prevent performance issues; see #357
		if (options && options.position) {
			position = $.extend({}, options.position);
			options.position = null;
		}
		base.options = o = $.extend(true, {}, $keyboard.defaultOptions, options);
		if (position) {
			o.position = position;
			options.position = position;
		}

		// keyboard is active (not destroyed);
		base.el.active = true;
		// unique keyboard namespace
		base.namespace = '.keyboard' + Math.random().toString(16).slice(2);
		// extension namespaces added here (to unbind listeners on base.$el upon destroy)
		base.extensionNamespace = [];
		// Shift and Alt key toggles, sets is true if a layout has more than one keyset
		// used for mousewheel message
		base.shiftActive = base.altActive = base.metaActive = base.sets = base.capsLock = false;
		// Class names of the basic key set - meta keysets are handled by the keyname
		base.rows = ['', '-shift', '-alt', '-alt-shift'];

		base.inPlaceholder = base.$el.attr('placeholder') || '';
		// html 5 placeholder/watermark
		base.watermark = $keyboard.watermark && base.inPlaceholder !== '';
		// convert mouse repeater rate (characters per second) into a time in milliseconds.
		base.repeatTime = 1000 / (o.repeatRate || 20);
		// delay in ms to prevent mousedown & touchstart from both firing events at the same time
		o.preventDoubleEventTime = o.preventDoubleEventTime || 100;
		// flag indication that a keyboard is open
		base.isOpen = false;
		// is mousewheel plugin loaded?
		base.wheel = typeof $.fn.mousewheel === 'function';
		// special character in regex that need to be escaped
		base.escapeRegex = /[-\/\\^$*+?.()|[\]{}]/g;
		base.isTextArea = base.el.nodeName.toLowerCase() === 'textarea';
		base.isInput = base.el.nodeName.toLowerCase() === 'input';
		// detect contenteditable
		base.isContentEditable = !base.isTextArea &&
			!base.isInput &&
			base.el.isContentEditable;

		// keyCode of keys always allowed to be typed
		k = $keyboard.keyCodes;
		// base.alwaysAllowed = [20,33,34,35,36,37,38,39,40,45,46];
		base.alwaysAllowed = [
			k.capsLock,
			k.pageUp,
			k.pageDown,
			k.end,
			k.home,
			k.left,
			k.up,
			k.right,
			k.down,
			k.insert,
			k.delete
		];
		base.$keyboard = [];
		// keyboard enabled; set to false on destroy
		base.enabled = true;

		base.checkCaret = (o.lockInput || $keyboard.checkCaretSupport());

		// disable problematic usePreview for contenteditable
		if (base.isContentEditable) {
			o.usePreview = false;
		}

		base.last = {
			start: 0,
			end: 0,
			key: '',
			val: '',
			preVal: '',
			layout: '',
			virtual: true,
			keyset: [false, false, false], // [shift, alt, meta]
			wheel_$Keys: [],
			wheelIndex: 0,
			wheelLayers: []
		};
		// used when building the keyboard - [keyset element, row, index]
		base.temp = ['', 0, 0];

		// Callbacks
		$.each([
			kbevents.kbInit,
			kbevents.kbBeforeVisible,
			kbevents.kbVisible,
			kbevents.kbHidden,
			kbevents.inputCanceled,
			kbevents.inputAccepted,
			kbevents.kbBeforeClose,
			kbevents.inputRestricted
		], function (i, callback) {
			if (typeof o[callback] === 'function') {
				// bind callback functions within options to triggered events
				base.$el.bind(callback + base.namespace + 'callbacks', o[callback]);
			}
		});

		// Close with esc key & clicking outside
		if (o.alwaysOpen) {
			o.stayOpen = true;
		}

		tmp = $(document);
		if (base.el.ownerDocument !== document) {
			tmp = tmp.add(base.el.ownerDocument);
		}

		var bindings = 'keyup checkkeyboard mousedown touchstart ';
		if (o.closeByClickEvent) {
			bindings += 'click ';
		}
		// debounce bindings... see #542
		tmp.bind(bindings.split(' ').join(base.namespace + ' '), function(e) {
			clearTimeout(base.timer3);
			base.timer3 = setTimeout(function() {
				base.checkClose(e);
			}, 1);
		});

		// Display keyboard on focus
		base.$el
			.addClass(kbcss.input + ' ' + o.css.input)
			.attr({
				'aria-haspopup': 'true',
				'role': 'textbox'
			});

		// set lockInput if the element is readonly; or make the element readonly if lockInput is set
		if (o.lockInput || base.el.readOnly) {
			o.lockInput = true;
			base.$el
				.addClass(kbcss.locked)
				.attr({
					'readonly': 'readonly'
				});
		}
		// add disabled/readonly class - dynamically updated on reveal
		if (base.isUnavailable()) {
			base.$el.addClass(kbcss.noKeyboard);
		}
		if (o.openOn) {
			base.bindFocus();
		}

		// Add placeholder if not supported by the browser
		if (
			!base.watermark &&
			base.getValue(base.$el) === '' &&
			base.inPlaceholder !== '' &&
			base.$el.attr('placeholder') !== ''
		) {
			// css watermark style (darker text)
			base.$el.addClass(kbcss.placeholder);
			base.setValue(base.inPlaceholder, base.$el);
		}

		base.$el.trigger(kbevents.kbInit, [base, base.el]);

		// initialized with keyboard open
		if (o.alwaysOpen) {
			base.reveal();
		}
		base.initialized = true;
	};

	base.toggle = function () {
		if (!base.hasKeyboard()) { return; }
		var $toggle = base.$keyboard.find('.' + $keyboard.css.keyToggle),
			locked = !base.enabled;
		// prevent physical keyboard from working
		base.preview.readonly = locked || base.options.lockInput;
		// disable all buttons
		base.$keyboard
			.toggleClass($keyboard.css.keyDisabled, locked)
			.find('.' + $keyboard.css.keyButton)
			.not($toggle)
			.attr('aria-disabled', locked)
			.each(function() {
				this.disabled = locked;
			});
		$toggle.toggleClass($keyboard.css.keyDisabled, locked);
		// stop auto typing
		if (locked && base.typing_options) {
			base.typing_options.text = '';
		}
		// allow chaining
		return base;
	};

	base.setCurrent = function () {
		var kbcss = $keyboard.css,
			// close any "isCurrent" keyboard (just in case they are always open)
			$current = $('.' + kbcss.isCurrent),
			kb = $current.data('keyboard');
		// close keyboard, if not self
		if (!$.isEmptyObject(kb) && kb.el !== base.el) {
			kb.close(kb.options.autoAccept ? 'true' : false);
		}
		$current.removeClass(kbcss.isCurrent);
		// ui-keyboard-has-focus is applied in case multiple keyboards have
		// alwaysOpen = true and are stacked
		$('.' + kbcss.hasFocus).removeClass(kbcss.hasFocus);

		base.$el.addClass(kbcss.isCurrent);
		base.$preview.focus();
		base.$keyboard.addClass(kbcss.hasFocus);
		base.isCurrent(true);
		base.isOpen = true;
	};

	base.isUnavailable = function() {
		return (
			base.$el.is(':disabled') || (
				!base.options.activeOnReadonly &&
				base.$el.attr('readonly') &&
				!base.$el.hasClass($keyboard.css.locked)
			)
		);
	};

	base.isCurrent = function (set) {
		var cur = $keyboard.currentKeyboard || false;
		if (set) {
			cur = $keyboard.currentKeyboard = base.el;
		} else if (set === false && cur === base.el) {
			cur = $keyboard.currentKeyboard = '';
		}
		return cur === base.el;
	};

	base.hasKeyboard = function () {
		return base.$keyboard && base.$keyboard.length > 0;
	};

	base.isVisible = function () {
		return base.hasKeyboard() ? base.$keyboard.is(':visible') : false;
	};

	base.setFocus = function () {
		var $el = base.$preview || base.$el;
		if (!o.noFocus) {
			$el.focus();
		}
		if (base.isContentEditable) {
			$keyboard.setEditableCaret($el, base.last.start, base.last.end);
		} else {
			$keyboard.caret($el, base.last);
		}
	};

	base.focusOn = function () {
		if (!base && base.el.active) {
			// keyboard was destroyed
			return;
		}
		if (!base.isVisible()) {
			clearTimeout(base.timer);
			base.reveal();
		} else {
			// keyboard already open, make it the current keyboard
			base.setCurrent();
		}
	};

	// add redraw method to make API more clear
	base.redraw = function (layout) {
		if (layout) {
			// allow updating the layout by calling redraw
			base.options.layout = layout;
		}
		// update keyboard after a layout change
		if (base.$keyboard.length) {

			base.last.preVal = '' + base.last.val;
			base.saveLastChange();
			base.setValue(base.last.val, base.$el);

			base.removeKeyboard();
			base.shiftActive = base.altActive = base.metaActive = false;
		}
		base.isOpen = o.alwaysOpen;
		base.reveal(true);
		return base;
	};

	base.reveal = function (redraw) {
		var temp,
			alreadyOpen = base.isOpen,
			kbcss = $keyboard.css;
		base.opening = !alreadyOpen;
		// remove all 'extra' keyboards by calling close function
		$('.' + kbcss.keyboard).not('.' + kbcss.alwaysOpen).each(function(){
			var kb = $(this).data('keyboard');
			if (!$.isEmptyObject(kb)) {
				// this closes previous keyboard when clicking another input - see #515
				kb.close(kb.options.autoAccept ? 'true' : false);
			}
		});

		// Don't open if disabled
		if (base.isUnavailable()) {
			return;
		}
		base.$el.removeClass(kbcss.noKeyboard);

		// Unbind focus to prevent recursion - openOn may be empty if keyboard is opened externally
		if (o.openOn) {
			base.$el.unbind($.trim((o.openOn + ' ').split(/\s+/).join(base.namespace + ' ')));
		}

		// build keyboard if it doesn't exist; or attach keyboard if it was removed, but not cleared
		if (!base.$keyboard || base.$keyboard &&
			(!base.$keyboard.length || $.contains(base.el.ownerDocument.body, base.$keyboard[0]))) {
			base.startup();
		}

		// clear watermark
		if (!base.watermark && base.getValue() === base.inPlaceholder) {
			base.$el.removeClass(kbcss.placeholder);
			base.setValue('', base.$el);
		}
		// save starting content, in case we cancel
		base.originalContent = base.isContentEditable ?
			base.$el.html() :
			base.getValue(base.$el);
		if (base.el !== base.preview && !base.isContentEditable) {
			base.setValue(base.originalContent);
		}

		// disable/enable accept button
		if (o.acceptValid && o.checkValidOnInit) {
			base.checkValid();
		}

		if (o.resetDefault) {
			base.shiftActive = base.altActive = base.metaActive = false;
		}
		base.showSet();

		// beforeVisible event
		if (!base.isVisible()) {
			base.$el.trigger($keyboard.events.kbBeforeVisible, [base, base.el]);
		}
		if (
			base.initialized ||
			o.initialFocus ||
			( !o.initialFocus && base.$el.hasClass($keyboard.css.initialFocus) )
		) {
			base.setCurrent();
		}
		// update keyboard - enabled or disabled?
		base.toggle();

		// show keyboard
		base.$keyboard.show();

		// adjust keyboard preview window width - save width so IE won't keep expanding (fix issue #6)
		if (o.usePreview && $keyboard.msie) {
			if (typeof base.width === 'undefined') {
				base.$preview.hide(); // preview is 100% browser width in IE7, so hide the damn thing
				base.width = Math.ceil(base.$keyboard.width()); // set input width to match the widest keyboard row
				base.$preview.show();
			}
			base.$preview.width(base.width);
		}

		base.reposition();

		base.checkDecimal();

		// get preview area line height
		// add roughly 4px to get line height from font height, works well for font-sizes from 14-36px
		// needed for textareas
		base.lineHeight = parseInt(base.$preview.css('lineHeight'), 10) ||
			parseInt(base.$preview.css('font-size'), 10) + 4;

		if (o.caretToEnd) {
			temp = base.isContentEditable ? $keyboard.getEditableLength(base.el) : base.originalContent.length;
			base.saveCaret(temp, temp);
		}

		// IE caret haxx0rs
		if ($keyboard.allie) {
			// sometimes end = 0 while start is > 0
			if (base.last.end === 0 && base.last.start > 0) {
				base.last.end = base.last.start;
			}
			// IE will have start -1, end of 0 when not focused (see demo: https://jsfiddle.net/Mottie/fgryQ/3/)
			if (base.last.start < 0) {
				// ensure caret is at the end of the text (needed for IE)
				base.last.start = base.last.end = base.originalContent.length;
			}
		}

		if (alreadyOpen || redraw) {
			// restore caret position (userClosed)
			$keyboard.caret(base.$preview, base.last);
			base.opening = false;
			return base;
		}

		// opening keyboard flag; delay allows switching between keyboards without immediately closing
		// the keyboard
		base.timer2 = setTimeout(function () {
			var undef;
			base.opening = false;
			// Number inputs don't support selectionStart and selectionEnd
			// Number/email inputs don't support selectionStart and selectionEnd
			if (!/(number|email)/i.test(base.el.type) && !o.caretToEnd) {
				// caret position is always 0,0 in webkit; and nothing is focused at this point... odd
				// save caret position in the input to transfer it to the preview
				// inside delay to get correct caret position
				base.saveCaret(undef, undef, base.$el);
			}
			if (o.initialFocus || base.$el.hasClass($keyboard.css.initialFocus)) {
				$keyboard.caret(base.$preview, base.last);
			}
			// save event time for keyboards with stayOpen: true
			base.last.eventTime = new Date().getTime();
			base.$el.trigger($keyboard.events.kbVisible, [base, base.el]);
			base.timer = setTimeout(function () {
				// get updated caret information after visible event - fixes #331
				if (base) { // Check if base exists, this is a case when destroy is called, before timers fire
					base.saveCaret();
				}
			}, 200);
		}, 10);
		// return base to allow chaining in typing extension
		return base;
	};

	base.updateLanguage = function () {
		// change language if layout is named something like 'french-azerty-1'
		var layouts = $keyboard.layouts,
			lang = o.language || layouts[o.layout] && layouts[o.layout].lang &&
				layouts[o.layout].lang || [o.language || 'en'],
			kblang = $keyboard.language;

		// some languages include a dash, e.g. 'en-gb' or 'fr-ca'
		// allow o.language to be a string or array...
		// array is for future expansion where a layout can be set for multiple languages
		lang = (Object.prototype.toString.call(lang) === '[object Array]' ? lang[0] : lang);
		base.language = lang;
		lang = lang.split('-')[0];

		// set keyboard language
		o.display = $.extend(true, {},
			kblang.en.display,
			kblang[lang] && kblang[lang].display || {},
			base.settings.display
		);
		o.combos = $.extend(true, {},
			kblang.en.combos,
			kblang[lang] && kblang[lang].combos || {},
			base.settings.combos
		);
		o.wheelMessage = kblang[lang] && kblang[lang].wheelMessage || kblang.en.wheelMessage;
		// rtl can be in the layout or in the language definition; defaults to false
		o.rtl = layouts[o.layout] && layouts[o.layout].rtl || kblang[lang] && kblang[lang].rtl || false;

		// save default regex (in case loading another layout changes it)
		if (kblang[lang] && kblang[lang].comboRegex) {
			base.regex = kblang[lang].comboRegex;
		}
		// determine if US '.' or European ',' system being used
		base.decimal = /^\./.test(o.display.dec);
		base.$el
			.toggleClass('rtl', o.rtl)
			.css('direction', o.rtl ? 'rtl' : '');
	};

	base.startup = function () {
		var kbcss = $keyboard.css;
		// ensure base.$preview is defined; but don't overwrite it if keyboard is always visible
		if (!((o.alwaysOpen || o.userClosed) && base.$preview)) {
			base.makePreview();
		}
		if (!base.hasKeyboard()) {
			// custom layout - create a unique layout name based on the hash
			if (o.layout === 'custom') {
				o.layoutHash = 'custom' + base.customHash();
			}
			base.layout = o.layout === 'custom' ? o.layoutHash : o.layout;
			base.last.layout = base.layout;

			base.updateLanguage();
			if (typeof $keyboard.builtLayouts[base.layout] === 'undefined') {
				if (typeof o.create === 'function') {
					// create must call buildKeyboard() function; or create it's own keyboard
					base.$keyboard = o.create(base);
				} else if (!base.$keyboard.length) {
					base.buildKeyboard(base.layout, true);
				}
			}
			base.$keyboard = $keyboard.builtLayouts[base.layout].$keyboard.clone();
			base.$keyboard.data('keyboard', base);
			if ((base.el.id || '') !== '') {
				// add ID to keyboard for styling purposes
				base.$keyboard.attr('id', base.el.id + $keyboard.css.idSuffix);
			}

			base.makePreview();
		}

		// Add layout and laguage data-attibutes
		base.$keyboard
			.attr('data-' + kbcss.keyboard + '-layout', o.layout)
			.attr('data-' + kbcss.keyboard + '-language', base.language);

		base.$decBtn = base.$keyboard.find('.' + kbcss.keyPrefix + 'dec');
		// add enter to allowed keys; fixes #190
		if (o.enterNavigation || base.isTextArea) {
			base.alwaysAllowed.push($keyboard.keyCodes.enter);
		}

		base.bindKeyboard();

		base.$keyboard.appendTo(o.appendLocally ? base.$el.parent() : o.appendTo || 'body');

		base.bindKeys();

		// reposition keyboard on window resize
		if (o.reposition && $.ui && $.ui.position && o.appendTo === 'body') {
			$(window).bind('resize' + base.namespace, function () {
				base.reposition();
			});
		}

	};

	base.reposition = function () {
		base.position = $.isEmptyObject(o.position) ? false : o.position;
		// position after keyboard is visible (required for UI position utility)
		// and appropriately sized
		if ($.ui && $.ui.position && base.position) {
			base.position.of =
				// get single target position
				base.position.of ||
				// OR target stored in element data (multiple targets)
				base.$el.data('keyboardPosition') ||
				// OR default @ element
				base.$el;
			base.position.collision = base.position.collision || 'flipfit flipfit';
			base.position.at = o.usePreview ? o.position.at : o.position.at2;
			if (base.isVisible()) {
				base.$keyboard.position(base.position);
			}
		}
		// make chainable
		return base;
	};

	base.makePreview = function () {
		if (o.usePreview) {
			var indx, attrs, attr, removedAttr,
				kbcss = $keyboard.css;
			base.$preview = base.$el.clone(false)
				.data('keyboard', base)
				.removeClass(kbcss.placeholder + ' ' + kbcss.input)
				.addClass(kbcss.preview + ' ' + o.css.input)
				.attr('tabindex', '-1')
				.show(); // for hidden inputs
			base.preview = base.$preview[0];

			// Switch the number input field to text so the caret positioning will work again
			if (base.preview.type === 'number') {
				base.preview.type = 'text';
			}

			// remove extraneous attributes.
			removedAttr = /^(data-|id|aria-haspopup)/i;
			attrs = base.$preview.get(0).attributes;
			for (indx = attrs.length - 1; indx >= 0; indx--) {
				attr = attrs[indx] && attrs[indx].name;
				if (removedAttr.test(attr)) {
					// remove data-attributes - see #351
					base.preview.removeAttribute(attr);
				}
			}
			// build preview container and append preview display
			$('<div />')
				.addClass(kbcss.wrapper)
				.append(base.$preview)
				.prependTo(base.$keyboard);
		} else {
			base.$preview = base.$el;
			base.preview = base.el;
		}
	};

	// Added in v1.26.8 to allow chaining of the caret function, e.g.
	// keyboard.reveal().caret(4,5).insertText('test').caret('end');
	base.caret = function(param1, param2) {
		var result = $keyboard.caret(base.$preview, param1, param2),
			wasSetCaret = result instanceof $;
		// Caret was set, save last position & make chainable
		if (wasSetCaret) {
			base.saveCaret(result.start, result.end);
			return base;
		}
		// return caret position if using .caret()
		return result;
	};

	base.saveCaret = function (start, end, $el) {
		if (base.isCurrent()) {
			var p;
			if (typeof start === 'undefined') {
				// grab & save current caret position
				p = $keyboard.caret($el || base.$preview);
			} else {
				p = $keyboard.caret($el || base.$preview, start, end);
			}
			base.last.start = typeof start === 'undefined' ? p.start : start;
			base.last.end = typeof end === 'undefined' ? p.end : end;
		}
	};

	base.saveLastChange = function (val) {
		base.last.val = val || base.getValue(base.$preview || base.$el);
		if (base.isContentEditable) {
			base.last.elms = base.el.cloneNode(true);
		}
	};

	base.setScroll = function () {
		// Set scroll so caret & current text is in view
		// needed for virtual keyboard typing, NOT manual typing - fixes #23
		if (!base.isContentEditable && base.last.virtual) {

			var scrollWidth, clientWidth, adjustment, direction,
				value = base.last.val.substring(0, Math.max(base.last.start, base.last.end));

			if (!base.$previewCopy) {
				// clone preview
				base.$previewCopy = base.$preview.clone()
					.removeAttr('id') // fixes #334
					.css({
						position: 'absolute',
						left: 0,
						zIndex: -10,
						visibility: 'hidden'
					})
					.addClass($keyboard.css.inputClone);
				// prevent submitting content on form submission
				base.$previewCopy[0].disabled = true;
				if (!base.isTextArea) {
					// make input zero-width because we need an accurate scrollWidth
					base.$previewCopy.css({
						'white-space': 'pre',
						'width': 0
					});
				}
				if (o.usePreview) {
					// add clone inside of preview wrapper
					base.$preview.after(base.$previewCopy);
				} else {
					// just slap that thing in there somewhere
					base.$keyboard.prepend(base.$previewCopy);
				}
			}

			if (base.isTextArea) {
				// need the textarea scrollHeight, so set the clone textarea height to be the line height
				base.$previewCopy
					.height(base.lineHeight)
					.val(value);
				// set scrollTop for Textarea
				base.preview.scrollTop = base.lineHeight *
					(Math.floor(base.$previewCopy[0].scrollHeight / base.lineHeight) - 1);
			} else {
				// add non-breaking spaces
				base.$previewCopy.val(value.replace(/\s/g, '\xa0'));

				// if scrollAdjustment option is set to "c" or "center" then center the caret
				adjustment = /c/i.test(o.scrollAdjustment) ? base.preview.clientWidth / 2 : o.scrollAdjustment;
				scrollWidth = base.$previewCopy[0].scrollWidth - 1;

				// set initial state as moving right
				if (typeof base.last.scrollWidth === 'undefined') {
					base.last.scrollWidth = scrollWidth;
					base.last.direction = true;
				}
				// if direction = true; we're scrolling to the right
				direction = base.last.scrollWidth === scrollWidth ?
					base.last.direction :
					base.last.scrollWidth < scrollWidth;
				clientWidth = base.preview.clientWidth - adjustment;

				// set scrollLeft for inputs; try to mimic the inherit caret positioning + scrolling:
				// hug right while scrolling right...
				if (direction) {
					if (scrollWidth < clientWidth) {
						base.preview.scrollLeft = 0;
					} else {
						base.preview.scrollLeft = scrollWidth - clientWidth;
					}
				} else {
					// hug left while scrolling left...
					if (scrollWidth >= base.preview.scrollWidth - clientWidth) {
						base.preview.scrollLeft = base.preview.scrollWidth - adjustment;
					} else if (scrollWidth - adjustment > 0) {
						base.preview.scrollLeft = scrollWidth - adjustment;
					} else {
						base.preview.scrollLeft = 0;
					}
				}

				base.last.scrollWidth = scrollWidth;
				base.last.direction = direction;
			}
		}
	};

	base.bindFocus = function () {
		if (o.openOn) {
			// make sure keyboard isn't destroyed
			// Check if base exists, this is a case when destroy is called, before timers have fired
			if (base && base.el.active) {
				base.$el.bind(o.openOn + base.namespace, function () {
					base.focusOn();
				});
				// remove focus from element (needed for IE since blur doesn't seem to work)
				if ($(':focus')[0] === base.el) {
					base.$el.blur();
				}
			}
		}
	};

	base.bindKeyboard = function () {
		var evt,
			keyCodes = $keyboard.keyCodes,
			layout = $keyboard.builtLayouts[base.layout],
			namespace = base.namespace + 'keybindings';
		base.$preview
			.unbind(base.namespace)
			.bind('click' + namespace + ' touchstart' + namespace, function () {
				if (o.alwaysOpen && !base.isCurrent()) {
					base.reveal();
				}
				// update last caret position after user click, use at least 150ms or it doesn't work in IE
				base.timer2 = setTimeout(function () {
					if (base){
						base.saveCaret();
					}
				}, 150);

			})
			.bind('keypress' + namespace, function (e) {
				if (o.lockInput) {
					return false;
				}
				if (!base.isCurrent()) {
					return;
				}

				var k = e.charCode || e.which,
					// capsLock can only be checked while typing a-z
					k1 = k >= keyCodes.A && k <= keyCodes.Z,
					k2 = k >= keyCodes.a && k <= keyCodes.z,
					str = base.last.key = String.fromCharCode(k);
				// check, that keypress wasn't rise by functional key
				// space is first typing symbol in UTF8 table
				if (k < keyCodes.space) { //see #549
					return;
				}
				base.last.virtual = false;
				base.last.event = e;
				base.last.$key = []; // not a virtual keyboard key
				if (base.checkCaret) {
					base.saveCaret();
				}

				// update capsLock
				if (k !== keyCodes.capsLock && (k1 || k2)) {
					base.capsLock = (k1 && !e.shiftKey) || (k2 && e.shiftKey);
					// if shifted keyset not visible, then show it
					if (base.capsLock && !base.shiftActive) {
						base.shiftActive = true;
						base.showSet();
					}
				}

				// restrict input - keyCode in keypress special keys:
				// see http://www.asquare.net/javascript/tests/KeyCode.html
				if (o.restrictInput) {
					// allow navigation keys to work - Chrome doesn't fire a keypress event (8 = bksp)
					if ((e.which === keyCodes.backSpace || e.which === 0) &&
						$.inArray(e.keyCode, base.alwaysAllowed)) {
						return;
					}
					// quick key check
					if ($.inArray(str, layout.acceptedKeys) === -1) {
						e.preventDefault();
						// copy event object in case e.preventDefault() breaks when changing the type
						evt = $.extend({}, e);
						evt.type = $keyboard.events.inputRestricted;
						base.$el.trigger(evt, [base, base.el]);
					}
				} else if ((e.ctrlKey || e.metaKey) &&
					(e.which === keyCodes.A || e.which === keyCodes.C || e.which === keyCodes.V ||
						(e.which >= keyCodes.X && e.which <= keyCodes.Z))) {
					// Allow select all (ctrl-a), copy (ctrl-c), paste (ctrl-v) & cut (ctrl-x) &
					// redo (ctrl-y)& undo (ctrl-z); meta key for mac
					return;
				}
				// Mapped Keys - allows typing on a regular keyboard and the mapped key is entered
				// Set up a key in the layout as follows: 'm(a):label'; m = key to map, (a) = actual keyboard key
				// to map to (optional), ':label' = title/tooltip (optional)
				// example: \u0391 or \u0391(A) or \u0391:alpha or \u0391(A):alpha
				if (layout.hasMappedKeys && layout.mappedKeys.hasOwnProperty(str)) {
					base.last.key = layout.mappedKeys[str];
					base.insertText(base.last.key);
					e.preventDefault();
				}
				if (typeof o.beforeInsert === 'function') {
					base.insertText(base.last.key);
					e.preventDefault();
				}
				base.checkMaxLength();

			})
			.bind('keyup' + namespace, function (e) {
				if (!base.isCurrent()) { return; }
				base.last.virtual = false;
				switch (e.which) {
					// Insert tab key
				case keyCodes.tab:
					// Added a flag to prevent from tabbing into an input, keyboard opening, then adding the tab
					// to the keyboard preview area on keyup. Sadly it still happens if you don't release the tab
					// key immediately because keydown event auto-repeats
					if (base.tab && !o.lockInput) {
						base.shiftActive = e.shiftKey;
						// when switching inputs, the tab keyaction returns false
						var notSwitching = $keyboard.keyaction.tab(base);
						base.tab = false;
						if (!notSwitching) {
							return false;
						}
					} else {
						e.preventDefault();
					}
					break;

					// Escape will hide the keyboard
				case keyCodes.escape:
					if (!o.ignoreEsc) {
						base.close(o.autoAccept && o.autoAcceptOnEsc ? 'true' : false);
					}
					return false;
				}

				// throttle the check combo function because fast typers will have an incorrectly positioned caret
				clearTimeout(base.throttled);
				base.throttled = setTimeout(function () {
					// fix error in OSX? see issue #102
					if (base && base.isVisible()) {
						base.checkCombos();
					}
				}, 100);

				base.checkMaxLength();

				base.last.preVal = '' + base.last.val;
				base.saveLastChange();

				// don't alter "e" or the "keyup" event never finishes processing; fixes #552
				var event = $.Event( $keyboard.events.kbChange );
				// base.last.key may be empty string (shift, enter, tab, etc) when keyboard is first visible
				// use e.key instead, if browser supports it
				event.action = base.last.key;
				base.$el.trigger(event, [base, base.el]);

				// change callback is no longer bound to the input element as the callback could be
				// called during an external change event with all the necessary parameters (issue #157)
				if (typeof o.change === 'function') {
					event.type = $keyboard.events.inputChange;
					o.change(event, base, base.el);
					return false;
				}
				if (o.acceptValid && o.autoAcceptOnValid) {
					if (
						typeof o.validate === 'function' &&
						o.validate(base, base.getValue(base.$preview))
					) {
						base.$preview.blur();
						base.accept();
					}
				}
			})
			.bind('keydown' + namespace, function (e) {
				base.last.keyPress = e.which;
				// ensure alwaysOpen keyboards are made active
				if (o.alwaysOpen && !base.isCurrent()) {
					base.reveal();
				}
				// prevent tab key from leaving the preview window
				if (e.which === keyCodes.tab) {
					// allow tab to pass through - tab to next input/shift-tab for prev
					base.tab = true;
					return false;
				}
				if (o.lockInput || e.timeStamp === base.last.timeStamp) {
					return !o.lockInput;
				}

				base.last.timeStamp = e.timeStamp; // fixes #659
				base.last.virtual = false;
				switch (e.which) {

				case keyCodes.backSpace:
					$keyboard.keyaction.bksp(base, null, e);
					e.preventDefault();
					break;

				case keyCodes.enter:
					$keyboard.keyaction.enter(base, null, e);
					break;

					// Show capsLock
				case keyCodes.capsLock:
					base.shiftActive = base.capsLock = !base.capsLock;
					base.showSet();
					break;

				case keyCodes.V:
					// prevent ctrl-v/cmd-v
					if (e.ctrlKey || e.metaKey) {
						if (o.preventPaste) {
							e.preventDefault();
							return;
						}
						base.checkCombos(); // check pasted content
					}
					break;
				}
			})
			.bind('mouseup touchend '.split(' ').join(namespace + ' '), function () {
				base.last.virtual = true;
				base.saveCaret();
			});

		// prevent keyboard event bubbling
		base.$keyboard.bind('mousedown click touchstart '.split(' ').join(base.namespace + ' '), function (e) {
			e.stopPropagation();
			if (!base.isCurrent()) {
				base.reveal();
				$(base.el.ownerDocument).trigger('checkkeyboard' + base.namespace);
			}
			base.setFocus();
		});

		// If preventing paste, block context menu (right click)
		if (o.preventPaste) {
			base.$preview.bind('contextmenu' + base.namespace, function (e) {
				e.preventDefault();
			});
			base.$el.bind('contextmenu' + base.namespace, function (e) {
				e.preventDefault();
			});
		}

	};

	base.bindButton = function(events, handler) {
		var button = '.' + $keyboard.css.keyButton,
			callback = function(e) {
				e.stopPropagation();
				// save closest keyboard wrapper/input to check in checkClose function
				e.$target = $(this).closest('.' + $keyboard.css.keyboard + ', .' + $keyboard.css.input);
				handler.call(this, e);
			};
		if ($.fn.on) {
			// jQuery v1.7+
			base.$keyboard.on(events, button, callback);
		} else if ($.fn.delegate) {
			// jQuery v1.4.2 - 3.0.0
			base.$keyboard.delegate(button, events, callback);
		}
		return base;
	};

	base.unbindButton = function(namespace) {
		if ($.fn.off) {
			// jQuery v1.7+
			base.$keyboard.off(namespace);
		} else if ($.fn.undelegate) {
			// jQuery v1.4.2 - 3.0.0 (namespace only added in v1.6)
			base.$keyboard.undelegate('.' + $keyboard.css.keyButton, namespace);
		}
		return base;
	};

	base.bindKeys = function () {
		var kbcss = $keyboard.css;
		base
			.unbindButton(base.namespace + ' ' + base.namespace + 'kb')
			// Change hover class and tooltip - moved this touchstart before option.keyBinding touchstart
			// to prevent mousewheel lag/duplication - Fixes #379 & #411
			.bindButton('mouseenter mouseleave touchstart '.split(' ').join(base.namespace + ' '), function (e) {
				if ((o.alwaysOpen || o.userClosed) && e.type !== 'mouseleave' && !base.isCurrent()) {
					base.reveal();
					base.setFocus();
				}
				if (!base.isCurrent() || this.disabled) {
					return;
				}
				var $keys, txt,
					last = base.last,
					$this = $(this),
					type = e.type;

				if (o.useWheel && base.wheel) {
					$keys = base.getLayers($this);
					txt = ($keys.length ? $keys.map(function () {
							return $(this).attr('data-value') || '';
						})
						.get() : '') || [$this.text()];
					last.wheel_$Keys = $keys;
					last.wheelLayers = txt;
					last.wheelIndex = $.inArray($this.attr('data-value'), txt);
				}

				if ((type === 'mouseenter' || type === 'touchstart') && base.el.type !== 'password' &&
					!$this.hasClass(o.css.buttonDisabled)) {
					$this.addClass(o.css.buttonHover);
					if (o.useWheel && base.wheel) {
						$this.attr('title', function (i, t) {
							// show mouse wheel message
							return (base.wheel && t === '' && base.sets && txt.length > 1 && type !== 'touchstart') ?
								o.wheelMessage : t;
						});
					}
				}
				if (type === 'mouseleave') {
					// needed or IE flickers really bad
					$this.removeClass((base.el.type === 'password') ? '' : o.css.buttonHover);
					if (o.useWheel && base.wheel) {
						last.wheelIndex = 0;
						last.wheelLayers = [];
						last.wheel_$Keys = [];
						$this
							.attr('title', function (i, t) {
								return (t === o.wheelMessage) ? '' : t;
							})
							.html($this.attr('data-html')); // restore original button text
					}
				}
			})
			// keyBinding = 'mousedown touchstart' by default
			.bindButton(o.keyBinding.split(' ').join(base.namespace + ' ') + base.namespace + ' ' +
				$keyboard.events.kbRepeater, function (e) {
				e.preventDefault();
				// prevent errors when external triggers attempt to 'type' - see issue #158
				if (!base.$keyboard.is(':visible') || this.disabled) {
					return false;
				}
				var action,
					last = base.last,
					$key = $(this),
					// prevent mousedown & touchstart from both firing events at the same time - see #184
					timer = new Date().getTime();

				if (o.useWheel && base.wheel) {
					// get keys from other layers/keysets (shift, alt, meta, etc) that line up by data-position
					// target mousewheel selected key
					$key = last.wheel_$Keys.length && last.wheelIndex > -1 ? last.wheel_$Keys.eq(last.wheelIndex) : $key;
				}
				action = $key.attr('data-action');
				if (timer - (last.eventTime || 0) < o.preventDoubleEventTime) {
					return;
				}
				last.eventTime = timer;
				last.event = e;
				last.virtual = true;
				last.$key = $key;
				last.key = $key.attr('data-value');
				last.keyPress = '';
				// Start caret in IE when not focused (happens with each virtual keyboard button click
				base.setFocus();
				if (/^meta/.test(action)) {
					action = 'meta';
				}
				// keyaction is added as a string, override original action & text
				if (action === last.key && typeof $keyboard.keyaction[action] === 'string') {
					last.key = action = $keyboard.keyaction[action];
				} else if (action in $keyboard.keyaction && typeof $keyboard.keyaction[action] === 'function') {
					// stop processing if action returns false (close & cancel)
					if ($keyboard.keyaction[action](base, this, e) === false) {
						return false;
					}
					action = null; // prevent inserting action name
				}
				// stop processing if keyboard closed and keyaction did not return false - see #536
				if (!base.hasKeyboard()) {
					return false;
				}
				if (typeof action !== 'undefined' && action !== null) {
					last.key = $(this).hasClass(kbcss.keyAction) ? action : last.key;
					base.insertText(last.key);
					if (!base.capsLock && !o.stickyShift && !e.shiftKey) {
						base.shiftActive = false;
						base.showSet($key.attr('data-name'));
					}
				}
				// set caret if caret moved by action function; also, attempt to fix issue #131
				$keyboard.caret(base.$preview, last);
				base.checkCombos();
				e = $.extend({}, e, $.Event($keyboard.events.kbChange));
				e.target = base.el;
				e.action = last.key;
				base.$el.trigger(e, [base, base.el]);
				last.preVal = '' + last.val;
				base.saveLastChange();

				if (typeof o.change === 'function') {
					e.type = $keyboard.events.inputChange;
					o.change(e, base, base.el);
					// return false to prevent reopening keyboard if base.accept() was called
					return false;
				}

			})
			// using 'kb' namespace for mouse repeat functionality to keep it separate
			// I need to trigger a 'repeater.keyboard' to make it work
			.bindButton('mouseup' + base.namespace + ' ' + 'mouseleave touchend touchmove touchcancel '.split(' ')
				.join(base.namespace + 'kb '), function (e) {
				base.last.virtual = true;
				var offset,
					$this = $(this);
				if (e.type === 'touchmove') {
					// if moving within the same key, don't stop repeating
					offset = $this.offset();
					offset.right = offset.left + $this.outerWidth();
					offset.bottom = offset.top + $this.outerHeight();
					if (e.originalEvent.touches[0].pageX >= offset.left &&
						e.originalEvent.touches[0].pageX < offset.right &&
						e.originalEvent.touches[0].pageY >= offset.top &&
						e.originalEvent.touches[0].pageY < offset.bottom) {
						return true;
					}
				} else if (/(mouseleave|touchend|touchcancel)/i.test(e.type)) {
					$this.removeClass(o.css.buttonHover); // needed for touch devices
				} else {
					if (!o.noFocus && base.isCurrent() && base.isVisible()) {
						base.$preview.focus();
					}
					if (base.checkCaret) {
						$keyboard.caret(base.$preview, base.last);
					}
				}
				base.mouseRepeat = [false, ''];
				clearTimeout(base.repeater); // make sure key repeat stops!
				if (o.acceptValid && o.autoAcceptOnValid) {
					if (
						typeof o.validate === 'function' &&
						o.validate(base, base.getValue())
					) {
						base.$preview.blur();
						base.accept();
					}
				}
				return false;
			})
			// prevent form submits when keyboard is bound locally - issue #64
			.bindButton('click' + base.namespace, function () {
				return false;
			})
			// Allow mousewheel to scroll through other keysets of the same (non-action) key
			.bindButton('mousewheel' + base.namespace, base.throttleEvent(function (e, delta) {
				var $btn = $(this);
				// no mouse repeat for action keys (shift, ctrl, alt, meta, etc)
				if (!$btn || $btn.hasClass(kbcss.keyAction) || base.last.wheel_$Keys[0] !== this) {
					return;
				}
				if (o.useWheel && base.wheel) {
					// deltaY used by newer versions of mousewheel plugin
					delta = delta || e.deltaY;
					var n,
						txt = base.last.wheelLayers || [];
					if (txt.length > 1) {
						n = base.last.wheelIndex + (delta > 0 ? -1 : 1);
						if (n > txt.length - 1) {
							n = 0;
						}
						if (n < 0) {
							n = txt.length - 1;
						}
					} else {
						n = 0;
					}
					base.last.wheelIndex = n;
					$btn.html(txt[n]);
					return false;
				}
			}, 30))
			.bindButton('mousedown touchstart '.split(' ').join(base.namespace + 'kb '), function () {
				var $btn = $(this);
				// no mouse repeat for action keys (shift, ctrl, alt, meta, etc)
				if (
					!$btn || (
						$btn.hasClass(kbcss.keyAction) &&
						// mouse repeated action key exceptions
						!$btn.is('.' + kbcss.keyPrefix + ('tab bksp space enter'.split(' ').join(',.' + kbcss.keyPrefix)))
					)
				) {
					return;
				}
				if (o.repeatRate !== 0) {
					// save the key, make sure we are repeating the right one (fast typers)
					base.mouseRepeat = [true, $btn];
					setTimeout(function () {
						// don't repeat keys if it is disabled - see #431
						if (base && base.mouseRepeat[0] && base.mouseRepeat[1] === $btn && !$btn[0].disabled) {
							base.repeatKey($btn);
						}
					}, o.repeatDelay);
				}
				return false;
			});
	};

	// No call on tailing event
	base.throttleEvent = function(cb, time) {
		var interm;
		return function() {
			if (!interm) {
				cb.apply(this, arguments);
				interm = true;
				setTimeout(function() {
					interm = false;
				}, time);
			}
		};
	};

	base.execCommand = function(cmd, str) {
		base.el.ownerDocument.execCommand(cmd, false, str);
		base.el.normalize();
		if (o.reposition) {
			base.reposition();
		}
	};

	base.getValue = function ($el) {
		$el = $el || base.$preview;
		return $el[base.isContentEditable ? 'text' : 'val']();
	};

	base.setValue = function (txt, $el) {
		$el = $el || base.$preview;
		if (base.isContentEditable) {
			if (txt !== $el.text()) {
				$keyboard.replaceContent($el, txt);
				base.saveCaret();
			}
		} else {
			$el.val(txt);
		}
		return base;
	};

	// Insert text at caret/selection - thanks to Derek Wickwire for fixing this up!
	base.insertText = function (txt) {
		if (!base.$preview) { return base; }
		if (typeof o.beforeInsert === 'function') {
			txt = o.beforeInsert(base.last.event, base, base.el, txt);
		}
		if (typeof txt === 'undefined' || txt === false) {
			base.last.key = '';
			return base;
		}
		if (base.isContentEditable) {
			return base.insertContentEditable(txt);
		}
		var t,
			bksp = false,
			isBksp = txt === '\b',
			// use base.$preview.val() instead of base.preview.value (val.length includes carriage returns in IE).
			val = base.getValue(),
			pos = $keyboard.caret(base.$preview),
			len = val.length; // save original content length

		// silly IE caret hacks... it should work correctly, but navigating using arrow keys in a textarea
		// is still difficult
		// in IE, pos.end can be zero after input loses focus
		if (pos.end < pos.start) {
			pos.end = pos.start;
		}
		if (pos.start > len) {
			pos.end = pos.start = len;
		}

		if (base.isTextArea) {
			// This makes sure the caret moves to the next line after clicking on enter (manual typing works fine)
			if ($keyboard.msie && val.substring(pos.start, pos.start + 1) === '\n') {
				pos.start += 1;
				pos.end += 1;
			}
		}

		t = pos.start;
		if (txt === '{d}') {
			txt = '';
			pos.end += 1;
		}

		if (isBksp) {
			txt = '';
			bksp = isBksp && t === pos.end && t > 0;
		}
		val = val.substring(0, t - (bksp ? 1 : 0)) + txt + val.substring(pos.end);
		t += bksp ? -1 : txt.length;

		base.setValue(val);
		base.saveCaret(t, t); // save caret in case of bksp
		base.setScroll();
		// see #506.. allow chaining of insertText
		return base;
	};

	base.insertContentEditable = function (txt) {
		base.$preview.focus();
		base.execCommand('insertText', txt);
		base.saveCaret();
		return base;
	};

	// check max length
	base.checkMaxLength = function () {
		if (!base.$preview) { return; }
		var start, caret,
			val = base.getValue(),
			len = base.isContentEditable ? $keyboard.getEditableLength(base.el) : val.length;
		if (o.maxLength !== false && len > o.maxLength) {
			start = $keyboard.caret(base.$preview).start;
			caret = Math.min(start, o.maxLength);

			// prevent inserting new characters when maxed #289
			if (!o.maxInsert) {
				val = base.last.val;
				caret = start - 1; // move caret back one
			}
			base.setValue(val.substring(0, o.maxLength));
			// restore caret on change, otherwise it ends up at the end.
			base.saveCaret(caret, caret);
		}
		if (base.$decBtn.length) {
			base.checkDecimal();
		}
		// allow chaining
		return base;
	};

	// mousedown repeater
	base.repeatKey = function (key) {
		key.trigger($keyboard.events.kbRepeater);
		if (base.mouseRepeat[0]) {
			base.repeater = setTimeout(function () {
				if (base){
					base.repeatKey(key);
				}
			}, base.repeatTime);
		}
	};

	base.getKeySet = function () {
		var sets = [];
		if (base.altActive) {
			sets.push('alt');
		}
		if (base.shiftActive) {
			sets.push('shift');
		}
		if (base.metaActive) {
			// base.metaActive contains the string name of the
			// current meta keyset
			sets.push(base.metaActive);
		}
		return sets.length ? sets.join('+') : 'normal';
	};

	// make it easier to switch keysets via API
	// showKeySet('shift+alt+meta1')
	base.showKeySet = function (str) {
		if (typeof str === 'string') {
			base.last.keyset = [base.shiftActive, base.altActive, base.metaActive];
			base.shiftActive = /shift/i.test(str);
			base.altActive = /alt/i.test(str);
			if (/\bmeta/.test(str)) {
				base.metaActive = true;
				base.showSet(str.match(/\bmeta[\w-]+/i)[0]);
			} else {
				base.metaActive = false;
				base.showSet();
			}
		} else {
			base.showSet(str);
		}
		// allow chaining
		return base;
	};

	base.showSet = function (name) {
		if (!base.hasKeyboard()) { return; }
		o = base.options; // refresh options
		var kbcss = $keyboard.css,
			prefix = '.' + kbcss.keyPrefix,
			active = o.css.buttonActive,
			key = '',
			toShow = (base.shiftActive ? 1 : 0) + (base.altActive ? 2 : 0);
		if (!base.shiftActive) {
			base.capsLock = false;
		}
		// check meta key set
		if (base.metaActive) {
			// remove "-shift" and "-alt" from meta name if it exists
			if (base.shiftActive) {
				name = (name || '').replace('-shift', '');
			}
			if (base.altActive) {
				name = (name || '').replace('-alt', '');
			}
			// the name attribute contains the meta set name 'meta99'
			key = (/^meta/i.test(name)) ? name : '';
			// save active meta keyset name
			if (key === '') {
				key = (base.metaActive === true) ? '' : base.metaActive;
			} else {
				base.metaActive = key;
			}
			// if meta keyset doesn't have a shift or alt keyset, then show just the meta key set
			if ((!o.stickyShift && base.last.keyset[2] !== base.metaActive) ||
				((base.shiftActive || base.altActive) &&
				!base.$keyboard.find('.' + kbcss.keySet + '-' + key + base.rows[toShow]).length)) {
				base.shiftActive = base.altActive = false;
			}
		} else if (!o.stickyShift && base.last.keyset[2] !== base.metaActive && base.shiftActive) {
			// switching from meta key set back to default, reset shift & alt if using stickyShift
			base.shiftActive = base.altActive = false;
		}
		toShow = (base.shiftActive ? 1 : 0) + (base.altActive ? 2 : 0);
		key = (toShow === 0 && !base.metaActive) ? '-normal' : (key === '') ? '' : '-' + key;
		if (!base.$keyboard.find('.' + kbcss.keySet + key + base.rows[toShow]).length) {
			// keyset doesn't exist, so restore last keyset settings
			base.shiftActive = base.last.keyset[0];
			base.altActive = base.last.keyset[1];
			base.metaActive = base.last.keyset[2];
			return;
		}
		base.$keyboard
			.find(prefix + 'alt,' + prefix + 'shift,.' + kbcss.keyAction + '[class*=meta]')
			.removeClass(active)
			.end()
			.find(prefix + 'alt')
			.toggleClass(active, base.altActive)
			.end()
			.find(prefix + 'shift')
			.toggleClass(active, base.shiftActive)
			.end()
			.find(prefix + 'lock')
			.toggleClass(active, base.capsLock)
			.end()
			.find('.' + kbcss.keySet)
			.hide()
			.end()
			.find('.' + (kbcss.keyAction + prefix + key).replace('--', '-'))
			.addClass(active);

		// show keyset using inline-block ( extender layout will then line up )
		base.$keyboard.find('.' + kbcss.keySet + key + base.rows[toShow])[0].style.display = 'inline-block';
		if (base.metaActive) {
			base.$keyboard.find(prefix + base.metaActive)
				// base.metaActive contains the string "meta#" or false
				// without the !== false, jQuery UI tries to transition the classes
				.toggleClass(active, base.metaActive !== false);
		}
		base.last.keyset = [base.shiftActive, base.altActive, base.metaActive];
		base.$el.trigger($keyboard.events.kbKeysetChange, [base, base.el]);
		if (o.reposition) {
			base.reposition();
		}
	};

	// check for key combos (dead keys)
	base.checkCombos = function () {
		// return val for close function
		if ( !(
			base.isVisible() || (
				base.hasKeyboard() &&
				base.$keyboard.hasClass( $keyboard.css.hasFocus )
			)
		) ) {
			return base.getValue(base.$preview || base.$el);
		}
		var r, t, t2, repl,
			// use base.$preview.val() instead of base.preview.value
			// (val.length includes carriage returns in IE).
			val = base.getValue(),
			pos = $keyboard.caret(base.$preview),
			layout = $keyboard.builtLayouts[base.layout],
			max = base.isContentEditable ? $keyboard.getEditableLength(base.el) : val.length,
			// save original content length
			len = max;
		// return if val is empty; fixes #352
		if (val === '') {
			// check valid on empty string - see #429
			if (o.acceptValid) {
				base.checkValid();
			}
			return val;
		}

		// silly IE caret hacks... it should work correctly, but navigating using arrow keys in a textarea
		// is still difficult
		// in IE, pos.end can be zero after input loses focus
		if (pos.end < pos.start) {
			pos.end = pos.start;
		}
		if (pos.start > len) {
			pos.end = pos.start = len;
		}
		// This makes sure the caret moves to the next line after clicking on enter (manual typing works fine)
		if ($keyboard.msie && val.substring(pos.start, pos.start + 1) === '\n') {
			pos.start += 1;
			pos.end += 1;
		}

		if (o.useCombos) {
			// keep 'a' and 'o' in the regex for ae and oe ligature (,)
			// thanks to KennyTM: http://stackoverflow.com/q/4275077
			// original regex /([`\'~\^\"ao])([a-z])/mig moved to $.keyboard.comboRegex
			if ($keyboard.msie) {
				// old IE may not have the caret positioned correctly, so just check the whole thing
				val = val.replace(base.regex, function (s, accent, letter) {
					return (o.combos.hasOwnProperty(accent)) ? o.combos[accent][letter] || s : s;
				});
				// prevent combo replace error, in case the keyboard closes - see issue #116
			} else if (base.$preview.length) {
				// Modern browsers - check for combos from last two characters left of the caret
				t = pos.start - (pos.start - 2 >= 0 ? 2 : 0);
				// target last two characters
				$keyboard.caret(base.$preview, t, pos.end);
				// do combo replace
				t = $keyboard.caret(base.$preview);
				repl = function (txt) {
					return (txt || '').replace(base.regex, function (s, accent, letter) {
						return (o.combos.hasOwnProperty(accent)) ? o.combos[accent][letter] || s : s;
					});
				};
				t2 = repl(t.text);
				// add combo back
				// prevent error if caret doesn't return a function
				if (t && t.replaceStr && t2 !== t.text) {
					if (base.isContentEditable) {
						$keyboard.replaceContent(el, repl);
					} else {
						base.setValue(t.replaceStr(t2));
					}
				}
				val = base.getValue();
			}
		}

		// check input restrictions - in case content was pasted
		if (o.restrictInput && val !== '') {
			t = layout.acceptedKeys.length;

			r = layout.acceptedKeysRegex;
			if (!r) {
				t2 = $.map(layout.acceptedKeys, function (v) {
					// escape any special characters
					return v.replace(base.escapeRegex, '\\$&');
				});
				if (base.alwaysAllowed.indexOf($keyboard.keyCodes.enter) > -1) {
					t2.push('\\n'); // Fixes #686
				}
				r = layout.acceptedKeysRegex = new RegExp('(' + t2.join('|') + ')', 'g');
			}
			// only save matching keys
			t2 = val.match(r);
			if (t2) {
				val = t2.join('');
			} else {
				// no valid characters
				val = '';
				len = 0;
			}
		}

		// save changes, then reposition caret
		pos.start += max - len;
		pos.end += max - len;

		base.setValue(val);
		base.saveCaret(pos.start, pos.end);
		// set scroll to keep caret in view
		base.setScroll();
		base.checkMaxLength();

		if (o.acceptValid) {
			base.checkValid();
		}
		return val; // return text, used for keyboard closing section
	};

	// Toggle accept button classes, if validating
	base.checkValid = function () {
		var kbcss = $keyboard.css,
			$accept = base.$keyboard.find('.' + kbcss.keyPrefix + 'accept'),
			valid = true;
		if (typeof o.validate === 'function') {
			valid = o.validate(base, base.getValue(), false);
		}
		// toggle accept button classes; defined in the css
		$accept
			.toggleClass(kbcss.inputInvalid, !valid)
			.toggleClass(kbcss.inputValid, valid)
			// update title to indicate that the entry is valid or invalid
			.attr('title', $accept.attr('data-title') + ' (' + o.display[valid ? 'valid' : 'invalid'] + ')');
	};

	// Decimal button for num pad - only allow one (not used by default)
	base.checkDecimal = function () {
		// Check US '.' or European ',' format
		if ((base.decimal && /\./g.test(base.preview.value)) ||
			(!base.decimal && /\,/g.test(base.preview.value))) {
			base.$decBtn
				.attr({
					'disabled': 'disabled',
					'aria-disabled': 'true'
				})
				.removeClass(o.css.buttonHover)
				.addClass(o.css.buttonDisabled);
		} else {
			base.$decBtn
				.removeAttr('disabled')
				.attr({
					'aria-disabled': 'false'
				})
				.addClass(o.css.buttonDefault)
				.removeClass(o.css.buttonDisabled);
		}
	};

	// get other layer values for a specific key
	base.getLayers = function ($el) {
		var kbcss = $keyboard.css,
			key = $el.attr('data-pos'),
			$keys = $el.closest('.' + kbcss.keyboard)
			.find('button[data-pos="' + key + '"]');
		return $keys.filter(function () {
			return $(this)
				.find('.' + kbcss.keyText)
				.text() !== '';
		})
		.add($el);
	};

	// Go to next or prev inputs
	// goToNext = true, then go to next input; if false go to prev
	// isAccepted is from autoAccept option or true if user presses shift+enter
	base.switchInput = function (goToNext, isAccepted) {
		if (typeof o.switchInput === 'function') {
			o.switchInput(base, goToNext, isAccepted);
		} else {
			// base.$keyboard may be an empty array - see #275 (apod42)
			if (base.$keyboard.length) {
				base.$keyboard.hide();
			}
			var kb,
				stopped = false,
				all = $('button, input, select, textarea, a, [contenteditable]')
					.filter(':visible')
					.not(':disabled'),
				indx = all.index(base.$el) + (goToNext ? 1 : -1);
			if (base.$keyboard.length) {
				base.$keyboard.show();
			}
			if (indx > all.length - 1) {
				stopped = o.stopAtEnd;
				indx = 0; // go to first input
			}
			if (indx < 0) {
				stopped = o.stopAtEnd;
				indx = all.length - 1; // stop or go to last
			}
			if (!stopped) {
				isAccepted = base.close(isAccepted);
				if (!isAccepted) {
					return;
				}
				kb = all.eq(indx).data('keyboard');
				if (kb && kb.options.openOn.length) {
					kb.focusOn();
				} else {
					all.eq(indx).focus();
				}
			}
		}
		return false;
	};

	// Close the keyboard, if visible. Pass a status of true, if the content was accepted
	// (for the event trigger).
	base.close = function (accepted) {
		if (base.isOpen && base.$keyboard.length) {
			clearTimeout(base.throttled);
			var kbcss = $keyboard.css,
				kbevents = $keyboard.events,
				val = accepted ? base.checkCombos() : base.originalContent;
			// validate input if accepted
			if (accepted && typeof o.validate === 'function' && !o.validate(base, val, true)) {
				val = base.originalContent;
				accepted = false;
				if (o.cancelClose) {
					return;
				}
			}
			base.isCurrent(false);
			base.isOpen = o.alwaysOpen || o.userClosed;
			if (base.isContentEditable && !accepted) {
				// base.originalContent stores the HTML
				base.$el.html(val);
			} else {
				base.setValue(val, base.$el);
			}
			base.$el
				.removeClass(kbcss.isCurrent + ' ' + kbcss.inputAutoAccepted)
				// add 'ui-keyboard-autoaccepted' to inputs - see issue #66
				.addClass((accepted || false) ? accepted === true ? '' : kbcss.inputAutoAccepted : '')
				// trigger default change event - see issue #146
				.trigger(kbevents.inputChange);
			// don't trigger an empty event - see issue #463
			if (!o.alwaysOpen) {
				// don't trigger beforeClose if keyboard is always open
				base.$el.trigger(kbevents.kbBeforeClose, [base, base.el, (accepted || false)]);
			}
			// save caret after updating value (fixes userClosed issue with changing focus)
			$keyboard.caret(base.$preview, base.last);

			base.$el
				.trigger(((accepted || false) ? kbevents.inputAccepted : kbevents.inputCanceled), [base, base.el])
				.trigger((o.alwaysOpen) ? kbevents.kbInactive : kbevents.kbHidden, [base, base.el])
				.blur();

			// base is undefined if keyboard was destroyed - fixes #358
			if (base) {
				// add close event time
				base.last.eventTime = new Date().getTime();
				if (!(o.alwaysOpen || o.userClosed && accepted === 'true') && base.$keyboard.length) {
					// free up memory
					base.removeKeyboard();
					// rebind input focus - delayed to fix IE issue #72
					base.timer = setTimeout(function () {
						if (base) {
							base.bindFocus();
						}
					}, 200);
				}
				if (!base.watermark && base.el.value === '' && base.inPlaceholder !== '') {
					base.$el.addClass(kbcss.placeholder);
					base.setValue(base.inPlaceholder, base.$el);
				}
			}
		}
		return !!accepted;
	};

	base.accept = function () {
		return base.close(true);
	};

	base.checkClose = function (e) {
		if (base.opening) {
			return;
		}
		var kbcss = $.keyboard.css,
			$target = e.$target || $(e.target).closest('.' + $keyboard.css.keyboard + ', .' + $keyboard.css.input);
		if (!$target.length) {
			$target = $(e.target);
		}
		// needed for IE to allow switching between keyboards smoothly
		if ($target.length && $target.hasClass(kbcss.keyboard)) {
			var kb = $target.data('keyboard');
			// only trigger on self
			if (
				kb !== base &&
				!kb.$el.hasClass(kbcss.isCurrent) &&
				kb.options.openOn &&
				e.type === o.openOn
			) {
				kb.focusOn();
			}
		} else {
			base.escClose(e, $target);
		}
	};

	// callback functions called to check if the keyboard needs to be closed
	// e.g. on escape or clicking outside the keyboard
	base.escCloseCallback = {
		// keep keyboard open if alwaysOpen or stayOpen is true - fixes mutliple
		// always open keyboards or single stay open keyboard
		keepOpen: function() {
			return !base.isOpen;
		}
	};

	base.escClose = function (e, $el) {
		if (!base.isOpen) {
			return;
		}
		if (e && e.type === 'keyup') {
			return (e.which === $keyboard.keyCodes.escape && !o.ignoreEsc) ?
				base.close(o.autoAccept && o.autoAcceptOnEsc ? 'true' : false) :
				'';
		}
		var shouldStayOpen = false,
			$target = $el.length && $el || $(e.target);
		$.each(base.escCloseCallback, function(i, callback) {
			if (typeof callback === 'function') {
				shouldStayOpen = shouldStayOpen || callback($target);
			}
		});
		if (shouldStayOpen) {
			return;
		}
		// ignore autoaccept if using escape - good idea?
		if (!base.isCurrent() && base.isOpen || base.isOpen && $target[0] !== base.el) {
			// don't close if stayOpen is set; but close if a different keyboard is being opened
			if ((o.stayOpen || o.userClosed) && !$target.hasClass($keyboard.css.input)) {
				return;
			}
			// stop propogation in IE - an input getting focus doesn't open a keyboard if one is already open
			if ($keyboard.allie) {
				e.preventDefault();
			}
			if (o.closeByClickEvent) {
				// only close the keyboard if the user is clicking on an input or if they cause a click
				// event (touchstart/mousedown will not force the close with this setting)
				var name = $target[0] && $target[0].nodeName.toLowerCase();
				if (name === 'input' || name === 'textarea' || e.type === 'click') {
					base.close(o.autoAccept ? 'true' : false);
				}
			} else {
				// send 'true' instead of a true (boolean), the input won't get a 'ui-keyboard-autoaccepted'
				// class name - see issue #66
				base.close(o.autoAccept ? 'true' : false);
			}
		}
	};

	// Build default button
	base.keyBtn = $('<button />')
		.attr({
			'role': 'button',
			'type': 'button',
			'aria-disabled': 'false',
			'tabindex': '-1'
		})
		.addClass($keyboard.css.keyButton);

	// convert key names into a class name
	base.processName = function (name) {
		var index, n,
			process = (name || '').replace(/[^a-z0-9-_]/gi, ''),
			len = process.length,
			newName = [];
		if (len > 1 && name === process) {
			// return name if basic text
			return name;
		}
		// return character code sequence
		len = name.length;
		if (len) {
			for (index = 0; index < len; index++) {
				n = name[index];
				// keep '-' and '_'... so for dash, we get two dashes in a row
				newName.push(/[a-z0-9-_]/i.test(n) ?
					(/[-_]/.test(n) && index !== 0 ? '' : n) :
					(index === 0 ? '' : '-') + n.charCodeAt(0)
				);
			}
			return newName.join('');
		}
		return name;
	};

	base.processKeys = function (name) {
		var tmp, parts,
			htmlIndex = name.indexOf('</'),
			data = {
				name: name,
				map: '',
				title: ''
			};
		if (htmlIndex > -1) {
			// If it looks like HTML, skip processing; see #743
			// html may include colons; see #701
			return data;
		}
		// Don't split colons followed by //, e.g. https://; Fixes #555
		parts = name.split(/:(?!\/\/)/);

		/* map defined keys
		format 'key(A):Label_for_key_(ignore_parentheses_here)'
			'key' = key that is seen (can any character(s); but it might need to be escaped using '\'
			or entered as unicode '\u####'
			'(A)' = the actual key on the real keyboard to remap
			':Label_for_key' ends up in the title/tooltip
		Examples:
			'\u0391(A):alpha', 'x(y):this_(might)_cause_problems
			or edge cases of ':(x)', 'x(:)', 'x(()' or 'x())'
		Enhancement (if I can get alt keys to work):
			A mapped key will include the mod key, e.g. 'x(alt-x)' or 'x(alt-shift-x)'
		*/
		if (/\(.+\)/.test(parts[0]) || /^:\(.+\)/.test(name) || /\([(:)]\)/.test(name)) {
			// edge cases 'x(:)', 'x(()' or 'x())'
			if (/\([(:)]\)/.test(name)) {
				tmp = parts[0].match(/([^(]+)\((.+)\)/);
				if (tmp && tmp.length) {
					data.name = tmp[1];
					data.map = tmp[2];
					data.title = parts.length > 1 ? parts.slice(1).join(':') : '';
				} else {
					// edge cases 'x(:)', ':(x)' or ':(:)'
					data.name = name.match(/([^(]+)/)[0];
					if (data.name === ':') {
						// ':(:):test' => parts = [ '', '(', ')', 'title' ] need to slice 1
						parts = parts.slice(1);
					}
					if (tmp === null) {
						// 'x(:):test' => parts = [ 'x(', ')', 'title' ] need to slice 2
						data.map = ':';
						parts = parts.slice(2);
					}
					data.title = parts.length ? parts.join(':') : '';
				}
			} else {
				// example: \u0391(A):alpha; extract 'A' from '(A)'
				data.map = name.match(/\(([^()]+?)\)/)[1];
				// remove '(A)', left with '\u0391:alpha'
				name = name.replace(/\(([^()]+)\)/, '');
				tmp = name.split(':');
				// get '\u0391' from '\u0391:alpha'
				if (tmp[0] === '') {
					data.name = ':';
					parts = parts.slice(1);
				} else {
					data.name = tmp[0];
				}
				data.title = parts.length > 1 ? parts.slice(1).join(':') : '';
			}
		} else {
			// find key label
			// corner case of '::;' reduced to ':;', split as ['', ';']
			if (name !== '' && parts[0] === '') {
				data.name = ':';
				parts = parts.slice(1);
			} else {
				data.name = parts[0];
			}
			data.title = parts.length > 1 ? parts.slice(1).join(':') : '';
		}
		data.title = $.trim(data.title).replace(/_/g, ' ');
		return data;
	};

	// Add key function
	// keyName = the name of the function called in $.keyboard.keyaction when the button is clicked
	// name = name added to key, or cross-referenced in the display options
	// base.temp[0] = keyset to attach the new button
	// regKey = true when it is not an action key
	base.addKey = function (keyName, action, regKey) {
		var keyClass, tmp, keys,
			data = {},
			txt = base.processKeys(regKey ? keyName : action),
			kbcss = $keyboard.css;

		if (!regKey && o.display[txt.name]) {
			keys = base.processKeys(o.display[txt.name]);
			// action contained in "keyName" (e.g. keyName = "accept",
			// action = "a" (use checkmark instead of text))
			keys.action = base.processKeys(keyName).name;
		} else {
			// when regKey is true, keyName is the same as action
			keys = txt;
			keys.action = txt.name;
		}

		data.name = base.processName(txt.name);
		if (keys.name !== '') {
			if (keys.map !== '') {
				$keyboard.builtLayouts[base.layout].mappedKeys[keys.map] = keys.name;
				$keyboard.builtLayouts[base.layout].acceptedKeys.push(keys.name);
			} else if (regKey) {
				$keyboard.builtLayouts[base.layout].acceptedKeys.push(keys.name);
			}
		}

		if (regKey) {
			keyClass = data.name === '' ? '' : kbcss.keyPrefix + data.name;
		} else {
			// Action keys will have the 'ui-keyboard-actionkey' class
			keyClass = kbcss.keyAction + ' ' + kbcss.keyPrefix + keys.action;
		}
		// '\u2190'.length = 1 because the unicode is converted, so if more than one character,
		// add the wide class
		keyClass += (keys.name.length > 2 ? ' ' + kbcss.keyWide : '') + ' ' + o.css.buttonDefault;

		// Allow HTML in the key.name
		data.html = '<span class="' + kbcss.keyText + '">' + keys.name + '</span>';

		data.$key = base.keyBtn
			.clone()
			.attr({
				'data-value': regKey ? keys.name : keys.action, // value
				'data-name': keys.action,
				'data-pos': base.temp[1] + ',' + base.temp[2],
				'data-action': keys.action,
				'data-html': data.html
			})
			// add 'ui-keyboard-' + data.name for all keys
			//  (e.g. 'Bksp' will have 'ui-keyboard-bskp' class)
			// any non-alphanumeric characters will be replaced with
			//  their decimal unicode value
			//  (e.g. '~' is a regular key, class = 'ui-keyboard-126'
			//  (126 is the unicode decimal value - same as &#126;)
			//  See https://en.wikipedia.org/wiki/List_of_Unicode_characters#Control_codes
			.addClass(keyClass)
			.html(data.html)
			.appendTo(base.temp[0]);

		if (keys.map) {
			data.$key.attr('data-mapped', keys.map);
		}
		if (keys.title || txt.title) {
			data.$key.attr({
				'data-title': txt.title || keys.title, // used to allow adding content to title
				'title': txt.title || keys.title
			});
		}

		if (typeof o.buildKey === 'function') {
			data = o.buildKey(base, data);
			// copy html back to attributes
			tmp = data.$key.html();
			data.$key.attr('data-html', tmp);
		}
		return data.$key;
	};

	base.customHash = function (layout) {
		/*jshint bitwise:false */
		var i, array, hash, character, len,
			arrays = [],
			merged = [];
		// pass layout to allow for testing
		layout = typeof layout === 'undefined' ? o.customLayout : layout;
		// get all layout arrays
		for (array in layout) {
			if (layout.hasOwnProperty(array)) {
				arrays.push(layout[array]);
			}
		}
		// flatten array
		merged = merged.concat.apply(merged, arrays).join(' ');
		// produce hash name - http://stackoverflow.com/a/7616484/145346
		hash = 0;
		len = merged.length;
		if (len === 0) {
			return hash;
		}
		for (i = 0; i < len; i++) {
			character = merged.charCodeAt(i);
			hash = ((hash << 5) - hash) + character;
			hash = hash & hash; // Convert to 32bit integer
		}
		return hash;
	};

	base.buildKeyboard = function (name, internal) {
		// o.display is empty when this is called from the scramble extension (when alwaysOpen:true)
		if ($.isEmptyObject(o.display)) {
			// set keyboard language
			base.updateLanguage();
		}
		var index, row, $row, currentSet,
			kbcss = $keyboard.css,
			sets = 0,
			layout = $keyboard.builtLayouts[name || base.layout || o.layout] = {
				mappedKeys: {},
				acceptedKeys: []
			},
			acceptedKeys = layout.acceptedKeys = o.restrictInclude ?
				('' + o.restrictInclude).split(/\s+/) || [] :
				[],
			// using $layout temporarily to hold keyboard popup classnames
			$layout = kbcss.keyboard + ' ' + o.css.popup + ' ' + o.css.container +
				(o.alwaysOpen || o.userClosed ? ' ' + kbcss.alwaysOpen : ''),

			container = $('<div />')
				.addClass($layout)
				.attr({
					'role': 'textbox'
				})
				.hide();

		// allow adding "{space}" as an accepted key - Fixes #627
		index = $.inArray('{space}', acceptedKeys);
		if (index > -1) {
			acceptedKeys[index] = ' ';
		}

		// verify layout or setup custom keyboard
		if ((internal && o.layout === 'custom') || !$keyboard.layouts.hasOwnProperty(o.layout)) {
			o.layout = 'custom';
			$layout = $keyboard.layouts.custom = o.customLayout || {
				'normal': ['{cancel}']
			};
		} else {
			$layout = $keyboard.layouts[internal ? o.layout : name || base.layout || o.layout];
		}

		// Main keyboard building loop
		$.each($layout, function (set, keySet) {
			// skip layout name & lang settings
			if (set !== '' && !/^(name|lang|rtl)$/i.test(set)) {
				// keep backwards compatibility for change from default to normal naming
				if (set === 'default') {
					set = 'normal';
				}
				sets++;
				$row = $('<div />')
					.attr('name', set) // added for typing extension
					.addClass(kbcss.keySet + ' ' + kbcss.keySet + '-' + set)
					.appendTo(container)
					.toggle(set === 'normal');

				for (row = 0; row < keySet.length; row++) {
					// remove extra spaces before spliting (regex probably could be improved)
					currentSet = $.trim(keySet[row]).replace(/\{(\.?)[\s+]?:[\s+]?(\.?)\}/g, '{$1:$2}');
					base.buildRow($row, row, currentSet.split(/\s+/), acceptedKeys);
					$row.find('.' + kbcss.keyButton + ',.' + kbcss.keySpacer)
						.filter(':last')
						.after('<br class="' + kbcss.endRow + '"/>');
				}
			}
		});

		if (sets > 1) {
			base.sets = true;
		}
		layout.hasMappedKeys = !($.isEmptyObject(layout.mappedKeys));
		layout.$keyboard = container;
		return container;
	};

	base.buildRow = function ($row, row, keys, acceptedKeys) {
		var t, txt, key, isAction, action, margin,
			kbcss = $keyboard.css;
		for (key = 0; key < keys.length; key++) {
			// used by addKey function
			base.temp = [$row, row, key];
			isAction = false;

			// ignore empty keys
			if (keys[key].length === 0) {
				continue;
			}

			// process here if it's an action key
			if (/^\{\S+\}$/.test(keys[key])) {
				action = keys[key].match(/^\{(\S+)\}$/)[1];
				// add active class if there are double exclamation points in the name
				if (/\!\!/.test(action)) {
					action = action.replace('!!', '');
					isAction = true;
				}

				// add empty space
				if (/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i.test(action)) {
					// not perfect globalization, but allows you to use {sp:1,1em}, {sp:1.2em} or {sp:15px}
					margin = parseFloat(action
						.replace(/,/, '.')
						.match(/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1] || 0
					);
					$('<span class="' + kbcss.keyText + '"></span>')
						// previously {sp:1} would add 1em margin to each side of a 0 width span
						// now Firefox doesn't seem to render 0px dimensions, so now we set the
						// 1em margin x 2 for the width
						.width((action.match(/px/i) ? margin + 'px' : (margin * 2) + 'em'))
						.addClass(kbcss.keySpacer)
						.appendTo($row);
				}

				// add empty button
				if (/^empty(:((\d+)?([\.|,]\d+)?)(em|px)?)?$/i.test(action)) {
					margin = (/:/.test(action)) ? parseFloat(action
						.replace(/,/, '.')
						.match(/^empty:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1] || 0
					) : '';
					base
						.addKey('', ' ', true)
						.addClass(o.css.buttonDisabled + ' ' + o.css.buttonEmpty)
						.attr('aria-disabled', true)
						.width(margin ? (action.match('px') ? margin + 'px' : (margin * 2) + 'em') : '');
					continue;
				}

				// meta keys
				if (/^meta[\w-]+\:?(\w+)?/i.test(action)) {
					base
						.addKey(action.split(':')[0], action)
						.addClass(kbcss.keyHasActive);
					continue;
				}

				// switch needed for action keys with multiple names/shortcuts or
				// default will catch all others
				txt = action.split(':');
				switch (txt[0].toLowerCase()) {

				case 'a':
				case 'accept':
					base
						.addKey('accept', action)
						.addClass(o.css.buttonAction + ' ' + kbcss.keyAction);
					break;

				case 'alt':
				case 'altgr':
					base
						.addKey('alt', action)
						.addClass(kbcss.keyHasActive);
					break;

				case 'b':
				case 'bksp':
					base.addKey('bksp', action);
					break;

				case 'c':
				case 'cancel':
					base
						.addKey('cancel', action)
						.addClass(o.css.buttonAction + ' ' + kbcss.keyAction);
					break;

					// toggle combo/diacritic key
					/*jshint -W083 */
				case 'combo':
					base
						.addKey('combo', action)
						.addClass(kbcss.keyHasActive)
						.attr('title', function (indx, title) {
							// add combo key state to title
							return title + ' ' + o.display[o.useCombos ? 'active' : 'disabled'];
						})
						.toggleClass(o.css.buttonActive, o.useCombos);
					break;

					// Decimal - unique decimal point (num pad layout)
				case 'dec':
					acceptedKeys.push((base.decimal) ? '.' : ',');
					base.addKey('dec', action);
					break;

				case 'e':
				case 'enter':
					base
						.addKey('enter', action)
						.addClass(o.css.buttonAction + ' ' + kbcss.keyAction);
					break;

				case 'lock':
					base
						.addKey('lock', action)
						.addClass(kbcss.keyHasActive);
					break;

				case 's':
				case 'shift':
					base
						.addKey('shift', action)
						.addClass(kbcss.keyHasActive);
					break;

					// Change sign (for num pad layout)
				case 'sign':
					acceptedKeys.push('-');
					base.addKey('sign', action);
					break;

				case 'space':
					acceptedKeys.push(' ');
					base.addKey('space', action);
					break;

				case 't':
				case 'tab':
					base.addKey('tab', action);
					break;

				default:
					if ($keyboard.keyaction.hasOwnProperty(txt[0])) {
						base
							.addKey(txt[0], action)
							.toggleClass(o.css.buttonAction + ' ' + kbcss.keyAction, isAction);
					}

				}

			} else {

				// regular button (not an action key)
				t = keys[key];
				base.addKey(t, t, true);
			}
		}
	};

	base.removeBindings = function (namespace) {
		$(document).unbind(namespace);
		if (base.el.ownerDocument !== document) {
			$(base.el.ownerDocument).unbind(namespace);
		}
		$(window).unbind(namespace);
		base.$el.unbind(namespace);
	};

	base.removeKeyboard = function () {
		base.$decBtn = [];
		// base.$preview === base.$el when o.usePreview is false - fixes #442
		if (o.usePreview) {
			base.$preview.removeData('keyboard');
		}
		base.$preview.unbind(base.namespace + 'keybindings');
		base.preview = null;
		base.$preview = null;
		base.$previewCopy = null;
		base.$keyboard.removeData('keyboard');
		base.$keyboard.remove();
		base.$keyboard = [];
		base.isOpen = false;
		base.isCurrent(false);
	};

	base.destroy = function (callback) {
		var index,
			kbcss = $keyboard.css,
			len = base.extensionNamespace.length,
			tmp = [
				kbcss.input,
				kbcss.locked,
				kbcss.placeholder,
				kbcss.noKeyboard,
				kbcss.alwaysOpen,
				o.css.input,
				kbcss.isCurrent
			].join(' ');
		clearTimeout(base.timer);
		clearTimeout(base.timer2);
		clearTimeout(base.timer3);
		if (base.$keyboard.length) {
			base.removeKeyboard();
		}
		if (base.options.openOn) {
			base.removeBindings(base.options.openOn);
		}
		base.removeBindings(base.namespace);
		base.removeBindings(base.namespace + 'callbacks');
		for (index = 0; index < len; index++) {
			base.removeBindings(base.extensionNamespace[index]);
		}
		base.el.active = false;

		base.$el
			.removeClass(tmp)
			.removeAttr('aria-haspopup')
			.removeAttr('role')
			.removeAttr('readonly')
			.removeData('keyboard');
		base = null;

		if (typeof callback === 'function') {
			callback();
		}
	};

	// Run initializer
	base.init();

	}; // end $.keyboard definition

	// event.which & ASCII values
	$keyboard.keyCodes = {
		backSpace: 8,
		tab: 9,
		enter: 13,
		capsLock: 20,
		escape: 27,
		space: 32,
		pageUp: 33,
		pageDown: 34,
		end: 35,
		home: 36,
		left: 37,
		up: 38,
		right: 39,
		down: 40,
		insert: 45,
		delete: 46,
		// event.which keyCodes (uppercase letters)
		A: 65,
		Z: 90,
		V: 86,
		C: 67,
		X: 88,

		// ASCII lowercase a & z
		a: 97,
		z: 122
	};

	$keyboard.css = {
		// keyboard id suffix
		idSuffix: '_keyboard',
		// class name to set initial focus
		initialFocus: 'keyboard-init-focus',
		// element class names
		input: 'ui-keyboard-input',
		inputClone: 'ui-keyboard-preview-clone',
		wrapper: 'ui-keyboard-preview-wrapper',
		preview: 'ui-keyboard-preview',
		keyboard: 'ui-keyboard',
		keySet: 'ui-keyboard-keyset',
		keyButton: 'ui-keyboard-button',
		keyWide: 'ui-keyboard-widekey',
		keyPrefix: 'ui-keyboard-',
		keyText: 'ui-keyboard-text', // span with button text
		keyHasActive: 'ui-keyboard-hasactivestate',
		keyAction: 'ui-keyboard-actionkey',
		keySpacer: 'ui-keyboard-spacer', // empty keys
		keyToggle: 'ui-keyboard-toggle',
		keyDisabled: 'ui-keyboard-disabled',
		// Class for BRs with a div wrapper inside of contenteditable
		divWrapperCE: 'ui-keyboard-div-wrapper',
		// states
		locked: 'ui-keyboard-lockedinput',
		alwaysOpen: 'ui-keyboard-always-open',
		noKeyboard: 'ui-keyboard-nokeyboard',
		placeholder: 'ui-keyboard-placeholder',
		hasFocus: 'ui-keyboard-has-focus',
		isCurrent: 'ui-keyboard-input-current',
		// validation & autoaccept
		inputValid: 'ui-keyboard-valid-input',
		inputInvalid: 'ui-keyboard-invalid-input',
		inputAutoAccepted: 'ui-keyboard-autoaccepted',
		endRow: 'ui-keyboard-button-endrow' // class added to <br>
	};

	$keyboard.events = {
		// keyboard events
		kbChange: 'keyboardChange',
		kbBeforeClose: 'beforeClose',
		kbBeforeVisible: 'beforeVisible',
		kbVisible: 'visible',
		kbInit: 'initialized',
		kbInactive: 'inactive',
		kbHidden: 'hidden',
		kbRepeater: 'repeater',
		kbKeysetChange: 'keysetChange',
		// input events
		inputAccepted: 'accepted',
		inputCanceled: 'canceled',
		inputChange: 'change',
		inputRestricted: 'restricted'
	};

	// Action key function list
	$keyboard.keyaction = {
		accept: function (base) {
			base.close(true); // same as base.accept();
			return false; // return false prevents further processing
		},
		alt: function (base) {
			base.altActive = !base.altActive;
			base.showSet();
		},
		bksp: function (base) {
			if (base.isContentEditable) {
				base.execCommand('delete');
				// save new caret position
				base.saveCaret();
			} else {
				// the script looks for the '\b' string and initiates a backspace
				base.insertText('\b');
			}
		},
		cancel: function (base) {
			base.close();
			return false; // return false prevents further processing
		},
		clear: function (base) {
			base.$preview[base.isContentEditable ? 'text' : 'val']('');
			if (base.$decBtn.length) {
				base.checkDecimal();
			}
		},
		combo: function (base) {
			var o = base.options,
				c = !o.useCombos,
				$combo = base.$keyboard.find('.' + $keyboard.css.keyPrefix + 'combo');
			o.useCombos = c;
			$combo
				.toggleClass(o.css.buttonActive, c)
				// update combo key state
				.attr('title', $combo.attr('data-title') + ' (' + o.display[c ? 'active' : 'disabled'] + ')');
			if (c) {
				base.checkCombos();
			}
			return false;
		},
		dec: function (base) {
			base.insertText((base.decimal) ? '.' : ',');
		},
		del: function (base) {
			if (base.isContentEditable) {
				base.execCommand('forwardDelete');
			} else {
				// the script looks for the '{d}' string and initiates a delete
				base.insertText('{d}');
			}
		},
		// resets to base keyset (deprecated because "default" is a reserved word)
		'default': function (base) {
			base.shiftActive = base.altActive = base.metaActive = false;
			base.showSet();
		},
		// el is the pressed key (button) object; it is null when the real keyboard enter is pressed
		enter: function (base, el, e) {
			var o = base.options;
			// shift+enter in textareas
			if (e.shiftKey) {
				// textarea, input & contenteditable - enterMod + shift + enter = accept,
				//  then go to prev; base.switchInput(goToNext, autoAccept)
				// textarea & input - shift + enter = accept (no navigation)
				return (o.enterNavigation) ? base.switchInput(!e[o.enterMod], true) : base.close(true);
			}
			// input only - enterMod + enter to navigate
			if (o.enterNavigation && (!base.isTextArea || e[o.enterMod])) {
				return base.switchInput(!e[o.enterMod], o.autoAccept ? 'true' : false);
			}
			// pressing virtual enter button inside of a textarea - add a carriage return
			// e.target is span when clicking on text and button at other times
			if (base.isTextArea && $(e.target).closest('button').length) {
				// IE8 fix (space + \n) - fixes #71 thanks Blookie!
				base.insertText(($keyboard.msie ? ' ' : '') + '\n');
			}
			if (base.isContentEditable && !o.enterNavigation) {
				base.execCommand('insertHTML', '<div><br class="' + $keyboard.css.divWrapperCE + '"></div>');
				// Using backspace on wrapped BRs will now shift the textnode inside of the wrapped BR
				// Although not ideal, the caret is moved after the block - see the wiki page for
				// more details: https://github.com/Mottie/Keyboard/wiki/Contenteditable#limitations
				// move caret after a delay to allow rendering of HTML
				setTimeout(function() {
					$keyboard.keyaction.right(base);
					base.saveCaret();
				}, 0);
			}
		},
		// caps lock key
		lock: function (base) {
			base.last.keyset[0] = base.shiftActive = base.capsLock = !base.capsLock;
			base.showSet();
		},
		left: function (base) {
			var p = $keyboard.caret(base.$preview);
			if (p.start - 1 >= 0) {
				// move both start and end of caret (prevents text selection) & save caret position
				base.last.start = base.last.end = p.start - 1;
				$keyboard.caret(base.$preview, base.last);
				base.setScroll();
			}
		},
		meta: function (base, el) {
			var $el = $(el);
			base.metaActive = !$el.hasClass(base.options.css.buttonActive);
			base.showSet($el.attr('data-name'));
		},
		next: function (base) {
			base.switchInput(true, base.options.autoAccept);
			return false;
		},
		// same as 'default' - resets to base keyset
		normal: function (base) {
			base.shiftActive = base.altActive = base.metaActive = false;
			base.showSet();
		},
		prev: function (base) {
			base.switchInput(false, base.options.autoAccept);
			return false;
		},
		right: function (base) {
			var p = $keyboard.caret(base.$preview),
				len = base.isContentEditable ? $keyboard.getEditableLength(base.el) : base.getValue().length;
			if (p.end + 1 <= len) {
				// move both start and end of caret to end position
				// (prevents text selection) && save caret position
				base.last.start = base.last.end = p.end + 1;
				$keyboard.caret(base.$preview, base.last);
				base.setScroll();
			}
		},
		shift: function (base) {
			base.last.keyset[0] = base.shiftActive = !base.shiftActive;
			base.showSet();
		},
		sign: function (base) {
			if (/^[+-]?\d*\.?\d*$/.test(base.getValue())) {
				var caret,
					p = $keyboard.caret(base.$preview),
					val = base.getValue(),
					len = base.isContentEditable ? $keyboard.getEditableLength(base.el) : val.length;
				base.setValue(val * -1);
				caret = len - val.length;
				base.last.start = p.start + caret;
				base.last.end = p.end + caret;
				$keyboard.caret(base.$preview, base.last);
				base.setScroll();
			}
		},
		space: function (base) {
			base.insertText(' ');
		},
		tab: function (base) {
			var o = base.options;
			if (!base.isTextArea) {
				if (o.tabNavigation) {
					return base.switchInput(!base.shiftActive, true);
				} else if (base.isInput) {
					// ignore tab key in input
					return false;
				}
			}
			base.insertText('\t');
		},
		toggle: function (base) {
			base.enabled = !base.enabled;
			base.toggle();
		},
		// *** Special action keys: NBSP & zero-width characters ***
		// Non-breaking space
		NBSP: '\u00a0',
		// zero width space
		ZWSP: '\u200b',
		// Zero width non-joiner
		ZWNJ: '\u200c',
		// Zero width joiner
		ZWJ: '\u200d',
		// Left-to-right Mark
		LRM: '\u200e',
		// Right-to-left Mark
		RLM: '\u200f'
	};

	// Default keyboard layouts
	$keyboard.builtLayouts = {};
	$keyboard.layouts = {
		'alpha': {
			'normal': [
				'` 1 2 3 4 5 6 7 8 9 0 - = {bksp}',
				'{tab} a b c d e f g h i j [ ] \\',
				'k l m n o p q r s ; \' {enter}',
				'{shift} t u v w x y z , . / {shift}',
				'{accept} {space} {cancel}'
			],
			'shift': [
				'~ ! @ # $ % ^ & * ( ) _ + {bksp}',
				'{tab} A B C D E F G H I J { } |',
				'K L M N O P Q R S : " {enter}',
				'{shift} T U V W X Y Z < > ? {shift}',
				'{accept} {space} {cancel}'
			]
		},
		'qwerty': {
			'normal': [
				'` 1 2 3 4 5 6 7 8 9 0 - = {bksp}',
				'{tab} q w e r t y u i o p [ ] \\',
				'a s d f g h j k l ; \' {enter}',
				'{shift} z x c v b n m , . / {shift}',
				'{accept} {space} {cancel}'
			],
			'shift': [
				'~ ! @ # $ % ^ & * ( ) _ + {bksp}',
				'{tab} Q W E R T Y U I O P { } |',
				'A S D F G H J K L : " {enter}',
				'{shift} Z X C V B N M < > ? {shift}',
				'{accept} {space} {cancel}'
			]
		},
		'international': {
			'normal': [
				'` 1 2 3 4 5 6 7 8 9 0 - = {bksp}',
				'{tab} q w e r t y u i o p [ ] \\',
				'a s d f g h j k l ; \' {enter}',
				'{shift} z x c v b n m , . / {shift}',
				'{accept} {alt} {space} {alt} {cancel}'
			],
			'shift': [
				'~ ! @ # $ % ^ & * ( ) _ + {bksp}',
				'{tab} Q W E R T Y U I O P { } |',
				'A S D F G H J K L : " {enter}',
				'{shift} Z X C V B N M < > ? {shift}',
				'{accept} {alt} {space} {alt} {cancel}'
			],
			'alt': [
				'~ \u00a1 \u00b2 \u00b3 \u00a4 \u20ac \u00bc \u00bd \u00be \u2018 \u2019 \u00a5 \u00d7 {bksp}',
				'{tab} \u00e4 \u00e5 \u00e9 \u00ae \u00fe \u00fc \u00fa \u00ed \u00f3 \u00f6 \u00ab \u00bb \u00ac',
				'\u00e1 \u00df \u00f0 f g h j k \u00f8 \u00b6 \u00b4 {enter}',
				'{shift} \u00e6 x \u00a9 v b \u00f1 \u00b5 \u00e7 > \u00bf {shift}',
				'{accept} {alt} {space} {alt} {cancel}'
			],
			'alt-shift': [
				'~ \u00b9 \u00b2 \u00b3 \u00a3 \u20ac \u00bc \u00bd \u00be \u2018 \u2019 \u00a5 \u00f7 {bksp}',
				'{tab} \u00c4 \u00c5 \u00c9 \u00ae \u00de \u00dc \u00da \u00cd \u00d3 \u00d6 \u00ab \u00bb \u00a6',
				'\u00c4 \u00a7 \u00d0 F G H J K \u00d8 \u00b0 \u00a8 {enter}',
				'{shift} \u00c6 X \u00a2 V B \u00d1 \u00b5 \u00c7 . \u00bf {shift}',
				'{accept} {alt} {space} {alt} {cancel}'
			]
		},
		'colemak': {
			'normal': [
				'` 1 2 3 4 5 6 7 8 9 0 - = {bksp}',
				'{tab} q w f p g j l u y ; [ ] \\',
				'{bksp} a r s t d h n e i o \' {enter}',
				'{shift} z x c v b k m , . / {shift}',
				'{accept} {space} {cancel}'
			],
			'shift': [
				'~ ! @ # $ % ^ & * ( ) _ + {bksp}',
				'{tab} Q W F P G J L U Y : { } |',
				'{bksp} A R S T D H N E I O " {enter}',
				'{shift} Z X C V B K M < > ? {shift}',
				'{accept} {space} {cancel}'
			]
		},
		'dvorak': {
			'normal': [
				'` 1 2 3 4 5 6 7 8 9 0 [ ] {bksp}',
				'{tab} \' , . p y f g c r l / = \\',
				'a o e u i d h t n s - {enter}',
				'{shift} ; q j k x b m w v z {shift}',
				'{accept} {space} {cancel}'
			],
			'shift': [
				'~ ! @ # $ % ^ & * ( ) { } {bksp}',
				'{tab} " < > P Y F G C R L ? + |',
				'A O E U I D H T N S _ {enter}',
				'{shift} : Q J K X B M W V Z {shift}',
				'{accept} {space} {cancel}'
			]
		},
		'num': {
			'normal': [
				'= ( ) {b}',
				'{clear} / * -',
				'7 8 9 +',
				'4 5 6 {sign}',
				'1 2 3 %',
				'0 {dec} {a} {c}'
			]
		}
	};

	$keyboard.language = {
		en: {
			display: {
				// check mark - same action as accept
				'a': '\u2714:Accept (Shift+Enter)',
				'accept': 'Accept:Accept (Shift+Enter)',
				// other alternatives \u2311
				'alt': 'Alt:\u2325 AltGr',
				// Left arrow (same as &larr;)
				'b': '\u232b:Backspace',
				'bksp': 'Bksp:Backspace',
				// big X, close - same action as cancel
				'c': '\u2716:Cancel (Esc)',
				'cancel': 'Cancel:Cancel (Esc)',
				// clear num pad
				'clear': 'C:Clear',
				'combo': '\u00f6:Toggle Combo Keys',
				// decimal point for num pad (optional), change '.' to ',' for European format
				'dec': '.:Decimal',
				// down, then left arrow - enter symbol
				'e': '\u23ce:Enter',
				'empty': '\u00a0',
				'enter': 'Enter:Enter \u23ce',
				// left arrow (move caret)
				'left': '\u2190',
				// caps lock
				'lock': 'Lock:\u21ea Caps Lock',
				'next': 'Next \u21e8',
				'prev': '\u21e6 Prev',
				// right arrow (move caret)
				'right': '\u2192',
				// thick hollow up arrow
				's': '\u21e7:Shift',
				'shift': 'Shift:Shift',
				// +/- sign for num pad
				'sign': '\u00b1:Change Sign',
				'space': '\u00a0:Space',
				// right arrow to bar (used since this virtual keyboard works with one directional tabs)
				't': '\u21e5:Tab',
				// \u21b9 is the true tab symbol (left & right arrows)
				'tab': '\u21e5 Tab:Tab',
				// replaced by an image
				'toggle': ' ',

				// added to titles of keys
				// accept key status when acceptValid:true
				'valid': 'valid',
				'invalid': 'invalid',
				// combo key states
				'active': 'active',
				'disabled': 'disabled'
			},

			// Message added to the key title while hovering, if the mousewheel plugin exists
			wheelMessage: 'Use mousewheel to see other keys',

			comboRegex: /([`\'~\^\"ao])([a-z])/mig,
			combos: {
				// grave
				'`': { a: '\u00e0', A: '\u00c0', e: '\u00e8', E: '\u00c8', i: '\u00ec', I: '\u00cc', o: '\u00f2',
						O: '\u00d2', u: '\u00f9', U: '\u00d9', y: '\u1ef3', Y: '\u1ef2' },
				// acute & cedilla
				"'": { a: '\u00e1', A: '\u00c1', e: '\u00e9', E: '\u00c9', i: '\u00ed', I: '\u00cd', o: '\u00f3',
						O: '\u00d3', u: '\u00fa', U: '\u00da', y: '\u00fd', Y: '\u00dd' },
				// umlaut/trema
				'"': { a: '\u00e4', A: '\u00c4', e: '\u00eb', E: '\u00cb', i: '\u00ef', I: '\u00cf', o: '\u00f6',
						O: '\u00d6', u: '\u00fc', U: '\u00dc', y: '\u00ff', Y: '\u0178' },
				// circumflex
				'^': { a: '\u00e2', A: '\u00c2', e: '\u00ea', E: '\u00ca', i: '\u00ee', I: '\u00ce', o: '\u00f4',
						O: '\u00d4', u: '\u00fb', U: '\u00db', y: '\u0177', Y: '\u0176' },
				// tilde
				'~': { a: '\u00e3', A: '\u00c3', e: '\u1ebd', E: '\u1ebc', i: '\u0129', I: '\u0128', o: '\u00f5',
						O: '\u00d5', u: '\u0169', U: '\u0168', y: '\u1ef9', Y: '\u1ef8', n: '\u00f1', N: '\u00d1' }
			}
		}
	};

	$keyboard.defaultOptions = {
		// set this to ISO 639-1 language code to override language set by the layout
		// http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes
		// language defaults to 'en' if not found
		language: null,
		rtl: false,

		// *** choose layout & positioning ***
		layout: 'qwerty',
		customLayout: null,

		position: {
			// optional - null (attach to input/textarea) or a jQuery object (attach elsewhere)
			of: null,
			my: 'center top',
			at: 'center top',
			// used when 'usePreview' is false (centers the keyboard at the bottom of the input/textarea)
			at2: 'center bottom'
		},

		// allow jQuery position utility to reposition the keyboard on window resize
		reposition: true,

		// preview added above keyboard if true, original input/textarea used if false
		usePreview: true,

		// if true, the keyboard will always be visible
		alwaysOpen: false,

		// give the preview initial focus when the keyboard becomes visible
		initialFocus: true,

		// avoid changing the focus (hardware keyboard probably won't work)
		noFocus: false,

		// if true, keyboard will remain open even if the input loses focus, but closes on escape
		// or when another keyboard opens.
		stayOpen: false,

		// Prevents the keyboard from closing when the user clicks or presses outside the keyboard
		// the `autoAccept` option must also be set to true when this option is true or changes are lost
		userClosed: false,

		// if true, keyboard will not close if you press escape.
		ignoreEsc: false,

		// if true, keyboard will only closed on click event instead of mousedown and touchstart
		closeByClickEvent: false,

		css: {
			// input & preview
			input: 'ui-widget-content ui-corner-all',
			// keyboard container
			container: 'ui-widget-content ui-widget ui-corner-all ui-helper-clearfix',
			// keyboard container extra class (same as container, but separate)
			popup: '',
			// default state
			buttonDefault: 'ui-state-default ui-corner-all',
			// hovered button
			buttonHover: 'ui-state-hover',
			// Action keys (e.g. Accept, Cancel, Tab, etc); this replaces 'actionClass' option
			buttonAction: 'ui-state-active',
			// Active keys (e.g. shift down, meta keyset active, combo keys active)
			buttonActive: 'ui-state-active',
			// used when disabling the decimal button {dec} when a decimal exists in the input area
			buttonDisabled: 'ui-state-disabled',
			buttonEmpty: 'ui-keyboard-empty'
		},

		// *** Useability ***
		// Auto-accept content when clicking outside the keyboard (popup will close)
		autoAccept: false,
		// Auto-accept content even if the user presses escape (only works if `autoAccept` is `true`)
		autoAcceptOnEsc: false,

		// Prevents direct input in the preview window when true
		lockInput: false,

		// Prevent keys not in the displayed keyboard from being typed in
		restrictInput: false,
		// Additional allowed characters while restrictInput is true
		restrictInclude: '', // e.g. 'a b foo \ud83d\ude38'

		// Check input against validate function, if valid the accept button gets a class name of
		// 'ui-keyboard-valid-input'. If invalid, the accept button gets a class name of
		// 'ui-keyboard-invalid-input'
		acceptValid: false,
		// Auto-accept when input is valid; requires `acceptValid` set `true` & validate callback
		autoAcceptOnValid: false,
		// Check validation on keyboard initialization. If false, the "Accept" key state (color)
		// will not change to show if the content is valid, or not
		checkValidOnInit: true,

		// if acceptValid is true & the validate function returns a false, this option will cancel
		// a keyboard close only after the accept button is pressed
		cancelClose: true,

		// tab to go to next, shift-tab for previous (default behavior)
		tabNavigation: false,

		// enter for next input; shift+enter accepts content & goes to next
		// shift + 'enterMod' + enter ('enterMod' is the alt as set below) will accept content and go
		// to previous in a textarea
		enterNavigation: false,
		// mod key options: 'ctrlKey', 'shiftKey', 'altKey', 'metaKey' (MAC only)
		enterMod: 'altKey', // alt-enter to go to previous; shift-alt-enter to accept & go to previous

		// if true, the next button will stop on the last keyboard input/textarea; prev button stops at first
		// if false, the next button will wrap to target the first input/textarea; prev will go to the last
		stopAtEnd: true,

		// Set this to append the keyboard after the input/textarea (appended to the input/textarea parent).
		// This option works best when the input container doesn't have a set width & when the 'tabNavigation'
		// option is true.
		appendLocally: false,
		// When appendLocally is false, the keyboard will be appended to this object
		appendTo: 'body',

		// Wrap all <br>s inside of a contenteditable in a div; without wrapping, the caret
		// position will not be accurate
		wrapBRs: true,

		// If false, the shift key will remain active until the next key is (mouse) clicked on; if true it will
		// stay active until pressed again
		stickyShift: true,

		// Prevent pasting content into the area
		preventPaste: false,

		// caret placed at the end of any text when keyboard becomes visible
		caretToEnd: false,

		// caret stays this many pixels from the edge of the input while scrolling left/right;
		// use "c" or "center" to center the caret while scrolling
		scrollAdjustment: 10,

		// Set the max number of characters allowed in the input, setting it to false disables this option
		maxLength: false,
		// allow inserting characters @ caret when maxLength is set
		maxInsert: true,

		// Mouse repeat delay - when clicking/touching a virtual keyboard key, after this delay the key will
		// start repeating
		repeatDelay: 500,

		// Mouse repeat rate - after the repeatDelay, this is the rate (characters per second) at which the
		// key is repeated Added to simulate holding down a real keyboard key and having it repeat. I haven't
		// calculated the upper limit of this rate, but it is limited to how fast the javascript can process
		// the keys. And for me, in Firefox, it's around 20.
		repeatRate: 20,

		// resets the keyboard to the default keyset when visible
		resetDefault: true,

		// Event (namespaced) on the input to reveal the keyboard. To disable it, just set it to ''.
		openOn: 'focus',

		// enable the keyboard on readonly inputs
		activeOnReadonly: false,

		// Event (namepaced) for when the character is added to the input (clicking on the keyboard)
		keyBinding: 'mousedown touchstart',

		// enable/disable mousewheel functionality
		// enabling still depends on the mousewheel plugin
		useWheel: true,

		// combos (emulate dead keys : http://en.wikipedia.org/wiki/Keyboard_layout#US-International)
		// if user inputs `a the script converts it to , ^o becomes , etc.
		useCombos: true,

		/*
			// *** Methods ***
			// commenting these out to reduce the size of the minified version
			// Callbacks - attach a function to any of these callbacks as desired
			initialized   : function(e, keyboard, el) {},
			beforeVisible : function(e, keyboard, el) {},
			visible       : function(e, keyboard, el) {},
			beforeInsert  : function(e, keyboard, el, textToAdd) { return textToAdd; },
			change        : function(e, keyboard, el) {},
			beforeClose   : function(e, keyboard, el, accepted) {},
			accepted      : function(e, keyboard, el) {},
			canceled      : function(e, keyboard, el) {},
			restricted    : function(e, keyboard, el) {},
			hidden        : function(e, keyboard, el) {},
			// called instead of base.switchInput
			switchInput   : function(keyboard, goToNext, isAccepted) {},
			// used if you want to create a custom layout or modify the built-in keyboard
			create        : function(keyboard) { return keyboard.buildKeyboard(); },

			// build key callback
			buildKey : function( keyboard, data ) {
				/ *
				data = {
				// READ ONLY
				isAction : [boolean] true if key is an action key
				name     : [string]  key class name suffix ( prefix = 'ui-keyboard-' );
														 may include decimal ascii value of character
				value    : [string]  text inserted (non-action keys)
				title    : [string]  title attribute of key
				action   : [string]  keyaction name
				html     : [string]  HTML of the key; it includes a <span> wrapping the text
				// use to modify key HTML
				$key     : [object]  jQuery selector of key which is already appended to keyboard
				}
				* /
				return data;
			},
		*/

		// this callback is called, if the acceptValid is true, and just before the 'beforeClose' to check
		// the value if the value is valid, return true and the keyboard will continue as it should
		// (close if not always open, etc). If the value is not valid, return false and clear the keyboard
		// value ( like this "keyboard.$preview.val('');" ), if desired. The validate function is called after
		// each input, the 'isClosing' value will be false; when the accept button is clicked,
		// 'isClosing' is true
		validate: function (/* keyboard, value, isClosing */) {
			return true;
		}

	};

	// for checking combos
	$keyboard.comboRegex = /([`\'~\^\"ao])([a-z])/mig;

	// store current keyboard element; used by base.isCurrent()
	$keyboard.currentKeyboard = '';

	$('<!--[if lte IE 8]><script>jQuery("body").addClass("oldie");</script><![endif]--><!--[if IE]>' +
			'<script>jQuery("body").addClass("ie");</script><![endif]-->')
		.appendTo('body')
		.remove();
	$keyboard.msie = $('body').hasClass('oldie'); // Old IE flag, used for caret positioning
	$keyboard.allie = $('body').hasClass('ie');

	$keyboard.watermark = (typeof (document.createElement('input').placeholder) !== 'undefined');

	$keyboard.checkCaretSupport = function () {
		if (typeof $keyboard.checkCaret !== 'boolean') {
			// Check if caret position is saved when input is hidden or loses focus
			// (*cough* all versions of IE and I think Opera has/had an issue as well
			var $temp = $('<div style="height:0px;width:0px;overflow:hidden;position:fixed;top:0;left:-100px;">' +
				'<input type="text" value="testing"/></div>').prependTo('body'); // stop page scrolling
			$keyboard.caret($temp.find('input'), 3, 3);
			// Also save caret position of the input if it is locked
			$keyboard.checkCaret = $keyboard.caret($temp.find('input').hide().show()).start !== 3;
			$temp.remove();
		}
		return $keyboard.checkCaret;
	};

	$keyboard.caret = function($el, param1, param2) {
		if (!$el || !$el.length || $el.is(':hidden') || $el.css('visibility') === 'hidden') {
			return {};
		}
		var start, end, txt, pos,
			kb = $el.data( 'keyboard' ),
			noFocus = kb && kb.options.noFocus,
			formEl = /(textarea|input)/i.test($el[0].nodeName);
		if (!noFocus) { $el.focus(); }
		// set caret position
		if (typeof param1 !== 'undefined') {
			// allow setting caret using ( $el, { start: x, end: y } )
			if (typeof param1 === 'object' && 'start' in param1 && 'end' in param1) {
				start = param1.start;
				end = param1.end;
			} else if (typeof param2 === 'undefined') {
				param2 = param1; // set caret using start position
			}
			// set caret using ( $el, start, end );
			if (typeof param1 === 'number' && typeof param2 === 'number') {
				start = param1;
				end = param2;
			} else if ( param1 === 'start' ) {
				start = end = 0;
			} else if ( typeof param1 === 'string' ) {
				// unknown string setting, move caret to end
				start = end = 'end';
			}

			// *** SET CARET POSITION ***
			// modify the line below to adapt to other caret plugins
			return formEl ?
				$el.caret( start, end, noFocus ) :
				$keyboard.setEditableCaret( $el, start, end );
		}
		// *** GET CARET POSITION ***
		// modify the line below to adapt to other caret plugins
		if (formEl) {
			// modify the line below to adapt to other caret plugins
			pos = $el.caret();
		} else {
			// contenteditable
			pos = $keyboard.getEditableCaret($el[0]);
		}
		start = pos.start;
		end = pos.end;

		// *** utilities ***
		txt = formEl && $el[0].value || $el.text() || '';
		return {
			start : start,
			end : end,
			// return selected text
			text : txt.substring( start, end ),
			// return a replace selected string method
			replaceStr : function( str ) {
				return txt.substring( 0, start ) + str + txt.substring( end, txt.length );
			}
		};
	};

	$keyboard.isTextNode = function(el) {
		return el && el.nodeType === 3;
	};

	$keyboard.isBlock = function(el, node) {
		var win = el.ownerDocument.defaultView;
		if (
			node && node.nodeType === 1 && node !== el &&
			win.getComputedStyle(node).display === 'block'
		) {
			return 1;
		}
		return 0;
	};

	// Wrap all BR's inside of contenteditable
	$keyboard.wrapBRs = function(container) {
		var $el = $(container).find('br:not(.' + $keyboard.css.divWrapperCE + ')');
		if ($el.length) {
			$.each($el, function(i, el) {
				var len = el.parentNode.childNodes.length;
				if (
					// wrap BRs if not solo child
					len !== 1 ||
					// Or if BR is wrapped by a span
					len === 1 && !$keyboard.isBlock(container, el.parentNode)
				) {
					$(el).addClass($keyboard.css.divWrapperCE).wrap('<div>');
				}
			});
		}
	};

	$keyboard.getEditableCaret = function(container) {
		container = $(container)[0];
		if (!container.isContentEditable) { return {}; }
		var end, text,
			options = ($(container).data('keyboard') || {}).options,
			doc = container.ownerDocument,
			range = doc.getSelection().getRangeAt(0),
			result = pathToNode(range.startContainer, range.startOffset),
			start = result.position;
		if (options.wrapBRs !== false) {
			$keyboard.wrapBRs(container);
		}
		function pathToNode(endNode, offset) {
			var node, adjust,
				txt = '',
				done = false,
				position = 0,
				nodes = $.makeArray(container.childNodes);

			function checkBlock(val) {
				if (val) {
					position += val;
					txt += options && options.replaceCR || '\n';
				}
			}

			while (!done && nodes.length) {
				node = nodes.shift();
				if (node === endNode) {
					done = true;
				}

				// Add one if previous sibling was a block node (div, p, etc)
				adjust = $keyboard.isBlock(container, node.previousSibling);
				checkBlock(adjust);

				if ($keyboard.isTextNode(node)) {
					position += done ? offset : node.length;
					txt += node.textContent;
					if (done) {
						return {position: position, text: txt};
					}
				} else if (!done && node.childNodes) {
					nodes = $.makeArray(node.childNodes).concat(nodes);
				}
				// Add one if we're inside a block node (div, p, etc)
				// and previous sibling was a text node
				adjust = $keyboard.isTextNode(node.previousSibling) && $keyboard.isBlock(container, node);
				checkBlock(adjust);
			}
			return {position: position, text: txt};
		}
		// check of start and end are the same
		if (range.endContainer === range.startContainer && range.endOffset === range.startOffset) {
			end = start;
			text = '';
		} else {
			result = pathToNode(range.endContainer, range.endOffset);
			end = result.position;
			text = result.text.substring(start, end);
		}
		return {
			start: start,
			end: end,
			text: text
		};
	};

	$keyboard.getEditableLength = function(container) {
		var result = $keyboard.setEditableCaret(container, 'getMax');
		// if not a number, the container is not a contenteditable element
		return typeof result === 'number' ? result : null;
	};

	$keyboard.setEditableCaret = function(container, start, end) {
		container = $(container)[0];
		if (!container.isContentEditable) { return {}; }
		var doc = container.ownerDocument,
			range = doc.createRange(),
			sel = doc.getSelection(),
			options = ($(container).data('keyboard') || {}).options,
			s = start,
			e = end,
			text = '',
			result = findNode(start === 'getMax' ? 'end' : start);
		function findNode(offset) {
			if (offset === 'end') {
				// Set some value > content length; but return max
				offset = container.innerHTML.length;
			} else if (offset < 0) {
				offset = 0;
			}
			var node, check,
				txt = '',
				done = false,
				position = 0,
				last = 0,
				max = 0,
				nodes = $.makeArray(container.childNodes);
			function updateText(val) {
				txt += val ? options && options.replaceCR || '\n' : '';
				return val > 0;
			}
			function checkDone(adj) {
				var val = position + adj;
				last = max;
				max += adj;
				if (offset - val >= 0) {
					position = val;
					return offset - position <= 0;
				}
				return offset - val <= 0;
			}
			while (!done && nodes.length) {
				node = nodes.shift();
				// Add one if the previous sibling was a block node (div, p, etc)
				check = $keyboard.isBlock(container, node.previousSibling);
				if (updateText(check) && checkDone(check)) {
					done = true;
				}
				// Add one if we're inside a block node (div, p, etc)
				check = $keyboard.isTextNode(node.previousSibling) && $keyboard.isBlock(container, node);
				if (updateText(check) && checkDone(check)) {
					done = true;
				}
				if ($keyboard.isTextNode(node)) {
					txt += node.textContent;
					if (checkDone(node.length)) {
						check = offset - position === 0 && position - last >= 1 ? node.length : offset - position;
						return {
							node: node,
							offset: check,
							position: offset,
							text: txt
						};
					}
				} else if (!done && node.childNodes) {
					nodes = $.makeArray(node.childNodes).concat(nodes);
				}
			}
			return nodes.length ?
				{node: node, offset: offset - position, position: offset, text: txt} :
				// Offset is larger than content, return max
				{node: node, offset: node && node.length || 0, position: max, text: txt};
		}
		if (result.node) {
			s = result.position; // Adjust if start > content length
			if (start === 'getMax') {
				return s;
			}
			range.setStart(result.node, result.offset);
			// Only find end if > start and is defined... this allows passing
			// setEditableCaret(el, 'end') or setEditableCaret(el, 10, 'end');
			if (typeof end !== 'undefined' && end !== start) {
				result = findNode(end);
			}
			if (result.node) {
				e = result.position; // Adjust if end > content length
				range.setEnd(result.node, result.offset);
				text = s === e ? '' : result.text.substring(s, e);
			}
			sel.removeAllRanges();
			sel.addRange(range);
		}
		return {
			start: s,
			end: e,
			text: text
		};
	};

	$keyboard.replaceContent = function (el, param) {
		el = $(el)[0];
		var node, i, str,
			type = typeof param,
			caret = $keyboard.getEditableCaret(el).start,
			charIndex = 0,
			nodeStack = [el];
		while ((node = nodeStack.pop())) {
			if ($keyboard.isTextNode(node)) {
				if (type === 'function') {
					if (caret >= charIndex && caret <= charIndex + node.length) {
						node.textContent = param(node.textContent);
					}
				} else if (type === 'string') {
					// maybe not the best method, but it works for simple changes
					str = param.substring(charIndex, charIndex + node.length);
					if (str !== node.textContent) {
						node.textContent = str;
					}
				}
				charIndex += node.length;
			} else if (node && node.childNodes) {
				i = node.childNodes.length;
				while (i--) {
					nodeStack.push(node.childNodes[i]);
				}
			}
		}
		i = $keyboard.getEditableCaret(el);
		$keyboard.setEditableCaret(el, i.start, i.start);
	};

	$.fn.keyboard = function (options) {
		return this.each(function () {
			if (!$(this).data('keyboard')) {
				/*jshint nonew:false */
				(new $.keyboard(this, options));
			}
		});
	};

	$.fn.getkeyboard = function () {
		return this.data('keyboard');
	};

	/* Copyright (c) 2010 C. F., Wong (<a href="http://cloudgen.w0ng.hk">Cloudgen Examplet Store</a>)
	 * Licensed under the MIT License:
	 * http://www.opensource.org/licenses/mit-license.php
	 * Highly modified from the original
	 */

	$.fn.caret = function (start, end, noFocus) {
		if (
			typeof this[0] === 'undefined' ||
			this.is(':hidden') ||
			this.css('visibility') === 'hidden' ||
			!/(INPUT|TEXTAREA)/i.test(this[0].nodeName)
		) {
			return this;
		}
		var selRange, range, stored_range, txt, val,
			$el = this,
			el = $el[0],
			selection = el.ownerDocument.selection,
			sTop = el.scrollTop,
			ss = false,
			supportCaret = true;
		try {
			ss = 'selectionStart' in el;
		} catch (err) {
			supportCaret = false;
		}
		if (supportCaret && typeof start !== 'undefined') {
			if (!/(email|number)/i.test(el.type)) {
				if (ss) {
					el.selectionStart = start;
					el.selectionEnd = end;
				} else {
					selRange = el.createTextRange();
					selRange.collapse(true);
					selRange.moveStart('character', start);
					selRange.moveEnd('character', end - start);
					selRange.select();
				}
			}
			// must be visible or IE8 crashes; IE9 in compatibility mode works fine - issue #56
			if (!noFocus && ($el.is(':visible') || $el.css('visibility') !== 'hidden')) {
				el.focus();
			}
			el.scrollTop = sTop;
			return this;
		}
		if (/(email|number)/i.test(el.type)) {
			// fix suggested by raduanastase (https://github.com/Mottie/Keyboard/issues/105#issuecomment-40456535)
			start = end = $el.val().length;
		} else if (ss) {
			start = el.selectionStart;
			end = el.selectionEnd;
		} else if (selection) {
			if (el.nodeName.toUpperCase() === 'TEXTAREA') {
				val = $el.val();
				range = selection.createRange();
				stored_range = range.duplicate();
				stored_range.moveToElementText(el);
				stored_range.setEndPoint('EndToEnd', range);
				// thanks to the awesome comments in the rangy plugin
				start = stored_range.text.replace(/\r/g, '\n').length;
				end = start + range.text.replace(/\r/g, '\n').length;
			} else {
				val = $el.val().replace(/\r/g, '\n');
				range = selection.createRange().duplicate();
				range.moveEnd('character', val.length);
				start = (range.text === '' ? val.length : val.lastIndexOf(range.text));
				range = selection.createRange().duplicate();
				range.moveStart('character', -val.length);
				end = range.text.length;
			}
		} else {
			// caret positioning not supported
			start = end = (el.value || '').length;
		}
		txt = (el.value || '');
		return {
			start: start,
			end: end,
			text: txt.substring(start, end),
			replace: function (str) {
				return txt.substring(0, start) + str + txt.substring(end, txt.length);
			}
		};
	};

	return $keyboard;

}));


/***/ }),
/* 5 */
/***/ (function(module, exports) {

module.exports = jQuery;

/***/ }),
/* 6 */
/***/ (function(module, exports) {

/**
               _ _____           _          _     _      
              | |  __ \         (_)        | |   | |     
      ___ ___ | | |__) |___  ___ _ ______ _| |__ | | ___ 
     / __/ _ \| |  _  // _ \/ __| |_  / _` | '_ \| |/ _ \
    | (_| (_) | | | \ \  __/\__ \ |/ / (_| | |_) | |  __/
     \___\___/|_|_|  \_\___||___/_/___\__,_|_.__/|_|\___|
	 
	v1.7 - jQuery plugin created by Alvaro Prieto Lauroba
	
	Licences: MIT & GPL
	Feel free to use or modify this plugin as far as my full name is kept	
*/

(function($){ 	
	
	//IE8 Polyfill
	if(!Array.indexOf) { Array.prototype.indexOf = function(obj) { for(var i=0; i<this.length;i++){if(this[i]==obj){return i;}} return -1; }}
	
	var d = $(document); 		//window object
	var h = $("head");			//head object
	var drag = null;			//reference to the current grip that is being dragged
	var tables = {};			//object of the already processed tables (table.id as key)
	var	count = 0;				//internal count to create unique IDs when needed.	
	
	//common strings for packing
	var ID = "id";	
	var PX = "px";
	var SIGNATURE ="JColResizer";
    var FLEX = "JCLRFlex";
	
	//short-cuts
	var I = parseInt;
	var M = Math;
	var ie = navigator.userAgent.indexOf('Trident/4.0')>0;
	var S;
    var pad = ""
	try{S = sessionStorage;}catch(e){}	//Firefox crashes when executed as local file system
    
	
	//append required CSS rules  
    h.append("<style type='text/css'>  .JColResizer{table-layout:fixed;} .JColResizer > tbody > tr > td, .JColResizer > tbody > tr > th{overflow:hidden}  .JPadding > tbody > tr > td, .JPadding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .JCLRgrips{ height:0px; position:relative;} .JCLRgrip{margin-left:-5px; position:absolute; z-index:5; } .JCLRgrip .JColResizer{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .JCLRLastGrip{position:absolute; width:1px; } .JCLRgripDrag{ border-left:1px dotted black;	} .JCLRFlex{width:auto!important;} .JCLRgrip.JCLRdisabledGrip .JColResizer{cursor:default; display:none;}</style>");

	
	/**
	 * Function to allow column resizing for table objects. It is the starting point to apply the plugin.
	 * @param {DOM node} tb - reference to the DOM table object to be enhanced
	 * @param {Object} options	- some customization values
	 */
	var init = function( tb, options){	
		var t = $(tb);				    //the table object is wrapped
        t.opt = options;                //each table has its own options available at anytime
        t.mode = options.resizeMode;    //shortcuts
        t.dc = t.opt.disabledColumns;
        if(t.opt.removePadding) t.addClass("JPadding");
		if(t.opt.disable) return destroy(t);				//the user is asking to destroy a previously colResized table
		var	id = t.id = t.attr(ID) || SIGNATURE+count++;	//its id is obtained, if null new one is generated		
		t.p = t.opt.postbackSafe; 							//short-cut to detect postback safe 		
		if(!t.is("table") || tables[id] && !t.opt.partialRefresh) return; 		//if the object is not a table or if it was already processed then it is ignored.
		if (t.opt.hoverCursor !== 'col-resize') h.append("<style type='text/css'>.JCLRgrip .JColResizer:hover{cursor:"+ t.opt.hoverCursor +"!important}</style>");  //if hoverCursor has been set, append the style
        t.addClass(SIGNATURE).attr(ID, id).before('<div class="JCLRgrips"/>');	//the grips container object is added. Signature class forces table rendering in fixed-layout mode to prevent column's min-width
		t.g = []; t.c = []; t.w = t.width(); t.gc = t.prev(); t.f=t.opt.fixed;	//t.c and t.g are arrays of columns and grips respectively				
		if(options.marginLeft) t.gc.css("marginLeft", options.marginLeft);  	//if the table contains margins, it must be specified
		if(options.marginRight) t.gc.css("marginRight", options.marginRight);  	//since there is no (direct) way to obtain margin values in its original units (%, em, ...)
		t.cs = I(ie? tb.cellSpacing || tb.currentStyle.borderSpacing :t.css('border-spacing'))||2;	//table cellspacing (not even jQuery is fully cross-browser)
		t.b  = I(ie? tb.border || tb.currentStyle.borderLeftWidth :t.css('border-left-width'))||1;	//outer border width (again cross-browser issues)
		// if(!(tb.style.width || tb.width)) t.width(t.width()); //I am not an IE fan at all, but it is a pity that only IE has the currentStyle attribute working as expected. For this reason I can not check easily if the table has an explicit width or if it is rendered as "auto"
		tables[id] = t; 	//the table object is stored using its id as key	
		createGrips(t);		//grips are created 
	
	};


	/**
	 * This function allows to remove any enhancements performed by this plugin on a previously processed table.
	 * @param {jQuery ref} t - table object
	 */
	var destroy = function(t){
		var id=t.attr(ID), t=tables[id];		//its table object is found
		if(!t||!t.is("table")) return;			//if none, then it wasn't processed	 
		t.removeClass(SIGNATURE+" "+FLEX).gc.remove();	//class and grips are removed
		delete tables[id];						//clean up data
	};


	/**
	 * Function to create all the grips associated with the table given by parameters 
	 * @param {jQuery ref} t - table object
	 */
	var createGrips = function(t){	
	
        var th = t.find(">thead>tr:first>th,>thead>tr:first>td"); //table headers are obtained
		if(!th.length) th = t.find(">tbody>tr:first>th,>tr:first>th,>tbody>tr:first>td, >tr:first>td");	 //but headers can also be included in different ways
		th = th.filter(":visible");					//filter invisible columns
		t.cg = t.find("col"); 						//a table can also contain a colgroup with col elements		
		t.ln = th.length;							//table length is stored	
		if(t.p && S && S[t.id])memento(t,th);		//if 'postbackSafe' is enabled and there is data for the current table, its coloumn layout is restored
		th.each(function(i){						//iterate through the table column headers			
			var c = $(this); 						//jquery wrap for the current column		
            var dc = t.dc.indexOf(i)!=-1;           //is this a disabled column?
			var g = $(t.gc.append('<div class="JCLRgrip"></div>')[0].lastChild); //add the visual node to be used as grip
            g.append(dc ? "": t.opt.gripInnerHtml).append('<div class="'+SIGNATURE+'"></div>');
            if(i == t.ln-1){                        //if the current grip is the las one 
                g.addClass("JCLRLastGrip");         //add a different css class to stlye it in a different way if needed
                if(t.f) g.html("");                 //if the table resizing mode is set to fixed, the last grip is removed since table with can not change
            }
            g.bind('touchstart mousedown', onGripMouseDown); //bind the mousedown event to start dragging 
            
            if (!dc){ 
                //if normal column bind the mousedown event to start dragging, if disabled then apply its css class
                g.removeClass('JCLRdisabledGrip').bind('touchstart mousedown', onGripMouseDown);      
            }else{
                g.addClass('JCLRdisabledGrip'); 
            }

			g.t = t; g.i = i; g.c = c;	c.w =c.width();		//some values are stored in the grip's node data as shortcut
			t.g.push(g); t.c.push(c);						//the current grip and column are added to its table object
			c.width(c.w).removeAttr("width");				//the width of the column is converted into pixel-based measurements
			g.data(SIGNATURE, {i:i, t:t.attr(ID), last: i == t.ln-1});	 //grip index and its table name are stored in the HTML 												
		}); 	
		t.cg.removeAttr("width");	//remove the width attribute from elements in the colgroup 

		t.find('td, th').not(th).not('table th, table td').each(function(){  
			$(this).removeAttr('width');	//the width attribute is removed from all table cells which are not nested in other tables and dont belong to the header
		});		
        if(!t.f){
            t.removeAttr('width').addClass(FLEX); //if not fixed, let the table grow as needed
        }
        syncGrips(t); 				//the grips are positioned according to the current table layout			
        //there is a small problem, some cells in the table could contain dimension values interfering with the 
        //width value set by this plugin. Those values are removed
		
	};
	
    
	/**
	 * Function to allow the persistence of columns dimensions after a browser postback. It is based in
	 * the HTML5 sessionStorage object, which can be emulated for older browsers using sessionstorage.js
	 * @param {jQuery ref} t - table object
	 * @param {jQuery ref} th - reference to the first row elements (only set in deserialization)
	 */
	var memento = function(t, th){ 
		var w,m=0,i=0,aux =[],tw;
		if(th){										//in deserialization mode (after a postback)
			t.cg.removeAttr("width");
			if(t.opt.flush){ S[t.id] =""; return;} 	//if flush is activated, stored data is removed
			w = S[t.id].split(";");					//column widths is obtained
			tw = w[t.ln+1];
            if(!t.f && tw){							//if not fixed and table width data available its size is restored
                t.width(tw*=1);
                if(t.opt.overflow) {				//if overfolw flag is set, restore table width also as table min-width
                    t.css('min-width', tw + PX);
                    t.w = tw;
                }
            }
			for(;i<t.ln;i++){						//for each column
				aux.push(100*w[i]/w[t.ln]+"%"); 	//width is stored in an array since it will be required again a couple of lines ahead
				th.eq(i).css("width", aux[i] ); 	//each column width in % is restored
			}			
			for(i=0;i<t.ln;i++)
				t.cg.eq(i).css("width", aux[i]);	//this code is required in order to create an inline CSS rule with higher precedence than an existing CSS class in the "col" elements
		}else{							//in serialization mode (after resizing a column)
			S[t.id] ="";				//clean up previous data
			for(;i < t.c.length; i++){	//iterate through columns
				w = t.c[i].width();		//width is obtained
				S[t.id] += w+";";		//width is appended to the sessionStorage object using ID as key
				m+=w;					//carriage is updated to obtain the full size used by columns
			}
			S[t.id]+=m;							//the last item of the serialized string is the table's active area (width), 
												//to be able to obtain % width value of each columns while deserializing
			if(!t.f) S[t.id] += ";"+t.width(); 	//if not fixed, table width is stored
		}	
	};
	
	
	/**
	 * Function that places each grip in the correct position according to the current table layout	 
	 * @param {jQuery ref} t - table object
	 */
	var syncGrips = function (t){	
		t.gc.width(t.w);			//the grip's container width is updated				
		for(var i=0; i<t.ln; i++){	//for each column
			var c = t.c[i]; 			
			t.g[i].css({			//height and position of the grip is updated according to the table layout
				left: c.offset().left - t.offset().left + c.outerWidth(false) + t.cs / 2 + PX,
				height: t.opt.headerOnly? t.c[0].outerHeight(false) : t.outerHeight(false)				
			});			
		} 	
	};
	
	
	
	/**
	* This function updates column's width according to the horizontal position increment of the grip being
	* dragged. The function can be called while dragging if liveDragging is enabled and also from the onGripDragOver
	* event handler to synchronize grip's position with their related columns.
	* @param {jQuery ref} t - table object
	* @param {number} i - index of the grip being dragged
	* @param {bool} isOver - to identify when the function is being called from the onGripDragOver event	
	*/
	var syncCols = function(t,i,isOver){
		var inc = drag.x-drag.l, c = t.c[i], c2 = t.c[i+1]; 			
		var w = c.w + inc;	var w2= c2.w- inc;	//their new width is obtained					
		c.width( w + PX);			
		t.cg.eq(i).width( w + PX); 
        if(t.f){ //if fixed mode
            c2.width(w2 + PX);
            t.cg.eq(i+1).width( w2 + PX);
        }else if(t.opt.overflow) {				//if overflow is set, incriment min-width to force overflow
            t.css('min-width', t.w + inc);
        }
		if(isOver){
            c.w=w; 
            c2.w= t.f ? w2 : c2.w;
        }
	};

	
	/**
	* This function updates all columns width according to its real width. It must be taken into account that the 
	* sum of all columns can exceed the table width in some cases (if fixed is set to false and table has some kind 
	* of max-width).
	* @param {jQuery ref} t - table object	
	*/
	var applyBounds = function(t){
        var w = $.map(t.c, function(c){			//obtain real widths
            return c.width();
        });
        t.width(t.w = t.width()).removeClass(FLEX);	//prevent table width changes
        $.each(t.c, function(i,c){
            c.width(w[i]).w = w[i];				//set column widths applying bounds (table's max-width)
        });
		t.addClass(FLEX);						//allow table width changes
	};
	
	
	/**
	 * Event handler used while dragging a grip. It checks if the next grip's position is valid and updates it. 
	 * @param {event} e - mousemove event binded to the window object
	 */
	var onGripDrag = function(e){	
		if(!drag) return; 
        var t = drag.t;		//table object reference 
        var oe = e.originalEvent.touches;
        var ox = oe ? oe[0].pageX : e.pageX;    //original position (touch or mouse)
        var x =  ox - drag.ox + drag.l;	        //next position according to horizontal mouse position increment
		var mw = t.opt.minWidth, i = drag.i ;	//cell's min width
		var l = t.cs*1.5 + mw + t.b;
        var last = i == t.ln-1;                 			//check if it is the last column's grip (usually hidden)
        var min = i? t.g[i-1].position().left+t.cs+mw: l;	//min position according to the contiguous cells
		var max = t.f ? 	//fixed mode?
			i == t.ln-1? 
				t.w-l: 
				t.g[i+1].position().left-t.cs-mw:
			Infinity; 								//max position according to the contiguous cells 
		x = M.max(min, M.min(max, x));				//apply bounding		
		drag.x = x;	 drag.css("left",  x + PX); 	//apply position increment	
        if(last){									//if it is the last grip
            var c = t.c[drag.i];					//width of the last column is obtained
			drag.w = c.w + x- drag.l;         
        }              
		if(t.opt.liveDrag){ 			//if liveDrag is enabled
			if(last){
			    c.width(drag.w);
                if(!t.f && t.opt.overflow){			//if overflow is set, incriment min-width to force overflow
                   t.css('min-width', t.w + x - drag.l);
                }else {
                    t.w = t.width();
                }
			}else{
				syncCols(t,i); 			//columns are synchronized
			}
			syncGrips(t);
			var cb = t.opt.onDrag;							//check if there is an onDrag callback
			if (cb) { e.currentTarget = t[0]; cb(e); }		//if any, it is fired			
		}
		return false; 	//prevent text selection while dragging				
	};
	

	/**
	 * Event handler fired when the dragging is over, updating table layout
     * @param {event} e - grip's drag over event
	 */
	var onGripDragOver = function(e){	
		
		d.unbind('touchend.'+SIGNATURE+' mouseup.'+SIGNATURE).unbind('touchmove.'+SIGNATURE+' mousemove.'+SIGNATURE);
		$("head :last-child").remove(); 				//remove the dragging cursor style	
		if(!drag) return;
		drag.removeClass(drag.t.opt.draggingClass);		//remove the grip's dragging css-class
        if (!(drag.x - drag.l == 0)) {
            var t = drag.t;
            var cb = t.opt.onResize; 	    //get some values	
            var i = drag.i;                 //column index
            var last = i == t.ln-1;         //check if it is the last column's grip (usually hidden)
            var c = t.g[i].c;               //the column being dragged
            if(last){
                c.width(drag.w);
                c.w = drag.w;
            }else{
                syncCols(t, i, true);	//the columns are updated
            }
            if(!t.f) applyBounds(t);	//if not fixed mode, then apply bounds to obtain real width values
            syncGrips(t);				//the grips are updated
            if (cb) { e.currentTarget = t[0]; cb(e); }	//if there is a callback function, it is fired
            if(t.p && S) memento(t); 	//if postbackSafe is enabled and there is sessionStorage support, the new layout is serialized and stored
        }
		drag = null;   //since the grip's dragging is over									
	};	
	
	
	/**
	 * Event handler fired when the grip's dragging is about to start. Its main goal is to set up events 
	 * and store some values used while dragging.
     * @param {event} e - grip's mousedown event
	 */
	var onGripMouseDown = function(e){
		var o = $(this).data(SIGNATURE);			//retrieve grip's data
		var t = tables[o.t],  g = t.g[o.i];			//shortcuts for the table and grip objects
        var oe = e.originalEvent.touches;           //touch or mouse event?
        g.ox = oe? oe[0].pageX: e.pageX;            //the initial position is kept
		g.l = g.position().left;
        g.x = g.l;
        
		d.bind('touchmove.'+SIGNATURE+' mousemove.'+SIGNATURE, onGripDrag ).bind('touchend.'+SIGNATURE+' mouseup.'+SIGNATURE, onGripDragOver);	//mousemove and mouseup events are bound
		h.append("<style type='text/css'>*{cursor:"+ t.opt.dragCursor +"!important}</style>"); 	//change the mouse cursor
		g.addClass(t.opt.draggingClass); 	//add the dragging class (to allow some visual feedback)				
		drag = g;							//the current grip is stored as the current dragging object
		if(t.c[o.i].l) for(var i=0,c; i<t.ln; i++){ c=t.c[i]; c.l = false; c.w= c.width(); } 	//if the colum is locked (after browser resize), then c.w must be updated		
		return false; 	//prevent text selection
	};
    
    
	/**
	 * Event handler fired when the browser is resized. The main purpose of this function is to update
	 * table layout according to the browser's size synchronizing related grips 
	 */
	var onResize = function(){
		for(var t in tables){
            if( tables.hasOwnProperty( t ) ) {
                t = tables[t];
                var i, mw=0;
                t.removeClass(SIGNATURE);   //firefox doesn't like layout-fixed in some cases
                if (t.f) {                  //in fixed mode
                    t.w = t.width();        //its new width is kept
                    for(i=0; i<t.ln; i++) mw+= t.c[i].w;		
                    //cell rendering is not as trivial as it might seem, and it is slightly different for
                    //each browser. In the beginning i had a big switch for each browser, but since the code
                    //was extremely ugly now I use a different approach with several re-flows. This works 
                    //pretty well but it's a bit slower. For now, lets keep things simple...   
                    for(i=0; i<t.ln; i++) t.c[i].css("width", M.round(1000*t.c[i].w/mw)/10 + "%").l=true; 
                    //c.l locks the column, telling us that its c.w is outdated									
                }else{     //in non fixed-sized tables
                    applyBounds(t);         //apply the new bounds 
                    if(t.mode == 'flex' && t.p && S){   //if postbackSafe is enabled and there is sessionStorage support,
                        memento(t);                     //the new layout is serialized and stored for 'flex' tables
                    }
                }
                syncGrips(t.addClass(SIGNATURE));
            }
		} 
		
	};		


	//bind resize event, to update grips position 
	$(window).bind('resize.'+SIGNATURE, onResize); 


	/**
	 * The plugin is added to the jQuery library
	 * @param {Object} options -  an object that holds some basic customization values 
	 */
    $.fn.extend({  
        colResizable: function(options) {           
            var defaults = {
			
				//attributes:
                
                resizeMode: 'fit',                    //mode can be 'fit', 'flex' or 'overflow'
                draggingClass: 'JCLRgripDrag',	//css-class used when a grip is being dragged (for visual feedback purposes)
				gripInnerHtml: '',				//if it is required to use a custom grip it can be done using some custom HTML				
				liveDrag: false,				//enables table-layout updating while dragging	
				minWidth: 15, 					//minimum width value in pixels allowed for a column 
				headerOnly: false,				//specifies that the size of the the column resizing anchors will be bounded to the size of the first row 
				hoverCursor: "col-resize",  		//cursor to be used on grip hover
				dragCursor: "col-resize",  		//cursor to be used while dragging
				postbackSafe: false, 			//when it is enabled, table layout can persist after postback or page refresh. It requires browsers with sessionStorage support (it can be emulated with sessionStorage.js). 
				flush: false, 					//when postbakSafe is enabled, and it is required to prevent layout restoration after postback, 'flush' will remove its associated layout data 
				marginLeft: null,				//in case the table contains any margins, colResizable needs to know the values used, e.g. "10%", "15em", "5px" ...
				marginRight: null, 				//in case the table contains any margins, colResizable needs to know the values used, e.g. "10%", "15em", "5px" ...
				disable: false,					//disables all the enhancements performed in a previously colResized table	
				partialRefresh: false,			//can be used in combination with postbackSafe when the table is inside of an updatePanel,
                disabledColumns: [],            //column indexes to be excluded
                removePadding: true,           //for some uses (such as multiple range slider), it is advised to set this modifier to true, it will remove padding from the header cells.

				//events:
				onDrag: null, 					//callback function to be fired during the column resizing process if liveDrag is enabled
				onResize: null					//callback function fired when the dragging process is over
            }			
			var options =  $.extend(defaults, options);		
            
            //since now there are 3 different ways of resizing columns, I changed the external interface to make it clear
            //calling it 'resizeMode' but also to remove the "fixed" attribute which was confusing for many people
            options.fixed = true;
            options.overflow = false;
            switch(options.resizeMode){
                case 'flex': options.fixed = false; break;
                case 'overflow': options.fixed = false; options.overflow = true; break;
            }

            return this.each(function() {				
             	init( this, options);             
            });
        }
    });
})(jQuery);



/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

var content = __webpack_require__(8);

if (typeof content === 'string') {
  content = [[module.i, content, '']];
}

var options = {}

options.insert = "head";
options.singleton = false;

var update = __webpack_require__(1)(content, options);

if (content.locals) {
  module.exports = content.locals;
}


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(0)(false);
// Imports
var getUrl = __webpack_require__(9);
var ___CSS_LOADER_URL___0___ = getUrl(__webpack_require__(10));
var ___CSS_LOADER_URL___1___ = getUrl(__webpack_require__(11));
var ___CSS_LOADER_URL___2___ = getUrl(__webpack_require__(12));
var ___CSS_LOADER_URL___3___ = getUrl(__webpack_require__(13));
var ___CSS_LOADER_URL___4___ = getUrl(__webpack_require__(14));
var ___CSS_LOADER_URL___5___ = getUrl(__webpack_require__(15));
var ___CSS_LOADER_URL___6___ = getUrl(__webpack_require__(16));
var ___CSS_LOADER_URL___7___ = getUrl(__webpack_require__(17));
var ___CSS_LOADER_URL___8___ = getUrl(__webpack_require__(18));
var ___CSS_LOADER_URL___9___ = getUrl(__webpack_require__(19));
var ___CSS_LOADER_URL___10___ = getUrl(__webpack_require__(20));
// Module
exports.push([module.i, "/* cyrillic-ext */\r\n\r\n@font-face {\r\n    font-family: 'Roboto';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    src: url(" + ___CSS_LOADER_URL___0___ + ") format('truetype');\r\n    unicode-range: U+0000-007F;\r\n}\r\n\r\n#secukit-wrapper {\r\n    --blue: #007bff;\r\n    --indigo: #6610f2;\r\n    --purple: #6f42c1;\r\n    --pink: #e83e8c;\r\n    --red: #dc3545;\r\n    --orange: #fd7e14;\r\n    --yellow: #ffc107;\r\n    --green: #28a745;\r\n    --teal: #20c997;\r\n    --cyan: #17a2b8;\r\n    --white: #fff;\r\n    --gray: #6c757d;\r\n    --gray-dark: #343a40;\r\n    --primary: #007bff;\r\n    --secondary: #6c757d;\r\n    --success: #28a745;\r\n    --info: #17a2b8;\r\n    --warning: #ffc107;\r\n    --danger: #dc3545;\r\n    --light: #f8f9fa;\r\n    --dark: #343a40;\r\n    --breakpoint-xs: 0;\r\n    --breakpoint-sm: 576px;\r\n    --breakpoint-md: 768px;\r\n    --breakpoint-lg: 992px;\r\n    --breakpoint-xl: 1200px;\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    font-size: 12px;\r\n    line-height: 1;\r\n    color: black;\r\n    z-index: 9998;\r\n    font-family: 'Roboto', sans-serif;\r\n    letter-spacing: 0px;\r\n    background: rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n#secukit-wrapper *,\r\n#secukit-wrapper *::before,\r\n#secukit-wrapper *::after {\r\n    -webkit-box-sizing: border-box;\r\n    box-sizing: border-box;\r\n}\r\n\r\n#secukit-wrapper hr {\r\n    box-sizing: content-box;\r\n    height: 0;\r\n    overflow: visible;\r\n    visibility: visible;\r\n    width: inherit;\r\n    height: 0;\r\n}\r\n\r\n#secukit-wrapper h1,\r\n#secukit-wrapper h2,\r\n#secukit-wrapper h3,\r\n#secukit-wrapper h4,\r\n#secukit-wrapper h5,\r\n#secukit-wrapper h6 {\r\n    font-weight: 500;\r\n    margin-top: 0;\r\n    margin-bottom: 0.83em;\r\n}\r\n\r\n#secukit-wrapper p {\r\n    margin-top: 0;\r\n    margin-bottom: 1rem;\r\n}\r\n\r\n#secukit-wrapper a:hover {\r\n    color: #0056b3 !important;\r\n    text-decoration: none;\r\n}\r\n\r\n#secukit-wrapper a:not([href]):not([tabindex]) {\r\n    color: inherit;\r\n    text-decoration: none;\r\n}\r\n\r\n#secukit-wrapper a:not([href]):not([tabindex]):hover,\r\na:not([href]):not([tabindex]):focus {\r\n    color: inherit;\r\n    text-decoration: none;\r\n}\r\n\r\n#secukit-wrapper a:not([href]):not([tabindex]):focus {\r\n    outline: 0;\r\n}\r\n\r\n#secukit-wrapper table {\r\n    border-collapse: collapse;\r\n}\r\n\r\n#secukit-wrapper th {\r\n    text-align: inherit-center;\r\n}\r\n\r\n#secukit-wrapper label {\r\n    display: inline-block;\r\n    margin-bottom: 0.5rem;\r\n}\r\n\r\n#secukit-wrapper button:focus {\r\n    outline: 1px dotted;\r\n    outline: 5px auto -webkit-focus-ring-color;\r\n}\r\n\r\n#secukit-wrapper input,\r\n#secukit-wrapper button,\r\n#secukit-wrapper select,\r\n#secukit-wrapper optgroup,\r\n#secukit-wrapper textarea {\r\n    margin: 0;\r\n    font-family: inherit;\r\n    font-size: inherit;\r\n    line-height: inherit;\r\n}\r\n\r\n#secukit-wrapper button,\r\n#secukit-wrapper input {\r\n    overflow: visible;\r\n}\r\n\r\n#secukit-wrapper button,\r\n#secukit-wrapper select {\r\n    text-transform: none;\r\n}\r\n\r\n#secukit-wrapper select {\r\n    word-wrap: normal;\r\n}\r\n\r\n#secukit-wrapper button,\r\n[type=\"button\"],\r\n[type=\"reset\"],\r\n[type=\"submit\"] {\r\n    -webkit-appearance: button;\r\n}\r\n\r\n#secukit-wrapper button:not(:disabled),\r\n[type=\"button\"]:not(:disabled),\r\n[type=\"reset\"]:not(:disabled),\r\n[type=\"submit\"]:not(:disabled) {\r\n    cursor: pointer;\r\n}\r\n\r\n#secukit-wrapper button::-moz-focus-inner,\r\n[type=\"button\"]::-moz-focus-inner,\r\n[type=\"reset\"]::-moz-focus-inner,\r\n[type=\"submit\"]::-moz-focus-inner {\r\n    padding: 0;\r\n    border-style: none;\r\n}\r\n\r\n.secukit-dialog {\r\n    position: fixed;\r\n    top: 40%;\r\n    left: 50%;\r\n    z-index: 9999;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -ms-flex-wrap: wrap;\r\n    flex-wrap: wrap;\r\n    margin-top: -280px;\r\n    margin-right: -15px;\r\n    margin-left: -230px;\r\n}\r\n\r\n\r\n/* Select Certificate */\r\n\r\n.secukit-dialog .select-certificate-wrapper {\r\n    width: 460px;\r\n    height: 560px;\r\n    background-color: #F7F7F8;\r\n    border-radius: 4px;\r\n    box-shadow: 0 0 1px #111111;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .select-certificate-header {\r\n    height: 50px;\r\n    background-color: #266ab7;\r\n    border-top-left-radius: 4px;\r\n    border-top-right-radius: 4px;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .select-certificate-header h1 {\r\n    padding-top: 17px;\r\n    padding-left: 40px;\r\n    font-weight: 500 !important;\r\n    margin-top: 0;\r\n    font-size: 16px;\r\n    color: white;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .banner-wrapper {\r\n    height: 100px;\r\n    margin-bottom: 36px;\r\n    background-color: #333333;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper {\r\n    padding: 0 40px;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .kica-button {\r\n    background-color: white;\r\n    border: 1px solid #406BB2;\r\n    padding: 7px 9px 7px 3px;\r\n    border-radius: 4px;\r\n    float: right;\r\n    text-decoration: blink;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .kica-button i {\r\n    display: inline-block;\r\n    background-size: cover;\r\n    vertical-align: middle;\r\n    margin: 0 6px;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .kica-button span {\r\n    line-height: 20px;\r\n    vertical-align: middle;\r\n    letter-spacing: -0.25px;\r\n    color: #222222;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper h2 {\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n    letter-spacing: -0.25px;\r\n    color: #333333;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .cert-list-label {\r\n    padding-top: 28px;\r\n    letter-spacing: -0.4px;\r\n    margin-top: 11.620px;\r\n    margin-bottom: 11.620px;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .cert-password-label {\r\n    margin-top: 68px !important;\r\n    letter-spacing: -0.25px;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .cert-list {\r\n    border: 1px solid #406BB2;\r\n    border-radius: 2px;\r\n    height: 100px;\r\n    overflow-y: auto;\r\n    background: #fff;\r\n    width: 100%;\r\n    margin-bottom: 11px;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .cert-list table {\r\n    table-layout: fixed;\r\n    width: 100%;\r\n    border-width: 0;\r\n    border-spacing: 0;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .cert-list table th {\r\n    background: #fff;\r\n    border-bottom: 1px solid #406BB2;\r\n    border-left: 1px solid #406BB2;\r\n    height: 24px;\r\n    padding: 0 5px;\r\n    text-align: center;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .cert-list table th span {\r\n    font-size: 12px;\r\n    font-weight: normal;\r\n    text-align: center;\r\n    margin: 0;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .cert-list table th:first-child {\r\n    border-left: none;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .cert-list table td {\r\n    background: #fff;\r\n    height: 24px;\r\n    padding: 0 5px;\r\n    cursor: pointer;\r\n    text-align: center;\r\n    overflow: hidden;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .cert-list table td span {\r\n    font-size: 12px;\r\n    font-weight: normal;\r\n    margin: 0;\r\n    width: 100%;\r\n    padding-bottom: 1px;\r\n    white-space: nowrap;\r\n    -o-text-overflow: ellipsis;\r\n    -ms-text-overflow: ellipsis;\r\n    text-overflow: ellipsis;\r\n    word-wrap: normal;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .cert-list table td i {\r\n    vertical-align: middle;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .cert-list table tr[class=\"active\"] td {\r\n    background-color: #406BB2;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .cert-list table tr[class=\"active\"] td span {\r\n    color: white;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .input-password-form .cert-qlalfqjsgh {\r\n    width: 100%;\r\n    background-color: white;\r\n    padding-bottom: 4px;\r\n    padding-left: 7px;\r\n    border: 1px solid #b0b0b0;\r\n    border-color: #406BB2;\r\n    padding: 0 5px;\r\n    height: 30px;\r\n    line-height: 1.2;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .input-password-form .cert-qlalfqjsgh:disabled {\r\n    background-color: #e9ecef;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .input-password-form .cert-qlalfqjsgh:disabled::placeholder {\r\n    color: dimgray;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .content-wrapper .input-password-form .cert-qlalfqjsgh::placeholder {\r\n    color: lightgrey;\r\n    padding-left: 10px;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .button-wrapper {\r\n    text-align: center;\r\n    padding-top: 5px;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper button {\r\n    border-radius: 3px;\r\n    border: none;\r\n    height: 28px;\r\n    color: #fff;\r\n    width: 83px !important;\r\n    margin: 10px 6.5px 5px 10px !important;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .confirm-button {\r\n    background-color: #266ab7 !important;\r\n    margin-right: 5px !important;\r\n}\r\n\r\n.secukit-dialog .select-certificate-wrapper .cancel-button {\r\n    background-color: #F7F7F8 !important;\r\n    border: solid 1px #266ab7 !important;\r\n    color: #000 !important;\r\n    margin-left: 5px !important;\r\n}\r\n\r\n\r\n/* End Select Certificate */\r\n\r\n\r\n/* Browser Certificate Guide */\r\n\r\n.secukit-dialog .browser-guide-wrapper {\r\n    height: 560px;\r\n    width: 337px;\r\n    background-color: white;\r\n    box-shadow: 0 0 0.45px #444040;\r\n    border-radius: 4px;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-header {\r\n    height: 135px;\r\n    background-color: #266ab7;\r\n    padding: 0 30px;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-header .close {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -ms-flex-wrap: wrap;\r\n    flex-wrap: wrap;\r\n    float: none;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-header .close a {\r\n    margin: 14px 0 7px auto;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-header h1 {\r\n    text-align: center;\r\n    letter-spacing: -1px;\r\n    font-size: 19px;\r\n    font-weight: 400 !important;\r\n    width: 100%;\r\n    color: #F2FFED;\r\n    margin-bottom: 18px !important;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-header .text {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -ms-flex-wrap: wrap;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-header .text h2 {\r\n    margin: 0;\r\n    text-align: left;\r\n    font-weight: 400 !important;\r\n    font-size: 12px;\r\n    margin-top: 2px !important;\r\n    width: 212px;\r\n    line-height: 15px;\r\n    color: white;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-contents {\r\n    padding: 0 30px;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-contents hr {\r\n    margin: 25px -25px 15px -25px;\r\n    border: 0;\r\n    border-top: 1px solid rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-contents h2 {\r\n    text-align: left;\r\n    font-weight: bold;\r\n    font-size: 13px;\r\n    letter-spacing: -0.25px;\r\n    line-height: 19px;\r\n    width: 100%;\r\n    color: #333333;\r\n    display: block;\r\n    margin: 11px 0 !important;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-contents .browser-guide-steps-wrapper {\r\n    padding: 0;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-contents .browser-guide-steps-wrapper .step-wrapper {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -ms-flex-wrap: wrap;\r\n    flex-wrap: wrap;\r\n    margin-bottom: 2px\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-contents .browser-guide-steps-wrapper .step-wrapper .step-number {\r\n    display: inline-block;\r\n    border-radius: 0.35rem;\r\n    font-weight: 700;\r\n    line-height: 1;\r\n    text-align: center;\r\n    white-space: nowrap;\r\n    vertical-align: baseline;\r\n    -webkit-transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n    background-color: #406BB2;\r\n    color: white;\r\n    font-size: 7px;\r\n    width: 12px;\r\n    height: 12px;\r\n    margin: 3px 13px 0 0;\r\n    padding-top: 1.7px;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-contents .browser-guide-steps-wrapper .step-wrapper .step-text {\r\n    font-size: 11px;\r\n    line-height: 17px;\r\n    width: 252px;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-contents .browser-guide-steps-wrapper .step-wrapper .step-text.sub {\r\n    margin: 6px 0 0 26px;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-contents .browser-guide-steps-wrapper .step-wrapper .step-text.w-100 {\r\n    font-weight: 100;\r\n    width: 100%;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-contents .detail-guide-wrapper {\r\n    margin-top: 9px;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-contents .detail-guide-wrapper a {\r\n    text-decoration: blink;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-contents .detail-guide-wrapper .open-detail-guide-wrapper .badge {\r\n    display: inline-block;\r\n    border-radius: 0.35rem;\r\n    font-weight: 600;\r\n    line-height: 1;\r\n    text-align: center;\r\n    white-space: nowrap;\r\n    vertical-align: baseline;\r\n    -webkit-transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n    background-color: #bcbec0;\r\n    color: white;\r\n    font-size: 8px;\r\n    width: 12px;\r\n    height: 12px;\r\n    margin: 3px 13px 0 0;\r\n    padding-top: 1.7px;\r\n    padding-left: 1.1px;\r\n}\r\n\r\n.secukit-dialog .browser-guide-wrapper .browser-guide-contents .detail-guide-wrapper .open-detail-guide-wrapper .text {\r\n    color: #406BB2;\r\n    font-size: 11px;\r\n    font-weight: 600;\r\n}\r\n\r\n.webnpki-wrapper .pfx-password-wrapper {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    margin-left: -138px;\r\n    margin-top: -238px;\r\n    z-index: 12001;\r\n    width: 267px;\r\n    height: 235px;\r\n    padding-left: 20px;\r\n    padding-right: 20px;\r\n    background-color: white;\r\n    opacity: 1;\r\n    border: 1px solid #d3d3d3;\r\n    border-radius: 4px;\r\n    box-shadow: 0 1px 5px rgba(12, 11, 11, 0.25);\r\n}\r\n\r\n.webnpki-wrapper .pfx-password-wrapper .pfx-password-header {\r\n    margin-top: 25px;\r\n    margin-bottom: 15px;\r\n}\r\n\r\n.webnpki-wrapper .pfx-password-wrapper .pfx-password-header span {\r\n    display: inline-block;\r\n    width: 100%;\r\n    font-size: 18px;\r\n    text-align: center;\r\n    font-weight: bold;\r\n}\r\n\r\n.webnpki-wrapper .pfx-password-wrapper .pfx-password-body {\r\n    background: #f3f6fa;\r\n    border: 1px solid #e2e2e2;\r\n    padding: 12px 12px;\r\n}\r\n\r\n.webnpki-wrapper .pfx-password-wrapper .pfx-password-body span {\r\n    display: inline-block;\r\n    width: 100%;\r\n    font-size: 13px;\r\n    letter-spacing: -0.25px;\r\n    text-align: center;\r\n}\r\n\r\n.webnpki-wrapper .pfx-password-wrapper .pfx-password-body .pfx-password-input {\r\n    margin-top: 16px;\r\n    margin-bottom: 16px;\r\n}\r\n\r\n.webnpki-wrapper .pfx-password-wrapper .pfx-password-body .pfx-password-input .pfx-qlalfqjsgh {\r\n    width: 100%;\r\n    background-color: white;\r\n    border: 1px solid #b0b0b0;\r\n    border-color: #406BB2;\r\n    padding: 0 5px;\r\n    height: 30px;\r\n    line-height: 1.2;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n}\r\n\r\n.webnpki-wrapper .pfx-password-wrapper .pfx-password-footer {\r\n    margin-top: 8px;\r\n    margin-bottom: 8px;\r\n    text-align: center\r\n}\r\n\r\n.webnpki-wrapper .pfx-password-wrapper .pfx-password-footer button {\r\n    border-radius: 3px;\r\n    border: none;\r\n    height: 28px;\r\n    color: #fff;\r\n    width: 83px !important;\r\n    margin: 10px;\r\n    margin-bottom: 5px;\r\n    margin-right: 6.5px !important;\r\n}\r\n\r\n.webnpki-wrapper .pfx-password-wrapper .pfx-password-footer .confirm-button {\r\n    background-color: #266ab7 !important;\r\n}\r\n\r\n.webnpki-wrapper .pfx-password-wrapper .pfx-password-footer .cancel-button {\r\n    background-color: #F7F7F8 !important;\r\n    border: solid 1px #266ab7 !important;\r\n    color: #000 !important;\r\n}\r\n\r\n.webnpki-wrapper .dim {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 12000;\r\n    background-color: black;\r\n    opacity: .6;\r\n    filter: alpha(opacity=50);\r\n}\r\n\r\n\r\n/* find certificate */\r\n\r\n.find-pfx-wrapper .dim {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 10000;\r\n    background-color: black;\r\n    opacity: .5;\r\n    filter: alpha(opacity=50);\r\n}\r\n\r\n.find-pfx-wrapper .find-pfx-container {\r\n    width: 394px;\r\n    height: 400px;\r\n    background: #F7F7F8;\r\n    z-index: 10001;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    margin-left: -197px;\r\n    margin-top: -254px;\r\n    border-radius: 4px;\r\n}\r\n\r\n.find-pfx-wrapper .find-pfx-header {\r\n    height: 46px;\r\n    background-color: #266ab7;\r\n    border-top-left-radius: 4px;\r\n    border-top-right-radius: 4px;\r\n}\r\n\r\n.find-pfx-wrapper .find-pfx-header span {\r\n    display: inline-block;\r\n    font-weight: bold;\r\n    font-size: 14px;\r\n    padding-top: 17px;\r\n    padding-left: 43px;\r\n    color: white;\r\n}\r\n\r\n.find-pfx-wrapper .convert-pfx-wrapper {\r\n    padding: 25px 25px 12px 25px;\r\n    margin: 28px 28px 16px 28px;\r\n    background-color: inherit;\r\n    border: solid;\r\n    border-width: 1px;\r\n    border-color: #266AB7;\r\n}\r\n\r\n.find-pfx-wrapper .convert-pfx-wrapper .convert-pfx-header {\r\n    margin: 0 5px 15px 0px;\r\n    padding-left: 11px;\r\n}\r\n\r\n.find-pfx-wrapper .convert-pfx-wrapper .convert-pfx-header span {\r\n    vertical-align: middle;\r\n    font-size: 13px;\r\n    margin-left: 14px;\r\n}\r\n\r\n.find-pfx-wrapper .convert-pfx-wrapper .convert-pfx-download {\r\n    text-align: center;\r\n    margin-bottom: 22px;\r\n}\r\n\r\n.find-pfx-wrapper .convert-pfx-wrapper .convert-pfx-download a {\r\n    text-decoration: none;\r\n    background-color: #F0F3F9;\r\n    width: 218px;\r\n    height: 32px;\r\n    display: inline-block;\r\n    padding-top: 9px;\r\n}\r\n\r\n.find-pfx-wrapper .convert-pfx-wrapper .convert-pfx-download span {\r\n    vertical-align: middle;\r\n    font-weight: bold;\r\n    color: #266ab7;\r\n    margin-left: 7px;\r\n}\r\n\r\n.find-pfx-wrapper .convert-pfx-wrapper .convert-pfx-step-wrapper {\r\n    padding: 0 7px;\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -ms-flex-wrap: wrap;\r\n    flex-wrap: wrap;\r\n    margin-bottom: 15px\r\n}\r\n\r\n.find-pfx-wrapper .convert-pfx-wrapper .convert-pfx-step-wrapper .step-text {\r\n    width: 242px;\r\n    font-size: 11px;\r\n    line-height: 13px;\r\n    letter-spacing: -0.7px;\r\n}\r\n\r\n.find-pfx-wrapper .convert-pfx-wrapper .convert-pfx-step-wrapper .step-text span {\r\n    color: #266ab7;\r\n}\r\n\r\n.find-pfx-wrapper .convert-pfx-wrapper .step-number {\r\n    display: inline-block;\r\n    border-radius: 0.35rem;\r\n    font-weight: 700;\r\n    line-height: 1;\r\n    text-align: center;\r\n    white-space: nowrap;\r\n    vertical-align: baseline;\r\n    -webkit-transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n    background-color: #406BB2;\r\n    color: white;\r\n    font-size: 7px;\r\n    width: 12px;\r\n    height: 12px;\r\n    margin: 0 12px 0 0;\r\n    padding-top: 1.7px;\r\n}\r\n\r\n.find-pfx-wrapper .find-pfx-footer {\r\n    text-align: center;\r\n}\r\n\r\n.find-pfx-wrapper .find-pfx-footer button {\r\n    border-radius: 3px;\r\n    border: none;\r\n    height: 26px;\r\n    color: #fff;\r\n    width: 93px !important;\r\n    margin: 0 5px !important;\r\n}\r\n\r\n.find-pfx-wrapper .find-pfx-footer .confirm-button {\r\n    background-color: #266ab7 !important;\r\n}\r\n\r\n.find-pfx-wrapper .find-pfx-footer .cancel-button {\r\n    background-color: #F7F7F8 !important;\r\n    border: solid 1px #266ab7 !important;\r\n    color: #000 !important;\r\n}\r\n\r\n\r\n/* Customise CSS */\r\n\r\n.kica-d-none {\r\n    display: none !important;\r\n}\r\n\r\n#secukit-wrapper .browser-detail-guide {\r\n    width: 100%;\r\n    height: 650px;\r\n}\r\n\r\n#secukit-wrapper .icon-vkeyboard {\r\n    display: inline-block;\r\n    background-size: cover;\r\n    vertical-align: middle;\r\n    margin-left: -36px;\r\n    background-image: url(" + ___CSS_LOADER_URL___1___ + ");\r\n    background-repeat: no-repeat;\r\n    background-size: cover;\r\n    width: 29px;\r\n    height: 18px;\r\n}\r\n\r\n#secukit-wrapper .icon-down {\r\n    background-image: url(" + ___CSS_LOADER_URL___2___ + ");\r\n    background-repeat: no-repeat;\r\n    background-size: cover;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    width: 15px;\r\n    height: 15px;\r\n}\r\n\r\n#secukit-wrapper .icon-vkeyboard.active {\r\n    background-image: url(" + ___CSS_LOADER_URL___3___ + ");\r\n}\r\n\r\n#secukit-wrapper .icon-cert {\r\n    background-image: url(" + ___CSS_LOADER_URL___4___ + ");\r\n    background-repeat: no-r epeat;\r\n    display: inline-block;\r\n    float: left;\r\n    margin-left: 7px;\r\n    width: 16px;\r\n    height: 13px;\r\n}\r\n\r\n#secukit-wrapper .icon-question {\r\n    background-image: url(" + ___CSS_LOADER_URL___5___ + ");\r\n    background-repeat: no-repeat;\r\n    display: inline-block;\r\n    width: 17px;\r\n    height: 17px;\r\n}\r\n\r\n#secukit-wrapper .icon-faq {\r\n    background-image: url(" + ___CSS_LOADER_URL___6___ + ");\r\n    background-repeat: no-repeat;\r\n    background-size: cover;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    width: 18px;\r\n    height: 18px;\r\n}\r\n\r\n#secukit-wrapper .icon-find-cert {\r\n    background-image: url(" + ___CSS_LOADER_URL___7___ + ");\r\n    background-repeat: no-repeat;\r\n    width: 24px;\r\n    height: 18px;\r\n}\r\n\r\n#secukit-wrapper .icon-close {\r\n    background-image: url(" + ___CSS_LOADER_URL___8___ + ");\r\n    background-repeat: no-repeat;\r\n    width: 15px;\r\n    height: 15px;\r\n    float: right;\r\n}\r\n\r\n#secukit-wrapper .icon-browser {\r\n    background-image: url(" + ___CSS_LOADER_URL___9___ + ");\r\n    background-size: cover;\r\n    vertical-align: middle;\r\n    height: 35px;\r\n    width: 35px;\r\n    display: inline-block;\r\n    margin-right: 16px;\r\n}\r\n\r\n#secukit-wrapper .bg-light-blue {\r\n    background-color: #F0F5FF !important;\r\n}\r\n\r\n#secukit-wrapper .open-guide {\r\n    margin-left: -400px;\r\n}\r\n\r\n#secukit-wrapper .dropzone-wrapper {\r\n    position: absolute;\r\n    margin-top: 25px;\r\n    width: 380px;\r\n    height: 74px;\r\n}\r\n\r\n#secukit-wrapper .dropzone-wrapper .dropzone-icon {\r\n    width: 80px;\r\n    height: 62px;\r\n    float: left;\r\n    background-image: url(" + ___CSS_LOADER_URL___10___ + ");\r\n    background-size: cover;\r\n    margin-left: 15px;\r\n    margin-right: 12px;\r\n}\r\n\r\n#secukit-wrapper .dropzone-wrapper .dropzone-comment {\r\n    margin-left: auto;\r\n    width: 300px;\r\n    height: 100%;\r\n    padding-top: 5px;\r\n}\r\n\r\n#secukit-wrapper .dropzone-wrapper .dropzone-comment span {\r\n    display: block;\r\n    margin: 7px 0;\r\n    font-size: 11px;\r\n    color: #919191;\r\n}\r\n\r\n#secukit-wrapper .detail-guide {\r\n    position: fixed;\r\n    z-index: 10003;\r\n    left: 0;\r\n    top: 0;\r\n    display: initial;\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: auto;\r\n    background-color: rgb(0, 0, 0);\r\n    background-color: rgba(0, 0, 0, 0.4);\r\n}\r\n\r\n#secukit-wrapper .detail-guide-content {\r\n    display: block;\r\n    background-color: none;\r\n    border: none;\r\n    width: 797px;\r\n    height: 100vh;\r\n    position: fixed;\r\n    top: 45%;\r\n    left: 50%;\r\n    margin-left: -400px;\r\n    margin-top: -400px;\r\n}\r\n\r\n#secukit-wrapper .close-detail-guide {\r\n    color: #fff;\r\n    float: right;\r\n    font-size: 50px;\r\n    font-weight: bold;\r\n    margin-right: -5px;\r\n    margin-bottom: 15px;\r\n}\r\n\r\n#secukit-wrapper .close-detail-guide:hover,\r\n#secukit-wrapper .close-detail-guide:focus {\r\n    color: black;\r\n    text-decoration: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.vk-container {\r\n    padding: 0.7rem 0.5rem 0.5rem 0.5rem !important;\r\n}\r\n\r\n.vk-button {\r\n    height: 2rem !important;\r\n    line-height: 2rem !important;\r\n    min-width: 2rem !important;\r\n    margin: 0.1rem!important;\r\n    background: #444 !important;\r\n    color: white !important;\r\n}\r\n\r\n.vk-button-enter {\r\n    background: #266ab7 !important;\r\n    color: white !important;\r\n}\r\n\r\n.vk-button-shift-down {\r\n    background: darkgray !important;\r\n    color: white !important;\r\n}\r\n\r\n.vk-button span {\r\n    font-size: 1rem !important;\r\n}\r\n\r\n\r\n/* FR */\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .select-certificate-wrapper {\r\n    height: 594px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .select-certificate-wrapper .content-wrapper .cert-list-label {\r\n    padding-top: 56px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .select-certificate-wrapper .content-wrapper .cert-password-label {\r\n    margin-top: 71px !important;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .select-certificate-wrapper .content-wrapper .cert-list table th {\r\n    padding: 0 4px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .select-certificate-wrapper .content-wrapper .cert-list table th span {\r\n    font-size: 11px;\r\n    font-weight: 500;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .select-certificate-wrapper .content-wrapper .input-password-form .cert-qlalfqjsgh {\r\n    padding: 0 0 0 7px;\r\n    font-size: 11px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .select-certificate-wrapper button {\r\n    margin: 10px 4.5px 5px 8px !important\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .browser-guide-wrapper {\r\n    height: 594px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .browser-guide-wrapper .browser-guide-header {\r\n    height: 130px;\r\n    padding: 0 25px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .browser-guide-wrapper .browser-guide-header h1 {\r\n    font-size: 16px;\r\n    margin-bottom: 16px !important;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .browser-guide-wrapper .browser-guide-header .text h2 {\r\n    margin-top: 0 !important;\r\n    width: 236px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .browser-guide-wrapper .browser-guide-contents {\r\n    padding: 0 25px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .browser-guide-wrapper .browser-guide-contents hr {\r\n    margin: 5px -25px 5px -25px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .browser-guide-wrapper .browser-guide-contents h2 {\r\n    font-weight: 500;\r\n    line-height: 16px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .browser-guide-wrapper .browser-guide-contents .browser-guide-steps-wrapper {\r\n    padding: 0;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .browser-guide-wrapper .browser-guide-contents .browser-guide-steps-wrapper .step-wrapper .step-text {\r\n    line-height: 14px;\r\n    width: 262px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .browser-guide-wrapper .browser-guide-contents .detail-guide-wrapper {\r\n    margin-top: 14px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .browser-guide-wrapper .browser-guide-contents .detail-guide-wrapper a {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -ms-flex-wrap: wrap;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .secukit-dialog .browser-guide-wrapper .browser-guide-contents .detail-guide-wrapper .open-detail-guide-wrapper .text {\r\n    font-weight: 500;\r\n    width: 262px;\r\n    display: inline-block;\r\n    font-size: 11px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .webnpki-wrapper .pfx-password-wrapper .pfx-password-header span {\r\n    font-weight: 500;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .browser-detail-guide {\r\n    height: 797px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"fr\"] .icon-browser {\r\n    margin-top: 4px;\r\n}\r\n\r\n\r\n/* ko */\r\n\r\n#secukit-wrapper[lang=\"ko\"] .secukit-dialog .browser-guide-wrapper .browser-guide-contents .browser-guide-steps-wrapper .step-wrapper {\r\n    margin-bottom: 7px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"ko\"] h1,\r\n#secukit-wrapper[lang=\"ko\"] h2,\r\n#secukit-wrapper[lang=\"ko\"] h3,\r\n#secukit-wrapper[lang=\"ko\"] h4,\r\n#secukit-wrapper[lang=\"ko\"] h5,\r\n#secukit-wrapper[lang=\"ko\"] h6 {\r\n    font-weight: bold;\r\n    margin-top: 0;\r\n    margin-bottom: 0.83em;\r\n}\r\n\r\n#secukit-wrapper[lang=\"ko\"] .secukit-dialog .select-certificate-wrapper .select-certificate-header h1 {\r\n    font-weight: bold !important;\r\n}\r\n\r\n#secukit-wrapper[lang=\"ko\"] .secukit-dialog .browser-guide-wrapper .browser-guide-header h1 {\r\n    clear: both;\r\n    font-weight: bold !important;\r\n}\r\n\r\n#secukit-wrapper[lang=\"ko\"] .webnpki-wrapper .pfx-password-wrapper {\r\n    margin-left: -150px;\r\n    width: 300px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"ko\"] .webnpki-wrapper .pfx-password-wrapper .pfx-password-body {\r\n    margin-bottom: 25px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"ko\"] .secukit-dialog .browser-guide-wrapper .browser-guide-header .text h2 {\r\n    width: 226px !important;\r\n}\r\n\r\n#secukit-wrapper[lang=\"ko\"] .secukit-dialog .browser-guide-wrapper .browser-guide-contents hr {\r\n    margin: 13px -25px 5px -25px;\r\n}\r\n\r\n#secukit-wrapper[lang=\"ko\"] .secukit-dialog .browser-guide-wrapper .browser-guide-contents .browser-guide-steps-wrapper .step-wrapper {    \r\n    margin-bottom: 10px\r\n}\r\n\r\n.swal2-container {\r\n    z-index: 10000 !important;\r\n}\r\n\r\n.swal2-title {\r\n    font-size: 1.225em !important;\r\n    margin: 0 0 1em !important;\r\n}\r\n\r\n.swal2-content {\r\n    font-size: 0.875em !important;\r\n    font-weight: 600 !important;\r\n    letter-spacing: 0.0125em !important;\r\n}\r\n\r\n.swal2-popup {\r\n    width: 26em !important;\r\n}\r\n\r\n", ""]);


/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function (url, needQuotes) {
  // eslint-disable-next-line no-underscore-dangle, no-param-reassign
  url = url.__esModule ? url.default : url;

  if (typeof url !== 'string') {
    return url;
  } // If url is already wrapped in quotes, remove them


  if (/^['"].*['"]$/.test(url)) {
    // eslint-disable-next-line no-param-reassign
    url = url.slice(1, -1);
  } // Should url be wrapped?
  // See https://drafts.csswg.org/css-values-3/#urls


  if (/["'() \t\n]/.test(url) || needQuotes) {
    return "\"".concat(url.replace(/"/g, '\\"').replace(/\n/g, '\\n'), "\"");
  }

  return url;
};

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "11eabca2251325cfc5589c9c6fb57b46.ttf";

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "cbedd50fcc13f92405d450af385d7c5b.png";

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "9f33144426873b1db0d352b1adb044d2.png";

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "aa2aacc9a840bb9388662a58f794278d.png";

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "392061a298938cb08a4c1585f1d4bc36.png";

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "739ca19062b3ae0a95dc48ba762e3f72.png";

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "c69cd8375a2dae7fc8641e42f115c030.png";

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "a524ca3c0342a188a1ad339683070fea.png";

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "4ba4b716d43f5933dce79502a423b1aa.png";

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "49336b971a5bf4225312b176fb117664.png";

/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "575f40fee0f637ff0cdba9a3fd683ed8.png";

/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

var content = __webpack_require__(22);

if (typeof content === 'string') {
  content = [[module.i, content, '']];
}

var options = {}

options.insert = "head";
options.singleton = false;

var update = __webpack_require__(1)(content, options);

if (content.locals) {
  module.exports = content.locals;
}


/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(0)(false);
// Module
exports.push([module.i, "/* *** keyboard light theme ***\r\n  for when jQuery UI themes are not being used\r\n  See https://jsfiddle.net/Mottie/jsh0377k/\r\n */\r\n.ui-keyboard {\r\n    background: #FFF;\r\n    border: 1px solid #292929;\r\n    border-radius: 10px;\r\n    box-shadow: 2px 2px 2px gray;\r\n    text-align: center;\r\n    font-size:18px;\r\n    padding: .3em;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    z-index: 86000;\r\n    /* see issue #484 */\r\n    -ms-touch-action: manipulation;\r\n    touch-action: manipulation;\r\n}\r\n\r\n.ui-keyboard2 {\r\n\t/* adjust overall keyboard size using \"font-size\" */\r\n\tfont-size: 14px;\r\n\ttext-align: center;\r\n\tbackground: #fefefe;\r\n\tborder: 1px solid #aaa;\r\n\tpadding: 4px;\r\n\r\n\t/* include the following setting to place the\r\n\tkeyboard at the bottom of the browser window */\r\n\twidth: 100%;\r\n\theight: auto;\r\n\tleft: 0px;\r\n\ttop: auto;\r\n\tbottom: 0px;\r\n\tposition: fixed;\r\n\twhite-space: nowrap;\r\n\toverflow-x: auto;\r\n\t/* see issue #484 */\r\n\t-ms-touch-action: manipulation;\r\n\ttouch-action: manipulation;\r\n}\r\n.ui-keyboard-has-focus {\r\n\tz-index: 86001;\r\n}\r\n.ui-keyboard-button {\r\n\tborder: 1px solid #aaa;\r\n\tpadding: 0 0.5em;\r\n\tmargin: 1px;\r\n\tmin-width: 3em;\r\n\theight: 3em;\r\n\tline-height: 3em;\r\n\tvertical-align: top;\r\n\tfont-family: Helvetica, Arial, sans-serif;\r\n\tcolor: #333;\r\n\ttext-align: center;\r\n\tborder-radius: 5px;\r\n\t-webkit-box-shadow: 1px 1px 3px 0 rgba(0, 0, 0, 0.5);\r\n\tbox-shadow: 1px 1px 3px 0 rgba(0, 0, 0, 0.5);\r\n\tbackground: white;\r\n\tbackground-image: -webkit-linear-gradient(-90deg, white 0%, #e3e3e3 100%);\r\n\tbackground-image:         linear-gradient(-90deg, white 0%, #e3e3e3 100%);\r\n\tcursor: pointer;\r\n\toverflow: hidden;\r\n\t-moz-user-focus: ignore;\r\n}\r\n.ui-keyboard-button:not([disabled]):hover {\r\n\tbackground: #eee;\r\n\tbackground-image: -webkit-linear-gradient(-90deg, #f2f2f2 0%, #d3d3d3 100%);\r\n\tbackground-image:         linear-gradient(-90deg, #f2f2f2 0%, #d3d3d3 100%);\r\n}\r\n.ui-keyboard-button:not([disabled]):active {\r\n\tbackground: #ddd;\r\n\tbackground-image: -webkit-linear-gradient(-90deg, #e5e5e5 0%, #d3d3d3 100%);\r\n\tbackground-image:         linear-gradient(-90deg, #e5e5e5 0%, #d3d3d3 100%);\r\n}\r\n.ui-keyboard-button span {\r\n\tdisplay: block;\r\n\twidth: 100%;\r\n\tfont-size: 1.2em;\r\n\ttext-align: center;\r\n}\r\n/* make action keys extra-wide */\r\n.ui-keyboard-actionkey:not(.ui-keyboard-dec):not(.ui-keyboard-combo) {\r\n\tmin-width: 6em;\r\n}\r\n.ui-keyboard-space {\r\n\twidth: 15em;\r\n}\r\n.ui-keyboard-actionkey:not(.ui-keyboard-dec):not(.ui-keyboard-combo) span {\r\n\tposition: relative;\r\n\ttop: 0px;\r\n\tleft: 0px;\r\n}\r\n.ui-keyboard-placeholder {\r\n\tcolor: #888;\r\n}\r\n/* disabled or readonly inputs, or use input[disabled='disabled'] { color: #f00; } */\r\n.ui-keyboard-nokeyboard {\r\n\tcolor: #888;\r\n\tborder-color: #888;\r\n}\r\n.ui-keyboard-spacer {\r\n\tdisplay: inline-block;\r\n\twidth: 1px;\r\n\theight: 0;\r\n\tcursor: default;\r\n}\r\n.ui-keyboard-NBSP span, .ui-keyboard-ZWSP span, .ui-keyboard-ZWNJ span, .ui-keyboard-ZWJ span,\r\n.ui-keyboard-LRM span, .ui-keyboard-RLM span {\r\n\tfont-size: 0.5em;\r\n\tline-height: 1.5em;\r\n\twhite-space: normal;\r\n}\r\n\r\n/* combo key styling - toggles diacritics on/off */\r\n.ui-keyboard-button.ui-keyboard-combo.ui-state-default {\r\n\t-webkit-box-shadow: 1px 1px 3px 0 rgba(213, 133, 18, 0.5);\r\n\t        box-shadow: 1px 1px 3px 0 rgba(213, 133, 18, 0.5);\r\n\tborder-color: #d58512;\r\n}\r\n.ui-keyboard-button.ui-keyboard-combo.ui-state-active {\r\n\t-webkit-box-shadow: 1px 1px 3px 0 rgba(38, 154, 188, 0.5);\r\n\t        box-shadow: 1px 1px 3px 0 rgba(38, 154, 188, 0.5);\r\n\tborder-color: #269abc;\r\n}\r\n/* (in)valid inputs */\r\nbutton.ui-keyboard-accept.ui-keyboard-valid-input {\r\n\t-webkit-box-shadow: 1px 1px 3px 0 rgba(57, 132, 57, 0.5);\r\n\t        box-shadow: 1px 1px 3px 0 rgba(57, 132, 57, 0.5);\r\n\tborder-color: #398439;\r\n}\r\nbutton.ui-keyboard-accept.ui-keyboard-valid-input:not([disabled]):hover {\r\n\tborder-color: #4cae4c;\r\n}\r\nbutton.ui-keyboard-accept.ui-keyboard-invalid-input {\r\n\t-webkit-box-shadow: 1px 1px 3px 0 rgba(172, 41, 37, 0.5);\r\n\t        box-shadow: 1px 1px 3px 0 rgba(172, 41, 37, 0.5);\r\n\tborder-color: #ac2925;\r\n}\r\nbutton.ui-keyboard-accept.ui-keyboard-invalid-input:not([disabled]):hover {\r\n\tborder-color: #d43f3a;\r\n}\r\n/* unlocked icon (keyboard enabled) */\r\nbutton.ui-keyboard-toggle span {\r\n\twidth: .9em;\r\n\theight: .9em;\r\n\tdisplay: inline-block;\r\n\tbackground-repeat: no-repeat;\r\n\tbackground-position: center center;\r\n\tbackground-size: contain;\r\n\t/* light theme unlocked icon - fill: #111 */\r\n\tbackground-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgZmlsbD0iIzExMSI+PHBhdGggZD0iTTguNyw0LjRINy41SDUuMHYtMS45YzAtMS40LTEuMS0yLjUtMi41LTIuNWMtMS40LDAtMi41LDEuMS0yLjUsMi41djEuOWgxLjIgdi0xLjljMC0wLjcsMC42LTEuMiwxLjItMS4yczEuMiwwLjYsMS4yLDEuMnYxLjljLTAuNywwLTEuMiwwLjYtMS4yLDEuMlY4LjggYzAsMC43LDAuNiwxLjIsMS4yLDEuMmg1LjBDOS40LDEwLDEwLDkuNCwxMCw4LjhWNS42QzEwLDUuMCw5LjQsNC40LDguOCw0LjR6IE02LjYsNy40djEuMCBjMCwwLjItMC4xLDAuMy0wLjMsMC4zUzYuMCw4LjYsNi4wLDguNFY3LjRjLTAuMi0wLjEtMC4zLTAuMy0wLjMtMC41YzAtMC4zLDAuMy0wLjYsMC42LTAuNiBTNi45LDYuNiw2LjksNi45QzYuOSw3LjEsNi44LDcuMyw2LjYsNy40eiIvPjwvc3ZnPg==');\r\n}\r\n/* locked icon (keyboard disabled) */\r\nbutton.ui-keyboard-toggle.ui-keyboard-disabled span {\r\n\t/* light theme locked icon - fill: #111 */\r\n\tbackground-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgZmlsbD0iIzExMSI+PHBhdGggZD0iTTcuNCA0LjRWMi41YzAtMS40LTEuMS0yLjUtMi41LTIuNWMtMS40IDAtMi41IDEuMS0yLjUgMi41djEuOSBjLTAuNyAwLTEuMiAwLjUtMS4yIDEuMnYzLjFDMS4zIDkuNCAxLjggMTAgMi41IDEwaDQuOWMwLjcgMCAxLjItMC42IDEuMi0xLjJWNS42IEM4LjcgNC45IDguMSA0LjQgNy40IDQuNHogTTUuMyA3LjR2MS4wYzAgMC4yLTAuMSAwLjMtMC4zIDAuM2MtMC4yIDAtMC4zLTAuMS0wLjMtMC4zVjcuNCBjLTAuMi0wLjEtMC4zLTAuMy0wLjMtMC41YzAtMC4zIDAuMy0wLjYgMC42LTAuNmMwLjMgMCAwLjYgMC4zIDAuNiAwLjYgQzUuNiA3LjEgNS41IDcuMyA1LjMgNy40eiBNNi4yIDQuNEgzLjdWMi41YzAtMC43IDAuNS0xLjIgMS4yLTEuMmMwLjcgMCAxLjIgMC42IDEuMiAxLjIgVjQuNHoiLz48L3N2Zz4=');\r\n}\r\n.ui-keyboard.ui-keyboard-disabled button:not(.ui-keyboard-toggle), .ui-keyboard.ui-keyboard-disabled input {\r\n\topacity: 0.5;\r\n}\r\n\r\n/*** Alt-Keys Popup extension ***/\r\n/* clickable overlay on top of keyboard to hide the popup */\r\n.ui-keyboard-overlay {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tbottom: 0;\r\n\tright: 0;\r\n\tbackground: rgba(238, 238, 238, 0.5);\r\n}\r\n/* the actual popup styling, class names from the css.container option are also added */\r\n.ui-keyboard-popup {\r\n\tdisplay: inline-block;\r\n\t/* default buttons are 2em wide + .1em margin on either side (set in .ui-keyboard-button definition);\r\n\tso use multiples of 2.2em\tfor a max-width if you don't want any extra white space on the sides,\r\n\te.g. 5 buttons * 2.2em = 11em, 6 buttons * 2.2em = 13.2em, etc */\r\n\tmax-width: 22em;\r\n\t/* 10 buttons */\r\n}\r\n.ui-keyboard.ui-keyboard-popup-open .ui-keyboard-keyset .ui-keyboard-button {\r\n\t/* Disable keys under overlay while popup is open - see #654 */\r\n\tpointer-events: none;\r\n}\r\n\r\n/*** Caret extension definition ***/\r\n/* margin-top => is added to the caret height (top & bottom) */\r\n.ui-keyboard-caret {\r\n\tbackground: #c00;\r\n\twidth: 1px;\r\n\tmargin-top: 3px;\r\n}\r\n\r\n/*** Extender keyboard extension ***/\r\ndiv.ui-keyboard-extender {\r\n\tmargin-left: 5px;\r\n\tmargin-right: 10px;\r\n}\r\nbutton.ui-keyboard-extender span {\r\n\twidth: .9em;\r\n\theight: .9em;\r\n\tdisplay: inline-block;\r\n\tmargin-bottom: 3px;\r\n\tbackground-repeat: no-repeat;\r\n\tbackground-position: center center;\r\n\tbackground-size: contain;\r\n\t/* light theme extender icon - fill: #111 */\r\n\tbackground-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgc3R5bGU9ImZpbGw6IzExMSI+PGc+PHBhdGggc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzExMSIgZD0iTSAwLjUsNC41IDE1LjUsNC41IDE1LjUsMTUuNSAwLjUsMTUuNSBaIj48L3BhdGg+PHJlY3Qgd2lkdGg9IjIiIGhlaWdodD0iMiIgeD0iMiIgeT0iNiI+PC9yZWN0PjxyZWN0IHdpZHRoPSIyIiBoZWlnaHQ9IjIiIHg9IjUiIHk9IjYiPjwvcmVjdD48cmVjdCB3aWR0aD0iMiIgaGVpZ2h0PSIyIiB4PSI4IiB5PSI2Ij48L3JlY3Q+PHBhdGggZD0ibSAxMSw2IDMsMCAwLDUgLTIsMCAwLC0zIC0xLDAgeiI+PC9wYXRoPjxyZWN0IHdpZHRoPSIyIiBoZWlnaHQ9IjIiIHg9IjEyIiB5PSIxMiI+PC9yZWN0PjxyZWN0IHdpZHRoPSI2IiBoZWlnaHQ9IjIiIHg9IjUiIHk9IjEyIj48L3JlY3Q+PHJlY3Qgd2lkdGg9IjIiIGhlaWdodD0iMiIgeD0iOSIgeT0iOSI+PC9yZWN0PjxyZWN0IHdpZHRoPSIyIiBoZWlnaHQ9IjIiIHg9IjYiIHk9IjkiPjwvcmVjdD48cmVjdCB3aWR0aD0iMiIgaGVpZ2h0PSIyIiB4PSIyIiB5PSIxMiI+PC9yZWN0PjxyZWN0IHdpZHRoPSIzIiBoZWlnaHQ9IjIiIHg9IjIiIHk9IjkiPjwvcmVjdD48L2c+PC9zdmc+');\r\n}\r\n", ""]);


/***/ }),
/* 23 */
/***/ (function(module, exports) {

function boxes() {
    var object = {};

    object.main = '<div class="secukit-dialog" id="secukit-dialog">' +
        '<div class="select-certificate-wrapper">' +
        '<div class="select-certificate-header">' +
        '<h1>' + KICA_CORPUS.SELECT_CERT_HEADER + '</h1>' +
        '</div>' +
        '<div class="banner-wrapper">' +
        '<img src="' + webnpki_config.path + '/assets/banner/default_banner.png" alt="A World of Trust KICA">' +
        '</div>' +
        '<div class="content-wrapper">' +
        '<a class="kica-button" href="javascript:void(0)" onclick="KICA_DIALOG.openGuide()">' +
        '<i class="icon-question"></i>' +
        '<span>' + KICA_CORPUS.BUTTON_OPEN_GUIDE + '</span>' +
        '</a>' +
        '<h2 class="cert-list-label">' + KICA_CORPUS.CERT_TABLE_LABEL + '</h2>' +
        '<div class="cert-list" ondragover="KICA_DIALOG.onDragOverCert(event)" ondragleave="KICA_DIALOG.onDragLeaveCert(event)" ondrop="KICA_DIALOG.onDropCert(event)">' +
        '<div class="dropzone-wrapper kica-d-none" id="dropzone-wrapper">' +
        '<div class="dropzone-icon"></div>' +
        '<div class="dropzone-comment">' +
        '<span class=""dropzone-comment-text>' + KICA_CORPUS.DROPZONE_TEXT_1 + '</span>' +
        '<span class=""dropzone-comment-text>' + KICA_CORPUS.DROPZONE_TEXT_2 + '</span>' +
        '<span class=""dropzone-comment-text>' + KICA_CORPUS.DROPZONE_TEXT_3 + '</span>' +
        '</div>' +
        '</div>' +
        '<table id="cert-list-table">' +
        '<thead>' +
        '<tr>' +
        '<th scope="col">' +
        '<span>' + KICA_CORPUS.CERT_TABLE_THEAD1 + '</span>' +
        '</th>' +
        '<th scope="col">' +
        '<span>' + KICA_CORPUS.CERT_TABLE_THEAD2 + '</span>' +
        '</th>' +
        '<th scope="col">' +
        '<span>' + KICA_CORPUS.CERT_TABLE_THEAD3 + '</span>' +
        '</th>' +
        '<th scope="col">' +
        '<span>' + KICA_CORPUS.CERT_TABLE_THEAD4 + '</span>' +
        '</th>' +
        '</tr>' +
        '</thead>' +
        '<tbody id="cert-list">' +
        '</tbody>' +
        '</table>' +
        '</div>' +
        '<a class="kica-button bg-light-blue" href="javascript:void(0)" onclick="KICA_DIALOG.openFindCert();">' +
        '<i class="icon-find-cert"></i>' +
        '<span>' + KICA_CORPUS.BUTTON_FIND_CERTIFICATE + '</span>' +
        '</a>' +
        '<h2 class="cert-password-label">' + KICA_CORPUS.CERT_PWD_LABEL + '</h2>' +
        '<form class="input-password-form" name="formPasswordE2EMax8" onkeydown="return event.key != \'Enter\';" autocomplete="off">' +
        '<input style="display:none" aria-hidden="true">' +
        '<input type="password" style="display:none" aria-hidden="true">' +
        '<input class="cert-qlalfqjsgh" type="password" id="qlalfqjsgh" name="PasswordE2EMax8" placeholder="' + KICA_CORPUS.CERT_PWD_PLACEHOLDER + '" autocomplete="off">' +
        '<a class="icon-vkeyboard" id="vkeyboard-toggle" href="javascript:void(0);" onclick="KICA_DIALOG.toggleVirtualKeyboard()"></a>' +
        '</form>' +
        '<div class="button-wrapper">' +
        '<button class="confirm-button" id ="select-certificate-confirm">' + KICA_CORPUS.BUTTON_CONFIRM + '</button>' +
        '<button class="cancel-button" onclick="KICA_DIALOG.closeSelectCertificateDialog()">' + KICA_CORPUS.BUTTON_CANCEL + '</button>' +
        '</div>' +
        '</div>' +
        '</div>' +
        '<div class="browser-guide-wrapper kica-d-none" id="browser-guide-wrapper">' +
        '<div class="browser-guide-header">' +
        '<div class="close">' +
        '<a class="html5-guide-close" href="javascript:void(0)" onclick="KICA_DIALOG.closeGuide()">' +
        '<i class="icon-close"></i>' +
        '</a>' +
        '</div>' +
        '<h1>' + KICA_CORPUS.BROWSER_GUIDE_TITLE + '</h1>' +
        '<div class="text">' +
        '<i class="icon-browser"></i>' +
        '<h2>' + KICA_CORPUS.BROWSER_GUIDE_SUB_TITLE + '</h2>' +
        '</div>' +
        '</div>' +
        '<div class="browser-guide-contents">' +
        '<h2>' + KICA_CORPUS.BROWSER_GUIDE_STORE_CERT_LABEL + '</h2>' +
        '<div class="browser-guide-steps-wrapper">' +
        '<div class="step-wrapper">' +
        '<span class="step-number">1</span>' +
        '<span class="step-text">' + KICA_CORPUS.BROWSER_GUIDE_STORE_CERT_STEP1 + '</span>' +
        '<span class="step-text sub">' + KICA_CORPUS.BROWSER_GUIDE_STORE_CERT_STEP1_1 + '</span>' +
        '</div>' +
        '<div class="step-wrapper">' +
        '<span class="step-number">2</span>' +
        '<span class="step-text">' + KICA_CORPUS.BROWSER_GUIDE_STORE_CERT_STEP2 + '</span>' +
        '<span class="step-text sub">' + KICA_CORPUS.BROWSER_GUIDE_STORE_CERT_STEP2_1 + '</span>' +
        '</div>' +
        '<div class="step-wrapper">' +
        '<span class="step-text w-100">' + KICA_CORPUS.BROWSER_GUIDE_STORE_CERT_STEP3 + '</span>' +
        '</div>' +
        '</div>' +
        '' +
        '<h2>' + KICA_CORPUS.BROWSER_GUIDE_DELETE_CERT_LABEL + '</h2>' +
        '<div class="browser-guide-steps-wrapper">' +
        '<div class="step-wrapper">' +
        '<span class="step-number">1</span>' +
        '<span class="step-text">' + KICA_CORPUS.BROWSER_GUIDE_DELETE_CERT_STEP1 + '</span>' +
        '</div>' +
        '<div class="step-wrapper">' +
        '<span class="step-number">2</span>' + 
        '<span class="step-text">' + KICA_CORPUS.BROWSER_GUIDE_DELETE_CERT_STEP2 + '</span>' +
        '</div>' +
        '<div class="step-wrapper">' +
        '<span class="step-number">3</span>' +
        '<span class="step-text">' + KICA_CORPUS.BROWSER_GUIDE_DELETE_CERT_STEP3 + '</span>' +
        '</div>' +
        '</div>' +
        '' + 
        '<div class="detail-guide-wrapper">' +
        '<a class="open-detail-guide-wrapper" href="javascript:void(0)" onclick="KICA_DIALOG.openDetailGuide()">' +
        '<span class="badge">!</span>' +
        '<span class="text">' + KICA_CORPUS.BROWSER_DETAIL_MORE_BUTTON + '</span>' +
        '</a>' +
        '</div>' +
        '</div>' +
        '</div>' +
        '</div>';

    object.pdfViewer = '<div class="detail-guide kica-d-none" id="detail-guide">' +
        '<div class="detail-guide-content">' +
        '<span class="close-detail-guide" onclick="KICA_DIALOG.closeDetailGuide()">&times;</span>' +
        '<embed src="' + webnpki_config.path + 'assets/guide/browser_certificate_guide.pdf" type="application/pdf" class="browser-detail-guide">' +
        '</div>' +
        '</div>';

    object.importPFX = '<div class="webnpki-wrapper kica-d-none" id="webnpki-wrapper">' +
        '<div class="dim"></div>' +
        '<div class="pfx-password-wrapper">' +
        '<div class="pfx-password-header">' +
        '<span>' + KICA_CORPUS.IMPORT_CERT_TITLE + '</span>' +
        '</div>' +
        '<div class="pfx-password-body">' +
        '<span>' + KICA_CORPUS.IMPORT_CERT_PASSWORD_LABEL + '</span>' +
        '<div class="pfx-password-input">' +
        '<form name="form-pfx-qlalfqjsgh" onsubmit="$(\'#pfx-qlalfqjsgh-confirm\').trigger(\'click\'); return false;" onkeydown="return event.key != \'Enter\'";>' +
        '<input id="input-pfx-qlalfqjsgh" name="pfx-qlalfqjsgh" class="pfx-qlalfqjsgh" type="password" autocomplete="off">' +
        '<a class="icon-vkeyboard" id="pfx-vkeyboard-toggle" href="javascript:void(0);" onclick="KICA_DIALOG.togglePFXVirtualKeyboard()"></a>' +
        '</form>' +
        '</div>' +
        '<span>' + KICA_CORPUS.IMPORT_CERT_TEXT + '</span>' +
        '</div>' +
        '<div class="pfx-password-footer">' +
        '<button class="confirm-button" id="pfx-qlalfqjsgh-confirm">' + KICA_CORPUS.BUTTON_CONFIRM + '</button>' +
        '<button class="cancel-button" id="pfx-qlalfqjsgh-cancel">' + KICA_CORPUS.BUTTON_CANCEL + '</button>' +
        '</div>' +
        '</div>' +
        '<input id="inputCerts" type="file" style="display:none" accept=".p12, .pfx" onchange="KICA_DIALOG.onSelectCert(this);"/>' +
        '</div>';

    object.findPFX = '<div class="find-pfx-wrapper kica-d-none" id="find-pfx-wrapper">' +
        '<div class="dim"></div>' +
        '<div class="find-pfx-container">' +
        '<div class="find-pfx-header">' +
        '<span>' + KICA_CORPUS.IMPORT_PFX_TITLE + '</span>' +
        '</div>' +
        '<div class="convert-pfx-wrapper">' +
        '<div class="convert-pfx-header">' +
        '<i class="icon-faq"></i><span>' + KICA_CORPUS.IMPORT_PFX_CONVERT_PFX_LABEL + '</span>' +
        '</div>' +
        '<div class="convert-pfx-download">' +
        '<a href="javascript:void(0);" onclick="KICA_DIALOG.downloadConvertCert();"><i class="icon-down"></i><span>' + KICA_CORPUS.IMPORT_PFX_CONVERT_PFX_DOWNLOAD + '</span></a>' +
        '</div>' +
        '<div class="convert-pfx-step-wrapper">' +
        '<span class="step-number">1</span>' +
        '<span class="step-text"><span>' + KICA_CORPUS.IMPORT_PFX_CONVERT_PFX_DOWNLOAD + '</span>' + KICA_CORPUS.IMPORT_PFX_CONVERT_PFX_STEP1 + '</span>' +
        '</div>' +
        '<div class="convert-pfx-step-wrapper">' +
        '<span class="step-number">2</span>' +
        '<span class="step-text">' + KICA_CORPUS.IMPORT_PFX_CONVERT_PFX_STEP2 + '</span>' +
        '</div>' +
        '<div class="convert-pfx-step-wrapper">' +
        '<span class="step-number">3</span>' +
        '<span class="step-text">' + KICA_CORPUS.IMPORT_PFX_CONVERT_PFX_STEP3 + '</span>' +
        '</div>' +
        '</div>' +
        '<div class="find-pfx-footer">' +
        '<button class="confirm-button" id="find-pfx-button" onclick="KICA_DIALOG.searchCert();">' + KICA_CORPUS.IMPORT_PFX_FIND_BUTTON + '</button>' +
        '<button class="cancel-button" id="find-pfx-cancel" onclick="KICA_DIALOG.closeFindCert();">' + KICA_CORPUS.BUTTON_CANCEL + '</button>' +
        '</div>' +
        '</div>' +
        '</div>';

    return object;
}

module.exports = {
    boxes: boxes
}

/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(Promise) {/*!
* sweetalert2 v9.5.3
* Released under the MIT License.
*/
(function (global, factory) {
	 true ? module.exports = factory() :
	undefined;
}(this, (function () { 'use strict';

function _typeof(obj) {
  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function (obj) {
      return typeof obj;
    };
  } else {
    _typeof = function (obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _construct(Parent, args, Class) {
  if (isNativeReflectConstruct()) {
    _construct = Reflect.construct;
  } else {
    _construct = function _construct(Parent, args, Class) {
      var a = [null];
      a.push.apply(a, args);
      var Constructor = Function.bind.apply(Parent, a);
      var instance = new Constructor();
      if (Class) _setPrototypeOf(instance, Class.prototype);
      return instance;
    };
  }

  return _construct.apply(null, arguments);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _possibleConstructorReturn(self, call) {
  if (call && (typeof call === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = _getPrototypeOf(object);
    if (object === null) break;
  }

  return object;
}

function _get(target, property, receiver) {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    _get = Reflect.get;
  } else {
    _get = function _get(target, property, receiver) {
      var base = _superPropBase(target, property);

      if (!base) return;
      var desc = Object.getOwnPropertyDescriptor(base, property);

      if (desc.get) {
        return desc.get.call(receiver);
      }

      return desc.value;
    };
  }

  return _get(target, property, receiver || target);
}

var consolePrefix = 'SweetAlert2:';
/**
 * Filter the unique values into a new array
 * @param arr
 */

var uniqueArray = function uniqueArray(arr) {
  var result = [];

  for (var i = 0; i < arr.length; i++) {
    if (result.indexOf(arr[i]) === -1) {
      result.push(arr[i]);
    }
  }

  return result;
};
/**
 * Capitalize the first letter of a string
 * @param str
 */

var capitalizeFirstLetter = function capitalizeFirstLetter(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
};
/**
 * Returns the array ob object values (Object.values isn't supported in IE11)
 * @param obj
 */

var objectValues = function objectValues(obj) {
  return Object.keys(obj).map(function (key) {
    return obj[key];
  });
};
/**
 * Convert NodeList to Array
 * @param nodeList
 */

var toArray = function toArray(nodeList) {
  return Array.prototype.slice.call(nodeList);
};
/**
 * Standardise console warnings
 * @param message
 */

var warn = function warn(message) {
  console.warn("".concat(consolePrefix, " ").concat(message));
};
/**
 * Standardise console errors
 * @param message
 */

var error = function error(message) {
  console.error("".concat(consolePrefix, " ").concat(message));
};
/**
 * Private global state for `warnOnce`
 * @type {Array}
 * @private
 */

var previousWarnOnceMessages = [];
/**
 * Show a console warning, but only if it hasn't already been shown
 * @param message
 */

var warnOnce = function warnOnce(message) {
  if (!(previousWarnOnceMessages.indexOf(message) !== -1)) {
    previousWarnOnceMessages.push(message);
    warn(message);
  }
};
/**
 * Show a one-time console warning about deprecated params/methods
 */

var warnAboutDepreation = function warnAboutDepreation(deprecatedParam, useInstead) {
  warnOnce("\"".concat(deprecatedParam, "\" is deprecated and will be removed in the next major release. Please use \"").concat(useInstead, "\" instead."));
};
/**
 * If `arg` is a function, call it (with no arguments or context) and return the result.
 * Otherwise, just pass the value through
 * @param arg
 */

var callIfFunction = function callIfFunction(arg) {
  return typeof arg === 'function' ? arg() : arg;
};
var isPromise = function isPromise(arg) {
  return arg && Promise.resolve(arg) === arg;
};

var DismissReason = Object.freeze({
  cancel: 'cancel',
  backdrop: 'backdrop',
  close: 'close',
  esc: 'esc',
  timer: 'timer'
});

var isJqueryElement = function isJqueryElement(elem) {
  return _typeof(elem) === 'object' && elem.jquery;
};

var isElement = function isElement(elem) {
  return elem instanceof Element || isJqueryElement(elem);
};

var argsToParams = function argsToParams(args) {
  var params = {};

  if (_typeof(args[0]) === 'object' && !isElement(args[0])) {
    _extends(params, args[0]);
  } else {
    ['title', 'html', 'icon'].forEach(function (name, index) {
      var arg = args[index];

      if (typeof arg === 'string' || isElement(arg)) {
        params[name] = arg;
      } else if (arg !== undefined) {
        error("Unexpected type of ".concat(name, "! Expected \"string\" or \"Element\", got ").concat(_typeof(arg)));
      }
    });
  }

  return params;
};

var swalPrefix = 'swal2-';
var prefix = function prefix(items) {
  var result = {};

  for (var i in items) {
    result[items[i]] = swalPrefix + items[i];
  }

  return result;
};
var swalClasses = prefix(['container', 'shown', 'height-auto', 'iosfix', 'popup', 'modal', 'no-backdrop', 'toast', 'toast-shown', 'toast-column', 'show', 'hide', 'close', 'title', 'header', 'content', 'html-container', 'actions', 'confirm', 'cancel', 'footer', 'icon', 'icon-content', 'image', 'input', 'file', 'range', 'select', 'radio', 'checkbox', 'label', 'textarea', 'inputerror', 'validation-message', 'progress-steps', 'active-progress-step', 'progress-step', 'progress-step-line', 'loading', 'styled', 'top', 'top-start', 'top-end', 'top-left', 'top-right', 'center', 'center-start', 'center-end', 'center-left', 'center-right', 'bottom', 'bottom-start', 'bottom-end', 'bottom-left', 'bottom-right', 'grow-row', 'grow-column', 'grow-fullscreen', 'rtl', 'timer-progress-bar', 'scrollbar-measure', 'icon-success', 'icon-warning', 'icon-info', 'icon-question', 'icon-error']);
var iconTypes = prefix(['success', 'warning', 'info', 'question', 'error']);

var getContainer = function getContainer() {
  return document.body.querySelector(".".concat(swalClasses.container));
};
var elementBySelector = function elementBySelector(selectorString) {
  var container = getContainer();
  return container ? container.querySelector(selectorString) : null;
};

var elementByClass = function elementByClass(className) {
  return elementBySelector(".".concat(className));
};

var getPopup = function getPopup() {
  return elementByClass(swalClasses.popup);
};
var getIcons = function getIcons() {
  var popup = getPopup();
  return toArray(popup.querySelectorAll(".".concat(swalClasses.icon)));
};
var getIcon = function getIcon() {
  var visibleIcon = getIcons().filter(function (icon) {
    return isVisible(icon);
  });
  return visibleIcon.length ? visibleIcon[0] : null;
};
var getTitle = function getTitle() {
  return elementByClass(swalClasses.title);
};
var getContent = function getContent() {
  return elementByClass(swalClasses.content);
};
var getHtmlContainer = function getHtmlContainer() {
  return elementByClass(swalClasses['html-container']);
};
var getImage = function getImage() {
  return elementByClass(swalClasses.image);
};
var getProgressSteps = function getProgressSteps() {
  return elementByClass(swalClasses['progress-steps']);
};
var getValidationMessage = function getValidationMessage() {
  return elementByClass(swalClasses['validation-message']);
};
var getConfirmButton = function getConfirmButton() {
  return elementBySelector(".".concat(swalClasses.actions, " .").concat(swalClasses.confirm));
};
var getCancelButton = function getCancelButton() {
  return elementBySelector(".".concat(swalClasses.actions, " .").concat(swalClasses.cancel));
};
var getActions = function getActions() {
  return elementByClass(swalClasses.actions);
};
var getHeader = function getHeader() {
  return elementByClass(swalClasses.header);
};
var getFooter = function getFooter() {
  return elementByClass(swalClasses.footer);
};
var getTimerProgressBar = function getTimerProgressBar() {
  return elementByClass(swalClasses['timer-progress-bar']);
};
var getCloseButton = function getCloseButton() {
  return elementByClass(swalClasses.close);
}; // https://github.com/jkup/focusable/blob/master/index.js

var focusable = "\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex=\"0\"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n";
var getFocusableElements = function getFocusableElements() {
  var focusableElementsWithTabindex = toArray(getPopup().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')) // sort according to tabindex
  .sort(function (a, b) {
    a = parseInt(a.getAttribute('tabindex'));
    b = parseInt(b.getAttribute('tabindex'));

    if (a > b) {
      return 1;
    } else if (a < b) {
      return -1;
    }

    return 0;
  });
  var otherFocusableElements = toArray(getPopup().querySelectorAll(focusable)).filter(function (el) {
    return el.getAttribute('tabindex') !== '-1';
  });
  return uniqueArray(focusableElementsWithTabindex.concat(otherFocusableElements)).filter(function (el) {
    return isVisible(el);
  });
};
var isModal = function isModal() {
  return !isToast() && !document.body.classList.contains(swalClasses['no-backdrop']);
};
var isToast = function isToast() {
  return document.body.classList.contains(swalClasses['toast-shown']);
};
var isLoading = function isLoading() {
  return getPopup().hasAttribute('data-loading');
};

var states = {
  previousBodyPadding: null
};
var hasClass = function hasClass(elem, className) {
  if (!className) {
    return false;
  }

  var classList = className.split(/\s+/);

  for (var i = 0; i < classList.length; i++) {
    if (!elem.classList.contains(classList[i])) {
      return false;
    }
  }

  return true;
};

var removeCustomClasses = function removeCustomClasses(elem, params) {
  toArray(elem.classList).forEach(function (className) {
    if (!(objectValues(swalClasses).indexOf(className) !== -1) && !(objectValues(iconTypes).indexOf(className) !== -1) && !(objectValues(params.showClass).indexOf(className) !== -1)) {
      elem.classList.remove(className);
    }
  });
};

var applyCustomClass = function applyCustomClass(elem, params, className) {
  removeCustomClasses(elem, params);

  if (params.customClass && params.customClass[className]) {
    if (typeof params.customClass[className] !== 'string' && !params.customClass[className].forEach) {
      return warn("Invalid type of customClass.".concat(className, "! Expected string or iterable object, got \"").concat(_typeof(params.customClass[className]), "\""));
    }

    addClass(elem, params.customClass[className]);
  }
};
function getInput(content, inputType) {
  if (!inputType) {
    return null;
  }

  switch (inputType) {
    case 'select':
    case 'textarea':
    case 'file':
      return getChildByClass(content, swalClasses[inputType]);

    case 'checkbox':
      return content.querySelector(".".concat(swalClasses.checkbox, " input"));

    case 'radio':
      return content.querySelector(".".concat(swalClasses.radio, " input:checked")) || content.querySelector(".".concat(swalClasses.radio, " input:first-child"));

    case 'range':
      return content.querySelector(".".concat(swalClasses.range, " input"));

    default:
      return getChildByClass(content, swalClasses.input);
  }
}
var focusInput = function focusInput(input) {
  input.focus(); // place cursor at end of text in text input

  if (input.type !== 'file') {
    // http://stackoverflow.com/a/2345915
    var val = input.value;
    input.value = '';
    input.value = val;
  }
};
var toggleClass = function toggleClass(target, classList, condition) {
  if (!target || !classList) {
    return;
  }

  if (typeof classList === 'string') {
    classList = classList.split(/\s+/).filter(Boolean);
  }

  classList.forEach(function (className) {
    if (target.forEach) {
      target.forEach(function (elem) {
        condition ? elem.classList.add(className) : elem.classList.remove(className);
      });
    } else {
      condition ? target.classList.add(className) : target.classList.remove(className);
    }
  });
};
var addClass = function addClass(target, classList) {
  toggleClass(target, classList, true);
};
var removeClass = function removeClass(target, classList) {
  toggleClass(target, classList, false);
};
var getChildByClass = function getChildByClass(elem, className) {
  for (var i = 0; i < elem.childNodes.length; i++) {
    if (hasClass(elem.childNodes[i], className)) {
      return elem.childNodes[i];
    }
  }
};
var applyNumericalStyle = function applyNumericalStyle(elem, property, value) {
  if (value || parseInt(value) === 0) {
    elem.style[property] = typeof value === 'number' ? "".concat(value, "px") : value;
  } else {
    elem.style.removeProperty(property);
  }
};
var show = function show(elem) {
  var display = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'flex';
  elem.style.opacity = '';
  elem.style.display = display;
};
var hide = function hide(elem) {
  elem.style.opacity = '';
  elem.style.display = 'none';
};
var toggle = function toggle(elem, condition, display) {
  condition ? show(elem, display) : hide(elem);
}; // borrowed from jquery $(elem).is(':visible') implementation

var isVisible = function isVisible(elem) {
  return !!(elem && (elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length));
};
/* istanbul ignore next */

var isScrollable = function isScrollable(elem) {
  return !!(elem.scrollHeight > elem.clientHeight);
}; // borrowed from https://stackoverflow.com/a/46352119

var hasCssAnimation = function hasCssAnimation(elem) {
  var style = window.getComputedStyle(elem);
  var animDuration = parseFloat(style.getPropertyValue('animation-duration') || '0');
  var transDuration = parseFloat(style.getPropertyValue('transition-duration') || '0');
  return animDuration > 0 || transDuration > 0;
};
var contains = function contains(haystack, needle) {
  if (typeof haystack.contains === 'function') {
    return haystack.contains(needle);
  }
};
var animateTimerProgressBar = function animateTimerProgressBar(timer) {
  var reset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  var timerProgressBar = getTimerProgressBar();

  if (isVisible(timerProgressBar)) {
    if (reset) {
      timerProgressBar.style.transition = 'none';
      timerProgressBar.style.width = '100%';
    }

    setTimeout(function () {
      timerProgressBar.style.transition = "width ".concat(timer / 1000, "s linear");
      timerProgressBar.style.width = '0%';
    }, 10);
  }
};
var stopTimerProgressBar = function stopTimerProgressBar() {
  var timerProgressBar = getTimerProgressBar();
  var timerProgressBarWidth = parseInt(window.getComputedStyle(timerProgressBar).width);
  timerProgressBar.style.removeProperty('transition');
  timerProgressBar.style.width = '100%';
  var timerProgressBarFullWidth = parseInt(window.getComputedStyle(timerProgressBar).width);
  var timerProgressBarPercent = parseInt(timerProgressBarWidth / timerProgressBarFullWidth * 100);
  timerProgressBar.style.removeProperty('transition');
  timerProgressBar.style.width = "".concat(timerProgressBarPercent, "%");
};

// Detect Node env
var isNodeEnv = function isNodeEnv() {
  return typeof window === 'undefined' || typeof document === 'undefined';
};

var sweetHTML = "\n <div aria-labelledby=\"".concat(swalClasses.title, "\" aria-describedby=\"").concat(swalClasses.content, "\" class=\"").concat(swalClasses.popup, "\" tabindex=\"-1\">\n   <div class=\"").concat(swalClasses.header, "\">\n     <ul class=\"").concat(swalClasses['progress-steps'], "\"></ul>\n     <div class=\"").concat(swalClasses.icon, " ").concat(iconTypes.error, "\"></div>\n     <div class=\"").concat(swalClasses.icon, " ").concat(iconTypes.question, "\"></div>\n     <div class=\"").concat(swalClasses.icon, " ").concat(iconTypes.warning, "\"></div>\n     <div class=\"").concat(swalClasses.icon, " ").concat(iconTypes.info, "\"></div>\n     <div class=\"").concat(swalClasses.icon, " ").concat(iconTypes.success, "\"></div>\n     <img class=\"").concat(swalClasses.image, "\" />\n     <h2 class=\"").concat(swalClasses.title, "\" id=\"").concat(swalClasses.title, "\"></h2>\n     <button type=\"button\" class=\"").concat(swalClasses.close, "\"></button>\n   </div>\n   <div class=\"").concat(swalClasses.content, "\">\n     <div id=\"").concat(swalClasses.content, "\" class=\"").concat(swalClasses['html-container'], "\"></div>\n     <input class=\"").concat(swalClasses.input, "\" />\n     <input type=\"file\" class=\"").concat(swalClasses.file, "\" />\n     <div class=\"").concat(swalClasses.range, "\">\n       <input type=\"range\" />\n       <output></output>\n     </div>\n     <select class=\"").concat(swalClasses.select, "\"></select>\n     <div class=\"").concat(swalClasses.radio, "\"></div>\n     <label for=\"").concat(swalClasses.checkbox, "\" class=\"").concat(swalClasses.checkbox, "\">\n       <input type=\"checkbox\" />\n       <span class=\"").concat(swalClasses.label, "\"></span>\n     </label>\n     <textarea class=\"").concat(swalClasses.textarea, "\"></textarea>\n     <div class=\"").concat(swalClasses['validation-message'], "\" id=\"").concat(swalClasses['validation-message'], "\"></div>\n   </div>\n   <div class=\"").concat(swalClasses.actions, "\">\n     <button type=\"button\" class=\"").concat(swalClasses.confirm, "\">OK</button>\n     <button type=\"button\" class=\"").concat(swalClasses.cancel, "\">Cancel</button>\n   </div>\n   <div class=\"").concat(swalClasses.footer, "\"></div>\n   <div class=\"").concat(swalClasses['timer-progress-bar'], "\"></div>\n </div>\n").replace(/(^|\n)\s*/g, '');

var resetOldContainer = function resetOldContainer() {
  var oldContainer = getContainer();

  if (!oldContainer) {
    return;
  }

  oldContainer.parentNode.removeChild(oldContainer);
  removeClass([document.documentElement, document.body], [swalClasses['no-backdrop'], swalClasses['toast-shown'], swalClasses['has-column']]);
};

var oldInputVal; // IE11 workaround, see #1109 for details

var resetValidationMessage = function resetValidationMessage(e) {
  if (Swal.isVisible() && oldInputVal !== e.target.value) {
    Swal.resetValidationMessage();
  }

  oldInputVal = e.target.value;
};

var addInputChangeListeners = function addInputChangeListeners() {
  var content = getContent();
  var input = getChildByClass(content, swalClasses.input);
  var file = getChildByClass(content, swalClasses.file);
  var range = content.querySelector(".".concat(swalClasses.range, " input"));
  var rangeOutput = content.querySelector(".".concat(swalClasses.range, " output"));
  var select = getChildByClass(content, swalClasses.select);
  var checkbox = content.querySelector(".".concat(swalClasses.checkbox, " input"));
  var textarea = getChildByClass(content, swalClasses.textarea);
  input.oninput = resetValidationMessage;
  file.onchange = resetValidationMessage;
  select.onchange = resetValidationMessage;
  checkbox.onchange = resetValidationMessage;
  textarea.oninput = resetValidationMessage;

  range.oninput = function (e) {
    resetValidationMessage(e);
    rangeOutput.value = range.value;
  };

  range.onchange = function (e) {
    resetValidationMessage(e);
    range.nextSibling.value = range.value;
  };
};

var getTarget = function getTarget(target) {
  return typeof target === 'string' ? document.querySelector(target) : target;
};

var setupAccessibility = function setupAccessibility(params) {
  var popup = getPopup();
  popup.setAttribute('role', params.toast ? 'alert' : 'dialog');
  popup.setAttribute('aria-live', params.toast ? 'polite' : 'assertive');

  if (!params.toast) {
    popup.setAttribute('aria-modal', 'true');
  }
};

var setupRTL = function setupRTL(targetElement) {
  if (window.getComputedStyle(targetElement).direction === 'rtl') {
    addClass(getContainer(), swalClasses.rtl);
  }
};
/*
 * Add modal + backdrop to DOM
 */


var init = function init(params) {
  // Clean up the old popup container if it exists
  resetOldContainer();
  /* istanbul ignore if */

  if (isNodeEnv()) {
    error('SweetAlert2 requires document to initialize');
    return;
  }

  var container = document.createElement('div');
  container.className = swalClasses.container;
  container.innerHTML = sweetHTML;
  var targetElement = getTarget(params.target);
  targetElement.appendChild(container);
  setupAccessibility(params);
  setupRTL(targetElement);
  addInputChangeListeners();
};

var parseHtmlToContainer = function parseHtmlToContainer(param, target) {
  // DOM element
  if (param instanceof HTMLElement) {
    target.appendChild(param); // JQuery element(s)
  } else if (_typeof(param) === 'object') {
    handleJqueryElem(target, param); // Plain string
  } else if (param) {
    target.innerHTML = param;
  }
};

var handleJqueryElem = function handleJqueryElem(target, elem) {
  target.innerHTML = '';

  if (0 in elem) {
    for (var i = 0; i in elem; i++) {
      target.appendChild(elem[i].cloneNode(true));
    }
  } else {
    target.appendChild(elem.cloneNode(true));
  }
};

var animationEndEvent = function () {
  // Prevent run in Node env

  /* istanbul ignore if */
  if (isNodeEnv()) {
    return false;
  }

  var testEl = document.createElement('div');
  var transEndEventNames = {
    WebkitAnimation: 'webkitAnimationEnd',
    OAnimation: 'oAnimationEnd oanimationend',
    animation: 'animationend'
  };

  for (var i in transEndEventNames) {
    if (Object.prototype.hasOwnProperty.call(transEndEventNames, i) && typeof testEl.style[i] !== 'undefined') {
      return transEndEventNames[i];
    }
  }

  return false;
}();

// https://github.com/twbs/bootstrap/blob/master/js/src/modal.js

var measureScrollbar = function measureScrollbar() {
  var scrollDiv = document.createElement('div');
  scrollDiv.className = swalClasses['scrollbar-measure'];
  document.body.appendChild(scrollDiv);
  var scrollbarWidth = scrollDiv.getBoundingClientRect().width - scrollDiv.clientWidth;
  document.body.removeChild(scrollDiv);
  return scrollbarWidth;
};

var renderActions = function renderActions(instance, params) {
  var actions = getActions();
  var confirmButton = getConfirmButton();
  var cancelButton = getCancelButton(); // Actions (buttons) wrapper

  if (!params.showConfirmButton && !params.showCancelButton) {
    hide(actions);
  } // Custom class


  applyCustomClass(actions, params, 'actions'); // Render confirm button

  renderButton(confirmButton, 'confirm', params); // render Cancel Button

  renderButton(cancelButton, 'cancel', params);

  if (params.buttonsStyling) {
    handleButtonsStyling(confirmButton, cancelButton, params);
  } else {
    removeClass([confirmButton, cancelButton], swalClasses.styled);
    confirmButton.style.backgroundColor = confirmButton.style.borderLeftColor = confirmButton.style.borderRightColor = '';
    cancelButton.style.backgroundColor = cancelButton.style.borderLeftColor = cancelButton.style.borderRightColor = '';
  }

  if (params.reverseButtons) {
    confirmButton.parentNode.insertBefore(cancelButton, confirmButton);
  }
};

function handleButtonsStyling(confirmButton, cancelButton, params) {
  addClass([confirmButton, cancelButton], swalClasses.styled); // Buttons background colors

  if (params.confirmButtonColor) {
    confirmButton.style.backgroundColor = params.confirmButtonColor;
  }

  if (params.cancelButtonColor) {
    cancelButton.style.backgroundColor = params.cancelButtonColor;
  } // Loading state


  var confirmButtonBackgroundColor = window.getComputedStyle(confirmButton).getPropertyValue('background-color');
  confirmButton.style.borderLeftColor = confirmButtonBackgroundColor;
  confirmButton.style.borderRightColor = confirmButtonBackgroundColor;
}

function renderButton(button, buttonType, params) {
  toggle(button, params["show".concat(capitalizeFirstLetter(buttonType), "Button")], 'inline-block');
  button.innerHTML = params["".concat(buttonType, "ButtonText")]; // Set caption text

  button.setAttribute('aria-label', params["".concat(buttonType, "ButtonAriaLabel")]); // ARIA label
  // Add buttons custom classes

  button.className = swalClasses[buttonType];
  applyCustomClass(button, params, "".concat(buttonType, "Button"));
  addClass(button, params["".concat(buttonType, "ButtonClass")]);
}

function handleBackdropParam(container, backdrop) {
  if (typeof backdrop === 'string') {
    container.style.background = backdrop;
  } else if (!backdrop) {
    addClass([document.documentElement, document.body], swalClasses['no-backdrop']);
  }
}

function handlePositionParam(container, position) {
  if (position in swalClasses) {
    addClass(container, swalClasses[position]);
  } else {
    warn('The "position" parameter is not valid, defaulting to "center"');
    addClass(container, swalClasses.center);
  }
}

function handleGrowParam(container, grow) {
  if (grow && typeof grow === 'string') {
    var growClass = "grow-".concat(grow);

    if (growClass in swalClasses) {
      addClass(container, swalClasses[growClass]);
    }
  }
}

var renderContainer = function renderContainer(instance, params) {
  var container = getContainer();

  if (!container) {
    return;
  }

  handleBackdropParam(container, params.backdrop);

  if (!params.backdrop && params.allowOutsideClick) {
    warn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');
  }

  handlePositionParam(container, params.position);
  handleGrowParam(container, params.grow); // Custom class

  applyCustomClass(container, params, 'container'); // Set queue step attribute for getQueueStep() method

  var queueStep = document.body.getAttribute('data-swal2-queue-step');

  if (queueStep) {
    container.setAttribute('data-queue-step', queueStep);
    document.body.removeAttribute('data-swal2-queue-step');
  }
};

/**
 * This module containts `WeakMap`s for each effectively-"private  property" that a `Swal` has.
 * For example, to set the private property "foo" of `this` to "bar", you can `privateProps.foo.set(this, 'bar')`
 * This is the approach that Babel will probably take to implement private methods/fields
 *   https://github.com/tc39/proposal-private-methods
 *   https://github.com/babel/babel/pull/7555
 * Once we have the changes from that PR in Babel, and our core class fits reasonable in *one module*
 *   then we can use that language feature.
 */
var privateProps = {
  promise: new WeakMap(),
  innerParams: new WeakMap(),
  domCache: new WeakMap()
};

var inputTypes = ['input', 'file', 'range', 'select', 'radio', 'checkbox', 'textarea'];
var renderInput = function renderInput(instance, params) {
  var content = getContent();
  var innerParams = privateProps.innerParams.get(instance);
  var rerender = !innerParams || params.input !== innerParams.input;
  inputTypes.forEach(function (inputType) {
    var inputClass = swalClasses[inputType];
    var inputContainer = getChildByClass(content, inputClass); // set attributes

    setAttributes(inputType, params.inputAttributes); // set class

    inputContainer.className = inputClass;

    if (rerender) {
      hide(inputContainer);
    }
  });

  if (params.input) {
    if (rerender) {
      showInput(params);
    } // set custom class


    setCustomClass(params);
  }
};

var showInput = function showInput(params) {
  if (!renderInputType[params.input]) {
    return error("Unexpected type of input! Expected \"text\", \"email\", \"password\", \"number\", \"tel\", \"select\", \"radio\", \"checkbox\", \"textarea\", \"file\" or \"url\", got \"".concat(params.input, "\""));
  }

  var inputContainer = getInputContainer(params.input);
  var input = renderInputType[params.input](inputContainer, params);
  show(input); // input autofocus

  setTimeout(function () {
    focusInput(input);
  });
};

var removeAttributes = function removeAttributes(input) {
  for (var i = 0; i < input.attributes.length; i++) {
    var attrName = input.attributes[i].name;

    if (!(['type', 'value', 'style'].indexOf(attrName) !== -1)) {
      input.removeAttribute(attrName);
    }
  }
};

var setAttributes = function setAttributes(inputType, inputAttributes) {
  var input = getInput(getContent(), inputType);

  if (!input) {
    return;
  }

  removeAttributes(input);

  for (var attr in inputAttributes) {
    // Do not set a placeholder for <input type="range">
    // it'll crash Edge, #1298
    if (inputType === 'range' && attr === 'placeholder') {
      continue;
    }

    input.setAttribute(attr, inputAttributes[attr]);
  }
};

var setCustomClass = function setCustomClass(params) {
  var inputContainer = getInputContainer(params.input);

  if (params.customClass) {
    addClass(inputContainer, params.customClass.input);
  }
};

var setInputPlaceholder = function setInputPlaceholder(input, params) {
  if (!input.placeholder || params.inputPlaceholder) {
    input.placeholder = params.inputPlaceholder;
  }
};

var getInputContainer = function getInputContainer(inputType) {
  var inputClass = swalClasses[inputType] ? swalClasses[inputType] : swalClasses.input;
  return getChildByClass(getContent(), inputClass);
};

var renderInputType = {};

renderInputType.text = renderInputType.email = renderInputType.password = renderInputType.number = renderInputType.tel = renderInputType.url = function (input, params) {
  if (typeof params.inputValue === 'string' || typeof params.inputValue === 'number') {
    input.value = params.inputValue;
  } else if (!isPromise(params.inputValue)) {
    warn("Unexpected type of inputValue! Expected \"string\", \"number\" or \"Promise\", got \"".concat(_typeof(params.inputValue), "\""));
  }

  setInputPlaceholder(input, params);
  input.type = params.input;
  return input;
};

renderInputType.file = function (input, params) {
  setInputPlaceholder(input, params);
  return input;
};

renderInputType.range = function (range, params) {
  var rangeInput = range.querySelector('input');
  var rangeOutput = range.querySelector('output');
  rangeInput.value = params.inputValue;
  rangeInput.type = params.input;
  rangeOutput.value = params.inputValue;
  return range;
};

renderInputType.select = function (select, params) {
  select.innerHTML = '';

  if (params.inputPlaceholder) {
    var placeholder = document.createElement('option');
    placeholder.innerHTML = params.inputPlaceholder;
    placeholder.value = '';
    placeholder.disabled = true;
    placeholder.selected = true;
    select.appendChild(placeholder);
  }

  return select;
};

renderInputType.radio = function (radio) {
  radio.innerHTML = '';
  return radio;
};

renderInputType.checkbox = function (checkboxContainer, params) {
  var checkbox = getInput(getContent(), 'checkbox');
  checkbox.value = 1;
  checkbox.id = swalClasses.checkbox;
  checkbox.checked = Boolean(params.inputValue);
  var label = checkboxContainer.querySelector('span');
  label.innerHTML = params.inputPlaceholder;
  return checkboxContainer;
};

renderInputType.textarea = function (textarea, params) {
  textarea.value = params.inputValue;
  setInputPlaceholder(textarea, params);

  if ('MutationObserver' in window) {
    // #1699
    var initialPopupWidth = parseInt(window.getComputedStyle(getPopup()).width);
    var popupPadding = parseInt(window.getComputedStyle(getPopup()).paddingLeft) + parseInt(window.getComputedStyle(getPopup()).paddingRight);

    var outputsize = function outputsize() {
      var contentWidth = textarea.offsetWidth + popupPadding;

      if (contentWidth > initialPopupWidth) {
        getPopup().style.width = "".concat(contentWidth, "px");
      } else {
        getPopup().style.width = null;
      }
    };

    new MutationObserver(outputsize).observe(textarea, {
      attributes: true,
      attributeFilter: ['style']
    });
  }

  return textarea;
};

var renderContent = function renderContent(instance, params) {
  var content = getContent().querySelector("#".concat(swalClasses.content)); // Content as HTML

  if (params.html) {
    parseHtmlToContainer(params.html, content);
    show(content, 'block'); // Content as plain text
  } else if (params.text) {
    content.textContent = params.text;
    show(content, 'block'); // No content
  } else {
    hide(content);
  }

  renderInput(instance, params); // Custom class

  applyCustomClass(getContent(), params, 'content');
};

var renderFooter = function renderFooter(instance, params) {
  var footer = getFooter();
  toggle(footer, params.footer);

  if (params.footer) {
    parseHtmlToContainer(params.footer, footer);
  } // Custom class


  applyCustomClass(footer, params, 'footer');
};

var renderCloseButton = function renderCloseButton(instance, params) {
  var closeButton = getCloseButton();
  closeButton.innerHTML = params.closeButtonHtml; // Custom class

  applyCustomClass(closeButton, params, 'closeButton');
  toggle(closeButton, params.showCloseButton);
  closeButton.setAttribute('aria-label', params.closeButtonAriaLabel);
};

var renderIcon = function renderIcon(instance, params) {
  var innerParams = privateProps.innerParams.get(instance); // if the give icon already rendered, apply the custom class without re-rendering the icon

  if (innerParams && params.icon === innerParams.icon && getIcon()) {
    applyCustomClass(getIcon(), params, 'icon');
    return;
  }

  hideAllIcons();

  if (!params.icon) {
    return;
  }

  if (Object.keys(iconTypes).indexOf(params.icon) !== -1) {
    var icon = elementBySelector(".".concat(swalClasses.icon, ".").concat(iconTypes[params.icon]));
    show(icon); // Custom or default content

    setContent(icon, params);
    adjustSuccessIconBackgoundColor(); // Custom class

    applyCustomClass(icon, params, 'icon'); // Animate icon

    addClass(icon, params.showClass.icon);
  } else {
    error("Unknown icon! Expected \"success\", \"error\", \"warning\", \"info\" or \"question\", got \"".concat(params.icon, "\""));
  }
};

var hideAllIcons = function hideAllIcons() {
  var icons = getIcons();

  for (var i = 0; i < icons.length; i++) {
    hide(icons[i]);
  }
}; // Adjust success icon background color to match the popup background color


var adjustSuccessIconBackgoundColor = function adjustSuccessIconBackgoundColor() {
  var popup = getPopup();
  var popupBackgroundColor = window.getComputedStyle(popup).getPropertyValue('background-color');
  var successIconParts = popup.querySelectorAll('[class^=swal2-success-circular-line], .swal2-success-fix');

  for (var i = 0; i < successIconParts.length; i++) {
    successIconParts[i].style.backgroundColor = popupBackgroundColor;
  }
};

var setContent = function setContent(icon, params) {
  icon.innerHTML = '';

  if (params.iconHtml) {
    icon.innerHTML = iconContent(params.iconHtml);
  } else if (params.icon === 'success') {
    icon.innerHTML = "\n      <div class=\"swal2-success-circular-line-left\"></div>\n      <span class=\"swal2-success-line-tip\"></span> <span class=\"swal2-success-line-long\"></span>\n      <div class=\"swal2-success-ring\"></div> <div class=\"swal2-success-fix\"></div>\n      <div class=\"swal2-success-circular-line-right\"></div>\n    ";
  } else if (params.icon === 'error') {
    icon.innerHTML = "\n      <span class=\"swal2-x-mark\">\n        <span class=\"swal2-x-mark-line-left\"></span>\n        <span class=\"swal2-x-mark-line-right\"></span>\n      </span>\n    ";
  } else {
    var defaultIconHtml = {
      question: '?',
      warning: '!',
      info: 'i'
    };
    icon.innerHTML = iconContent(defaultIconHtml[params.icon]);
  }
};

var iconContent = function iconContent(content) {
  return "<div class=\"".concat(swalClasses['icon-content'], "\">").concat(content, "</div>");
};

var renderImage = function renderImage(instance, params) {
  var image = getImage();

  if (!params.imageUrl) {
    return hide(image);
  }

  show(image); // Src, alt

  image.setAttribute('src', params.imageUrl);
  image.setAttribute('alt', params.imageAlt); // Width, height

  applyNumericalStyle(image, 'width', params.imageWidth);
  applyNumericalStyle(image, 'height', params.imageHeight); // Class

  image.className = swalClasses.image;
  applyCustomClass(image, params, 'image');
};

var currentSteps = [];
/*
 * Global function for chaining sweetAlert popups
 */

var queue = function queue(steps) {
  var Swal = this;
  currentSteps = steps;

  var resetAndResolve = function resetAndResolve(resolve, value) {
    currentSteps = [];
    resolve(value);
  };

  var queueResult = [];
  return new Promise(function (resolve) {
    (function step(i, callback) {
      if (i < currentSteps.length) {
        document.body.setAttribute('data-swal2-queue-step', i);
        Swal.fire(currentSteps[i]).then(function (result) {
          if (typeof result.value !== 'undefined') {
            queueResult.push(result.value);
            step(i + 1, callback);
          } else {
            resetAndResolve(resolve, {
              dismiss: result.dismiss
            });
          }
        });
      } else {
        resetAndResolve(resolve, {
          value: queueResult
        });
      }
    })(0);
  });
};
/*
 * Global function for getting the index of current popup in queue
 */

var getQueueStep = function getQueueStep() {
  return getContainer().getAttribute('data-queue-step');
};
/*
 * Global function for inserting a popup to the queue
 */

var insertQueueStep = function insertQueueStep(step, index) {
  if (index && index < currentSteps.length) {
    return currentSteps.splice(index, 0, step);
  }

  return currentSteps.push(step);
};
/*
 * Global function for deleting a popup from the queue
 */

var deleteQueueStep = function deleteQueueStep(index) {
  if (typeof currentSteps[index] !== 'undefined') {
    currentSteps.splice(index, 1);
  }
};

var createStepElement = function createStepElement(step) {
  var stepEl = document.createElement('li');
  addClass(stepEl, swalClasses['progress-step']);
  stepEl.innerHTML = step;
  return stepEl;
};

var createLineElement = function createLineElement(params) {
  var lineEl = document.createElement('li');
  addClass(lineEl, swalClasses['progress-step-line']);

  if (params.progressStepsDistance) {
    lineEl.style.width = params.progressStepsDistance;
  }

  return lineEl;
};

var renderProgressSteps = function renderProgressSteps(instance, params) {
  var progressStepsContainer = getProgressSteps();

  if (!params.progressSteps || params.progressSteps.length === 0) {
    return hide(progressStepsContainer);
  }

  show(progressStepsContainer);
  progressStepsContainer.innerHTML = '';
  var currentProgressStep = parseInt(params.currentProgressStep === undefined ? getQueueStep() : params.currentProgressStep);

  if (currentProgressStep >= params.progressSteps.length) {
    warn('Invalid currentProgressStep parameter, it should be less than progressSteps.length ' + '(currentProgressStep like JS arrays starts from 0)');
  }

  params.progressSteps.forEach(function (step, index) {
    var stepEl = createStepElement(step);
    progressStepsContainer.appendChild(stepEl);

    if (index === currentProgressStep) {
      addClass(stepEl, swalClasses['active-progress-step']);
    }

    if (index !== params.progressSteps.length - 1) {
      var lineEl = createLineElement(step);
      progressStepsContainer.appendChild(lineEl);
    }
  });
};

var renderTitle = function renderTitle(instance, params) {
  var title = getTitle();
  toggle(title, params.title || params.titleText);

  if (params.title) {
    parseHtmlToContainer(params.title, title);
  }

  if (params.titleText) {
    title.innerText = params.titleText;
  } // Custom class


  applyCustomClass(title, params, 'title');
};

var renderHeader = function renderHeader(instance, params) {
  var header = getHeader(); // Custom class

  applyCustomClass(header, params, 'header'); // Progress steps

  renderProgressSteps(instance, params); // Icon

  renderIcon(instance, params); // Image

  renderImage(instance, params); // Title

  renderTitle(instance, params); // Close button

  renderCloseButton(instance, params);
};

var renderPopup = function renderPopup(instance, params) {
  var popup = getPopup(); // Width

  applyNumericalStyle(popup, 'width', params.width); // Padding

  applyNumericalStyle(popup, 'padding', params.padding); // Background

  if (params.background) {
    popup.style.background = params.background;
  } // Classes


  addClasses(popup, params);
};

var addClasses = function addClasses(popup, params) {
  // Default Class + showClass when updating Swal.update({})
  popup.className = "".concat(swalClasses.popup, " ").concat(isVisible(popup) ? params.showClass.popup : '');

  if (params.toast) {
    addClass([document.documentElement, document.body], swalClasses['toast-shown']);
    addClass(popup, swalClasses.toast);
  } else {
    addClass(popup, swalClasses.modal);
  } // Custom class


  applyCustomClass(popup, params, 'popup');

  if (typeof params.customClass === 'string') {
    addClass(popup, params.customClass);
  } // Icon class (#1842)


  if (params.icon) {
    addClass(popup, swalClasses["icon-".concat(params.icon)]);
  }
};

var render = function render(instance, params) {
  renderPopup(instance, params);
  renderContainer(instance, params);
  renderHeader(instance, params);
  renderContent(instance, params);
  renderActions(instance, params);
  renderFooter(instance, params);

  if (typeof params.onRender === 'function') {
    params.onRender(getPopup());
  }
};

/*
 * Global function to determine if SweetAlert2 popup is shown
 */

var isVisible$1 = function isVisible$$1() {
  return isVisible(getPopup());
};
/*
 * Global function to click 'Confirm' button
 */

var clickConfirm = function clickConfirm() {
  return getConfirmButton() && getConfirmButton().click();
};
/*
 * Global function to click 'Cancel' button
 */

var clickCancel = function clickCancel() {
  return getCancelButton() && getCancelButton().click();
};

function fire() {
  var Swal = this;

  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  return _construct(Swal, args);
}

/**
 * Returns an extended version of `Swal` containing `params` as defaults.
 * Useful for reusing Swal configuration.
 *
 * For example:
 *
 * Before:
 * const textPromptOptions = { input: 'text', showCancelButton: true }
 * const {value: firstName} = await Swal.fire({ ...textPromptOptions, title: 'What is your first name?' })
 * const {value: lastName} = await Swal.fire({ ...textPromptOptions, title: 'What is your last name?' })
 *
 * After:
 * const TextPrompt = Swal.mixin({ input: 'text', showCancelButton: true })
 * const {value: firstName} = await TextPrompt('What is your first name?')
 * const {value: lastName} = await TextPrompt('What is your last name?')
 *
 * @param mixinParams
 */
function mixin(mixinParams) {
  var MixinSwal =
  /*#__PURE__*/
  function (_this) {
    _inherits(MixinSwal, _this);

    function MixinSwal() {
      _classCallCheck(this, MixinSwal);

      return _possibleConstructorReturn(this, _getPrototypeOf(MixinSwal).apply(this, arguments));
    }

    _createClass(MixinSwal, [{
      key: "_main",
      value: function _main(params) {
        return _get(_getPrototypeOf(MixinSwal.prototype), "_main", this).call(this, _extends({}, mixinParams, params));
      }
    }]);

    return MixinSwal;
  }(this);

  return MixinSwal;
}

/**
 * Show spinner instead of Confirm button
 */

var showLoading = function showLoading() {
  var popup = getPopup();

  if (!popup) {
    Swal.fire();
  }

  popup = getPopup();
  var actions = getActions();
  var confirmButton = getConfirmButton();
  show(actions);
  show(confirmButton, 'inline-block');
  addClass([popup, actions], swalClasses.loading);
  confirmButton.disabled = true;
  popup.setAttribute('data-loading', true);
  popup.setAttribute('aria-busy', true);
  popup.focus();
};

var RESTORE_FOCUS_TIMEOUT = 100;

var globalState = {};
var focusPreviousActiveElement = function focusPreviousActiveElement() {
  if (globalState.previousActiveElement && globalState.previousActiveElement.focus) {
    globalState.previousActiveElement.focus();
    globalState.previousActiveElement = null;
  } else if (document.body) {
    document.body.focus();
  }
}; // Restore previous active (focused) element


var restoreActiveElement = function restoreActiveElement() {
  return new Promise(function (resolve) {
    var x = window.scrollX;
    var y = window.scrollY;
    globalState.restoreFocusTimeout = setTimeout(function () {
      focusPreviousActiveElement();
      resolve();
    }, RESTORE_FOCUS_TIMEOUT); // issues/900

    if (typeof x !== 'undefined' && typeof y !== 'undefined') {
      // IE doesn't have scrollX/scrollY support
      window.scrollTo(x, y);
    }
  });
};

/**
 * If `timer` parameter is set, returns number of milliseconds of timer remained.
 * Otherwise, returns undefined.
 */

var getTimerLeft = function getTimerLeft() {
  return globalState.timeout && globalState.timeout.getTimerLeft();
};
/**
 * Stop timer. Returns number of milliseconds of timer remained.
 * If `timer` parameter isn't set, returns undefined.
 */

var stopTimer = function stopTimer() {
  if (globalState.timeout) {
    stopTimerProgressBar();
    return globalState.timeout.stop();
  }
};
/**
 * Resume timer. Returns number of milliseconds of timer remained.
 * If `timer` parameter isn't set, returns undefined.
 */

var resumeTimer = function resumeTimer() {
  if (globalState.timeout) {
    var remaining = globalState.timeout.start();
    animateTimerProgressBar(remaining);
    return remaining;
  }
};
/**
 * Resume timer. Returns number of milliseconds of timer remained.
 * If `timer` parameter isn't set, returns undefined.
 */

var toggleTimer = function toggleTimer() {
  var timer = globalState.timeout;
  return timer && (timer.running ? stopTimer() : resumeTimer());
};
/**
 * Increase timer. Returns number of milliseconds of an updated timer.
 * If `timer` parameter isn't set, returns undefined.
 */

var increaseTimer = function increaseTimer(n) {
  if (globalState.timeout) {
    var remaining = globalState.timeout.increase(n);
    animateTimerProgressBar(remaining, true);
    return remaining;
  }
};
/**
 * Check if timer is running. Returns true if timer is running
 * or false if timer is paused or stopped.
 * If `timer` parameter isn't set, returns undefined
 */

var isTimerRunning = function isTimerRunning() {
  return globalState.timeout && globalState.timeout.isRunning();
};

var defaultParams = {
  title: '',
  titleText: '',
  text: '',
  html: '',
  footer: '',
  icon: undefined,
  iconHtml: undefined,
  toast: false,
  animation: true,
  showClass: {
    popup: 'swal2-show',
    backdrop: 'swal2-backdrop-show',
    icon: 'swal2-icon-show'
  },
  hideClass: {
    popup: 'swal2-hide',
    backdrop: 'swal2-backdrop-hide',
    icon: 'swal2-icon-hide'
  },
  customClass: undefined,
  target: 'body',
  backdrop: true,
  heightAuto: true,
  allowOutsideClick: true,
  allowEscapeKey: true,
  allowEnterKey: true,
  stopKeydownPropagation: true,
  keydownListenerCapture: false,
  showConfirmButton: true,
  showCancelButton: false,
  preConfirm: undefined,
  confirmButtonText: 'OK',
  confirmButtonAriaLabel: '',
  confirmButtonColor: undefined,
  cancelButtonText: 'Cancel',
  cancelButtonAriaLabel: '',
  cancelButtonColor: undefined,
  buttonsStyling: true,
  reverseButtons: false,
  focusConfirm: true,
  focusCancel: false,
  showCloseButton: false,
  closeButtonHtml: '&times;',
  closeButtonAriaLabel: 'Close this dialog',
  showLoaderOnConfirm: false,
  imageUrl: undefined,
  imageWidth: undefined,
  imageHeight: undefined,
  imageAlt: '',
  timer: undefined,
  timerProgressBar: false,
  width: undefined,
  padding: undefined,
  background: undefined,
  input: undefined,
  inputPlaceholder: '',
  inputValue: '',
  inputOptions: {},
  inputAutoTrim: true,
  inputAttributes: {},
  inputValidator: undefined,
  validationMessage: undefined,
  grow: false,
  position: 'center',
  progressSteps: [],
  currentProgressStep: undefined,
  progressStepsDistance: undefined,
  onBeforeOpen: undefined,
  onOpen: undefined,
  onRender: undefined,
  onClose: undefined,
  onAfterClose: undefined,
  scrollbarPadding: true
};
var updatableParams = ['title', 'titleText', 'text', 'html', 'icon', 'customClass', 'showConfirmButton', 'showCancelButton', 'confirmButtonText', 'confirmButtonAriaLabel', 'confirmButtonColor', 'cancelButtonText', 'cancelButtonAriaLabel', 'cancelButtonColor', 'buttonsStyling', 'reverseButtons', 'imageUrl', 'imageWidth', 'imageHeight', 'imageAlt', 'progressSteps', 'currentProgressStep'];
var deprecatedParams = {
  animation: 'showClass" and "hideClass'
};
var toastIncompatibleParams = ['allowOutsideClick', 'allowEnterKey', 'backdrop', 'focusConfirm', 'focusCancel', 'heightAuto', 'keydownListenerCapture'];
/**
 * Is valid parameter
 * @param {String} paramName
 */

var isValidParameter = function isValidParameter(paramName) {
  return Object.prototype.hasOwnProperty.call(defaultParams, paramName);
};
/**
 * Is valid parameter for Swal.update() method
 * @param {String} paramName
 */

var isUpdatableParameter = function isUpdatableParameter(paramName) {
  return updatableParams.indexOf(paramName) !== -1;
};
/**
 * Is deprecated parameter
 * @param {String} paramName
 */

var isDeprecatedParameter = function isDeprecatedParameter(paramName) {
  return deprecatedParams[paramName];
};

var checkIfParamIsValid = function checkIfParamIsValid(param) {
  if (!isValidParameter(param)) {
    warn("Unknown parameter \"".concat(param, "\""));
  }
};

var checkIfToastParamIsValid = function checkIfToastParamIsValid(param) {
  if (toastIncompatibleParams.indexOf(param) !== -1) {
    warn("The parameter \"".concat(param, "\" is incompatible with toasts"));
  }
};

var checkIfParamIsDeprecated = function checkIfParamIsDeprecated(param) {
  if (isDeprecatedParameter(param)) {
    warnAboutDepreation(param, isDeprecatedParameter(param));
  }
};
/**
 * Show relevant warnings for given params
 *
 * @param params
 */


var showWarningsForParams = function showWarningsForParams(params) {
  for (var param in params) {
    checkIfParamIsValid(param);

    if (params.toast) {
      checkIfToastParamIsValid(param);
    }

    checkIfParamIsDeprecated(param);
  }
};



var staticMethods = Object.freeze({
	isValidParameter: isValidParameter,
	isUpdatableParameter: isUpdatableParameter,
	isDeprecatedParameter: isDeprecatedParameter,
	argsToParams: argsToParams,
	isVisible: isVisible$1,
	clickConfirm: clickConfirm,
	clickCancel: clickCancel,
	getContainer: getContainer,
	getPopup: getPopup,
	getTitle: getTitle,
	getContent: getContent,
	getHtmlContainer: getHtmlContainer,
	getImage: getImage,
	getIcon: getIcon,
	getIcons: getIcons,
	getCloseButton: getCloseButton,
	getActions: getActions,
	getConfirmButton: getConfirmButton,
	getCancelButton: getCancelButton,
	getHeader: getHeader,
	getFooter: getFooter,
	getFocusableElements: getFocusableElements,
	getValidationMessage: getValidationMessage,
	isLoading: isLoading,
	fire: fire,
	mixin: mixin,
	queue: queue,
	getQueueStep: getQueueStep,
	insertQueueStep: insertQueueStep,
	deleteQueueStep: deleteQueueStep,
	showLoading: showLoading,
	enableLoading: showLoading,
	getTimerLeft: getTimerLeft,
	stopTimer: stopTimer,
	resumeTimer: resumeTimer,
	toggleTimer: toggleTimer,
	increaseTimer: increaseTimer,
	isTimerRunning: isTimerRunning
});

/**
 * Enables buttons and hide loader.
 */

function hideLoading() {
  // do nothing if popup is closed
  var innerParams = privateProps.innerParams.get(this);

  if (!innerParams) {
    return;
  }

  var domCache = privateProps.domCache.get(this);

  if (!innerParams.showConfirmButton) {
    hide(domCache.confirmButton);

    if (!innerParams.showCancelButton) {
      hide(domCache.actions);
    }
  }

  removeClass([domCache.popup, domCache.actions], swalClasses.loading);
  domCache.popup.removeAttribute('aria-busy');
  domCache.popup.removeAttribute('data-loading');
  domCache.confirmButton.disabled = false;
  domCache.cancelButton.disabled = false;
}

function getInput$1(instance) {
  var innerParams = privateProps.innerParams.get(instance || this);
  var domCache = privateProps.domCache.get(instance || this);

  if (!domCache) {
    return null;
  }

  return getInput(domCache.content, innerParams.input);
}

var fixScrollbar = function fixScrollbar() {
  // for queues, do not do this more than once
  if (states.previousBodyPadding !== null) {
    return;
  } // if the body has overflow


  if (document.body.scrollHeight > window.innerHeight) {
    // add padding so the content doesn't shift after removal of scrollbar
    states.previousBodyPadding = parseInt(window.getComputedStyle(document.body).getPropertyValue('padding-right'));
    document.body.style.paddingRight = "".concat(states.previousBodyPadding + measureScrollbar(), "px");
  }
};
var undoScrollbar = function undoScrollbar() {
  if (states.previousBodyPadding !== null) {
    document.body.style.paddingRight = "".concat(states.previousBodyPadding, "px");
    states.previousBodyPadding = null;
  }
};

/* istanbul ignore next */

var iOSfix = function iOSfix() {
  var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream || navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1;

  if (iOS && !hasClass(document.body, swalClasses.iosfix)) {
    var offset = document.body.scrollTop;
    document.body.style.top = "".concat(offset * -1, "px");
    addClass(document.body, swalClasses.iosfix);
    lockBodyScroll();
  }
};
/* istanbul ignore next */

var lockBodyScroll = function lockBodyScroll() {
  // #1246
  var container = getContainer();
  var preventTouchMove;

  container.ontouchstart = function (e) {
    preventTouchMove = e.target === container || !isScrollable(container) && e.target.tagName !== 'INPUT' // #1603
    ;
  };

  container.ontouchmove = function (e) {
    if (preventTouchMove) {
      e.preventDefault();
      e.stopPropagation();
    }
  };
};
/* istanbul ignore next */


var undoIOSfix = function undoIOSfix() {
  if (hasClass(document.body, swalClasses.iosfix)) {
    var offset = parseInt(document.body.style.top, 10);
    removeClass(document.body, swalClasses.iosfix);
    document.body.style.top = '';
    document.body.scrollTop = offset * -1;
  }
};

var isIE11 = function isIE11() {
  return !!window.MSInputMethodContext && !!document.documentMode;
}; // Fix IE11 centering sweetalert2/issues/933

/* istanbul ignore next */


var fixVerticalPositionIE = function fixVerticalPositionIE() {
  var container = getContainer();
  var popup = getPopup();
  container.style.removeProperty('align-items');

  if (popup.offsetTop < 0) {
    container.style.alignItems = 'flex-start';
  }
};
/* istanbul ignore next */


var IEfix = function IEfix() {
  if (typeof window !== 'undefined' && isIE11()) {
    fixVerticalPositionIE();
    window.addEventListener('resize', fixVerticalPositionIE);
  }
};
/* istanbul ignore next */

var undoIEfix = function undoIEfix() {
  if (typeof window !== 'undefined' && isIE11()) {
    window.removeEventListener('resize', fixVerticalPositionIE);
  }
};

// Adding aria-hidden="true" to elements outside of the active modal dialog ensures that
// elements not within the active modal dialog will not be surfaced if a user opens a screen
// readers list of elements (headings, form controls, landmarks, etc.) in the document.

var setAriaHidden = function setAriaHidden() {
  var bodyChildren = toArray(document.body.children);
  bodyChildren.forEach(function (el) {
    if (el === getContainer() || contains(el, getContainer())) {
      return;
    }

    if (el.hasAttribute('aria-hidden')) {
      el.setAttribute('data-previous-aria-hidden', el.getAttribute('aria-hidden'));
    }

    el.setAttribute('aria-hidden', 'true');
  });
};
var unsetAriaHidden = function unsetAriaHidden() {
  var bodyChildren = toArray(document.body.children);
  bodyChildren.forEach(function (el) {
    if (el.hasAttribute('data-previous-aria-hidden')) {
      el.setAttribute('aria-hidden', el.getAttribute('data-previous-aria-hidden'));
      el.removeAttribute('data-previous-aria-hidden');
    } else {
      el.removeAttribute('aria-hidden');
    }
  });
};

/**
 * This module containts `WeakMap`s for each effectively-"private  property" that a `Swal` has.
 * For example, to set the private property "foo" of `this` to "bar", you can `privateProps.foo.set(this, 'bar')`
 * This is the approach that Babel will probably take to implement private methods/fields
 *   https://github.com/tc39/proposal-private-methods
 *   https://github.com/babel/babel/pull/7555
 * Once we have the changes from that PR in Babel, and our core class fits reasonable in *one module*
 *   then we can use that language feature.
 */
var privateMethods = {
  swalPromiseResolve: new WeakMap()
};

/*
 * Instance method to close sweetAlert
 */

function removePopupAndResetState(instance, container, isToast, onAfterClose) {
  if (isToast) {
    triggerOnAfterCloseAndDispose(instance, onAfterClose);
  } else {
    restoreActiveElement().then(function () {
      return triggerOnAfterCloseAndDispose(instance, onAfterClose);
    });
    globalState.keydownTarget.removeEventListener('keydown', globalState.keydownHandler, {
      capture: globalState.keydownListenerCapture
    });
    globalState.keydownHandlerAdded = false;
  }

  if (container.parentNode) {
    container.parentNode.removeChild(container);
  }

  if (isModal()) {
    undoScrollbar();
    undoIOSfix();
    undoIEfix();
    unsetAriaHidden();
  }

  removeBodyClasses();
}

function removeBodyClasses() {
  removeClass([document.documentElement, document.body], [swalClasses.shown, swalClasses['height-auto'], swalClasses['no-backdrop'], swalClasses['toast-shown'], swalClasses['toast-column']]);
}

function disposeSwal(instance) {
  // Unset this.params so GC will dispose it (#1569)
  delete instance.params; // Unset globalState props so GC will dispose globalState (#1569)

  delete globalState.keydownHandler;
  delete globalState.keydownTarget; // Unset WeakMaps so GC will be able to dispose them (#1569)

  unsetWeakMaps(privateProps);
  unsetWeakMaps(privateMethods);
}

function close(resolveValue) {
  var popup = getPopup();

  if (!popup) {
    return;
  }

  var innerParams = privateProps.innerParams.get(this);

  if (!innerParams || hasClass(popup, innerParams.hideClass.popup)) {
    return;
  }

  var swalPromiseResolve = privateMethods.swalPromiseResolve.get(this);
  removeClass(popup, innerParams.showClass.popup);
  addClass(popup, innerParams.hideClass.popup);
  var backdrop = getContainer();
  removeClass(backdrop, innerParams.showClass.backdrop);
  addClass(backdrop, innerParams.hideClass.backdrop);
  handlePopupAnimation(this, popup, innerParams); // Resolve Swal promise

  swalPromiseResolve(resolveValue || {});
}

var handlePopupAnimation = function handlePopupAnimation(instance, popup, innerParams) {
  var container = getContainer(); // If animation is supported, animate

  var animationIsSupported = animationEndEvent && hasCssAnimation(popup);
  var onClose = innerParams.onClose,
      onAfterClose = innerParams.onAfterClose;

  if (onClose !== null && typeof onClose === 'function') {
    onClose(popup);
  }

  if (animationIsSupported) {
    animatePopup(instance, popup, container, onAfterClose);
  } else {
    // Otherwise, remove immediately
    removePopupAndResetState(instance, container, isToast(), onAfterClose);
  }
};

var animatePopup = function animatePopup(instance, popup, container, onAfterClose) {
  globalState.swalCloseEventFinishedCallback = removePopupAndResetState.bind(null, instance, container, isToast(), onAfterClose);
  popup.addEventListener(animationEndEvent, function (e) {
    if (e.target === popup) {
      globalState.swalCloseEventFinishedCallback();
      delete globalState.swalCloseEventFinishedCallback;
    }
  });
};

var unsetWeakMaps = function unsetWeakMaps(obj) {
  for (var i in obj) {
    obj[i] = new WeakMap();
  }
};

var triggerOnAfterCloseAndDispose = function triggerOnAfterCloseAndDispose(instance, onAfterClose) {
  setTimeout(function () {
    if (onAfterClose !== null && typeof onAfterClose === 'function') {
      onAfterClose();
    }

    if (!getPopup()) {
      disposeSwal(instance);
    }
  });
};

function setButtonsDisabled(instance, buttons, disabled) {
  var domCache = privateProps.domCache.get(instance);
  buttons.forEach(function (button) {
    domCache[button].disabled = disabled;
  });
}

function setInputDisabled(input, disabled) {
  if (!input) {
    return false;
  }

  if (input.type === 'radio') {
    var radiosContainer = input.parentNode.parentNode;
    var radios = radiosContainer.querySelectorAll('input');

    for (var i = 0; i < radios.length; i++) {
      radios[i].disabled = disabled;
    }
  } else {
    input.disabled = disabled;
  }
}

function enableButtons() {
  setButtonsDisabled(this, ['confirmButton', 'cancelButton'], false);
}
function disableButtons() {
  setButtonsDisabled(this, ['confirmButton', 'cancelButton'], true);
}
function enableInput() {
  return setInputDisabled(this.getInput(), false);
}
function disableInput() {
  return setInputDisabled(this.getInput(), true);
}

function showValidationMessage(error) {
  var domCache = privateProps.domCache.get(this);
  domCache.validationMessage.innerHTML = error;
  var popupComputedStyle = window.getComputedStyle(domCache.popup);
  domCache.validationMessage.style.marginLeft = "-".concat(popupComputedStyle.getPropertyValue('padding-left'));
  domCache.validationMessage.style.marginRight = "-".concat(popupComputedStyle.getPropertyValue('padding-right'));
  show(domCache.validationMessage);
  var input = this.getInput();

  if (input) {
    input.setAttribute('aria-invalid', true);
    input.setAttribute('aria-describedBy', swalClasses['validation-message']);
    focusInput(input);
    addClass(input, swalClasses.inputerror);
  }
} // Hide block with validation message

function resetValidationMessage$1() {
  var domCache = privateProps.domCache.get(this);

  if (domCache.validationMessage) {
    hide(domCache.validationMessage);
  }

  var input = this.getInput();

  if (input) {
    input.removeAttribute('aria-invalid');
    input.removeAttribute('aria-describedBy');
    removeClass(input, swalClasses.inputerror);
  }
}

function getProgressSteps$1() {
  var domCache = privateProps.domCache.get(this);
  return domCache.progressSteps;
}

var Timer =
/*#__PURE__*/
function () {
  function Timer(callback, delay) {
    _classCallCheck(this, Timer);

    this.callback = callback;
    this.remaining = delay;
    this.running = false;
    this.start();
  }

  _createClass(Timer, [{
    key: "start",
    value: function start() {
      if (!this.running) {
        this.running = true;
        this.started = new Date();
        this.id = setTimeout(this.callback, this.remaining);
      }

      return this.remaining;
    }
  }, {
    key: "stop",
    value: function stop() {
      if (this.running) {
        this.running = false;
        clearTimeout(this.id);
        this.remaining -= new Date() - this.started;
      }

      return this.remaining;
    }
  }, {
    key: "increase",
    value: function increase(n) {
      var running = this.running;

      if (running) {
        this.stop();
      }

      this.remaining += n;

      if (running) {
        this.start();
      }

      return this.remaining;
    }
  }, {
    key: "getTimerLeft",
    value: function getTimerLeft() {
      if (this.running) {
        this.stop();
        this.start();
      }

      return this.remaining;
    }
  }, {
    key: "isRunning",
    value: function isRunning() {
      return this.running;
    }
  }]);

  return Timer;
}();

var defaultInputValidators = {
  email: function email(string, validationMessage) {
    return /^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(string) ? Promise.resolve() : Promise.resolve(validationMessage || 'Invalid email address');
  },
  url: function url(string, validationMessage) {
    // taken from https://stackoverflow.com/a/3809435 with a small change from #1306
    return /^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(string) ? Promise.resolve() : Promise.resolve(validationMessage || 'Invalid URL');
  }
};

function setDefaultInputValidators(params) {
  // Use default `inputValidator` for supported input types if not provided
  if (!params.inputValidator) {
    Object.keys(defaultInputValidators).forEach(function (key) {
      if (params.input === key) {
        params.inputValidator = defaultInputValidators[key];
      }
    });
  }
}

function validateCustomTargetElement(params) {
  // Determine if the custom target element is valid
  if (!params.target || typeof params.target === 'string' && !document.querySelector(params.target) || typeof params.target !== 'string' && !params.target.appendChild) {
    warn('Target parameter is not valid, defaulting to "body"');
    params.target = 'body';
  }
}
/**
 * Set type, text and actions on popup
 *
 * @param params
 * @returns {boolean}
 */


function setParameters(params) {
  setDefaultInputValidators(params); // showLoaderOnConfirm && preConfirm

  if (params.showLoaderOnConfirm && !params.preConfirm) {
    warn('showLoaderOnConfirm is set to true, but preConfirm is not defined.\n' + 'showLoaderOnConfirm should be used together with preConfirm, see usage example:\n' + 'https://sweetalert2.github.io/#ajax-request');
  } // params.animation will be actually used in renderPopup.js
  // but in case when params.animation is a function, we need to call that function
  // before popup (re)initialization, so it'll be possible to check Swal.isVisible()
  // inside the params.animation function


  params.animation = callIfFunction(params.animation);
  validateCustomTargetElement(params); // Replace newlines with <br> in title

  if (typeof params.title === 'string') {
    params.title = params.title.split('\n').join('<br />');
  }

  init(params);
}

function swalOpenAnimationFinished(popup, container) {
  popup.removeEventListener(animationEndEvent, swalOpenAnimationFinished);
  container.style.overflowY = 'auto';
}
/**
 * Open popup, add necessary classes and styles, fix scrollbar
 *
 * @param {Array} params
 */


var openPopup = function openPopup(params) {
  var container = getContainer();
  var popup = getPopup();

  if (typeof params.onBeforeOpen === 'function') {
    params.onBeforeOpen(popup);
  }

  addClasses$1(container, popup, params); // scrolling is 'hidden' until animation is done, after that 'auto'

  setScrollingVisibility(container, popup);

  if (isModal()) {
    fixScrollContainer(container, params.scrollbarPadding);
  }

  if (!isToast() && !globalState.previousActiveElement) {
    globalState.previousActiveElement = document.activeElement;
  }

  if (typeof params.onOpen === 'function') {
    setTimeout(function () {
      return params.onOpen(popup);
    });
  }
};

var setScrollingVisibility = function setScrollingVisibility(container, popup) {
  if (animationEndEvent && hasCssAnimation(popup)) {
    container.style.overflowY = 'hidden';
    popup.addEventListener(animationEndEvent, function (e) {
      if (e.target === popup) {
        swalOpenAnimationFinished.bind(null, popup, container);
      }
    });
  } else {
    container.style.overflowY = 'auto';
  }
};

var fixScrollContainer = function fixScrollContainer(container, scrollbarPadding) {
  iOSfix();
  IEfix();
  setAriaHidden();

  if (scrollbarPadding) {
    fixScrollbar();
  } // sweetalert2/issues/1247


  setTimeout(function () {
    container.scrollTop = 0;
  });
};

var addClasses$1 = function addClasses(container, popup, params) {
  addClass(container, params.showClass.backdrop);
  show(popup); // Animate popup right after showing it

  addClass(popup, params.showClass.popup);
  addClass([document.documentElement, document.body], swalClasses.shown);

  if (params.heightAuto && params.backdrop && !params.toast) {
    addClass([document.documentElement, document.body], swalClasses['height-auto']);
  }
};

var handleInputOptionsAndValue = function handleInputOptionsAndValue(instance, params) {
  if (params.input === 'select' || params.input === 'radio') {
    handleInputOptions(instance, params);
  } else if (['text', 'email', 'number', 'tel', 'textarea'].indexOf(params.input) !== -1 && isPromise(params.inputValue)) {
    handleInputValue(instance, params);
  }
};
var getInputValue = function getInputValue(instance, innerParams) {
  var input = instance.getInput();

  if (!input) {
    return null;
  }

  switch (innerParams.input) {
    case 'checkbox':
      return getCheckboxValue(input);

    case 'radio':
      return getRadioValue(input);

    case 'file':
      return getFileValue(input);

    default:
      return innerParams.inputAutoTrim ? input.value.trim() : input.value;
  }
};

var getCheckboxValue = function getCheckboxValue(input) {
  return input.checked ? 1 : 0;
};

var getRadioValue = function getRadioValue(input) {
  return input.checked ? input.value : null;
};

var getFileValue = function getFileValue(input) {
  return input.files.length ? input.getAttribute('multiple') !== null ? input.files : input.files[0] : null;
};

var handleInputOptions = function handleInputOptions(instance, params) {
  var content = getContent();

  var processInputOptions = function processInputOptions(inputOptions) {
    return populateInputOptions[params.input](content, formatInputOptions(inputOptions), params);
  };

  if (isPromise(params.inputOptions)) {
    showLoading();
    params.inputOptions.then(function (inputOptions) {
      instance.hideLoading();
      processInputOptions(inputOptions);
    });
  } else if (_typeof(params.inputOptions) === 'object') {
    processInputOptions(params.inputOptions);
  } else {
    error("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(_typeof(params.inputOptions)));
  }
};

var handleInputValue = function handleInputValue(instance, params) {
  var input = instance.getInput();
  hide(input);
  params.inputValue.then(function (inputValue) {
    input.value = params.input === 'number' ? parseFloat(inputValue) || 0 : "".concat(inputValue);
    show(input);
    input.focus();
    instance.hideLoading();
  })["catch"](function (err) {
    error("Error in inputValue promise: ".concat(err));
    input.value = '';
    show(input);
    input.focus();
    instance.hideLoading();
  });
};

var populateInputOptions = {
  select: function select(content, inputOptions, params) {
    var select = getChildByClass(content, swalClasses.select);
    inputOptions.forEach(function (inputOption) {
      var optionValue = inputOption[0];
      var optionLabel = inputOption[1];
      var option = document.createElement('option');
      option.value = optionValue;
      option.innerHTML = optionLabel;

      if (params.inputValue.toString() === optionValue.toString()) {
        option.selected = true;
      }

      select.appendChild(option);
    });
    select.focus();
  },
  radio: function radio(content, inputOptions, params) {
    var radio = getChildByClass(content, swalClasses.radio);
    inputOptions.forEach(function (inputOption) {
      var radioValue = inputOption[0];
      var radioLabel = inputOption[1];
      var radioInput = document.createElement('input');
      var radioLabelElement = document.createElement('label');
      radioInput.type = 'radio';
      radioInput.name = swalClasses.radio;
      radioInput.value = radioValue;

      if (params.inputValue.toString() === radioValue.toString()) {
        radioInput.checked = true;
      }

      var label = document.createElement('span');
      label.innerHTML = radioLabel;
      label.className = swalClasses.label;
      radioLabelElement.appendChild(radioInput);
      radioLabelElement.appendChild(label);
      radio.appendChild(radioLabelElement);
    });
    var radios = radio.querySelectorAll('input');

    if (radios.length) {
      radios[0].focus();
    }
  }
};
/**
 * Converts `inputOptions` into an array of `[value, label]`s
 * @param inputOptions
 */

var formatInputOptions = function formatInputOptions(inputOptions) {
  var result = [];

  if (typeof Map !== 'undefined' && inputOptions instanceof Map) {
    inputOptions.forEach(function (value, key) {
      result.push([key, value]);
    });
  } else {
    Object.keys(inputOptions).forEach(function (key) {
      result.push([key, inputOptions[key]]);
    });
  }

  return result;
};

var handleConfirmButtonClick = function handleConfirmButtonClick(instance, innerParams) {
  instance.disableButtons();

  if (innerParams.input) {
    handleConfirmWithInput(instance, innerParams);
  } else {
    confirm(instance, innerParams, true);
  }
};
var handleCancelButtonClick = function handleCancelButtonClick(instance, dismissWith) {
  instance.disableButtons();
  dismissWith(DismissReason.cancel);
};

var handleConfirmWithInput = function handleConfirmWithInput(instance, innerParams) {
  var inputValue = getInputValue(instance, innerParams);

  if (innerParams.inputValidator) {
    instance.disableInput();
    var validationPromise = Promise.resolve().then(function () {
      return innerParams.inputValidator(inputValue, innerParams.validationMessage);
    });
    validationPromise.then(function (validationMessage) {
      instance.enableButtons();
      instance.enableInput();

      if (validationMessage) {
        instance.showValidationMessage(validationMessage);
      } else {
        confirm(instance, innerParams, inputValue);
      }
    });
  } else if (!instance.getInput().checkValidity()) {
    instance.enableButtons();
    instance.showValidationMessage(innerParams.validationMessage);
  } else {
    confirm(instance, innerParams, inputValue);
  }
};

var succeedWith = function succeedWith(instance, value) {
  instance.closePopup({
    value: value
  });
};

var confirm = function confirm(instance, innerParams, value) {
  if (innerParams.showLoaderOnConfirm) {
    showLoading(); // TODO: make showLoading an *instance* method
  }

  if (innerParams.preConfirm) {
    instance.resetValidationMessage();
    var preConfirmPromise = Promise.resolve().then(function () {
      return innerParams.preConfirm(value, innerParams.validationMessage);
    });
    preConfirmPromise.then(function (preConfirmValue) {
      if (isVisible(getValidationMessage()) || preConfirmValue === false) {
        instance.hideLoading();
      } else {
        succeedWith(instance, typeof preConfirmValue === 'undefined' ? value : preConfirmValue);
      }
    });
  } else {
    succeedWith(instance, value);
  }
};

var addKeydownHandler = function addKeydownHandler(instance, globalState, innerParams, dismissWith) {
  if (globalState.keydownTarget && globalState.keydownHandlerAdded) {
    globalState.keydownTarget.removeEventListener('keydown', globalState.keydownHandler, {
      capture: globalState.keydownListenerCapture
    });
    globalState.keydownHandlerAdded = false;
  }

  if (!innerParams.toast) {
    globalState.keydownHandler = function (e) {
      return keydownHandler(instance, e, innerParams, dismissWith);
    };

    globalState.keydownTarget = innerParams.keydownListenerCapture ? window : getPopup();
    globalState.keydownListenerCapture = innerParams.keydownListenerCapture;
    globalState.keydownTarget.addEventListener('keydown', globalState.keydownHandler, {
      capture: globalState.keydownListenerCapture
    });
    globalState.keydownHandlerAdded = true;
  }
}; // Focus handling

var setFocus = function setFocus(innerParams, index, increment) {
  var focusableElements = getFocusableElements(); // search for visible elements and select the next possible match

  for (var i = 0; i < focusableElements.length; i++) {
    index = index + increment; // rollover to first item

    if (index === focusableElements.length) {
      index = 0; // go to last item
    } else if (index === -1) {
      index = focusableElements.length - 1;
    }

    return focusableElements[index].focus();
  } // no visible focusable elements, focus the popup


  getPopup().focus();
};
var arrowKeys = ['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Left', 'Right', 'Up', 'Down' // IE11
];
var escKeys = ['Escape', 'Esc' // IE11
];

var keydownHandler = function keydownHandler(instance, e, innerParams, dismissWith) {
  if (innerParams.stopKeydownPropagation) {
    e.stopPropagation();
  } // ENTER


  if (e.key === 'Enter') {
    handleEnter(instance, e, innerParams); // TAB
  } else if (e.key === 'Tab') {
    handleTab(e, innerParams); // ARROWS - switch focus between buttons
  } else if (arrowKeys.indexOf(e.key) !== -1) {
    handleArrows(); // ESC
  } else if (escKeys.indexOf(e.key) !== -1) {
    handleEsc(e, innerParams, dismissWith);
  }
};

var handleEnter = function handleEnter(instance, e, innerParams) {
  // #720 #721
  if (e.isComposing) {
    return;
  }

  if (e.target && instance.getInput() && e.target.outerHTML === instance.getInput().outerHTML) {
    if (['textarea', 'file'].indexOf(innerParams.input) !== -1) {
      return; // do not submit
    }

    clickConfirm();
    e.preventDefault();
  }
};

var handleTab = function handleTab(e, innerParams) {
  var targetElement = e.target;
  var focusableElements = getFocusableElements();
  var btnIndex = -1;

  for (var i = 0; i < focusableElements.length; i++) {
    if (targetElement === focusableElements[i]) {
      btnIndex = i;
      break;
    }
  }

  if (!e.shiftKey) {
    // Cycle to the next button
    setFocus(innerParams, btnIndex, 1);
  } else {
    // Cycle to the prev button
    setFocus(innerParams, btnIndex, -1);
  }

  e.stopPropagation();
  e.preventDefault();
};

var handleArrows = function handleArrows() {
  var confirmButton = getConfirmButton();
  var cancelButton = getCancelButton(); // focus Cancel button if Confirm button is currently focused

  if (document.activeElement === confirmButton && isVisible(cancelButton)) {
    cancelButton.focus(); // and vice versa
  } else if (document.activeElement === cancelButton && isVisible(confirmButton)) {
    confirmButton.focus();
  }
};

var handleEsc = function handleEsc(e, innerParams, dismissWith) {
  if (callIfFunction(innerParams.allowEscapeKey)) {
    e.preventDefault();
    dismissWith(DismissReason.esc);
  }
};

var handlePopupClick = function handlePopupClick(domCache, innerParams, dismissWith) {
  if (innerParams.toast) {
    handleToastClick(domCache, innerParams, dismissWith);
  } else {
    // Ignore click events that had mousedown on the popup but mouseup on the container
    // This can happen when the user drags a slider
    handleModalMousedown(domCache); // Ignore click events that had mousedown on the container but mouseup on the popup

    handleContainerMousedown(domCache);
    handleModalClick(domCache, innerParams, dismissWith);
  }
};

var handleToastClick = function handleToastClick(domCache, innerParams, dismissWith) {
  // Closing toast by internal click
  domCache.popup.onclick = function () {
    if (innerParams.showConfirmButton || innerParams.showCancelButton || innerParams.showCloseButton || innerParams.input) {
      return;
    }

    dismissWith(DismissReason.close);
  };
};

var ignoreOutsideClick = false;

var handleModalMousedown = function handleModalMousedown(domCache) {
  domCache.popup.onmousedown = function () {
    domCache.container.onmouseup = function (e) {
      domCache.container.onmouseup = undefined; // We only check if the mouseup target is the container because usually it doesn't
      // have any other direct children aside of the popup

      if (e.target === domCache.container) {
        ignoreOutsideClick = true;
      }
    };
  };
};

var handleContainerMousedown = function handleContainerMousedown(domCache) {
  domCache.container.onmousedown = function () {
    domCache.popup.onmouseup = function (e) {
      domCache.popup.onmouseup = undefined; // We also need to check if the mouseup target is a child of the popup

      if (e.target === domCache.popup || domCache.popup.contains(e.target)) {
        ignoreOutsideClick = true;
      }
    };
  };
};

var handleModalClick = function handleModalClick(domCache, innerParams, dismissWith) {
  domCache.container.onclick = function (e) {
    if (ignoreOutsideClick) {
      ignoreOutsideClick = false;
      return;
    }

    if (e.target === domCache.container && callIfFunction(innerParams.allowOutsideClick)) {
      dismissWith(DismissReason.backdrop);
    }
  };
};

function _main(userParams) {
  showWarningsForParams(userParams); // Check if there is another Swal closing

  if (getPopup() && globalState.swalCloseEventFinishedCallback) {
    globalState.swalCloseEventFinishedCallback();
    delete globalState.swalCloseEventFinishedCallback;
  } // Check if there is a swal disposal defer timer


  if (globalState.deferDisposalTimer) {
    clearTimeout(globalState.deferDisposalTimer);
    delete globalState.deferDisposalTimer;
  }

  var innerParams = prepareParams(userParams);
  setParameters(innerParams);
  Object.freeze(innerParams); // clear the previous timer

  if (globalState.timeout) {
    globalState.timeout.stop();
    delete globalState.timeout;
  } // clear the restore focus timeout


  clearTimeout(globalState.restoreFocusTimeout);
  var domCache = populateDomCache(this);
  render(this, innerParams);
  privateProps.innerParams.set(this, innerParams);
  return swalPromise(this, domCache, innerParams);
}

var prepareParams = function prepareParams(userParams) {
  var showClass = _extends({}, defaultParams.showClass, userParams.showClass);

  var hideClass = _extends({}, defaultParams.hideClass, userParams.hideClass);

  var params = _extends({}, defaultParams, userParams);

  params.showClass = showClass;
  params.hideClass = hideClass; // @deprecated

  if (userParams.animation === false) {
    params.showClass = {
      popup: '',
      backdrop: 'swal2-backdrop-show swal2-noanimation'
    };
    params.hideClass = {};
  }

  return params;
};

var swalPromise = function swalPromise(instance, domCache, innerParams) {
  return new Promise(function (resolve) {
    // functions to handle all closings/dismissals
    var dismissWith = function dismissWith(dismiss) {
      instance.closePopup({
        dismiss: dismiss
      });
    };

    privateMethods.swalPromiseResolve.set(instance, resolve);
    setupTimer(globalState, innerParams, dismissWith);

    domCache.confirmButton.onclick = function () {
      return handleConfirmButtonClick(instance, innerParams);
    };

    domCache.cancelButton.onclick = function () {
      return handleCancelButtonClick(instance, dismissWith);
    };

    domCache.closeButton.onclick = function () {
      return dismissWith(DismissReason.close);
    };

    handlePopupClick(domCache, innerParams, dismissWith);
    addKeydownHandler(instance, globalState, innerParams, dismissWith);

    if (innerParams.toast && (innerParams.input || innerParams.footer || innerParams.showCloseButton)) {
      addClass(document.body, swalClasses['toast-column']);
    } else {
      removeClass(document.body, swalClasses['toast-column']);
    }

    handleInputOptionsAndValue(instance, innerParams);
    openPopup(innerParams);
    initFocus(domCache, innerParams); // Scroll container to top on open (#1247)

    domCache.container.scrollTop = 0;
  });
};

var populateDomCache = function populateDomCache(instance) {
  var domCache = {
    popup: getPopup(),
    container: getContainer(),
    content: getContent(),
    actions: getActions(),
    confirmButton: getConfirmButton(),
    cancelButton: getCancelButton(),
    closeButton: getCloseButton(),
    validationMessage: getValidationMessage(),
    progressSteps: getProgressSteps()
  };
  privateProps.domCache.set(instance, domCache);
  return domCache;
};

var setupTimer = function setupTimer(globalState$$1, innerParams, dismissWith) {
  var timerProgressBar = getTimerProgressBar();
  hide(timerProgressBar);

  if (innerParams.timer) {
    globalState$$1.timeout = new Timer(function () {
      dismissWith('timer');
      delete globalState$$1.timeout;
    }, innerParams.timer);

    if (innerParams.timerProgressBar) {
      show(timerProgressBar);
      setTimeout(function () {
        animateTimerProgressBar(innerParams.timer);
      });
    }
  }
};

var initFocus = function initFocus(domCache, innerParams) {
  if (innerParams.toast) {
    return;
  }

  if (!callIfFunction(innerParams.allowEnterKey)) {
    return blurActiveElement();
  }

  if (innerParams.focusCancel && isVisible(domCache.cancelButton)) {
    return domCache.cancelButton.focus();
  }

  if (innerParams.focusConfirm && isVisible(domCache.confirmButton)) {
    return domCache.confirmButton.focus();
  }

  setFocus(innerParams, -1, 1);
};

var blurActiveElement = function blurActiveElement() {
  if (document.activeElement && typeof document.activeElement.blur === 'function') {
    document.activeElement.blur();
  }
};

/**
 * Updates popup parameters.
 */

function update(params) {
  var popup = getPopup();
  var innerParams = privateProps.innerParams.get(this);

  if (!popup || hasClass(popup, innerParams.hideClass.popup)) {
    return warn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");
  }

  var validUpdatableParams = {}; // assign valid params from `params` to `defaults`

  Object.keys(params).forEach(function (param) {
    if (Swal.isUpdatableParameter(param)) {
      validUpdatableParams[param] = params[param];
    } else {
      warn("Invalid parameter to update: \"".concat(param, "\". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js"));
    }
  });

  var updatedParams = _extends({}, innerParams, validUpdatableParams);

  render(this, updatedParams);
  privateProps.innerParams.set(this, updatedParams);
  Object.defineProperties(this, {
    params: {
      value: _extends({}, this.params, params),
      writable: false,
      enumerable: true
    }
  });
}



var instanceMethods = Object.freeze({
	hideLoading: hideLoading,
	disableLoading: hideLoading,
	getInput: getInput$1,
	close: close,
	closePopup: close,
	closeModal: close,
	closeToast: close,
	enableButtons: enableButtons,
	disableButtons: disableButtons,
	enableInput: enableInput,
	disableInput: disableInput,
	showValidationMessage: showValidationMessage,
	resetValidationMessage: resetValidationMessage$1,
	getProgressSteps: getProgressSteps$1,
	_main: _main,
	update: update
});

var currentInstance; // SweetAlert constructor

function SweetAlert() {
  // Prevent run in Node env

  /* istanbul ignore if */
  if (typeof window === 'undefined') {
    return;
  } // Check for the existence of Promise

  /* istanbul ignore if */


  if (typeof Promise === 'undefined') {
    error('This package requires a Promise library, please include a shim to enable it in this browser (See: https://github.com/sweetalert2/sweetalert2/wiki/Migration-from-SweetAlert-to-SweetAlert2#1-ie-support)');
  }

  currentInstance = this;

  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  var outerParams = Object.freeze(this.constructor.argsToParams(args));
  Object.defineProperties(this, {
    params: {
      value: outerParams,
      writable: false,
      enumerable: true,
      configurable: true
    }
  });

  var promise = this._main(this.params);

  privateProps.promise.set(this, promise);
} // `catch` cannot be the name of a module export, so we define our thenable methods here instead


SweetAlert.prototype.then = function (onFulfilled) {
  var promise = privateProps.promise.get(this);
  return promise.then(onFulfilled);
};

SweetAlert.prototype["finally"] = function (onFinally) {
  var promise = privateProps.promise.get(this);
  return promise["finally"](onFinally);
}; // Assign instance methods from src/instanceMethods/*.js to prototype


_extends(SweetAlert.prototype, instanceMethods); // Assign static methods from src/staticMethods/*.js to constructor


_extends(SweetAlert, staticMethods); // Proxy to instance methods to constructor, for now, for backwards compatibility


Object.keys(instanceMethods).forEach(function (key) {
  SweetAlert[key] = function () {
    if (currentInstance) {
      var _currentInstance;

      return (_currentInstance = currentInstance)[key].apply(_currentInstance, arguments);
    }
  };
});
SweetAlert.DismissReason = DismissReason;
SweetAlert.version = '9.5.3';

var Swal = SweetAlert;
Swal["default"] = Swal;

return Swal;

})));
if (typeof this !== 'undefined' && this.Sweetalert2){  this.swal = this.sweetAlert = this.Swal = this.SweetAlert = this.Sweetalert2}

"undefined"!=typeof document&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,".swal2-popup.swal2-toast{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;width:auto;padding:.625em;overflow-y:hidden;background:#fff;box-shadow:0 0 .625em #d9d9d9}.swal2-popup.swal2-toast .swal2-header{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.swal2-popup.swal2-toast .swal2-title{-webkit-box-flex:1;flex-grow:1;-webkit-box-pack:start;justify-content:flex-start;margin:0 .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{position:static;width:.8em;height:.8em;line-height:.8}.swal2-popup.swal2-toast .swal2-content{-webkit-box-pack:start;justify-content:flex-start;font-size:1em}.swal2-popup.swal2-toast .swal2-icon{width:2em;min-width:2em;height:2em;margin:0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;font-size:1.8em;font-weight:700}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{font-size:.25em}}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{flex-basis:auto!important;width:auto;height:auto;margin:0 .3125em}.swal2-popup.swal2-toast .swal2-styled{margin:0 .3125em;padding:.3125em .625em;font-size:1em}.swal2-popup.swal2-toast .swal2-styled:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(50,100,150,.4)}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:2em 2em;transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;-webkit-transform-origin:0 1.5em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:-webkit-box;display:flex;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;padding:.625em;overflow-x:hidden;-webkit-transition:background-color .1s;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-top{-webkit-box-align:start;align-items:flex-start}.swal2-container.swal2-top-left,.swal2-container.swal2-top-start{-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:start;justify-content:flex-start}.swal2-container.swal2-top-end,.swal2-container.swal2-top-right{-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:end;justify-content:flex-end}.swal2-container.swal2-center{-webkit-box-align:center;align-items:center}.swal2-container.swal2-center-left,.swal2-container.swal2-center-start{-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start}.swal2-container.swal2-center-end,.swal2-container.swal2-center-right{-webkit-box-align:center;align-items:center;-webkit-box-pack:end;justify-content:flex-end}.swal2-container.swal2-bottom{-webkit-box-align:end;align-items:flex-end}.swal2-container.swal2-bottom-left,.swal2-container.swal2-bottom-start{-webkit-box-align:end;align-items:flex-end;-webkit-box-pack:start;justify-content:flex-start}.swal2-container.swal2-bottom-end,.swal2-container.swal2-bottom-right{-webkit-box-align:end;align-items:flex-end;-webkit-box-pack:end;justify-content:flex-end}.swal2-container.swal2-bottom-end>:first-child,.swal2-container.swal2-bottom-left>:first-child,.swal2-container.swal2-bottom-right>:first-child,.swal2-container.swal2-bottom-start>:first-child,.swal2-container.swal2-bottom>:first-child{margin-top:auto}.swal2-container.swal2-grow-fullscreen>.swal2-modal{display:-webkit-box!important;display:flex!important;-webkit-box-flex:1;flex:1;align-self:stretch;-webkit-box-pack:center;justify-content:center}.swal2-container.swal2-grow-row>.swal2-modal{display:-webkit-box!important;display:flex!important;-webkit-box-flex:1;flex:1;align-content:center;-webkit-box-pack:center;justify-content:center}.swal2-container.swal2-grow-column{-webkit-box-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.swal2-container.swal2-grow-column.swal2-bottom,.swal2-container.swal2-grow-column.swal2-center,.swal2-container.swal2-grow-column.swal2-top{-webkit-box-align:center;align-items:center}.swal2-container.swal2-grow-column.swal2-bottom-left,.swal2-container.swal2-grow-column.swal2-bottom-start,.swal2-container.swal2-grow-column.swal2-center-left,.swal2-container.swal2-grow-column.swal2-center-start,.swal2-container.swal2-grow-column.swal2-top-left,.swal2-container.swal2-grow-column.swal2-top-start{-webkit-box-align:start;align-items:flex-start}.swal2-container.swal2-grow-column.swal2-bottom-end,.swal2-container.swal2-grow-column.swal2-bottom-right,.swal2-container.swal2-grow-column.swal2-center-end,.swal2-container.swal2-grow-column.swal2-center-right,.swal2-container.swal2-grow-column.swal2-top-end,.swal2-container.swal2-grow-column.swal2-top-right{-webkit-box-align:end;align-items:flex-end}.swal2-container.swal2-grow-column>.swal2-modal{display:-webkit-box!important;display:flex!important;-webkit-box-flex:1;flex:1;align-content:center;-webkit-box-pack:center;justify-content:center}.swal2-container:not(.swal2-top):not(.swal2-top-start):not(.swal2-top-end):not(.swal2-top-left):not(.swal2-top-right):not(.swal2-center-start):not(.swal2-center-end):not(.swal2-center-left):not(.swal2-center-right):not(.swal2-bottom):not(.swal2-bottom-start):not(.swal2-bottom-end):not(.swal2-bottom-left):not(.swal2-bottom-right):not(.swal2-grow-fullscreen)>.swal2-modal{margin:auto}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-container .swal2-modal{margin:0!important}}.swal2-popup{display:none;position:relative;box-sizing:border-box;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;width:32em;max-width:100%;padding:1.25em;border:none;border-radius:.3125em;background:#fff;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-header{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center}.swal2-title{position:relative;max-width:100%;margin:0 0 .4em;padding:0;color:#595959;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:-webkit-box;display:flex;z-index:1;flex-wrap:wrap;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;width:100%;margin:1.25em auto 0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.1)),to(rgba(0,0,0,.1)));background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.2)),to(rgba(0,0,0,.2)));background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-actions.swal2-loading .swal2-styled.swal2-confirm{box-sizing:border-box;width:2.5em;height:2.5em;margin:.46875em;padding:0;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border:.25em solid transparent;border-radius:100%;border-color:transparent;background-color:transparent!important;color:transparent;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-actions.swal2-loading .swal2-styled.swal2-cancel{margin-right:30px;margin-left:30px}.swal2-actions.swal2-loading :not(.swal2-styled).swal2-confirm::after{content:\"\";display:inline-block;width:15px;height:15px;margin-left:5px;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border:3px solid #999;border-radius:50%;border-right-color:transparent;box-shadow:1px 1px 1px #fff}.swal2-styled{margin:.3125em;padding:.625em 2em;box-shadow:none;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#3085d6;color:#fff;font-size:1.0625em}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#aaa;color:#fff;font-size:1.0625em}.swal2-styled:focus{outline:0;box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(50,100,150,.4)}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{-webkit-box-pack:center;justify-content:center;margin:1.25em 0 0;padding:1em 0 0;border-top:1px solid #eee;color:#545454;font-size:1em}.swal2-timer-progress-bar{position:absolute;bottom:0;left:0;width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:1.25em auto}.swal2-close{position:absolute;z-index:2;top:0;right:0;-webkit-box-pack:center;justify-content:center;width:1.2em;height:1.2em;padding:0;overflow:hidden;-webkit-transition:color .1s ease-out;transition:color .1s ease-out;border:none;border-radius:0;outline:initial;background:0 0;color:#ccc;font-family:serif;font-size:2.5em;line-height:1.2;cursor:pointer}.swal2-close:hover{-webkit-transform:none;transform:none;background:0 0;color:#f27474}.swal2-close::-moz-focus-inner{border:0}.swal2-content{z-index:1;-webkit-box-pack:center;justify-content:center;margin:0;padding:0;color:#545454;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em auto}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:100%;-webkit-transition:border-color .3s,box-shadow .3s;transition:border-color .3s,box-shadow .3s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06);color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:0 0 3px #c4e6f5}.swal2-file::-webkit-input-placeholder,.swal2-input::-webkit-input-placeholder,.swal2-textarea::-webkit-input-placeholder{color:#ccc}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::-ms-input-placeholder,.swal2-input::-ms-input-placeholder,.swal2-textarea::-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em auto;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-input[type=number]{max-width:10em}.swal2-file{background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{margin:0 .4em}.swal2-validation-message{display:none;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:\"!\";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;-webkit-box-pack:center;justify-content:center;width:5em;height:5em;margin:1.25em auto 1.875em;border:.25em solid transparent;border-radius:50%;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;-webkit-box-flex:1;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:3.75em 3.75em;transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:0 3.75em;transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.875em;width:1.5625em;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{-webkit-box-align:center;align-items:center;margin:0 0 1.25em;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;width:2em;height:2em;border-radius:2em;background:#3085d6;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#3085d6}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;width:2.5em;height:.4em;margin:0 -1px;background:#3085d6}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{-webkit-transition:none;transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{right:auto;left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@supports (-ms-accelerator:true){.swal2-range input{width:100%!important}.swal2-range output{display:none}}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-range input{width:100%!important}.swal2-range output{display:none}}@-moz-document url-prefix(){.swal2-close:focus{outline:2px solid rgba(50,100,150,.4)}}@-webkit-keyframes swal2-toast-show{0%{-webkit-transform:translateY(-.625em) rotateZ(2deg);transform:translateY(-.625em) rotateZ(2deg)}33%{-webkit-transform:translateY(0) rotateZ(-2deg);transform:translateY(0) rotateZ(-2deg)}66%{-webkit-transform:translateY(.3125em) rotateZ(2deg);transform:translateY(.3125em) rotateZ(2deg)}100%{-webkit-transform:translateY(0) rotateZ(0);transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{-webkit-transform:translateY(-.625em) rotateZ(2deg);transform:translateY(-.625em) rotateZ(2deg)}33%{-webkit-transform:translateY(0) rotateZ(-2deg);transform:translateY(0) rotateZ(-2deg)}66%{-webkit-transform:translateY(.3125em) rotateZ(2deg);transform:translateY(.3125em) rotateZ(2deg)}100%{-webkit-transform:translateY(0) rotateZ(0);transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{-webkit-transform:rotateZ(1deg);transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{-webkit-transform:rotateZ(1deg);transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{-webkit-transform:scale(.7);transform:scale(.7)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes swal2-show{0%{-webkit-transform:scale(.7);transform:scale(.7)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}100%{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}100%{-webkit-transform:scale(.5);transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}100%{-webkit-transform:scale(.5);transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.875em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.875em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}100%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}100%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;-webkit-transform:scale(.4);transform:scale(.4);opacity:0}50%{margin-top:1.625em;-webkit-transform:scale(.4);transform:scale(.4);opacity:0}80%{margin-top:-.375em;-webkit-transform:scale(1.15);transform:scale(1.15)}100%{margin-top:0;-webkit-transform:scale(1);transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;-webkit-transform:scale(.4);transform:scale(.4);opacity:0}50%{margin-top:1.625em;-webkit-transform:scale(.4);transform:scale(.4);opacity:0}80%{margin-top:-.375em;-webkit-transform:scale(1.15);transform:scale(1.15)}100%{margin-top:0;-webkit-transform:scale(1);transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}100%{-webkit-transform:rotateX(0);transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}100%{-webkit-transform:rotateX(0);transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{top:auto;right:auto;bottom:auto;left:auto;max-width:calc(100% - .625em * 2);background-color:transparent!important}body.swal2-no-backdrop .swal2-container>.swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}body.swal2-no-backdrop .swal2-container.swal2-top{top:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-top-left,body.swal2-no-backdrop .swal2-container.swal2-top-start{top:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-top-end,body.swal2-no-backdrop .swal2-container.swal2-top-right{top:0;right:0}body.swal2-no-backdrop .swal2-container.swal2-center{top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-left,body.swal2-no-backdrop .swal2-container.swal2-center-start{top:50%;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-end,body.swal2-no-backdrop .swal2-container.swal2-center-right{top:50%;right:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom{bottom:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom-left,body.swal2-no-backdrop .swal2-container.swal2-bottom-start{bottom:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-bottom-end,body.swal2-no-backdrop .swal2-container.swal2-bottom-right{right:0;bottom:0}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{background-color:transparent}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;-webkit-transform:translateY(-50%);transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}body.swal2-toast-column .swal2-toast{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:stretch;align-items:stretch}body.swal2-toast-column .swal2-toast .swal2-actions{-webkit-box-flex:1;flex:1;align-self:stretch;height:2.2em;margin-top:.3125em}body.swal2-toast-column .swal2-toast .swal2-loading{-webkit-box-pack:center;justify-content:center}body.swal2-toast-column .swal2-toast .swal2-input{height:2em;margin:.3125em auto;font-size:1em}body.swal2-toast-column .swal2-toast .swal2-validation-message{font-size:1em}");
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(26).Promise;


/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(process, global) {var require;/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */

(function (global, factory) {
     true ? module.exports = factory() :
    undefined;
}(this, (function () { 'use strict';

function objectOrFunction(x) {
  return typeof x === 'function' || typeof x === 'object' && x !== null;
}

function isFunction(x) {
  return typeof x === 'function';
}

var _isArray = undefined;
if (!Array.isArray) {
  _isArray = function (x) {
    return Object.prototype.toString.call(x) === '[object Array]';
  };
} else {
  _isArray = Array.isArray;
}

var isArray = _isArray;

var len = 0;
var vertxNext = undefined;
var customSchedulerFn = undefined;

var asap = function asap(callback, arg) {
  queue[len] = callback;
  queue[len + 1] = arg;
  len += 2;
  if (len === 2) {
    // If len is 2, that means that we need to schedule an async flush.
    // If additional callbacks are queued before the queue is flushed, they
    // will be processed by this flush that we are scheduling.
    if (customSchedulerFn) {
      customSchedulerFn(flush);
    } else {
      scheduleFlush();
    }
  }
};

function setScheduler(scheduleFn) {
  customSchedulerFn = scheduleFn;
}

function setAsap(asapFn) {
  asap = asapFn;
}

var browserWindow = typeof window !== 'undefined' ? window : undefined;
var browserGlobal = browserWindow || {};
var BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;
var isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';

// test for web worker but not in IE10
var isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';

// node
function useNextTick() {
  // node version 0.10.x displays a deprecation warning when nextTick is used recursively
  // see https://github.com/cujojs/when/issues/410 for details
  return function () {
    return process.nextTick(flush);
  };
}

// vertx
function useVertxTimer() {
  return function () {
    vertxNext(flush);
  };
}

function useMutationObserver() {
  var iterations = 0;
  var observer = new BrowserMutationObserver(flush);
  var node = document.createTextNode('');
  observer.observe(node, { characterData: true });

  return function () {
    node.data = iterations = ++iterations % 2;
  };
}

// web worker
function useMessageChannel() {
  var channel = new MessageChannel();
  channel.port1.onmessage = flush;
  return function () {
    return channel.port2.postMessage(0);
  };
}

function useSetTimeout() {
  // Store setTimeout reference so es6-promise will be unaffected by
  // other code modifying setTimeout (like sinon.useFakeTimers())
  var globalSetTimeout = setTimeout;
  return function () {
    return globalSetTimeout(flush, 1);
  };
}

var queue = new Array(1000);
function flush() {
  for (var i = 0; i < len; i += 2) {
    var callback = queue[i];
    var arg = queue[i + 1];

    callback(arg);

    queue[i] = undefined;
    queue[i + 1] = undefined;
  }

  len = 0;
}

function attemptVertx() {
  try {
    var r = require;
    var vertx = __webpack_require__(28);
    vertxNext = vertx.runOnLoop || vertx.runOnContext;
    return useVertxTimer();
  } catch (e) {
    return useSetTimeout();
  }
}

var scheduleFlush = undefined;
// Decide what async method to use to triggering processing of queued callbacks:
if (isNode) {
  scheduleFlush = useNextTick();
} else if (BrowserMutationObserver) {
  scheduleFlush = useMutationObserver();
} else if (isWorker) {
  scheduleFlush = useMessageChannel();
} else if (browserWindow === undefined && "function" === 'function') {
  scheduleFlush = attemptVertx();
} else {
  scheduleFlush = useSetTimeout();
}

function then(onFulfillment, onRejection) {
  var _arguments = arguments;

  var parent = this;

  var child = new this.constructor(noop);

  if (child[PROMISE_ID] === undefined) {
    makePromise(child);
  }

  var _state = parent._state;

  if (_state) {
    (function () {
      var callback = _arguments[_state - 1];
      asap(function () {
        return invokeCallback(_state, child, callback, parent._result);
      });
    })();
  } else {
    subscribe(parent, child, onFulfillment, onRejection);
  }

  return child;
}

/**
  `Promise.resolve` returns a promise that will become resolved with the
  passed `value`. It is shorthand for the following:

  ```javascript
  let promise = new Promise(function(resolve, reject){
    resolve(1);
  });

  promise.then(function(value){
    // value === 1
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  let promise = Promise.resolve(1);

  promise.then(function(value){
    // value === 1
  });
  ```

  @method resolve
  @static
  @param {Any} value value that the returned promise will be resolved with
  Useful for tooling.
  @return {Promise} a promise that will become fulfilled with the given
  `value`
*/
function resolve(object) {
  /*jshint validthis:true */
  var Constructor = this;

  if (object && typeof object === 'object' && object.constructor === Constructor) {
    return object;
  }

  var promise = new Constructor(noop);
  _resolve(promise, object);
  return promise;
}

var PROMISE_ID = Math.random().toString(36).substring(16);

function noop() {}

var PENDING = void 0;
var FULFILLED = 1;
var REJECTED = 2;

var GET_THEN_ERROR = new ErrorObject();

function selfFulfillment() {
  return new TypeError("You cannot resolve a promise with itself");
}

function cannotReturnOwn() {
  return new TypeError('A promises callback cannot return that same promise.');
}

function getThen(promise) {
  try {
    return promise.then;
  } catch (error) {
    GET_THEN_ERROR.error = error;
    return GET_THEN_ERROR;
  }
}

function tryThen(then, value, fulfillmentHandler, rejectionHandler) {
  try {
    then.call(value, fulfillmentHandler, rejectionHandler);
  } catch (e) {
    return e;
  }
}

function handleForeignThenable(promise, thenable, then) {
  asap(function (promise) {
    var sealed = false;
    var error = tryThen(then, thenable, function (value) {
      if (sealed) {
        return;
      }
      sealed = true;
      if (thenable !== value) {
        _resolve(promise, value);
      } else {
        fulfill(promise, value);
      }
    }, function (reason) {
      if (sealed) {
        return;
      }
      sealed = true;

      _reject(promise, reason);
    }, 'Settle: ' + (promise._label || ' unknown promise'));

    if (!sealed && error) {
      sealed = true;
      _reject(promise, error);
    }
  }, promise);
}

function handleOwnThenable(promise, thenable) {
  if (thenable._state === FULFILLED) {
    fulfill(promise, thenable._result);
  } else if (thenable._state === REJECTED) {
    _reject(promise, thenable._result);
  } else {
    subscribe(thenable, undefined, function (value) {
      return _resolve(promise, value);
    }, function (reason) {
      return _reject(promise, reason);
    });
  }
}

function handleMaybeThenable(promise, maybeThenable, then$$) {
  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {
    handleOwnThenable(promise, maybeThenable);
  } else {
    if (then$$ === GET_THEN_ERROR) {
      _reject(promise, GET_THEN_ERROR.error);
    } else if (then$$ === undefined) {
      fulfill(promise, maybeThenable);
    } else if (isFunction(then$$)) {
      handleForeignThenable(promise, maybeThenable, then$$);
    } else {
      fulfill(promise, maybeThenable);
    }
  }
}

function _resolve(promise, value) {
  if (promise === value) {
    _reject(promise, selfFulfillment());
  } else if (objectOrFunction(value)) {
    handleMaybeThenable(promise, value, getThen(value));
  } else {
    fulfill(promise, value);
  }
}

function publishRejection(promise) {
  if (promise._onerror) {
    promise._onerror(promise._result);
  }

  publish(promise);
}

function fulfill(promise, value) {
  if (promise._state !== PENDING) {
    return;
  }

  promise._result = value;
  promise._state = FULFILLED;

  if (promise._subscribers.length !== 0) {
    asap(publish, promise);
  }
}

function _reject(promise, reason) {
  if (promise._state !== PENDING) {
    return;
  }
  promise._state = REJECTED;
  promise._result = reason;

  asap(publishRejection, promise);
}

function subscribe(parent, child, onFulfillment, onRejection) {
  var _subscribers = parent._subscribers;
  var length = _subscribers.length;

  parent._onerror = null;

  _subscribers[length] = child;
  _subscribers[length + FULFILLED] = onFulfillment;
  _subscribers[length + REJECTED] = onRejection;

  if (length === 0 && parent._state) {
    asap(publish, parent);
  }
}

function publish(promise) {
  var subscribers = promise._subscribers;
  var settled = promise._state;

  if (subscribers.length === 0) {
    return;
  }

  var child = undefined,
      callback = undefined,
      detail = promise._result;

  for (var i = 0; i < subscribers.length; i += 3) {
    child = subscribers[i];
    callback = subscribers[i + settled];

    if (child) {
      invokeCallback(settled, child, callback, detail);
    } else {
      callback(detail);
    }
  }

  promise._subscribers.length = 0;
}

function ErrorObject() {
  this.error = null;
}

var TRY_CATCH_ERROR = new ErrorObject();

function tryCatch(callback, detail) {
  try {
    return callback(detail);
  } catch (e) {
    TRY_CATCH_ERROR.error = e;
    return TRY_CATCH_ERROR;
  }
}

function invokeCallback(settled, promise, callback, detail) {
  var hasCallback = isFunction(callback),
      value = undefined,
      error = undefined,
      succeeded = undefined,
      failed = undefined;

  if (hasCallback) {
    value = tryCatch(callback, detail);

    if (value === TRY_CATCH_ERROR) {
      failed = true;
      error = value.error;
      value = null;
    } else {
      succeeded = true;
    }

    if (promise === value) {
      _reject(promise, cannotReturnOwn());
      return;
    }
  } else {
    value = detail;
    succeeded = true;
  }

  if (promise._state !== PENDING) {
    // noop
  } else if (hasCallback && succeeded) {
      _resolve(promise, value);
    } else if (failed) {
      _reject(promise, error);
    } else if (settled === FULFILLED) {
      fulfill(promise, value);
    } else if (settled === REJECTED) {
      _reject(promise, value);
    }
}

function initializePromise(promise, resolver) {
  try {
    resolver(function resolvePromise(value) {
      _resolve(promise, value);
    }, function rejectPromise(reason) {
      _reject(promise, reason);
    });
  } catch (e) {
    _reject(promise, e);
  }
}

var id = 0;
function nextId() {
  return id++;
}

function makePromise(promise) {
  promise[PROMISE_ID] = id++;
  promise._state = undefined;
  promise._result = undefined;
  promise._subscribers = [];
}

function Enumerator(Constructor, input) {
  this._instanceConstructor = Constructor;
  this.promise = new Constructor(noop);

  if (!this.promise[PROMISE_ID]) {
    makePromise(this.promise);
  }

  if (isArray(input)) {
    this._input = input;
    this.length = input.length;
    this._remaining = input.length;

    this._result = new Array(this.length);

    if (this.length === 0) {
      fulfill(this.promise, this._result);
    } else {
      this.length = this.length || 0;
      this._enumerate();
      if (this._remaining === 0) {
        fulfill(this.promise, this._result);
      }
    }
  } else {
    _reject(this.promise, validationError());
  }
}

function validationError() {
  return new Error('Array Methods must be provided an Array');
};

Enumerator.prototype._enumerate = function () {
  var length = this.length;
  var _input = this._input;

  for (var i = 0; this._state === PENDING && i < length; i++) {
    this._eachEntry(_input[i], i);
  }
};

Enumerator.prototype._eachEntry = function (entry, i) {
  var c = this._instanceConstructor;
  var resolve$$ = c.resolve;

  if (resolve$$ === resolve) {
    var _then = getThen(entry);

    if (_then === then && entry._state !== PENDING) {
      this._settledAt(entry._state, i, entry._result);
    } else if (typeof _then !== 'function') {
      this._remaining--;
      this._result[i] = entry;
    } else if (c === Promise) {
      var promise = new c(noop);
      handleMaybeThenable(promise, entry, _then);
      this._willSettleAt(promise, i);
    } else {
      this._willSettleAt(new c(function (resolve$$) {
        return resolve$$(entry);
      }), i);
    }
  } else {
    this._willSettleAt(resolve$$(entry), i);
  }
};

Enumerator.prototype._settledAt = function (state, i, value) {
  var promise = this.promise;

  if (promise._state === PENDING) {
    this._remaining--;

    if (state === REJECTED) {
      _reject(promise, value);
    } else {
      this._result[i] = value;
    }
  }

  if (this._remaining === 0) {
    fulfill(promise, this._result);
  }
};

Enumerator.prototype._willSettleAt = function (promise, i) {
  var enumerator = this;

  subscribe(promise, undefined, function (value) {
    return enumerator._settledAt(FULFILLED, i, value);
  }, function (reason) {
    return enumerator._settledAt(REJECTED, i, reason);
  });
};

/**
  `Promise.all` accepts an array of promises, and returns a new promise which
  is fulfilled with an array of fulfillment values for the passed promises, or
  rejected with the reason of the first passed promise to be rejected. It casts all
  elements of the passed iterable to promises as it runs this algorithm.

  Example:

  ```javascript
  let promise1 = resolve(1);
  let promise2 = resolve(2);
  let promise3 = resolve(3);
  let promises = [ promise1, promise2, promise3 ];

  Promise.all(promises).then(function(array){
    // The array here would be [ 1, 2, 3 ];
  });
  ```

  If any of the `promises` given to `all` are rejected, the first promise
  that is rejected will be given as an argument to the returned promises's
  rejection handler. For example:

  Example:

  ```javascript
  let promise1 = resolve(1);
  let promise2 = reject(new Error("2"));
  let promise3 = reject(new Error("3"));
  let promises = [ promise1, promise2, promise3 ];

  Promise.all(promises).then(function(array){
    // Code here never runs because there are rejected promises!
  }, function(error) {
    // error.message === "2"
  });
  ```

  @method all
  @static
  @param {Array} entries array of promises
  @param {String} label optional string for labeling the promise.
  Useful for tooling.
  @return {Promise} promise that is fulfilled when all `promises` have been
  fulfilled, or rejected if any of them become rejected.
  @static
*/
function all(entries) {
  return new Enumerator(this, entries).promise;
}

/**
  `Promise.race` returns a new promise which is settled in the same way as the
  first passed promise to settle.

  Example:

  ```javascript
  let promise1 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 1');
    }, 200);
  });

  let promise2 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 2');
    }, 100);
  });

  Promise.race([promise1, promise2]).then(function(result){
    // result === 'promise 2' because it was resolved before promise1
    // was resolved.
  });
  ```

  `Promise.race` is deterministic in that only the state of the first
  settled promise matters. For example, even if other promises given to the
  `promises` array argument are resolved, but the first settled promise has
  become rejected before the other promises became fulfilled, the returned
  promise will become rejected:

  ```javascript
  let promise1 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 1');
    }, 200);
  });

  let promise2 = new Promise(function(resolve, reject){
    setTimeout(function(){
      reject(new Error('promise 2'));
    }, 100);
  });

  Promise.race([promise1, promise2]).then(function(result){
    // Code here never runs
  }, function(reason){
    // reason.message === 'promise 2' because promise 2 became rejected before
    // promise 1 became fulfilled
  });
  ```

  An example real-world use case is implementing timeouts:

  ```javascript
  Promise.race([ajax('foo.json'), timeout(5000)])
  ```

  @method race
  @static
  @param {Array} promises array of promises to observe
  Useful for tooling.
  @return {Promise} a promise which settles in the same way as the first passed
  promise to settle.
*/
function race(entries) {
  /*jshint validthis:true */
  var Constructor = this;

  if (!isArray(entries)) {
    return new Constructor(function (_, reject) {
      return reject(new TypeError('You must pass an array to race.'));
    });
  } else {
    return new Constructor(function (resolve, reject) {
      var length = entries.length;
      for (var i = 0; i < length; i++) {
        Constructor.resolve(entries[i]).then(resolve, reject);
      }
    });
  }
}

/**
  `Promise.reject` returns a promise rejected with the passed `reason`.
  It is shorthand for the following:

  ```javascript
  let promise = new Promise(function(resolve, reject){
    reject(new Error('WHOOPS'));
  });

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  let promise = Promise.reject(new Error('WHOOPS'));

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  @method reject
  @static
  @param {Any} reason value that the returned promise will be rejected with.
  Useful for tooling.
  @return {Promise} a promise rejected with the given `reason`.
*/
function reject(reason) {
  /*jshint validthis:true */
  var Constructor = this;
  var promise = new Constructor(noop);
  _reject(promise, reason);
  return promise;
}

function needsResolver() {
  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');
}

function needsNew() {
  throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}

/**
  Promise objects represent the eventual result of an asynchronous operation. The
  primary way of interacting with a promise is through its `then` method, which
  registers callbacks to receive either a promise's eventual value or the reason
  why the promise cannot be fulfilled.

  Terminology
  -----------

  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.
  - `thenable` is an object or function that defines a `then` method.
  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).
  - `exception` is a value that is thrown using the throw statement.
  - `reason` is a value that indicates why a promise was rejected.
  - `settled` the final resting state of a promise, fulfilled or rejected.

  A promise can be in one of three states: pending, fulfilled, or rejected.

  Promises that are fulfilled have a fulfillment value and are in the fulfilled
  state.  Promises that are rejected have a rejection reason and are in the
  rejected state.  A fulfillment value is never a thenable.

  Promises can also be said to *resolve* a value.  If this value is also a
  promise, then the original promise's settled state will match the value's
  settled state.  So a promise that *resolves* a promise that rejects will
  itself reject, and a promise that *resolves* a promise that fulfills will
  itself fulfill.


  Basic Usage:
  ------------

  ```js
  let promise = new Promise(function(resolve, reject) {
    // on success
    resolve(value);

    // on failure
    reject(reason);
  });

  promise.then(function(value) {
    // on fulfillment
  }, function(reason) {
    // on rejection
  });
  ```

  Advanced Usage:
  ---------------

  Promises shine when abstracting away asynchronous interactions such as
  `XMLHttpRequest`s.

  ```js
  function getJSON(url) {
    return new Promise(function(resolve, reject){
      let xhr = new XMLHttpRequest();

      xhr.open('GET', url);
      xhr.onreadystatechange = handler;
      xhr.responseType = 'json';
      xhr.setRequestHeader('Accept', 'application/json');
      xhr.send();

      function handler() {
        if (this.readyState === this.DONE) {
          if (this.status === 200) {
            resolve(this.response);
          } else {
            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));
          }
        }
      };
    });
  }

  getJSON('/posts.json').then(function(json) {
    // on fulfillment
  }, function(reason) {
    // on rejection
  });
  ```

  Unlike callbacks, promises are great composable primitives.

  ```js
  Promise.all([
    getJSON('/posts'),
    getJSON('/comments')
  ]).then(function(values){
    values[0] // => postsJSON
    values[1] // => commentsJSON

    return values;
  });
  ```

  @class Promise
  @param {function} resolver
  Useful for tooling.
  @constructor
*/
function Promise(resolver) {
  this[PROMISE_ID] = nextId();
  this._result = this._state = undefined;
  this._subscribers = [];

  if (noop !== resolver) {
    typeof resolver !== 'function' && needsResolver();
    this instanceof Promise ? initializePromise(this, resolver) : needsNew();
  }
}

Promise.all = all;
Promise.race = race;
Promise.resolve = resolve;
Promise.reject = reject;
Promise._setScheduler = setScheduler;
Promise._setAsap = setAsap;
Promise._asap = asap;

Promise.prototype = {
  constructor: Promise,

  /**
    The primary way of interacting with a promise is through its `then` method,
    which registers callbacks to receive either a promise's eventual value or the
    reason why the promise cannot be fulfilled.
  
    ```js
    findUser().then(function(user){
      // user is available
    }, function(reason){
      // user is unavailable, and you are given the reason why
    });
    ```
  
    Chaining
    --------
  
    The return value of `then` is itself a promise.  This second, 'downstream'
    promise is resolved with the return value of the first promise's fulfillment
    or rejection handler, or rejected if the handler throws an exception.
  
    ```js
    findUser().then(function (user) {
      return user.name;
    }, function (reason) {
      return 'default name';
    }).then(function (userName) {
      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it
      // will be `'default name'`
    });
  
    findUser().then(function (user) {
      throw new Error('Found user, but still unhappy');
    }, function (reason) {
      throw new Error('`findUser` rejected and we're unhappy');
    }).then(function (value) {
      // never reached
    }, function (reason) {
      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.
      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.
    });
    ```
    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.
  
    ```js
    findUser().then(function (user) {
      throw new PedagogicalException('Upstream error');
    }).then(function (value) {
      // never reached
    }).then(function (value) {
      // never reached
    }, function (reason) {
      // The `PedgagocialException` is propagated all the way down to here
    });
    ```
  
    Assimilation
    ------------
  
    Sometimes the value you want to propagate to a downstream promise can only be
    retrieved asynchronously. This can be achieved by returning a promise in the
    fulfillment or rejection handler. The downstream promise will then be pending
    until the returned promise is settled. This is called *assimilation*.
  
    ```js
    findUser().then(function (user) {
      return findCommentsByAuthor(user);
    }).then(function (comments) {
      // The user's comments are now available
    });
    ```
  
    If the assimliated promise rejects, then the downstream promise will also reject.
  
    ```js
    findUser().then(function (user) {
      return findCommentsByAuthor(user);
    }).then(function (comments) {
      // If `findCommentsByAuthor` fulfills, we'll have the value here
    }, function (reason) {
      // If `findCommentsByAuthor` rejects, we'll have the reason here
    });
    ```
  
    Simple Example
    --------------
  
    Synchronous Example
  
    ```javascript
    let result;
  
    try {
      result = findResult();
      // success
    } catch(reason) {
      // failure
    }
    ```
  
    Errback Example
  
    ```js
    findResult(function(result, err){
      if (err) {
        // failure
      } else {
        // success
      }
    });
    ```
  
    Promise Example;
  
    ```javascript
    findResult().then(function(result){
      // success
    }, function(reason){
      // failure
    });
    ```
  
    Advanced Example
    --------------
  
    Synchronous Example
  
    ```javascript
    let author, books;
  
    try {
      author = findAuthor();
      books  = findBooksByAuthor(author);
      // success
    } catch(reason) {
      // failure
    }
    ```
  
    Errback Example
  
    ```js
  
    function foundBooks(books) {
  
    }
  
    function failure(reason) {
  
    }
  
    findAuthor(function(author, err){
      if (err) {
        failure(err);
        // failure
      } else {
        try {
          findBoooksByAuthor(author, function(books, err) {
            if (err) {
              failure(err);
            } else {
              try {
                foundBooks(books);
              } catch(reason) {
                failure(reason);
              }
            }
          });
        } catch(error) {
          failure(err);
        }
        // success
      }
    });
    ```
  
    Promise Example;
  
    ```javascript
    findAuthor().
      then(findBooksByAuthor).
      then(function(books){
        // found books
    }).catch(function(reason){
      // something went wrong
    });
    ```
  
    @method then
    @param {Function} onFulfilled
    @param {Function} onRejected
    Useful for tooling.
    @return {Promise}
  */
  then: then,

  /**
    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same
    as the catch block of a try/catch statement.
  
    ```js
    function findAuthor(){
      throw new Error('couldn't find that author');
    }
  
    // synchronous
    try {
      findAuthor();
    } catch(reason) {
      // something went wrong
    }
  
    // async with promises
    findAuthor().catch(function(reason){
      // something went wrong
    });
    ```
  
    @method catch
    @param {Function} onRejection
    Useful for tooling.
    @return {Promise}
  */
  'catch': function _catch(onRejection) {
    return this.then(null, onRejection);
  }
};

function polyfill() {
    var local = undefined;

    if (typeof global !== 'undefined') {
        local = global;
    } else if (typeof self !== 'undefined') {
        local = self;
    } else {
        try {
            local = Function('return this')();
        } catch (e) {
            throw new Error('polyfill failed because global object is unavailable in this environment');
        }
    }

    var P = local.Promise;

    if (P) {
        var promiseToString = null;
        try {
            promiseToString = Object.prototype.toString.call(P.resolve());
        } catch (e) {
            // silently ignored
        }

        if (promiseToString === '[object Promise]' && !P.cast) {
            return;
        }
    }

    local.Promise = Promise;
}

polyfill();
// Strange compat..
Promise.polyfill = polyfill;
Promise.Promise = Promise;

return Promise;

})));
//# sourceMappingURL=es6-promise.map
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(27), __webpack_require__(2)))

/***/ }),
/* 27 */
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),
/* 28 */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

var xhr = __webpack_require__(30);

var _lang;

var _msg = {};

function getNavigatorLanguage() {
    var lang = navigator.language || navigator.userLanguage || navigator.systemLanguage;
    return lang.substr(0, 2);
}

function setLanguage(inputLang, callback) {
    _lang = inputLang;

    //      ,    
    if (!_lang) {
        _lang = getNavigatorLanguage();
    }

    if (!_msg[inputLang]) {
        load(inputLang, callback);
    }
}

function load(inputLang, callback) {
    try {
        _msg = __webpack_require__(35)("./message." + inputLang + ".json");        
        window.KICA_CORPUS = _msg;
        callback();
        return;
    } catch (e) {
        console.log(e.message);
        callback("The language code: '" + _lang + "' is not supported.");
    }
}

function get(id) {
    if (arguments.length == 0) {
        return "Unknown error.";
    }

    var message = _msg ? _msg[id] : id;

    for (var i = 1; i < arguments.length; i++) {
        message = message.replace("{}", arguments[i]);
    }

    return message;
}

module.exports = {
    get: get,
    setLanguage: setLanguage
}

/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var window = __webpack_require__(31)
var isFunction = __webpack_require__(32)
var parseHeaders = __webpack_require__(33)
var xtend = __webpack_require__(34)

module.exports = createXHR
// Allow use of default import syntax in TypeScript
module.exports.default = createXHR;
createXHR.XMLHttpRequest = window.XMLHttpRequest || noop
createXHR.XDomainRequest = "withCredentials" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest

forEachArray(["get", "put", "post", "patch", "head", "delete"], function(method) {
    createXHR[method === "delete" ? "del" : method] = function(uri, options, callback) {
        options = initParams(uri, options, callback)
        options.method = method.toUpperCase()
        return _createXHR(options)
    }
})

function forEachArray(array, iterator) {
    for (var i = 0; i < array.length; i++) {
        iterator(array[i])
    }
}

function isEmpty(obj){
    for(var i in obj){
        if(obj.hasOwnProperty(i)) return false
    }
    return true
}

function initParams(uri, options, callback) {
    var params = uri

    if (isFunction(options)) {
        callback = options
        if (typeof uri === "string") {
            params = {uri:uri}
        }
    } else {
        params = xtend(options, {uri: uri})
    }

    params.callback = callback
    return params
}

function createXHR(uri, options, callback) {
    options = initParams(uri, options, callback)
    return _createXHR(options)
}

function _createXHR(options) {
    if(typeof options.callback === "undefined"){
        throw new Error("callback argument missing")
    }

    var called = false
    var callback = function cbOnce(err, response, body){
        if(!called){
            called = true
            options.callback(err, response, body)
        }
    }

    function readystatechange() {
        if (xhr.readyState === 4) {
            setTimeout(loadFunc, 0)
        }
    }

    function getBody() {
        // Chrome with requestType=blob throws errors arround when even testing access to responseText
        var body = undefined

        if (xhr.response) {
            body = xhr.response
        } else {
            body = xhr.responseText || getXml(xhr)
        }

        if (isJson) {
            try {
                body = JSON.parse(body)
            } catch (e) {}
        }

        return body
    }

    function errorFunc(evt) {
        clearTimeout(timeoutTimer)
        if(!(evt instanceof Error)){
            evt = new Error("" + (evt || "Unknown XMLHttpRequest Error") )
        }
        evt.statusCode = 0
        return callback(evt, failureResponse)
    }

    // will load the data & process the response in a special response object
    function loadFunc() {
        if (aborted) return
        var status
        clearTimeout(timeoutTimer)
        if(options.useXDR && xhr.status===undefined) {
            //IE8 CORS GET successful response doesn't have a status field, but body is fine
            status = 200
        } else {
            status = (xhr.status === 1223 ? 204 : xhr.status)
        }
        var response = failureResponse
        var err = null

        if (status !== 0){
            response = {
                body: getBody(),
                statusCode: status,
                method: method,
                headers: {},
                url: uri,
                rawRequest: xhr
            }
            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE
                response.headers = parseHeaders(xhr.getAllResponseHeaders())
            }
        } else {
            err = new Error("Internal XMLHttpRequest Error")
        }
        return callback(err, response, response.body)
    }

    var xhr = options.xhr || null

    if (!xhr) {
        if (options.cors || options.useXDR) {
            xhr = new createXHR.XDomainRequest()
        }else{
            xhr = new createXHR.XMLHttpRequest()
        }
    }

    var key
    var aborted
    var uri = xhr.url = options.uri || options.url
    var method = xhr.method = options.method || "GET"
    var body = options.body || options.data
    var headers = xhr.headers = options.headers || {}
    var sync = !!options.sync
    var isJson = false
    var timeoutTimer
    var failureResponse = {
        body: undefined,
        headers: {},
        statusCode: 0,
        method: method,
        url: uri,
        rawRequest: xhr
    }

    if ("json" in options && options.json !== false) {
        isJson = true
        headers["accept"] || headers["Accept"] || (headers["Accept"] = "application/json") //Don't override existing accept header declared by user
        if (method !== "GET" && method !== "HEAD") {
            headers["content-type"] || headers["Content-Type"] || (headers["Content-Type"] = "application/json") //Don't override existing accept header declared by user
            body = JSON.stringify(options.json === true ? body : options.json)
        }
    }

    xhr.onreadystatechange = readystatechange
    xhr.onload = loadFunc
    xhr.onerror = errorFunc
    // IE9 must have onprogress be set to a unique function.
    xhr.onprogress = function () {
        // IE must die
    }
    xhr.onabort = function(){
        aborted = true;
    }
    xhr.ontimeout = errorFunc
    xhr.open(method, uri, !sync, options.username, options.password)
    //has to be after open
    if(!sync) {
        xhr.withCredentials = !!options.withCredentials
    }
    // Cannot set timeout with sync request
    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly
    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent
    if (!sync && options.timeout > 0 ) {
        timeoutTimer = setTimeout(function(){
            if (aborted) return
            aborted = true//IE9 may still call readystatechange
            xhr.abort("timeout")
            var e = new Error("XMLHttpRequest timeout")
            e.code = "ETIMEDOUT"
            errorFunc(e)
        }, options.timeout )
    }

    if (xhr.setRequestHeader) {
        for(key in headers){
            if(headers.hasOwnProperty(key)){
                xhr.setRequestHeader(key, headers[key])
            }
        }
    } else if (options.headers && !isEmpty(options.headers)) {
        throw new Error("Headers cannot be set on an XDomainRequest object")
    }

    if ("responseType" in options) {
        xhr.responseType = options.responseType
    }

    if ("beforeSend" in options &&
        typeof options.beforeSend === "function"
    ) {
        options.beforeSend(xhr)
    }

    // Microsoft Edge browser sends "undefined" when send is called with undefined value.
    // XMLHttpRequest spec says to pass null as body to indicate no body
    // See https://github.com/naugtur/xhr/issues/100.
    xhr.send(body || null)

    return xhr


}

function getXml(xhr) {
    // xhr.responseXML will throw Exception "InvalidStateError" or "DOMException"
    // See https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseXML.
    try {
        if (xhr.responseType === "document") {
            return xhr.responseXML
        }
        var firefoxBugTakenEffect = xhr.responseXML && xhr.responseXML.documentElement.nodeName === "parsererror"
        if (xhr.responseType === "" && !firefoxBugTakenEffect) {
            return xhr.responseXML
        }
    } catch (e) {}

    return null
}

function noop() {}


/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var win;

if (typeof window !== "undefined") {
    win = window;
} else if (typeof global !== "undefined") {
    win = global;
} else if (typeof self !== "undefined"){
    win = self;
} else {
    win = {};
}

module.exports = win;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2)))

/***/ }),
/* 32 */
/***/ (function(module, exports) {

module.exports = isFunction

var toString = Object.prototype.toString

function isFunction (fn) {
  var string = toString.call(fn)
  return string === '[object Function]' ||
    (typeof fn === 'function' && string !== '[object RegExp]') ||
    (typeof window !== 'undefined' &&
     // IE8 and below
     (fn === window.setTimeout ||
      fn === window.alert ||
      fn === window.confirm ||
      fn === window.prompt))
};


/***/ }),
/* 33 */
/***/ (function(module, exports) {

var trim = function(string) {
  return string.replace(/^\s+|\s+$/g, '');
}
  , isArray = function(arg) {
      return Object.prototype.toString.call(arg) === '[object Array]';
    }

module.exports = function (headers) {
  if (!headers)
    return {}

  var result = {}

  var headersArr = trim(headers).split('\n')

  for (var i = 0; i < headersArr.length; i++) {
    var row = headersArr[i]
    var index = row.indexOf(':')
    , key = trim(row.slice(0, index)).toLowerCase()
    , value = trim(row.slice(index + 1))

    if (typeof(result[key]) === 'undefined') {
      result[key] = value
    } else if (isArray(result[key])) {
      result[key].push(value)
    } else {
      result[key] = [ result[key], value ]
    }
  }

  return result
}


/***/ }),
/* 34 */
/***/ (function(module, exports) {

module.exports = extend

var hasOwnProperty = Object.prototype.hasOwnProperty;

function extend() {
    var target = {}

    for (var i = 0; i < arguments.length; i++) {
        var source = arguments[i]

        for (var key in source) {
            if (hasOwnProperty.call(source, key)) {
                target[key] = source[key]
            }
        }
    }

    return target
}


/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./message.en.json": 36,
	"./message.ko.json": 37
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 35;

/***/ }),
/* 36 */
/***/ (function(module) {

module.exports = JSON.parse("{\"SELECT_CERT_HEADER\":\"Certificates Selection Dialog\",\"CERT_TABLE_LABEL\":\"Select a certificate.\",\"CERT_TABLE_THEAD1\":\"Category\",\"CERT_TABLE_THEAD2\":\"User\",\"CERT_TABLE_THEAD3\":\"Expiration\",\"CERT_TABLE_THEAD4\":\"Issuer\",\"CERT_PWD_LABEL\":\"Enter the password of the selected certificate.\",\"CERT_PWD_PLACEHOLDER\":\"The password of certificates is case-sensitive.\",\"CERT_PWD_DISABLED_PLACEHOLDER\":\"In this case, the password is not required.\",\"BUTTON_CONFIRM\":\"Confrim\",\"BUTTON_CANCEL\":\"Cancel\",\"BUTTON_OPEN_GUIDE\":\"Guide for browser certificates\",\"BUTTON_FIND_CERTIFICATE\":\"Add a certificate to browser\",\"IMPORT_CERT_TITLE\":\"Store the certificate\",\"IMPORT_CERT_PASSWORD_LABEL\":\"Enter the password of the certificate.\",\"IMPORT_CERT_TEXT\":\"The certificate will be stored in the browser storage.\",\"IMPORT_PFX_TITLE\":\"Add a certificate\",\"IMPORT_PFX_CONVERT_PFX_LABEL\":\"If can't find the certificate file\",\"IMPORT_PFX_CONVERT_PFX_DOWNLOAD\":\"Download Converting Program\",\"IMPORT_PFX_CONVERT_PFX_STEP1\":\", run this program.\",\"IMPORT_PFX_CONVERT_PFX_STEP2\":\"Select a certificate to use and enter the password. After that, press the button [Export]\",\"IMPORT_PFX_CONVERT_PFX_STEP3\":\"Save the file and note the path. After that, press the button [{}].\",\"IMPORT_PFX_FIND_BUTTON\":\"Find\",\"DROPZONE_TEXT_1\":\"To store and use a certificate\",\"DROPZONE_TEXT_2\":\"Drop the certificate file to here,\",\"DROPZONE_TEXT_3\":\"(bunch of signCert.der/signPri.key or *.pfx file)\",\"BROWSER_GUIDE_TITLE\":\"User Guide for Browser Certificates\",\"BROWSER_GUIDE_SUB_TITLE\":\"Browser certificates are stored in the browser storage used on the browser\",\"BROWSER_GUIDE_STORE_CERT_LABEL\":\"If there are no certificates, follow these steps.\",\"BROWSER_GUIDE_STORE_CERT_STEP1\":\"Drag & drop a certificate file\",\"BROWSER_GUIDE_STORE_CERT_STEP1_1\":\"Drag  the bunch of certificate files [signCert.der, signPri.key] or PKCS#12 file [.pfx or .p12]) and Drop it to the certificate table.\",\"BROWSER_GUIDE_STORE_CERT_STEP2\":\"Use [{}]\",\"BROWSER_GUIDE_STORE_CERT_STEP2_1\":\"Click the button [{}], and at the {} click the button [{}]. At the file explorer find PKCS#12 file [.pfx or.p12] and open it.\",\"BROWSER_GUIDE_STORE_CERT_STEP3\":\"In the case of PKCS#12 file, the password of the certificate is required.\",\"BROWSER_GUIDE_DELETE_CERT_LABEL\":\"Steps for clearing browser certificates\",\"BROWSER_GUIDE_DELETE_CERT_STEP1\":\"Open browser settings.\",\"BROWSER_GUIDE_DELETE_CERT_STEP2\":\"Find the options for browsing data.\",\"BROWSER_GUIDE_DELETE_CERT_STEP3\":\"Delete browser cookies and browsing data.\",\"BROWSER_DETAIL_MORE_BUTTON\":\"Here is more detials about browser certificates.\"}");

/***/ }),
/* 37 */
/***/ (function(module) {

module.exports = JSON.parse("{\"SELECT_CERT_HEADER\":\" \",\"CERT_TABLE_LABEL\":\" \",\"CERT_TABLE_THEAD1\":\"\",\"CERT_TABLE_THEAD2\":\"\",\"CERT_TABLE_THEAD3\":\"\",\"CERT_TABLE_THEAD4\":\"\",\"CERT_PWD_LABEL\":\" \",\"CERT_PWD_PLACEHOLDER\":\"   .\",\"CERT_PWD_DISABLED_PLACEHOLDER\":\"     .\",\"BUTTON_CONFIRM\":\"\",\"BUTTON_CANCEL\":\"\",\"BUTTON_OPEN_GUIDE\":\" ?\",\"BUTTON_FIND_CERTIFICATE\":\" \",\"IMPORT_CERT_TITLE\":\" \",\"IMPORT_CERT_PASSWORD_LABEL\":\"  .\",\"IMPORT_CERT_TEXT\":\"   .\",\"IMPORT_PFX_TITLE\":\" \",\"IMPORT_PFX_CONVERT_PFX_LABEL\":\"    \",\"IMPORT_PFX_CONVERT_PFX_DOWNLOAD\":\"   \",\"IMPORT_PFX_CONVERT_PFX_STEP1\":\"   \\n   .\",\"IMPORT_PFX_CONVERT_PFX_STEP2\":\"       []  .\",\"IMPORT_PFX_CONVERT_PFX_STEP3\":\" (.pfx)       [ ]    .\",\"IMPORT_PFX_FIND_BUTTON\":\" \",\"DROPZONE_TEXT_1\":\"    \",\"DROPZONE_TEXT_2\":\"    .\",\"DROPZONE_TEXT_3\":\"(*.pfx, *.p12  signCert.der/signPri.key )\",\"BROWSER_GUIDE_TITLE\":\"   \",\"BROWSER_GUIDE_SUB_TITLE\":\"         .\",\"BROWSER_GUIDE_STORE_CERT_LABEL\":\"   \",\"BROWSER_GUIDE_STORE_CERT_STEP1\":\"   (Drag & Drop)\",\"BROWSER_GUIDE_STORE_CERT_STEP1_1\":\"   ( [signCert.der, signPri.key]  PKCS#12 [.pfx  .p12])     .\",\"BROWSER_GUIDE_STORE_CERT_STEP2\":\"[ ] \",\"BROWSER_GUIDE_STORE_CERT_STEP2_1\":\"[ ]    [ ]  .   PKCS#12 [.pfx  .p12]     .\",\"BROWSER_GUIDE_STORE_CERT_STEP3\":\"PKCS#12        .\",\"BROWSER_GUIDE_DELETE_CERT_LABEL\":\"   \",\"BROWSER_GUIDE_DELETE_CERT_STEP1\":\"  .\",\"BROWSER_GUIDE_DELETE_CERT_STEP2\":\"    .\",\"BROWSER_GUIDE_DELETE_CERT_STEP3\":\"     .\",\"BROWSER_DETAIL_MORE_BUTTON\":\"    .\",\"BASE64_IMPORT_CERT_SUCCESS\":\"   .\"}");

/***/ }),
/* 38 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./src/dialog/vendor/jquery/jquery.keyboard.js
var jquery_keyboard = __webpack_require__(4);

// EXTERNAL MODULE: ./src/dialog/vendor/jquery/colResizable-1.6.js
var colResizable_1_6 = __webpack_require__(6);

// EXTERNAL MODULE: ./src/dialog/css/dialog.css
var dialog = __webpack_require__(7);

// EXTERNAL MODULE: ./src/dialog/css/keyboard-basic.css
var keyboard_basic = __webpack_require__(21);

// CONCATENATED MODULE: ./src/dialog/js/event.js
var boxes = __webpack_require__(23);
var _p12Buffer, _certBuffer, _keyBuffer;

var event_KICA_DIALOG = {
    createDialog: function() {
        if (document.getElementById('secukit-wrapper'))
            return;

        var _boxes = boxes.boxes();
        var SECUKIT_DIALOG = document.createElement("div");
        SECUKIT_DIALOG.id = "secukit-wrapper";
        SECUKIT_DIALOG.className = "kica-d-none";
        SECUKIT_DIALOG.lang = webnpki_config.language.toLocaleLowerCase();
        SECUKIT_DIALOG.innerHTML = _boxes.main + _boxes.pdfViewer + _boxes.importPFX + _boxes.findPFX

        KICA_LOGGER.info(SECUKIT_DIALOG);

        document.body.appendChild(SECUKIT_DIALOG);
    },

    enableKeyboardSecurity: function() {
        //   
        if (webnpki_config.keyboardSecurity === 'default') {
            var _votmdnjem = $('#qlalfqjsgh, #input-pfx-qlalfqjsgh');
            _votmdnjem.off('keypress keydown');

            _votmdnjem.on('keypress', function(event) {
                event.preventDefault();
                var cursor = this.selectionStart;
                var temp = this.value;

                if (this.selectionStart !== this.selectionEnd) {
                    temp = temp.substring(0, this.selectionStart) + temp.substring(this.selectionEnd);
                    webnpki.modifyVotmdnjem(this.id, this.selectionStart, this.selectionEnd, 8, false);
                }

                this.value = temp + String.fromCharCode(Math.floor(Math.random(1, 10) * 110) % 83 + 33);

                if (this.setSelectionRange) {
                    this.setSelectionRange(cursor + 1, cursor + 1);
                } else {
                    var range = this.createTextRange();
                    range.collapse(true);
                    range.moveEnd('character', cursor + 1);
                    range.moveStart('character', cursor + 1);
                    range.select();
                }

                //                          
                webnpki.setVotmdnjem(this.id, this.selectionStart, event.which || event.keyCode);
            })

            _votmdnjem.on('keydown', function(event) {
                if (event.altKey || event.shiftKey || event.metaKey) {
                    return;
                }

                var keycode = event.which || event.keyCode;
                if ((keycode === 46 || keycode === 8) && !$("#" + this.id).getkeyboard()) {
                    webnpki.modifyVotmdnjem(this.id, this.selectionStart, this.selectionEnd, keycode, event.ctrlKey);
                }
            });

        } else if (webnpki_config.keyboardSecurity === 'kings') {
            kings.init();
        }
    },

    openSelectCertificateDialog: function() {
        _initDialog();
        _showCertList();
        $('#secukit-wrapper').removeClass('kica-d-none');
    },

    closeSelectCertificateDialog: function() {
        _destroy_vk();
        $('#select-certificate-confirm').off('click');
        $('#secukit-wrapper').addClass('kica-d-none');

        if (webnpki_config.keyboardSecurity === 'kings') {
            vKeypadGlobal.unloadAll();
        }
    },

    openGuide: function() {
        if ($('#browser-guide-wrapper').hasClass('kica-d-none')) {
            $('#browser-guide-wrapper').removeClass('kica-d-none');
            $('#secukit-dialog').addClass('open-guide');
        } else {
            event_KICA_DIALOG.closeGuide();
        }
    },

    closeGuide: function() {
        $('#browser-guide-wrapper').addClass('kica-d-none');
        $('#secukit-dialog').removeClass('open-guide');
    },

    openDetailGuide: function() {
        if (!PDFObject.supportsPDFs) {
            _download(webnpki_config.path + 'assets/guide/browser_certificate_guide.pdf', 'Browser Certificate Detail guide.pdf');
            return;
        }
        var modal = $('#detail-guide');
        modal.removeClass('kica-d-none');
    },

    closeDetailGuide: function() {
        var modal = $('#detail-guide');
        modal.addClass('kica-d-none');
    },

    selectCert: function(index) {
        $('#cert-list tr').removeClass('active');
        $('#cert-list tr[id=' + index + ']').addClass('active');
    },

    onDragOverCert: function(event) {
        event.preventDefault();
        if (typeof event.target.classList !== 'undefined') {
            event.target.classList.add("dragover");
        }
    },

    onDragLeaveCert: function(event) {
        event.preventDefault();
        if (typeof event.target.classList !== 'undefined') {
            event.target.classList.remove("dragover");
        }
    },

    onDropCert: function(event) {
        event.preventDefault();

        event.target.classList.remove("dragover");
        if (!event.dataTransfer || event.dataTransfer.files.length == 0) {
            return;
        }

        event_KICA_DIALOG.onSelectCert(event.dataTransfer);
    },

    onSelectCert: function(target) {
        var files = target.files;
        if (files.length === 0) { return; }

        function onloadReader(file, callback) {
            return function(event) {
                var cName = file.name.toLowerCase();
                if (cName === "signcert.der") {
                    _certBuffer = event.target.result;
                    callback(false);
                } else if (cName === "signpri.key") {
                    _keyBuffer = event.target.result;
                    callback(false);
                } else if (/\.pfx$|\.p12$/.test(cName)) {
                    _p12Buffer = event.target.result;
                    callback(true);
                }
            };
        }

        function fileLoadCallback(p12) {
            if (p12) {
                _showAskPwdDialog(p12);
            } else {
                var crt, key;
                crt = typeof _certBuffer === "undefined" ? false : true;
                key = typeof _keyBuffer === "undefined" ? false : true;
                if (crt && key) {
                    webnpki_config.askPwd ? _showAskPwdDialog(p12) : _importCertAndKey();
                }
            }
        }

        var i, reader;
        for (i = 0; i < files.length; i += 1) {
            reader = new FileReader();
            reader.readAsArrayBuffer(files[i]);
            reader.onload = onloadReader(files[i], fileLoadCallback);
        }

        if (target.value) {
            target.value = "";
        }
    },

    openFindCert: function() {
        $('#find-pfx-wrapper').removeClass('kica-d-none');
    },

    closeFindCert: function() {
        _closeFindCert();
    },

    downloadConvertCert: function() {
        if (_getOS() === 'Windows') {
            _download(webnpki_config.path + 'assets/plugin/SecuKitCertExport.exe', 'SecuKitCertExport.exe');
        } else {
            KICA_ALERT.error("IS_NOT_WINDOWS", KICA_ERROR_MSG.get("IS_NOT_WINDOWS"));
        }
    },

    searchCert: function() {
        $('#inputCerts').click();
    },

    toggleVirtualKeyboard: function() {
        if (webnpki_config.keyboardSecurity === "default") {
            var vk = $('#qlalfqjsgh').getkeyboard();
            $('#qlalfqjsgh').val('');
            webnpki.setVotmdnjem('qlalfqjsgh');
            if (typeof vk === 'undefined') {
                $('#vkeyboard-toggle').addClass('active');
                _init_vk('#qlalfqjsgh');
            } else {
                $('#vkeyboard-toggle').removeClass('active');
                vk.destroy();
            }
        } else if (webnpki_config.keyboardSecurity === "kings") {
            if ($('#vkeyboard-toggle').hasClass('active')) {
                $('#vkeyboard-toggle').removeClass('active');
                vKeypadGlobal.unloadAll();

            } else {
                $('#vkeyboard-toggle').addClass('active');
                vKeypadGlobal.loadAll();
            }
        } else {
            var vk = $('#qlalfqjsgh').getkeyboard();
            if (typeof vk === 'undefined') {
                $('#vkeyboard-toggle').addClass('active');
                _init_vk('#qlalfqjsgh');
            } else {
                $('#vkeyboard-toggle').removeClass('active');
                vk.destroy();
            }
        }
    },

    togglePFXVirtualKeyboard: function() {
        var vk = $('#input-pfx-qlalfqjsgh').getkeyboard();
        $('#input-pfx-qlalfqjsgh').val("");
        if (typeof vk === 'undefined') {
            $('#pfx-vkeyboard-toggle').addClass('active');
            _init_vk('#input-pfx-qlalfqjsgh');
        } else {
            $('#pfx-vkeyboard-toggle').removeClass('active');
            vk.destroy();
        }
    },
    importBase64Cert: function(base64Cert) {
        event_KICA_DIALOG.openSelectCertificateDialog();
        $('#secukit-dialog').addClass('kica-d-none');
        _showAskPwdDialog(true, base64Cert);
    }
}

function _closeFindCert() {
    $('#find-pfx-wrapper').addClass('kica-d-none');
}

function _showAskPwdDialog(p12, base64Cert) {
    $('#webnpki-wrapper').removeClass('kica-d-none');
    $('#input-pfx-qlalfqjsgh').focus();

    $('#pfx-qlalfqjsgh-confirm').unbind('click');
    $('#pfx-qlalfqjsgh-confirm').click(function() { _askPwdOk(p12, base64Cert); });

    $('#pfx-qlalfqjsgh-cancel').unbind('click');
    $('#pfx-qlalfqjsgh-cancel').click(function() { _askPwdCancel(base64Cert); });
}

function _askPwdOk(p12, base64Cert) {
    var pwd = $('#input-pfx-qlalfqjsgh').val();
    if (pwd.length == 0) {
        KICA_ALERT.error("EMPTY_PASSWORD", KICA_ERROR_MSG.get("EMPTY_PASSWORD"), {
            onAfterClose: function() {
                $('#input-pfx-qlalfqjsgh').focus();
            }
        });

        return false;
    }

    function importError(e) {
        KICA_ALERT.error(e.code, e.message);

        if (webnpki_config.keyboardSecurity === 'default') {
            webnpki.setVotmdnjem('input-pfx-qlalfqjsgh');
        }
        $('#input-pfx-qlalfqjsgh').val('');
        $('#input-pfx-qlalfqjsgh').focus();
    }

    if (p12) {
        if (base64Cert) {
            _p12Buffer = webnpki.bin.decodeBase64(base64Cert);
        }

        webnpki.importPKCS12(_p12Buffer, pwd).then(function() {
            _showCertList();
            $('#webnpki-wrapper').addClass('kica-d-none');
            _closeFindCert();
            _clearCertBuffer();
            _close_vk();

            $('#input-pfx-qlalfqjsgh').val('');
            if (webnpki_config.keyboardSecurity === 'default') {
                webnpki.setVotmdnjem('input-pfx-qlalfqjsgh');
            }

            if (base64Cert) {
                KICA_ALERT.success("BASE64_IMPORT_CERT_SUCCESS", KICA_CORPUS.BASE64_IMPORT_CERT_SUCCESS);
                event_KICA_DIALOG.closeSelectCertificateDialog();
                $('#secukit-dialog').removeClass('kica-d-none');
            }

        }).catch(function(e) {
            importError(e);
            return false;
        });
    } else {
        webnpki.importCertAndKey(_certBuffer, _keyBuffer, pwd).then(function() {
            _showCertList();
            $('#webnpki-wrapper').addClass('kica-d-none');
            $('#input-pfx-qlalfqjsgh').val('');
            if (webnpki_config.keyboardSecurity === 'default') {
                webnpki.setVotmdnjem('input-pfx-qlalfqjsgh');
            }
            _closeFindCert();
            _clearCertBuffer();
            _close_vk();

        }).catch(function(e) {
            console.log(e);
            importError(e);
            return false;
        });
    }

    return false;
};


function _askPwdCancel(base64Cert) {
    $('#webnpki-wrapper').addClass('kica-d-none');
    _clearCertBuffer();
    _close_vk();
    $('#input-pfx-qlalfqjsgh').val('');
    if (webnpki_config.keyboardSecurity === 'default') {
        webnpki.setVotmdnjem('input-pfx-qlalfqjsgh');
    }

    if (base64Cert) {
        _closeFindCert();
        $('#secukit-dialog').removeClass('kica-d-none');
        event_KICA_DIALOG.closeSelectCertificateDialog();
    }

    return false;
};

function _importCertAndKey() {
    webnpki.importCertAndKey(_certBuffer, _keyBuffer).then(function() {
        _showCertList();
        _clearCertBuffer();
    }).catch(function(error) {
        KICA_ALERT.error(error.code, error.message);
        _clearCertBuffer();
    });
}

function _initDialog() {
    var qlalfqjsgh = $('#qlalfqjsgh');
    qlalfqjsgh.val("");
    qlalfqjsgh.data("kings", "");
    qlalfqjsgh.prop('disabled', false);
    qlalfqjsgh.prop('placeholder', KICA_CORPUS.CERT_PWD_PLACEHOLDER);

    webnpki.setVotmdnjem('qlalfqjsgh');
}

function _setCertInfoJson(certList) {
    function getDateFormat(d) {
        var yy = d.getFullYear();
        var mm = d.getMonth() + 1;
        var dd = d.getDate();
        return [yy, (mm > 9 ? '' : '0') + mm, (dd > 9 ? '' : '0') + dd].join('-');
    }

    function getIssuerName(id) {
        id = id.toLowerCase();
        var rslt = webnpki_config.issuers[id];

        return typeof rslt === "undefined" ? "unknown" : rslt;
    }

    var cnt = certList.length;

    var certInfoObj = {};
    certInfoObj.size = cnt;

    for (var i = 0; i < cnt; ++i) {
        var obj = {};
        var idx = (i + 1).toString();

        obj.cn = certList[i].getSubjectRDNs().CN;
        obj.username = certList[i].getSubjectRDNs().CN; // for cert Detail
        obj.index = idx;

        var tmp = certList[i].getIssuerRDNs().O;
        var issuerName = getIssuerName(tmp);

        obj.issuerToName = issuerName;
        obj.issuerToString = issuerName; // for cert Detail
        obj.oid = certList[i].getPolicyID();
        obj.policy = certList[i].getPolicyID(); // for cert Detail
        obj.todate = getDateFormat(certList[i].getNotAfter());
        obj.validateTo = getDateFormat(certList[i].getNotAfter()); // for cert Detail
        obj.validateFrom = getDateFormat(certList[i].getNotBefore()); // for cert Detail
        obj.usageToName = certList[i].getPolicyString();
        obj.policyToName = certList[i].getPolicyString(); // for cert Detail
        obj.userDN = certList[i].getSubjectDN();
        obj.issueDN = certList[i].getIssuerDN(); // for cert Detail
        obj.version = "Version " + certList[i]._fo.version; // for cert Detail
        obj.signatureAlgorithmID = certList[i].getSignAlgorithm(); // for cert Detail
        obj.keySize = certList[i].getKeySize(); // for cert Detail
        obj.certPem = certList[i].toPem();
        obj.certHex = certList[i].toHex();
        obj.certBase64 = certList[i].toBase64();
        obj.serial = certList[i]._fo.serialNumber;

        certInfoObj[idx] = obj;
    }

    return certInfoObj;
}

function _clearCertBuffer() {
    _certBuffer = undefined;
    _keyBuffer = undefined;
    _p12Buffer = undefined;
}

function _showCertList() {
    webnpki.getCertificateList(function(certificateList, error) {
        if (error) {
            KICA_ALERT.error(error.cdoe, error.message);
            return;
        }

        if (certificateList.length === 0) {
            $('#dropzone-wrapper').removeClass('kica-d-none');
            return;
        } else
            $('#dropzone-wrapper').addClass('kica-d-none');

        var certificateListJSON = _setCertInfoJson(certificateList);

        var certificateListRoot = $('#cert-list');
        certificateListRoot.html("");

        for (var i = 0; i < certificateListJSON.size; i++) {
            var certificate = certificateListJSON[i + 1];

            var rowClass = "";
            if (i == 0) {
                rowClass = 'class="active"';
            }

            var index = i + 1;
            var row = $('<tr ' + rowClass + ' id=' + index + ' onclick="KICA_DIALOG.selectCert(' + index + ')">')

            var html = '<td scope="col"><span><i class="icon-cert"></i>' + certificate.usageToName + '</span></td>' +
                '<td scope="col"><span>' + certificate.cn + '</span></td>' +
                '<td scope="col"><span style="text-align: center;">' + certificate.todate + '</span></td>' +
                '<td scope="col"><span>' + certificate.issuerToName + '</span></td>';

            row.html(html);
            row.data('certificate', certificateList[i]);
            row.data('certificateJSON', certificate);



            certificateListRoot.append(row);
        }

        $("#cert-list-table").colResizable({ liveDrag: true });
    });
}

// Virtaul Keyborad
function _init_vk(id) {
    var normal = [
        '` 1 2 3 4 5 6 7 8 9 0 - = {bksp}',
        'q w e r t y u i o p [ ] \\',
        'a s d f g h j k l ; \' {a}',
        '{shift} z x c v b n m , . / {shift}',
    ];
    var shift = [
        '~ ! @ # $ % ^ & * ( ) _ + {bksp}',
        'Q W E R T Y U I O P { } |',
        'A S D F G H J K L : " {a}',
        '{shift}  Z X C V B N M < > ? {shift} '
    ];

    var options = {
        layout: 'custom',
        customLayout: {
            'normal': normal,
            'shift': shift
        },
        display: {
            'a': '&nbsp;Enter&nbsp; ',
            'b': '\u232b:Backspace',
            'bksp': 'Bksp:Backspace',
            'c': '\u2716:Cancel (Esc)',
            'cancel': 'Cancel:Cancel (Esc)',
            'shift': '&nbsp;Shift&nbsp;'
        },
        css: {
            buttonDefault: "vk-button",
            buttonAction: "vk-button-enter",
            buttonActive: "vk-button-shift-down",
            container: "vk-container"
        },
        usePreview: false,
        reposition: true,
        restrictInput: false,
        autoAccept: true,
        userClosed: true,
        lockInput: true
    };

    if (webnpki_config.keyboardSecurity === "default") {
        options.beforeInsert = function(e, keyboard, el, txt) {
            if (txt.charCodeAt(0) === 8) {
                webnpki.modifyVotmdnjem(id.substring(1), el.selectionStart, el.selectionEnd, 8, false);

                return txt;
            }
            webnpki.setVotmdnjem(id.substring(1), el.selectionStart + 1, txt.charCodeAt(0));

            return String.fromCharCode(Math.floor(Math.random(1, 10) * 110) % 83 + 33);;
        };
        webnpki.setVotmdnjem(id.substring(1));
    }

    $(id).keyboard(options);
    $(id).val('');
    $(id).focus();
}


function _close_vk() {
    ['#qlalfqjsgh', '#input-pfx-qlalfqjsgh'].forEach(function(id) {
        var vk = $(id).getkeyboard();
        if (typeof vk !== 'undefined' && vk.isOpen) { vk.close(); }
    });
}

function _destroy_vk() {
    ['#qlalfqjsgh', '#input-pfx-qlalfqjsgh'].forEach(function(id) {
        var vk = $(id).getkeyboard();
        if (typeof vk !== 'undefined') {
            vk.destroy();
        }
    });
    $('#vkeyboard-toggle').removeClass('active');
}


function _download(href, fileName) {
    const a = document.createElement("a");
    a.style.display = "none";
    document.body.appendChild(a);

    // Set the HREF to a Blob representation of the data to be downloaded
    a.href = href;

    // Use download attribute to set set desired file name
    a.setAttribute("download", fileName);

    // Trigger the download by simulating click
    a.click();

    // Cleanup
    window.URL.revokeObjectURL(a.href);
    document.body.removeChild(a);
}

function _getOS() {
    var userAgent = window.navigator.userAgent,
        platform = window.navigator.platform,
        macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],
        windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'],
        iosPlatforms = ['iPhone', 'iPad', 'iPod'],
        os = null;

    if (macosPlatforms.indexOf(platform) !== -1) {
        os = 'Mac OS';
    } else if (iosPlatforms.indexOf(platform) !== -1) {
        os = 'iOS';
    } else if (windowsPlatforms.indexOf(platform) !== -1) {
        os = 'Windows';
    } else if (/Android/.test(userAgent)) {
        os = 'Android';
    } else if (!os && /Linux/.test(platform)) {
        os = 'Linux';
    }

    return os;
}




/* harmony default export */ var js_event = (event_KICA_DIALOG);
// CONCATENATED MODULE: ./src/dialog/js/alert.js
var Swal = __webpack_require__(24)

function alert_KICA_ALERT () {
    var object = {};

    object.alert = function(title, text, options){
        var alertOptions = {
            icon: 'info',
            title: title,
            text: text, 
        }        

        if(options !== undefined){
            var keys = Object.keys(options);            

            for(var i = 0; i < keys.length; i++){
                var key = keys[i];
                alertOptions[key] = options[key];
            }            
        }
        
        Swal.fire(alertOptions);        
    }

    object.error = function (title, text, options) {
        if(webnpki_config.alert < 1){
            return;
        }

        var alertOptions = {
            icon: 'error',
            title: title,
            text: text, 
        }        

        if(options !== undefined){
            var keys = Object.keys(options);            

            for(var i = 0; i < keys.length; i++){
                var key = keys[i];
                alertOptions[key] = options[key];
            }            
        }
        
        Swal.fire(alertOptions);
    }

    object.info = function (title, text, options) {
        if(webnpki_config.alert < 2){
            return;
        }

        var alertOptions = {
            icon: 'info',
            title: title,
            text: text, 
        }        

        if(options !== undefined){
            var keys = Object.keys(options);            

            for(var i = 0; i < keys.length; i++){
                var key = keys[i];
                alertOptions[key] = options[key];
            }            
        }
        
        Swal.fire(alertOptions);        
    }

    object.success = function (title, text, options) {
        if(webnpki_config.alert < 2){
            return;
        }

        var alertOptions = {
            icon: 'success',
            title: title,
            text: text, 
        }        

        if(options !== undefined){
            var keys = Object.keys(options);            

            for(var i = 0; i < keys.length; i++){
                var key = keys[i];
                alertOptions[key] = options[key];
            }            
        }
        
        Swal.fire(alertOptions);        
    }

    object.warn = function (title, text, options) {
        if(webnpki_config.alert < 3){
            return;
        }

        var alertOptions = {
            
            title: title,
            text: text, 
        }        

        if(options !== undefined){
            var keys = Object.keys(options);            

            for(var i = 0; i < keys.length; i++){
                var key = keys[i];
                alertOptions[key] = options[key];
            }            
        }
        
        Swal.fire(alertOptions);        
    }

    return object;
}

/* harmony default export */ var js_alert = (alert_KICA_ALERT());
// CONCATENATED MODULE: ./src/dialog/js/logger.js
function logger_KICA_LOGGER () {
    var object = {};

    object.debug = function(){
        if(webnpki_config.log < 3){
            return;
        }
        
        console.debug(arguments);
    }

    object.error = function(){
        if(webnpki_config.logger < 1){
            return;
        }
        
        console.error(arguments);
    }

    object.info = function(){
        if(webnpki_config.logger < 2){
            return;
        }
        
        console.info(arguments);
    }

    object.log = function(){
        if(webnpki_config.logger < 3){
            return;
        }
        
        console.log(arguments);
    }

    object.warn = function(){
        if(webnpki_config.logger < 3){
            return;
        }
        
        console.warn(arguments);
    }

    object.dir = function(object){
        if(webnpki_config.logger < 2){
            return;
        }
        
        console.dir(object);
    }

    object.group = function(message){
        if(webnpki_config.logger < 3){
            return;
        }
        
        console.group(message);
    }

    object.groupEnd = function(){
        if(webnpki_config.logger < 3){
            return;
        }
        
        console.groupEnd();
    }


    return object;
}

/* harmony default export */ var logger = (logger_KICA_LOGGER());
// EXTERNAL MODULE: ./src/dialog/vendor/pdfObject/pdfobject.min.js
var pdfobject_min = __webpack_require__(3);
var pdfobject_min_default = /*#__PURE__*/__webpack_require__.n(pdfobject_min);

// CONCATENATED MODULE: ./src/dialog/dialog.js



// CSS








var _i18n = __webpack_require__(29);

(function() {
    window.KICA_DIALOG = js_event;
    window.KICA_ALERT = js_alert;
    window.KICA_LOGGER = logger;
    window.PDFObject = pdfobject_min_default.a;

    _i18n.setLanguage(webnpki_config.language, function(error) {
        if (error) {
            KICA_LOGGER.error(error);
            KICA_ALERT.error("LANGUAGE_NOT_SUPPORTED", error, { 'footer': 'Supported language codes are [ <b> KO, EN, and FR</b>].' });

            return;
        }
        KICA_LOGGER.info(KICA_CORPUS);
        
        KICA_DIALOG.createDialog();
        KICA_DIALOG.enableKeyboardSecurity();        
    });
    KICA_LOGGER.groupEnd();
})();

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlhbG9nL3ZlbmRvci9wZGZPYmplY3QvcGRmb2JqZWN0Lm1pbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlhbG9nL3ZlbmRvci9qcXVlcnkvanF1ZXJ5LmtleWJvYXJkLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcImpRdWVyeVwiIiwid2VicGFjazovLy8uL3NyYy9kaWFsb2cvdmVuZG9yL2pxdWVyeS9jb2xSZXNpemFibGUtMS42LmpzIiwid2VicGFjazovLy8uL3NyYy9kaWFsb2cvY3NzL2RpYWxvZy5jc3M/ZjRmYiIsIndlYnBhY2s6Ly8vLi9zcmMvZGlhbG9nL2Nzcy9kaWFsb2cuY3NzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RpYWxvZy9mb250cy9Sb2JvdG8tUmVndWxhci50dGYiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RpYWxvZy9pbWFnZXMvaWNvbi9pY29uX3ZrZXlib2FyZC5wbmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2RpYWxvZy9pbWFnZXMvaWNvbi9pY29uLWRvd24ucG5nIiwid2VicGFjazovLy8uL3NyYy9kaWFsb2cvaW1hZ2VzL2ljb24vaWNvbl92a2V5Ym9hcmRfYWN0aXZlLnBuZyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlhbG9nL2ltYWdlcy9pY29uL2ljb24tY2VydC5wbmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2RpYWxvZy9pbWFnZXMvaWNvbi9pY29uLXF1ZXN0aW9uLnBuZyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlhbG9nL2ltYWdlcy9pY29uL2ljb24tZmFxLnBuZyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlhbG9nL2ltYWdlcy9pY29uL2ljb24tZmluZC1jZXJ0LnBuZyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlhbG9nL2ltYWdlcy9pY29uL2ljb24tY2xvc2UucG5nIiwid2VicGFjazovLy8uL3NyYy9kaWFsb2cvaW1hZ2VzL2ljb24vaWNvbi1icm93c2VyLnBuZyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlhbG9nL2ltYWdlcy9pY29uL2ljb24tZHJvcHpvbmUucG5nIiwid2VicGFjazovLy8uL3NyYy9kaWFsb2cvY3NzL2tleWJvYXJkLWJhc2ljLmNzcz8yOTM0Iiwid2VicGFjazovLy8uL3NyYy9kaWFsb2cvY3NzL2tleWJvYXJkLWJhc2ljLmNzcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlhbG9nL2pzL2JveGVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zd2VldGFsZXJ0Mi9kaXN0L3N3ZWV0YWxlcnQyLmFsbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZXM2LXByb21pc2UtcHJvbWlzZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9lczYtcHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy92ZXJ0eCAoaWdub3JlZCkiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RpYWxvZy9sYW5nL2kxOG4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3hoci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZ2xvYmFsL3dpbmRvdy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaXMtZnVuY3Rpb24vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3BhcnNlLWhlYWRlcnMvcGFyc2UtaGVhZGVycy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMveHRlbmQvaW1tdXRhYmxlLmpzIiwid2VicGFjazovLy8uL3NyYy9kaWFsb2cvbGFuZy9qc29uIHN5bmMgXlxcLlxcL21lc3NhZ2VcXC4uKlxcLmpzb24kIiwid2VicGFjazovLy8uL3NyYy9kaWFsb2cvanMvZXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RpYWxvZy9qcy9hbGVydC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlhbG9nL2pzL2xvZ2dlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlhbG9nL2RpYWxvZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1FBQUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7OztRQUdBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwwQ0FBMEMsZ0NBQWdDO1FBQzFFO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0Esd0RBQXdELGtCQUFrQjtRQUMxRTtRQUNBLGlEQUFpRCxjQUFjO1FBQy9EOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQSx5Q0FBeUMsaUNBQWlDO1FBQzFFLGdIQUFnSCxtQkFBbUIsRUFBRTtRQUNySTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDJCQUEyQiwwQkFBMEIsRUFBRTtRQUN2RCxpQ0FBaUMsZUFBZTtRQUNoRDtRQUNBO1FBQ0E7O1FBRUE7UUFDQSxzREFBc0QsK0RBQStEOztRQUVySDtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBLEdBQUc7UUFDSDtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQSxHQUFHOzs7UUFHSDtRQUNBOzs7Ozs7OztB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSiw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEIsUUFBUTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsNERBQTREO0FBQzVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxXQUFXO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQUk7QUFDSjtBQUNBLDRCQUE0QixRQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7O0FBRUEsc0VBQXNFO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNDQUFzQztBQUN0QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1Isc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsMENBQTBDO0FBQzFDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCLGFBQWE7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7O0FBRXBCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQixFQUFFO0FBQ2xCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDRCQUE0QixRQUFRO0FBQ3BDLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxH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Q0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixhQUFhO0FBQzlCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztB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Q0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsaUJBQWlCLHNCQUFzQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7O0FBRWhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNEJBQTRCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7OztBQUdIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdB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QTs7QUFFQSx5Q0FBeUM7O0FBRXpDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7O0FBR0g7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0EsY0FBYzs7QUFFZDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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O0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLGlCQUFpQix3QkFBd0I7QUFDekM7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsdUNBQXVDO0FBQ3hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0EsVUFBVSxNQUFNO0FBQ2hCLFVBQVUsT0FBTztBQUNqQjtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLE1BQU07QUFDaEI7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSxxQkFBcUIsWUFBWTtBQUNqQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBLFVBQVUsSUFBSTtBQUNkO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBLFVBQVUsU0FBUztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQSxZQUFZLFNBQVM7QUFDckIsWUFBWSxTQUFTO0FBQ3JCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQztBQUNELG9DOzs7Ozs7O0FDam9DQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUNBQXFDOztBQUVyQztBQUNBO0FBQ0E7O0FBRUEsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixVQUFVOzs7Ozs7O0FDdkx0QyxlOzs7Ozs7QUNBQSxVQUFVLG1CQUFPLENBQUMsRUFBSzs7QUFFdkI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSx3QkFBUSxZQUFzQixlQUFlLE9BQU8sQ0FBQyxDO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxtQkFBbUIsc0JBQXNCO0FBQ3pDLHFDQUFxQztBQUNyQzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEM7Ozs7Ozs7QUNyRGE7QUFDYixhQUFhLG1CQUFPLENBQUMsRUFBZTtBQUNwQyxpQkFBaUIsbUJBQU8sQ0FBQyxFQUFhO0FBQ3RDLG1CQUFtQixtQkFBTyxDQUFDLEVBQWU7QUFDMUMsWUFBWSxtQkFBTyxDQUFDLEVBQU87O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBLG1CQUFtQixrQkFBa0I7QUFDckM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBLEtBQUs7QUFDTCxpQ0FBaUMsU0FBUztBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBOzs7Ozs7O0FDdFBBOztBQUVBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTs7QUFFQTs7Ozs7Ozs7QUNaQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxpQkFBaUIsdUJBQXVCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxL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QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRWUsNkRBQVcsRUFBRSxFOzs7Ozs7QUN2RVk7QUFDQzs7QUFFekM7QUFDeUI7QUFDUTs7QUFFSTtBQUNEO0FBQ0U7QUFDa0I7O0FBRXhELFlBQVksbUJBQU8sQ0FBQyxFQUFhOztBQUVqQztBQUNBLHlCQUF5QixRQUFZO0FBQ3JDLHdCQUF3QixRQUFXO0FBQ25DLHlCQUF5QixNQUFZO0FBQ3JDLHVCQUF1Qix1QkFBUzs7QUFFaEM7QUFDQTtBQUNBO0FBQ0EsK0RBQStELHNFQUFzRTs7QUFFckk7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNkM7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDLEkiLCJmaWxlIjoiZGlhbG9nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJsb2NhbGhvc3Q6OTAwMC9zZWN1a2l0LWh0bWw1L2RpYWxvZy9cIjtcbiBcdC8vIFdlYnBhY2tSZXF1aXJlRnJvbVxuIFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KF9fd2VicGFja19yZXF1aXJlX18sIFwicFwiLCB7XG4gXHQgIGdldDogZnVuY3Rpb24gKCkge1xuIFx0dHJ5IHtcbiBcdCAgaWYgKHR5cGVvZiB3ZWJucGtpX2NvbmZpZy51aSAhPT0gXCJzdHJpbmdcIikge1xuIFx0ICAgIHRocm93IG5ldyBFcnJvcihcIldlYnBhY2tSZXF1aXJlRnJvbTogJ3dlYm5wa2lfY29uZmlnLnVpJyBpcyBub3QgYSBzdHJpbmcgb3Igbm90IGF2YWlsYWJsZSBhdCBydW50aW1lLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2Fnb2xkaXMvd2VicGFjay1yZXF1aXJlLWZyb20jdHJvdWJsZXNob290aW5nXCIpO1xuIFx0ICB9XG4gXHQgIHJldHVybiB3ZWJucGtpX2NvbmZpZy51aTtcbiBcdH0gY2F0Y2ggKGUpIHtcbiBcdCAgaWYgKCFmYWxzZSkge1xuIFx0ICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gXHQgIH1cbiBcdCAgcmV0dXJuIFwibG9jYWxob3N0OjkwMDAvc2VjdWtpdC1odG1sNS9kaWFsb2cvXCI7XG4gXHR9XG4gXHQgfVxuIFx0fSlcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDM4KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwie1wiKS5jb25jYXQoY29udGVudCwgXCJ9XCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKCcnKTtcbiAgfTsgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblxuXG4gIGxpc3QuaSA9IGZ1bmN0aW9uIChtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCAnJ11dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgdmFyIGlkID0gdGhpc1tpXVswXTtcblxuICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtb2R1bGVzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIGl0ZW0gPSBtb2R1bGVzW19pXTsgLy8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxuICAgICAgLy8gdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBub3QgMTAwJSBwZXJmZWN0IGZvciB3ZWlyZCBtZWRpYSBxdWVyeSBjb21iaW5hdGlvbnNcbiAgICAgIC8vIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cbiAgICAgIC8vIEkgaG9wZSB0aGlzIHdpbGwgbmV2ZXIgb2NjdXIgKEhleSB0aGlzIHdheSB3ZSBoYXZlIHNtYWxsZXIgYnVuZGxlcylcblxuICAgICAgaWYgKGl0ZW1bMF0gPT0gbnVsbCB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICBpZiAobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuICAgICAgICB9IGVsc2UgaWYgKG1lZGlhUXVlcnkpIHtcbiAgICAgICAgICBpdGVtWzJdID0gXCIoXCIuY29uY2F0KGl0ZW1bMl0sIFwiKSBhbmQgKFwiKS5jb25jYXQobWVkaWFRdWVyeSwgXCIpXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJzsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG5cbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgaWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn0gLy8gQWRhcHRlZCBmcm9tIGNvbnZlcnQtc291cmNlLW1hcCAoTUlUKVxuXG5cbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gIHJldHVybiBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRvbSA9IHt9O1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlcyA9IFtdO1xuICB2YXIgbmV3U3R5bGVzID0ge307XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjc3MgPSBpdGVtWzFdO1xuICAgIHZhciBtZWRpYSA9IGl0ZW1bMl07XG4gICAgdmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG4gICAgdmFyIHBhcnQgPSB7XG4gICAgICBjc3M6IGNzcyxcbiAgICAgIG1lZGlhOiBtZWRpYSxcbiAgICAgIHNvdXJjZU1hcDogc291cmNlTWFwXG4gICAgfTtcblxuICAgIGlmICghbmV3U3R5bGVzW2lkXSkge1xuICAgICAgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtcbiAgICAgICAgaWQ6IGlkLFxuICAgICAgICBwYXJ0czogW3BhcnRdXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gc3R5bGVzW2ldO1xuICAgIHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuICAgIHZhciBqID0gMDtcblxuICAgIGlmIChkb21TdHlsZSkge1xuICAgICAgZG9tU3R5bGUucmVmcysrO1xuXG4gICAgICBmb3IgKDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuICAgICAgfVxuXG4gICAgICBmb3IgKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBwYXJ0cyA9IFtdO1xuXG4gICAgICBmb3IgKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgcGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG4gICAgICB9XG5cbiAgICAgIHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge1xuICAgICAgICBpZDogaXRlbS5pZCxcbiAgICAgICAgcmVmczogMSxcbiAgICAgICAgcGFydHM6IHBhcnRzXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5hdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIG9wdGlvbnMuYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKG9wdGlvbnMuYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgb3B0aW9ucy5hdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIGJ0b2EpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIG9wdGlvbnMuYXR0cmlidXRlcyA9IHR5cGVvZiBvcHRpb25zLmF0dHJpYnV0ZXMgPT09ICdvYmplY3QnID8gb3B0aW9ucy5hdHRyaWJ1dGVzIDoge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgdmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcbiAgYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgdmFyIG1heVJlbW92ZSA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gc3R5bGVzW2ldO1xuICAgICAgdmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cbiAgICAgIGlmIChkb21TdHlsZSkge1xuICAgICAgICBkb21TdHlsZS5yZWZzLS07XG4gICAgICAgIG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmV3TGlzdCkge1xuICAgICAgdmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0LCBvcHRpb25zKTtcbiAgICAgIGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1heVJlbW92ZS5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfZG9tU3R5bGUgPSBtYXlSZW1vdmVbX2ldO1xuXG4gICAgICBpZiAoX2RvbVN0eWxlLnJlZnMgPT09IDApIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBfZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBfZG9tU3R5bGUucGFydHNbal0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBzdHlsZXNJbkRvbVtfZG9tU3R5bGUuaWRdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07IiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiLypcclxuICAgIFBERk9iamVjdCB2Mi4xLjFcclxuICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9waXB3ZXJrcy9QREZPYmplY3RcclxuICAgIENvcHlyaWdodCAoYykgMjAwOC0yMDE4IFBoaWxpcCBIdXRjaGlzb25cclxuICAgIE1JVC1zdHlsZSBsaWNlbnNlOiBodHRwOi8vcGlwd2Vya3MubWl0LWxpY2Vuc2Uub3JnL1xyXG4gICAgVU1EIG1vZHVsZSBwYXR0ZXJuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci90ZW1wbGF0ZXMvcmV0dXJuRXhwb3J0cy5qc1xyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKHJvb3QsZmFjdG9yeSl7aWYodHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQpe2RlZmluZShbXSxmYWN0b3J5KTt9ZWxzZSBpZih0eXBlb2YgbW9kdWxlPT09J29iamVjdCcmJm1vZHVsZS5leHBvcnRzKXttb2R1bGUuZXhwb3J0cz1mYWN0b3J5KCk7fWVsc2V7cm9vdC5QREZPYmplY3Q9ZmFjdG9yeSgpO319KHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtpZih0eXBlb2Ygd2luZG93PT09XCJ1bmRlZmluZWRcInx8dHlwZW9mIG5hdmlnYXRvcj09PVwidW5kZWZpbmVkXCIpe3JldHVybiBmYWxzZTt9XHJcbnZhciBwZGZvYmplY3R2ZXJzaW9uPVwiMi4xLjFcIix1YT13aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCxzdXBwb3J0c1BERnMsaXNJRSxzdXBwb3J0c1BkZk1pbWVUeXBlPSh0eXBlb2YgbmF2aWdhdG9yLm1pbWVUeXBlc1snYXBwbGljYXRpb24vcGRmJ10hPT1cInVuZGVmaW5lZFwiKSxzdXBwb3J0c1BkZkFjdGl2ZVgsaXNNb2Rlcm5Ccm93c2VyPShmdW5jdGlvbigpe3JldHVybih0eXBlb2Ygd2luZG93LlByb21pc2UhPT1cInVuZGVmaW5lZFwiKTt9KSgpLGlzRmlyZWZveD0oZnVuY3Rpb24oKXtyZXR1cm4odWEuaW5kZXhPZihcImlyZWZveFwiKSE9PS0xKTt9KSgpLGlzRmlyZWZveFdpdGhQREZKUz0oZnVuY3Rpb24oKXtpZighaXNGaXJlZm94KXtyZXR1cm4gZmFsc2U7fVxyXG5yZXR1cm4ocGFyc2VJbnQodWEuc3BsaXQoXCJydjpcIilbMV0uc3BsaXQoXCIuXCIpWzBdLDEwKT4xOCk7fSkoKSxpc0lPUz0oZnVuY3Rpb24oKXtyZXR1cm4oL2lwaG9uZXxpcGFkfGlwb2QvaS50ZXN0KHVhLnRvTG93ZXJDYXNlKCkpKTt9KSgpLGNyZWF0ZUFYTyxidWlsZEZyYWdtZW50U3RyaW5nLGxvZyxlbWJlZEVycm9yLGVtYmVkLGdldFRhcmdldEVsZW1lbnQsZ2VuZXJhdGVQREZKU2lmcmFtZSxnZW5lcmF0ZUVtYmVkRWxlbWVudDtjcmVhdGVBWE89ZnVuY3Rpb24odHlwZSl7dmFyIGF4O3RyeXtheD1uZXcgQWN0aXZlWE9iamVjdCh0eXBlKTt9Y2F0Y2goZSl7YXg9bnVsbDt9XHJcbnJldHVybiBheDt9O2lzSUU9ZnVuY3Rpb24oKXtyZXR1cm4hISh3aW5kb3cuQWN0aXZlWE9iamVjdHx8XCJBY3RpdmVYT2JqZWN0XCJpbiB3aW5kb3cpO307c3VwcG9ydHNQZGZBY3RpdmVYPWZ1bmN0aW9uKCl7cmV0dXJuISEoY3JlYXRlQVhPKFwiQWNyb1BERi5QREZcIil8fGNyZWF0ZUFYTyhcIlBERi5QZGZDdHJsXCIpKTt9O3N1cHBvcnRzUERGcz0oIWlzSU9TJiYoaXNGaXJlZm94V2l0aFBERkpTfHxzdXBwb3J0c1BkZk1pbWVUeXBlfHwoaXNJRSgpJiZzdXBwb3J0c1BkZkFjdGl2ZVgoKSkpKTtidWlsZEZyYWdtZW50U3RyaW5nPWZ1bmN0aW9uKHBkZlBhcmFtcyl7dmFyIHN0cmluZz1cIlwiLHByb3A7aWYocGRmUGFyYW1zKXtmb3IocHJvcCBpbiBwZGZQYXJhbXMpe2lmKHBkZlBhcmFtcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSl7c3RyaW5nKz1lbmNvZGVVUklDb21wb25lbnQocHJvcCkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHBkZlBhcmFtc1twcm9wXSkrXCImXCI7fX1cclxuaWYoc3RyaW5nKXtzdHJpbmc9XCIjXCIrc3RyaW5nO3N0cmluZz1zdHJpbmcuc2xpY2UoMCxzdHJpbmcubGVuZ3RoLTEpO319XHJcbnJldHVybiBzdHJpbmc7fTtsb2c9ZnVuY3Rpb24obXNnKXtpZih0eXBlb2YgY29uc29sZSE9PVwidW5kZWZpbmVkXCImJmNvbnNvbGUubG9nKXtjb25zb2xlLmxvZyhcIltQREZPYmplY3RdIFwiK21zZyk7fX07ZW1iZWRFcnJvcj1mdW5jdGlvbihtc2cpe2xvZyhtc2cpO3JldHVybiBmYWxzZTt9O2dldFRhcmdldEVsZW1lbnQ9ZnVuY3Rpb24odGFyZ2V0U2VsZWN0b3Ipe3ZhciB0YXJnZXROb2RlPWRvY3VtZW50LmJvZHk7aWYodHlwZW9mIHRhcmdldFNlbGVjdG9yPT09XCJzdHJpbmdcIil7dGFyZ2V0Tm9kZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldFNlbGVjdG9yKTt9ZWxzZSBpZih0eXBlb2YgalF1ZXJ5IT09XCJ1bmRlZmluZWRcIiYmdGFyZ2V0U2VsZWN0b3IgaW5zdGFuY2VvZiBqUXVlcnkmJnRhcmdldFNlbGVjdG9yLmxlbmd0aCl7dGFyZ2V0Tm9kZT10YXJnZXRTZWxlY3Rvci5nZXQoMCk7fWVsc2UgaWYodHlwZW9mIHRhcmdldFNlbGVjdG9yLm5vZGVUeXBlIT09XCJ1bmRlZmluZWRcIiYmdGFyZ2V0U2VsZWN0b3Iubm9kZVR5cGU9PT0xKXt0YXJnZXROb2RlPXRhcmdldFNlbGVjdG9yO31cclxucmV0dXJuIHRhcmdldE5vZGU7fTtnZW5lcmF0ZVBERkpTaWZyYW1lPWZ1bmN0aW9uKHRhcmdldE5vZGUsdXJsLHBkZk9wZW5GcmFnbWVudCxQREZKU19VUkwsaWQpe3ZhciBmdWxsVVJMPVBERkpTX1VSTCtcIj9maWxlPVwiK2VuY29kZVVSSUNvbXBvbmVudCh1cmwpK3BkZk9wZW5GcmFnbWVudDt2YXIgc2Nyb2xsZml4PShpc0lPUyk/XCItd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7IG92ZXJmbG93LXk6IHNjcm9sbDsgXCI6XCJvdmVyZmxvdzogaGlkZGVuOyBcIjt2YXIgaWZyYW1lPVwiPGRpdiBzdHlsZT0nXCIrc2Nyb2xsZml4K1wicG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IHJpZ2h0OiAwOyBib3R0b206IDA7IGxlZnQ6IDA7Jz48aWZyYW1lICBcIitpZCtcIiBzcmM9J1wiK2Z1bGxVUkwrXCInIHN0eWxlPSdib3JkZXI6IG5vbmU7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7JyBmcmFtZWJvcmRlcj0nMCc+PC9pZnJhbWU+PC9kaXY+XCI7dGFyZ2V0Tm9kZS5jbGFzc05hbWUrPVwiIHBkZm9iamVjdC1jb250YWluZXJcIjt0YXJnZXROb2RlLnN0eWxlLnBvc2l0aW9uPVwicmVsYXRpdmVcIjt0YXJnZXROb2RlLnN0eWxlLm92ZXJmbG93PVwiYXV0b1wiO3RhcmdldE5vZGUuaW5uZXJIVE1MPWlmcmFtZTtyZXR1cm4gdGFyZ2V0Tm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlmcmFtZVwiKVswXTt9O2dlbmVyYXRlRW1iZWRFbGVtZW50PWZ1bmN0aW9uKHRhcmdldE5vZGUsdGFyZ2V0U2VsZWN0b3IsdXJsLHBkZk9wZW5GcmFnbWVudCx3aWR0aCxoZWlnaHQsaWQpe3ZhciBzdHlsZT1cIlwiO2lmKHRhcmdldFNlbGVjdG9yJiZ0YXJnZXRTZWxlY3RvciE9PWRvY3VtZW50LmJvZHkpe3N0eWxlPVwid2lkdGg6IFwiK3dpZHRoK1wiOyBoZWlnaHQ6IFwiK2hlaWdodCtcIjtcIjt9ZWxzZXtzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyByaWdodDogMDsgYm90dG9tOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlO1wiO31cclxudGFyZ2V0Tm9kZS5jbGFzc05hbWUrPVwiIHBkZm9iamVjdC1jb250YWluZXJcIjt0YXJnZXROb2RlLmlubmVySFRNTD1cIjxlbWJlZCBcIitpZCtcIiBjbGFzcz0ncGRmb2JqZWN0JyBzcmM9J1wiK3VybCtwZGZPcGVuRnJhZ21lbnQrXCInIHR5cGU9J2FwcGxpY2F0aW9uL3BkZicgc3R5bGU9J292ZXJmbG93OiBhdXRvOyBcIitzdHlsZStcIicvPlwiO3JldHVybiB0YXJnZXROb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZW1iZWRcIilbMF07fTtlbWJlZD1mdW5jdGlvbih1cmwsdGFyZ2V0U2VsZWN0b3Isb3B0aW9ucyl7aWYodHlwZW9mIHVybCE9PVwic3RyaW5nXCIpe3JldHVybiBlbWJlZEVycm9yKFwiVVJMIGlzIG5vdCB2YWxpZFwiKTt9XHJcbnRhcmdldFNlbGVjdG9yPSh0eXBlb2YgdGFyZ2V0U2VsZWN0b3IhPT1cInVuZGVmaW5lZFwiKT90YXJnZXRTZWxlY3RvcjpmYWxzZTtvcHRpb25zPSh0eXBlb2Ygb3B0aW9ucyE9PVwidW5kZWZpbmVkXCIpP29wdGlvbnM6e307dmFyIGlkPShvcHRpb25zLmlkJiZ0eXBlb2Ygb3B0aW9ucy5pZD09PVwic3RyaW5nXCIpP1wiaWQ9J1wiK29wdGlvbnMuaWQrXCInXCI6XCJcIixwYWdlPShvcHRpb25zLnBhZ2UpP29wdGlvbnMucGFnZTpmYWxzZSxwZGZPcGVuUGFyYW1zPShvcHRpb25zLnBkZk9wZW5QYXJhbXMpP29wdGlvbnMucGRmT3BlblBhcmFtczp7fSxmYWxsYmFja0xpbms9KHR5cGVvZiBvcHRpb25zLmZhbGxiYWNrTGluayE9PVwidW5kZWZpbmVkXCIpP29wdGlvbnMuZmFsbGJhY2tMaW5rOnRydWUsd2lkdGg9KG9wdGlvbnMud2lkdGgpP29wdGlvbnMud2lkdGg6XCIxMDAlXCIsaGVpZ2h0PShvcHRpb25zLmhlaWdodCk/b3B0aW9ucy5oZWlnaHQ6XCIxMDAlXCIsYXNzdW1wdGlvbk1vZGU9KHR5cGVvZiBvcHRpb25zLmFzc3VtcHRpb25Nb2RlPT09XCJib29sZWFuXCIpP29wdGlvbnMuYXNzdW1wdGlvbk1vZGU6dHJ1ZSxmb3JjZVBERkpTPSh0eXBlb2Ygb3B0aW9ucy5mb3JjZVBERkpTPT09XCJib29sZWFuXCIpP29wdGlvbnMuZm9yY2VQREZKUzpmYWxzZSxQREZKU19VUkw9KG9wdGlvbnMuUERGSlNfVVJMKT9vcHRpb25zLlBERkpTX1VSTDpmYWxzZSx0YXJnZXROb2RlPWdldFRhcmdldEVsZW1lbnQodGFyZ2V0U2VsZWN0b3IpLGZhbGxiYWNrSFRNTD1cIlwiLHBkZk9wZW5GcmFnbWVudD1cIlwiLGZhbGxiYWNrSFRNTF9kZWZhdWx0PVwiPHA+VGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgaW5saW5lIFBERnMuIFBsZWFzZSBkb3dubG9hZCB0aGUgUERGIHRvIHZpZXcgaXQ6IDxhIGhyZWY9J1t1cmxdJz5Eb3dubG9hZCBQREY8L2E+PC9wPlwiO2lmKCF0YXJnZXROb2RlKXtyZXR1cm4gZW1iZWRFcnJvcihcIlRhcmdldCBlbGVtZW50IGNhbm5vdCBiZSBkZXRlcm1pbmVkXCIpO31cclxuaWYocGFnZSl7cGRmT3BlblBhcmFtcy5wYWdlPXBhZ2U7fVxyXG5wZGZPcGVuRnJhZ21lbnQ9YnVpbGRGcmFnbWVudFN0cmluZyhwZGZPcGVuUGFyYW1zKTtpZihmb3JjZVBERkpTJiZQREZKU19VUkwpe3JldHVybiBnZW5lcmF0ZVBERkpTaWZyYW1lKHRhcmdldE5vZGUsdXJsLHBkZk9wZW5GcmFnbWVudCxQREZKU19VUkwsaWQpO31lbHNlIGlmKHN1cHBvcnRzUERGc3x8KGFzc3VtcHRpb25Nb2RlJiZpc01vZGVybkJyb3dzZXImJiFpc0lPUykpe3JldHVybiBnZW5lcmF0ZUVtYmVkRWxlbWVudCh0YXJnZXROb2RlLHRhcmdldFNlbGVjdG9yLHVybCxwZGZPcGVuRnJhZ21lbnQsd2lkdGgsaGVpZ2h0LGlkKTt9ZWxzZSBpZihQREZKU19VUkwpe3JldHVybiBnZW5lcmF0ZVBERkpTaWZyYW1lKHRhcmdldE5vZGUsdXJsLHBkZk9wZW5GcmFnbWVudCxQREZKU19VUkwsaWQpO31lbHNle2lmKGZhbGxiYWNrTGluayl7ZmFsbGJhY2tIVE1MPSh0eXBlb2YgZmFsbGJhY2tMaW5rPT09XCJzdHJpbmdcIik/ZmFsbGJhY2tMaW5rOmZhbGxiYWNrSFRNTF9kZWZhdWx0O3RhcmdldE5vZGUuaW5uZXJIVE1MPWZhbGxiYWNrSFRNTC5yZXBsYWNlKC9cXFt1cmxcXF0vZyx1cmwpO31cclxucmV0dXJuIGVtYmVkRXJyb3IoXCJUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBlbWJlZGRlZCBQREZzXCIpO319O3JldHVybntlbWJlZDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGVtYmVkKGEsYixjKTt9LHBkZm9iamVjdHZlcnNpb246KGZ1bmN0aW9uKCl7cmV0dXJuIHBkZm9iamVjdHZlcnNpb247fSkoKSxzdXBwb3J0c1BERnM6KGZ1bmN0aW9uKCl7cmV0dXJuIHN1cHBvcnRzUERGczt9KSgpfTt9KSk7IiwiLyohIGpRdWVyeSBVSSBWaXJ0dWFsIEtleWJvYXJkIHYxLjMwLjEgKi8vKlxyXG5BdXRob3I6IEplcmVteSBTYXR0ZXJmaWVsZFxyXG5NYWludGFpbmVkOiBSb2IgR2Fycmlzb24gKE1vdHRpZSBvbiBnaXRodWIpXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxyXG5cclxuQW4gb24tc2NyZWVuIHZpcnR1YWwga2V5Ym9hcmQgZW1iZWRkZWQgd2l0aGluIHRoZSBicm93c2VyIHdpbmRvdyB3aGljaFxyXG53aWxsIHBvcHVwIHdoZW4gYSBzcGVjaWZpZWQgZW50cnkgZmllbGQgaXMgZm9jdXNlZC4gVGhlIHVzZXIgY2FuIHRoZW5cclxudHlwZSBhbmQgcHJldmlldyB0aGVpciBpbnB1dCBiZWZvcmUgQWNjZXB0aW5nIG9yIENhbmNlbGluZy5cclxuXHJcblRoaXMgcGx1Z2luIGFkZHMgZGVmYXVsdCBjbGFzcyBuYW1lcyB0byBtYXRjaCBqUXVlcnkgVUkgdGhlbWUgc3R5bGluZy5cclxuQm9vdHN0cmFwICYgY3VzdG9tIHRoZW1lcyBtYXkgYWxzbyBiZSBhcHBsaWVkIC0gU2VlXHJcbmh0dHBzOi8vZ2l0aHViLmNvbS9Nb3R0aWUvS2V5Ym9hcmQjdGhlbWVzXHJcblxyXG5SZXF1aXJlczpcclxuXHRqUXVlcnkgdjEuNC4zK1xyXG5cdENhcmV0IHBsdWdpbiAoaW5jbHVkZWQpXHJcbk9wdGlvbmFsOlxyXG5cdGpRdWVyeSBVSSAocG9zaXRpb24gdXRpbGl0eSBvbmx5KSAmIENTUyB0aGVtZVxyXG5cdGpRdWVyeSBtb3VzZXdoZWVsXHJcblxyXG5TZXR1cC9Vc2FnZTpcclxuXHRQbGVhc2UgcmVmZXIgdG8gaHR0cHM6Ly9naXRodWIuY29tL01vdHRpZS9LZXlib2FyZC93aWtpXHJcblxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5DYXJldCBjb2RlIG1vZGlmaWVkIGZyb20ganF1ZXJ5LmNhcmV0LjEuMDIuanNcclxuTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlOlxyXG5odHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4qL1xyXG4vKmpzaGludCBicm93c2VyOnRydWUsIGpxdWVyeTp0cnVlLCB1bnVzZWQ6ZmFsc2UgKi9cclxuLypnbG9iYWwgcmVxdWlyZTpmYWxzZSwgZGVmaW5lOmZhbHNlLCBtb2R1bGU6ZmFsc2UgKi9cclxuOyhmdW5jdGlvbiAoZmFjdG9yeSkge1xyXG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuXHRcdGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcclxuXHR9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcclxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGZhY3RvcnkoalF1ZXJ5KTtcclxuXHR9XHJcbn0oZnVuY3Rpb24gKCQpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblx0dmFyICRrZXlib2FyZCA9ICQua2V5Ym9hcmQgPSBmdW5jdGlvbiAoZWwsIG9wdGlvbnMpIHtcclxuXHR2YXIgbywgYmFzZSA9IHRoaXM7XHJcblxyXG5cdGJhc2UudmVyc2lvbiA9ICcxLjMwLjEnO1xyXG5cclxuXHQvLyBBY2Nlc3MgdG8galF1ZXJ5IGFuZCBET00gdmVyc2lvbnMgb2YgZWxlbWVudFxyXG5cdGJhc2UuJGVsID0gJChlbCk7XHJcblx0YmFzZS5lbCA9IGVsO1xyXG5cclxuXHQvLyBBZGQgYSByZXZlcnNlIHJlZmVyZW5jZSB0byB0aGUgRE9NIG9iamVjdFxyXG5cdGJhc2UuJGVsLmRhdGEoJ2tleWJvYXJkJywgYmFzZSk7XHJcblxyXG5cdGJhc2UuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdGJhc2UuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHRcdHZhciBrLCBwb3NpdGlvbiwgdG1wLFxyXG5cdFx0XHRrYmNzcyA9ICRrZXlib2FyZC5jc3MsXHJcblx0XHRcdGtiZXZlbnRzID0gJGtleWJvYXJkLmV2ZW50cztcclxuXHRcdGJhc2Uuc2V0dGluZ3MgPSBvcHRpb25zIHx8IHt9O1xyXG5cdFx0Ly8gc2hhbGxvdyBjb3B5IHBvc2l0aW9uIHRvIHByZXZlbnQgcGVyZm9ybWFuY2UgaXNzdWVzOyBzZWUgIzM1N1xyXG5cdFx0aWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wb3NpdGlvbikge1xyXG5cdFx0XHRwb3NpdGlvbiA9ICQuZXh0ZW5kKHt9LCBvcHRpb25zLnBvc2l0aW9uKTtcclxuXHRcdFx0b3B0aW9ucy5wb3NpdGlvbiA9IG51bGw7XHJcblx0XHR9XHJcblx0XHRiYXNlLm9wdGlvbnMgPSBvID0gJC5leHRlbmQodHJ1ZSwge30sICRrZXlib2FyZC5kZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XHJcblx0XHRpZiAocG9zaXRpb24pIHtcclxuXHRcdFx0by5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG5cdFx0XHRvcHRpb25zLnBvc2l0aW9uID0gcG9zaXRpb247XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8ga2V5Ym9hcmQgaXMgYWN0aXZlIChub3QgZGVzdHJveWVkKTtcclxuXHRcdGJhc2UuZWwuYWN0aXZlID0gdHJ1ZTtcclxuXHRcdC8vIHVuaXF1ZSBrZXlib2FyZCBuYW1lc3BhY2VcclxuXHRcdGJhc2UubmFtZXNwYWNlID0gJy5rZXlib2FyZCcgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zbGljZSgyKTtcclxuXHRcdC8vIGV4dGVuc2lvbiBuYW1lc3BhY2VzIGFkZGVkIGhlcmUgKHRvIHVuYmluZCBsaXN0ZW5lcnMgb24gYmFzZS4kZWwgdXBvbiBkZXN0cm95KVxyXG5cdFx0YmFzZS5leHRlbnNpb25OYW1lc3BhY2UgPSBbXTtcclxuXHRcdC8vIFNoaWZ0IGFuZCBBbHQga2V5IHRvZ2dsZXMsIHNldHMgaXMgdHJ1ZSBpZiBhIGxheW91dCBoYXMgbW9yZSB0aGFuIG9uZSBrZXlzZXRcclxuXHRcdC8vIHVzZWQgZm9yIG1vdXNld2hlZWwgbWVzc2FnZVxyXG5cdFx0YmFzZS5zaGlmdEFjdGl2ZSA9IGJhc2UuYWx0QWN0aXZlID0gYmFzZS5tZXRhQWN0aXZlID0gYmFzZS5zZXRzID0gYmFzZS5jYXBzTG9jayA9IGZhbHNlO1xyXG5cdFx0Ly8gQ2xhc3MgbmFtZXMgb2YgdGhlIGJhc2ljIGtleSBzZXQgLSBtZXRhIGtleXNldHMgYXJlIGhhbmRsZWQgYnkgdGhlIGtleW5hbWVcclxuXHRcdGJhc2Uucm93cyA9IFsnJywgJy1zaGlmdCcsICctYWx0JywgJy1hbHQtc2hpZnQnXTtcclxuXHJcblx0XHRiYXNlLmluUGxhY2Vob2xkZXIgPSBiYXNlLiRlbC5hdHRyKCdwbGFjZWhvbGRlcicpIHx8ICcnO1xyXG5cdFx0Ly8gaHRtbCA1IHBsYWNlaG9sZGVyL3dhdGVybWFya1xyXG5cdFx0YmFzZS53YXRlcm1hcmsgPSAka2V5Ym9hcmQud2F0ZXJtYXJrICYmIGJhc2UuaW5QbGFjZWhvbGRlciAhPT0gJyc7XHJcblx0XHQvLyBjb252ZXJ0IG1vdXNlIHJlcGVhdGVyIHJhdGUgKGNoYXJhY3RlcnMgcGVyIHNlY29uZCkgaW50byBhIHRpbWUgaW4gbWlsbGlzZWNvbmRzLlxyXG5cdFx0YmFzZS5yZXBlYXRUaW1lID0gMTAwMCAvIChvLnJlcGVhdFJhdGUgfHwgMjApO1xyXG5cdFx0Ly8gZGVsYXkgaW4gbXMgdG8gcHJldmVudCBtb3VzZWRvd24gJiB0b3VjaHN0YXJ0IGZyb20gYm90aCBmaXJpbmcgZXZlbnRzIGF0IHRoZSBzYW1lIHRpbWVcclxuXHRcdG8ucHJldmVudERvdWJsZUV2ZW50VGltZSA9IG8ucHJldmVudERvdWJsZUV2ZW50VGltZSB8fCAxMDA7XHJcblx0XHQvLyBmbGFnIGluZGljYXRpb24gdGhhdCBhIGtleWJvYXJkIGlzIG9wZW5cclxuXHRcdGJhc2UuaXNPcGVuID0gZmFsc2U7XHJcblx0XHQvLyBpcyBtb3VzZXdoZWVsIHBsdWdpbiBsb2FkZWQ/XHJcblx0XHRiYXNlLndoZWVsID0gdHlwZW9mICQuZm4ubW91c2V3aGVlbCA9PT0gJ2Z1bmN0aW9uJztcclxuXHRcdC8vIHNwZWNpYWwgY2hhcmFjdGVyIGluIHJlZ2V4IHRoYXQgbmVlZCB0byBiZSBlc2NhcGVkXHJcblx0XHRiYXNlLmVzY2FwZVJlZ2V4ID0gL1stXFwvXFxcXF4kKis/LigpfFtcXF17fV0vZztcclxuXHRcdGJhc2UuaXNUZXh0QXJlYSA9IGJhc2UuZWwubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RleHRhcmVhJztcclxuXHRcdGJhc2UuaXNJbnB1dCA9IGJhc2UuZWwubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0JztcclxuXHRcdC8vIGRldGVjdCBjb250ZW50ZWRpdGFibGVcclxuXHRcdGJhc2UuaXNDb250ZW50RWRpdGFibGUgPSAhYmFzZS5pc1RleHRBcmVhICYmXHJcblx0XHRcdCFiYXNlLmlzSW5wdXQgJiZcclxuXHRcdFx0YmFzZS5lbC5pc0NvbnRlbnRFZGl0YWJsZTtcclxuXHJcblx0XHQvLyBrZXlDb2RlIG9mIGtleXMgYWx3YXlzIGFsbG93ZWQgdG8gYmUgdHlwZWRcclxuXHRcdGsgPSAka2V5Ym9hcmQua2V5Q29kZXM7XHJcblx0XHQvLyBiYXNlLmFsd2F5c0FsbG93ZWQgPSBbMjAsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAsNDUsNDZdO1xyXG5cdFx0YmFzZS5hbHdheXNBbGxvd2VkID0gW1xyXG5cdFx0XHRrLmNhcHNMb2NrLFxyXG5cdFx0XHRrLnBhZ2VVcCxcclxuXHRcdFx0ay5wYWdlRG93bixcclxuXHRcdFx0ay5lbmQsXHJcblx0XHRcdGsuaG9tZSxcclxuXHRcdFx0ay5sZWZ0LFxyXG5cdFx0XHRrLnVwLFxyXG5cdFx0XHRrLnJpZ2h0LFxyXG5cdFx0XHRrLmRvd24sXHJcblx0XHRcdGsuaW5zZXJ0LFxyXG5cdFx0XHRrLmRlbGV0ZVxyXG5cdFx0XTtcclxuXHRcdGJhc2UuJGtleWJvYXJkID0gW107XHJcblx0XHQvLyBrZXlib2FyZCBlbmFibGVkOyBzZXQgdG8gZmFsc2Ugb24gZGVzdHJveVxyXG5cdFx0YmFzZS5lbmFibGVkID0gdHJ1ZTtcclxuXHJcblx0XHRiYXNlLmNoZWNrQ2FyZXQgPSAoby5sb2NrSW5wdXQgfHwgJGtleWJvYXJkLmNoZWNrQ2FyZXRTdXBwb3J0KCkpO1xyXG5cclxuXHRcdC8vIGRpc2FibGUgcHJvYmxlbWF0aWMgdXNlUHJldmlldyBmb3IgY29udGVudGVkaXRhYmxlXHJcblx0XHRpZiAoYmFzZS5pc0NvbnRlbnRFZGl0YWJsZSkge1xyXG5cdFx0XHRvLnVzZVByZXZpZXcgPSBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRiYXNlLmxhc3QgPSB7XHJcblx0XHRcdHN0YXJ0OiAwLFxyXG5cdFx0XHRlbmQ6IDAsXHJcblx0XHRcdGtleTogJycsXHJcblx0XHRcdHZhbDogJycsXHJcblx0XHRcdHByZVZhbDogJycsXHJcblx0XHRcdGxheW91dDogJycsXHJcblx0XHRcdHZpcnR1YWw6IHRydWUsXHJcblx0XHRcdGtleXNldDogW2ZhbHNlLCBmYWxzZSwgZmFsc2VdLCAvLyBbc2hpZnQsIGFsdCwgbWV0YV1cclxuXHRcdFx0d2hlZWxfJEtleXM6IFtdLFxyXG5cdFx0XHR3aGVlbEluZGV4OiAwLFxyXG5cdFx0XHR3aGVlbExheWVyczogW11cclxuXHRcdH07XHJcblx0XHQvLyB1c2VkIHdoZW4gYnVpbGRpbmcgdGhlIGtleWJvYXJkIC0gW2tleXNldCBlbGVtZW50LCByb3csIGluZGV4XVxyXG5cdFx0YmFzZS50ZW1wID0gWycnLCAwLCAwXTtcclxuXHJcblx0XHQvLyBDYWxsYmFja3NcclxuXHRcdCQuZWFjaChbXHJcblx0XHRcdGtiZXZlbnRzLmtiSW5pdCxcclxuXHRcdFx0a2JldmVudHMua2JCZWZvcmVWaXNpYmxlLFxyXG5cdFx0XHRrYmV2ZW50cy5rYlZpc2libGUsXHJcblx0XHRcdGtiZXZlbnRzLmtiSGlkZGVuLFxyXG5cdFx0XHRrYmV2ZW50cy5pbnB1dENhbmNlbGVkLFxyXG5cdFx0XHRrYmV2ZW50cy5pbnB1dEFjY2VwdGVkLFxyXG5cdFx0XHRrYmV2ZW50cy5rYkJlZm9yZUNsb3NlLFxyXG5cdFx0XHRrYmV2ZW50cy5pbnB1dFJlc3RyaWN0ZWRcclxuXHRcdF0sIGZ1bmN0aW9uIChpLCBjYWxsYmFjaykge1xyXG5cdFx0XHRpZiAodHlwZW9mIG9bY2FsbGJhY2tdID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0Ly8gYmluZCBjYWxsYmFjayBmdW5jdGlvbnMgd2l0aGluIG9wdGlvbnMgdG8gdHJpZ2dlcmVkIGV2ZW50c1xyXG5cdFx0XHRcdGJhc2UuJGVsLmJpbmQoY2FsbGJhY2sgKyBiYXNlLm5hbWVzcGFjZSArICdjYWxsYmFja3MnLCBvW2NhbGxiYWNrXSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIENsb3NlIHdpdGggZXNjIGtleSAmIGNsaWNraW5nIG91dHNpZGVcclxuXHRcdGlmIChvLmFsd2F5c09wZW4pIHtcclxuXHRcdFx0by5zdGF5T3BlbiA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0dG1wID0gJChkb2N1bWVudCk7XHJcblx0XHRpZiAoYmFzZS5lbC5vd25lckRvY3VtZW50ICE9PSBkb2N1bWVudCkge1xyXG5cdFx0XHR0bXAgPSB0bXAuYWRkKGJhc2UuZWwub3duZXJEb2N1bWVudCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIGJpbmRpbmdzID0gJ2tleXVwIGNoZWNra2V5Ym9hcmQgbW91c2Vkb3duIHRvdWNoc3RhcnQgJztcclxuXHRcdGlmIChvLmNsb3NlQnlDbGlja0V2ZW50KSB7XHJcblx0XHRcdGJpbmRpbmdzICs9ICdjbGljayAnO1xyXG5cdFx0fVxyXG5cdFx0Ly8gZGVib3VuY2UgYmluZGluZ3MuLi4gc2VlICM1NDJcclxuXHRcdHRtcC5iaW5kKGJpbmRpbmdzLnNwbGl0KCcgJykuam9pbihiYXNlLm5hbWVzcGFjZSArICcgJyksIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KGJhc2UudGltZXIzKTtcclxuXHRcdFx0YmFzZS50aW1lcjMgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGJhc2UuY2hlY2tDbG9zZShlKTtcclxuXHRcdFx0fSwgMSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBEaXNwbGF5IGtleWJvYXJkIG9uIGZvY3VzXHJcblx0XHRiYXNlLiRlbFxyXG5cdFx0XHQuYWRkQ2xhc3Moa2Jjc3MuaW5wdXQgKyAnICcgKyBvLmNzcy5pbnB1dClcclxuXHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdCdhcmlhLWhhc3BvcHVwJzogJ3RydWUnLFxyXG5cdFx0XHRcdCdyb2xlJzogJ3RleHRib3gnXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIHNldCBsb2NrSW5wdXQgaWYgdGhlIGVsZW1lbnQgaXMgcmVhZG9ubHk7IG9yIG1ha2UgdGhlIGVsZW1lbnQgcmVhZG9ubHkgaWYgbG9ja0lucHV0IGlzIHNldFxyXG5cdFx0aWYgKG8ubG9ja0lucHV0IHx8IGJhc2UuZWwucmVhZE9ubHkpIHtcclxuXHRcdFx0by5sb2NrSW5wdXQgPSB0cnVlO1xyXG5cdFx0XHRiYXNlLiRlbFxyXG5cdFx0XHRcdC5hZGRDbGFzcyhrYmNzcy5sb2NrZWQpXHJcblx0XHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdFx0J3JlYWRvbmx5JzogJ3JlYWRvbmx5J1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0Ly8gYWRkIGRpc2FibGVkL3JlYWRvbmx5IGNsYXNzIC0gZHluYW1pY2FsbHkgdXBkYXRlZCBvbiByZXZlYWxcclxuXHRcdGlmIChiYXNlLmlzVW5hdmFpbGFibGUoKSkge1xyXG5cdFx0XHRiYXNlLiRlbC5hZGRDbGFzcyhrYmNzcy5ub0tleWJvYXJkKTtcclxuXHRcdH1cclxuXHRcdGlmIChvLm9wZW5Pbikge1xyXG5cdFx0XHRiYXNlLmJpbmRGb2N1cygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFkZCBwbGFjZWhvbGRlciBpZiBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyXHJcblx0XHRpZiAoXHJcblx0XHRcdCFiYXNlLndhdGVybWFyayAmJlxyXG5cdFx0XHRiYXNlLmdldFZhbHVlKGJhc2UuJGVsKSA9PT0gJycgJiZcclxuXHRcdFx0YmFzZS5pblBsYWNlaG9sZGVyICE9PSAnJyAmJlxyXG5cdFx0XHRiYXNlLiRlbC5hdHRyKCdwbGFjZWhvbGRlcicpICE9PSAnJ1xyXG5cdFx0KSB7XHJcblx0XHRcdC8vIGNzcyB3YXRlcm1hcmsgc3R5bGUgKGRhcmtlciB0ZXh0KVxyXG5cdFx0XHRiYXNlLiRlbC5hZGRDbGFzcyhrYmNzcy5wbGFjZWhvbGRlcik7XHJcblx0XHRcdGJhc2Uuc2V0VmFsdWUoYmFzZS5pblBsYWNlaG9sZGVyLCBiYXNlLiRlbCk7XHJcblx0XHR9XHJcblxyXG5cdFx0YmFzZS4kZWwudHJpZ2dlcihrYmV2ZW50cy5rYkluaXQsIFtiYXNlLCBiYXNlLmVsXSk7XHJcblxyXG5cdFx0Ly8gaW5pdGlhbGl6ZWQgd2l0aCBrZXlib2FyZCBvcGVuXHJcblx0XHRpZiAoby5hbHdheXNPcGVuKSB7XHJcblx0XHRcdGJhc2UucmV2ZWFsKCk7XHJcblx0XHR9XHJcblx0XHRiYXNlLmluaXRpYWxpemVkID0gdHJ1ZTtcclxuXHR9O1xyXG5cclxuXHRiYXNlLnRvZ2dsZSA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdGlmICghYmFzZS5oYXNLZXlib2FyZCgpKSB7IHJldHVybjsgfVxyXG5cdFx0dmFyICR0b2dnbGUgPSBiYXNlLiRrZXlib2FyZC5maW5kKCcuJyArICRrZXlib2FyZC5jc3Mua2V5VG9nZ2xlKSxcclxuXHRcdFx0bG9ja2VkID0gIWJhc2UuZW5hYmxlZDtcclxuXHRcdC8vIHByZXZlbnQgcGh5c2ljYWwga2V5Ym9hcmQgZnJvbSB3b3JraW5nXHJcblx0XHRiYXNlLnByZXZpZXcucmVhZG9ubHkgPSBsb2NrZWQgfHwgYmFzZS5vcHRpb25zLmxvY2tJbnB1dDtcclxuXHRcdC8vIGRpc2FibGUgYWxsIGJ1dHRvbnNcclxuXHRcdGJhc2UuJGtleWJvYXJkXHJcblx0XHRcdC50b2dnbGVDbGFzcygka2V5Ym9hcmQuY3NzLmtleURpc2FibGVkLCBsb2NrZWQpXHJcblx0XHRcdC5maW5kKCcuJyArICRrZXlib2FyZC5jc3Mua2V5QnV0dG9uKVxyXG5cdFx0XHQubm90KCR0b2dnbGUpXHJcblx0XHRcdC5hdHRyKCdhcmlhLWRpc2FibGVkJywgbG9ja2VkKVxyXG5cdFx0XHQuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLmRpc2FibGVkID0gbG9ja2VkO1xyXG5cdFx0XHR9KTtcclxuXHRcdCR0b2dnbGUudG9nZ2xlQ2xhc3MoJGtleWJvYXJkLmNzcy5rZXlEaXNhYmxlZCwgbG9ja2VkKTtcclxuXHRcdC8vIHN0b3AgYXV0byB0eXBpbmdcclxuXHRcdGlmIChsb2NrZWQgJiYgYmFzZS50eXBpbmdfb3B0aW9ucykge1xyXG5cdFx0XHRiYXNlLnR5cGluZ19vcHRpb25zLnRleHQgPSAnJztcclxuXHRcdH1cclxuXHRcdC8vIGFsbG93IGNoYWluaW5nXHJcblx0XHRyZXR1cm4gYmFzZTtcclxuXHR9O1xyXG5cclxuXHRiYXNlLnNldEN1cnJlbnQgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIga2Jjc3MgPSAka2V5Ym9hcmQuY3NzLFxyXG5cdFx0XHQvLyBjbG9zZSBhbnkgXCJpc0N1cnJlbnRcIiBrZXlib2FyZCAoanVzdCBpbiBjYXNlIHRoZXkgYXJlIGFsd2F5cyBvcGVuKVxyXG5cdFx0XHQkY3VycmVudCA9ICQoJy4nICsga2Jjc3MuaXNDdXJyZW50KSxcclxuXHRcdFx0a2IgPSAkY3VycmVudC5kYXRhKCdrZXlib2FyZCcpO1xyXG5cdFx0Ly8gY2xvc2Uga2V5Ym9hcmQsIGlmIG5vdCBzZWxmXHJcblx0XHRpZiAoISQuaXNFbXB0eU9iamVjdChrYikgJiYga2IuZWwgIT09IGJhc2UuZWwpIHtcclxuXHRcdFx0a2IuY2xvc2Uoa2Iub3B0aW9ucy5hdXRvQWNjZXB0ID8gJ3RydWUnIDogZmFsc2UpO1xyXG5cdFx0fVxyXG5cdFx0JGN1cnJlbnQucmVtb3ZlQ2xhc3Moa2Jjc3MuaXNDdXJyZW50KTtcclxuXHRcdC8vIHVpLWtleWJvYXJkLWhhcy1mb2N1cyBpcyBhcHBsaWVkIGluIGNhc2UgbXVsdGlwbGUga2V5Ym9hcmRzIGhhdmVcclxuXHRcdC8vIGFsd2F5c09wZW4gPSB0cnVlIGFuZCBhcmUgc3RhY2tlZFxyXG5cdFx0JCgnLicgKyBrYmNzcy5oYXNGb2N1cykucmVtb3ZlQ2xhc3Moa2Jjc3MuaGFzRm9jdXMpO1xyXG5cclxuXHRcdGJhc2UuJGVsLmFkZENsYXNzKGtiY3NzLmlzQ3VycmVudCk7XHJcblx0XHRiYXNlLiRwcmV2aWV3LmZvY3VzKCk7XHJcblx0XHRiYXNlLiRrZXlib2FyZC5hZGRDbGFzcyhrYmNzcy5oYXNGb2N1cyk7XHJcblx0XHRiYXNlLmlzQ3VycmVudCh0cnVlKTtcclxuXHRcdGJhc2UuaXNPcGVuID0gdHJ1ZTtcclxuXHR9O1xyXG5cclxuXHRiYXNlLmlzVW5hdmFpbGFibGUgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAoXHJcblx0XHRcdGJhc2UuJGVsLmlzKCc6ZGlzYWJsZWQnKSB8fCAoXHJcblx0XHRcdFx0IWJhc2Uub3B0aW9ucy5hY3RpdmVPblJlYWRvbmx5ICYmXHJcblx0XHRcdFx0YmFzZS4kZWwuYXR0cigncmVhZG9ubHknKSAmJlxyXG5cdFx0XHRcdCFiYXNlLiRlbC5oYXNDbGFzcygka2V5Ym9hcmQuY3NzLmxvY2tlZClcclxuXHRcdFx0KVxyXG5cdFx0KTtcclxuXHR9O1xyXG5cclxuXHRiYXNlLmlzQ3VycmVudCA9IGZ1bmN0aW9uIChzZXQpIHtcclxuXHRcdHZhciBjdXIgPSAka2V5Ym9hcmQuY3VycmVudEtleWJvYXJkIHx8IGZhbHNlO1xyXG5cdFx0aWYgKHNldCkge1xyXG5cdFx0XHRjdXIgPSAka2V5Ym9hcmQuY3VycmVudEtleWJvYXJkID0gYmFzZS5lbDtcclxuXHRcdH0gZWxzZSBpZiAoc2V0ID09PSBmYWxzZSAmJiBjdXIgPT09IGJhc2UuZWwpIHtcclxuXHRcdFx0Y3VyID0gJGtleWJvYXJkLmN1cnJlbnRLZXlib2FyZCA9ICcnO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGN1ciA9PT0gYmFzZS5lbDtcclxuXHR9O1xyXG5cclxuXHRiYXNlLmhhc0tleWJvYXJkID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0cmV0dXJuIGJhc2UuJGtleWJvYXJkICYmIGJhc2UuJGtleWJvYXJkLmxlbmd0aCA+IDA7XHJcblx0fTtcclxuXHJcblx0YmFzZS5pc1Zpc2libGUgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRyZXR1cm4gYmFzZS5oYXNLZXlib2FyZCgpID8gYmFzZS4ka2V5Ym9hcmQuaXMoJzp2aXNpYmxlJykgOiBmYWxzZTtcclxuXHR9O1xyXG5cclxuXHRiYXNlLnNldEZvY3VzID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0dmFyICRlbCA9IGJhc2UuJHByZXZpZXcgfHwgYmFzZS4kZWw7XHJcblx0XHRpZiAoIW8ubm9Gb2N1cykge1xyXG5cdFx0XHQkZWwuZm9jdXMoKTtcclxuXHRcdH1cclxuXHRcdGlmIChiYXNlLmlzQ29udGVudEVkaXRhYmxlKSB7XHJcblx0XHRcdCRrZXlib2FyZC5zZXRFZGl0YWJsZUNhcmV0KCRlbCwgYmFzZS5sYXN0LnN0YXJ0LCBiYXNlLmxhc3QuZW5kKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCRrZXlib2FyZC5jYXJldCgkZWwsIGJhc2UubGFzdCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0YmFzZS5mb2N1c09uID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYgKCFiYXNlICYmIGJhc2UuZWwuYWN0aXZlKSB7XHJcblx0XHRcdC8vIGtleWJvYXJkIHdhcyBkZXN0cm95ZWRcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFiYXNlLmlzVmlzaWJsZSgpKSB7XHJcblx0XHRcdGNsZWFyVGltZW91dChiYXNlLnRpbWVyKTtcclxuXHRcdFx0YmFzZS5yZXZlYWwoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIGtleWJvYXJkIGFscmVhZHkgb3BlbiwgbWFrZSBpdCB0aGUgY3VycmVudCBrZXlib2FyZFxyXG5cdFx0XHRiYXNlLnNldEN1cnJlbnQoKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBhZGQgcmVkcmF3IG1ldGhvZCB0byBtYWtlIEFQSSBtb3JlIGNsZWFyXHJcblx0YmFzZS5yZWRyYXcgPSBmdW5jdGlvbiAobGF5b3V0KSB7XHJcblx0XHRpZiAobGF5b3V0KSB7XHJcblx0XHRcdC8vIGFsbG93IHVwZGF0aW5nIHRoZSBsYXlvdXQgYnkgY2FsbGluZyByZWRyYXdcclxuXHRcdFx0YmFzZS5vcHRpb25zLmxheW91dCA9IGxheW91dDtcclxuXHRcdH1cclxuXHRcdC8vIHVwZGF0ZSBrZXlib2FyZCBhZnRlciBhIGxheW91dCBjaGFuZ2VcclxuXHRcdGlmIChiYXNlLiRrZXlib2FyZC5sZW5ndGgpIHtcclxuXHJcblx0XHRcdGJhc2UubGFzdC5wcmVWYWwgPSAnJyArIGJhc2UubGFzdC52YWw7XHJcblx0XHRcdGJhc2Uuc2F2ZUxhc3RDaGFuZ2UoKTtcclxuXHRcdFx0YmFzZS5zZXRWYWx1ZShiYXNlLmxhc3QudmFsLCBiYXNlLiRlbCk7XHJcblxyXG5cdFx0XHRiYXNlLnJlbW92ZUtleWJvYXJkKCk7XHJcblx0XHRcdGJhc2Uuc2hpZnRBY3RpdmUgPSBiYXNlLmFsdEFjdGl2ZSA9IGJhc2UubWV0YUFjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0YmFzZS5pc09wZW4gPSBvLmFsd2F5c09wZW47XHJcblx0XHRiYXNlLnJldmVhbCh0cnVlKTtcclxuXHRcdHJldHVybiBiYXNlO1xyXG5cdH07XHJcblxyXG5cdGJhc2UucmV2ZWFsID0gZnVuY3Rpb24gKHJlZHJhdykge1xyXG5cdFx0dmFyIHRlbXAsXHJcblx0XHRcdGFscmVhZHlPcGVuID0gYmFzZS5pc09wZW4sXHJcblx0XHRcdGtiY3NzID0gJGtleWJvYXJkLmNzcztcclxuXHRcdGJhc2Uub3BlbmluZyA9ICFhbHJlYWR5T3BlbjtcclxuXHRcdC8vIHJlbW92ZSBhbGwgJ2V4dHJhJyBrZXlib2FyZHMgYnkgY2FsbGluZyBjbG9zZSBmdW5jdGlvblxyXG5cdFx0JCgnLicgKyBrYmNzcy5rZXlib2FyZCkubm90KCcuJyArIGtiY3NzLmFsd2F5c09wZW4pLmVhY2goZnVuY3Rpb24oKXtcclxuXHRcdFx0dmFyIGtiID0gJCh0aGlzKS5kYXRhKCdrZXlib2FyZCcpO1xyXG5cdFx0XHRpZiAoISQuaXNFbXB0eU9iamVjdChrYikpIHtcclxuXHRcdFx0XHQvLyB0aGlzIGNsb3NlcyBwcmV2aW91cyBrZXlib2FyZCB3aGVuIGNsaWNraW5nIGFub3RoZXIgaW5wdXQgLSBzZWUgIzUxNVxyXG5cdFx0XHRcdGtiLmNsb3NlKGtiLm9wdGlvbnMuYXV0b0FjY2VwdCA/ICd0cnVlJyA6IGZhbHNlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gRG9uJ3Qgb3BlbiBpZiBkaXNhYmxlZFxyXG5cdFx0aWYgKGJhc2UuaXNVbmF2YWlsYWJsZSgpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGJhc2UuJGVsLnJlbW92ZUNsYXNzKGtiY3NzLm5vS2V5Ym9hcmQpO1xyXG5cclxuXHRcdC8vIFVuYmluZCBmb2N1cyB0byBwcmV2ZW50IHJlY3Vyc2lvbiAtIG9wZW5PbiBtYXkgYmUgZW1wdHkgaWYga2V5Ym9hcmQgaXMgb3BlbmVkIGV4dGVybmFsbHlcclxuXHRcdGlmIChvLm9wZW5Pbikge1xyXG5cdFx0XHRiYXNlLiRlbC51bmJpbmQoJC50cmltKChvLm9wZW5PbiArICcgJykuc3BsaXQoL1xccysvKS5qb2luKGJhc2UubmFtZXNwYWNlICsgJyAnKSkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGJ1aWxkIGtleWJvYXJkIGlmIGl0IGRvZXNuJ3QgZXhpc3Q7IG9yIGF0dGFjaCBrZXlib2FyZCBpZiBpdCB3YXMgcmVtb3ZlZCwgYnV0IG5vdCBjbGVhcmVkXHJcblx0XHRpZiAoIWJhc2UuJGtleWJvYXJkIHx8IGJhc2UuJGtleWJvYXJkICYmXHJcblx0XHRcdCghYmFzZS4ka2V5Ym9hcmQubGVuZ3RoIHx8ICQuY29udGFpbnMoYmFzZS5lbC5vd25lckRvY3VtZW50LmJvZHksIGJhc2UuJGtleWJvYXJkWzBdKSkpIHtcclxuXHRcdFx0YmFzZS5zdGFydHVwKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gY2xlYXIgd2F0ZXJtYXJrXHJcblx0XHRpZiAoIWJhc2Uud2F0ZXJtYXJrICYmIGJhc2UuZ2V0VmFsdWUoKSA9PT0gYmFzZS5pblBsYWNlaG9sZGVyKSB7XHJcblx0XHRcdGJhc2UuJGVsLnJlbW92ZUNsYXNzKGtiY3NzLnBsYWNlaG9sZGVyKTtcclxuXHRcdFx0YmFzZS5zZXRWYWx1ZSgnJywgYmFzZS4kZWwpO1xyXG5cdFx0fVxyXG5cdFx0Ly8gc2F2ZSBzdGFydGluZyBjb250ZW50LCBpbiBjYXNlIHdlIGNhbmNlbFxyXG5cdFx0YmFzZS5vcmlnaW5hbENvbnRlbnQgPSBiYXNlLmlzQ29udGVudEVkaXRhYmxlID9cclxuXHRcdFx0YmFzZS4kZWwuaHRtbCgpIDpcclxuXHRcdFx0YmFzZS5nZXRWYWx1ZShiYXNlLiRlbCk7XHJcblx0XHRpZiAoYmFzZS5lbCAhPT0gYmFzZS5wcmV2aWV3ICYmICFiYXNlLmlzQ29udGVudEVkaXRhYmxlKSB7XHJcblx0XHRcdGJhc2Uuc2V0VmFsdWUoYmFzZS5vcmlnaW5hbENvbnRlbnQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGRpc2FibGUvZW5hYmxlIGFjY2VwdCBidXR0b25cclxuXHRcdGlmIChvLmFjY2VwdFZhbGlkICYmIG8uY2hlY2tWYWxpZE9uSW5pdCkge1xyXG5cdFx0XHRiYXNlLmNoZWNrVmFsaWQoKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoby5yZXNldERlZmF1bHQpIHtcclxuXHRcdFx0YmFzZS5zaGlmdEFjdGl2ZSA9IGJhc2UuYWx0QWN0aXZlID0gYmFzZS5tZXRhQWN0aXZlID0gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRiYXNlLnNob3dTZXQoKTtcclxuXHJcblx0XHQvLyBiZWZvcmVWaXNpYmxlIGV2ZW50XHJcblx0XHRpZiAoIWJhc2UuaXNWaXNpYmxlKCkpIHtcclxuXHRcdFx0YmFzZS4kZWwudHJpZ2dlcigka2V5Ym9hcmQuZXZlbnRzLmtiQmVmb3JlVmlzaWJsZSwgW2Jhc2UsIGJhc2UuZWxdKTtcclxuXHRcdH1cclxuXHRcdGlmIChcclxuXHRcdFx0YmFzZS5pbml0aWFsaXplZCB8fFxyXG5cdFx0XHRvLmluaXRpYWxGb2N1cyB8fFxyXG5cdFx0XHQoICFvLmluaXRpYWxGb2N1cyAmJiBiYXNlLiRlbC5oYXNDbGFzcygka2V5Ym9hcmQuY3NzLmluaXRpYWxGb2N1cykgKVxyXG5cdFx0KSB7XHJcblx0XHRcdGJhc2Uuc2V0Q3VycmVudCgpO1xyXG5cdFx0fVxyXG5cdFx0Ly8gdXBkYXRlIGtleWJvYXJkIC0gZW5hYmxlZCBvciBkaXNhYmxlZD9cclxuXHRcdGJhc2UudG9nZ2xlKCk7XHJcblxyXG5cdFx0Ly8gc2hvdyBrZXlib2FyZFxyXG5cdFx0YmFzZS4ka2V5Ym9hcmQuc2hvdygpO1xyXG5cclxuXHRcdC8vIGFkanVzdCBrZXlib2FyZCBwcmV2aWV3IHdpbmRvdyB3aWR0aCAtIHNhdmUgd2lkdGggc28gSUUgd29uJ3Qga2VlcCBleHBhbmRpbmcgKGZpeCBpc3N1ZSAjNilcclxuXHRcdGlmIChvLnVzZVByZXZpZXcgJiYgJGtleWJvYXJkLm1zaWUpIHtcclxuXHRcdFx0aWYgKHR5cGVvZiBiYXNlLndpZHRoID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdGJhc2UuJHByZXZpZXcuaGlkZSgpOyAvLyBwcmV2aWV3IGlzIDEwMCUgYnJvd3NlciB3aWR0aCBpbiBJRTcsIHNvIGhpZGUgdGhlIGRhbW4gdGhpbmdcclxuXHRcdFx0XHRiYXNlLndpZHRoID0gTWF0aC5jZWlsKGJhc2UuJGtleWJvYXJkLndpZHRoKCkpOyAvLyBzZXQgaW5wdXQgd2lkdGggdG8gbWF0Y2ggdGhlIHdpZGVzdCBrZXlib2FyZCByb3dcclxuXHRcdFx0XHRiYXNlLiRwcmV2aWV3LnNob3coKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRiYXNlLiRwcmV2aWV3LndpZHRoKGJhc2Uud2lkdGgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGJhc2UucmVwb3NpdGlvbigpO1xyXG5cclxuXHRcdGJhc2UuY2hlY2tEZWNpbWFsKCk7XHJcblxyXG5cdFx0Ly8gZ2V0IHByZXZpZXcgYXJlYSBsaW5lIGhlaWdodFxyXG5cdFx0Ly8gYWRkIHJvdWdobHkgNHB4IHRvIGdldCBsaW5lIGhlaWdodCBmcm9tIGZvbnQgaGVpZ2h0LCB3b3JrcyB3ZWxsIGZvciBmb250LXNpemVzIGZyb20gMTQtMzZweFxyXG5cdFx0Ly8gbmVlZGVkIGZvciB0ZXh0YXJlYXNcclxuXHRcdGJhc2UubGluZUhlaWdodCA9IHBhcnNlSW50KGJhc2UuJHByZXZpZXcuY3NzKCdsaW5lSGVpZ2h0JyksIDEwKSB8fFxyXG5cdFx0XHRwYXJzZUludChiYXNlLiRwcmV2aWV3LmNzcygnZm9udC1zaXplJyksIDEwKSArIDQ7XHJcblxyXG5cdFx0aWYgKG8uY2FyZXRUb0VuZCkge1xyXG5cdFx0XHR0ZW1wID0gYmFzZS5pc0NvbnRlbnRFZGl0YWJsZSA/ICRrZXlib2FyZC5nZXRFZGl0YWJsZUxlbmd0aChiYXNlLmVsKSA6IGJhc2Uub3JpZ2luYWxDb250ZW50Lmxlbmd0aDtcclxuXHRcdFx0YmFzZS5zYXZlQ2FyZXQodGVtcCwgdGVtcCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSUUgY2FyZXQgaGF4eDByc1xyXG5cdFx0aWYgKCRrZXlib2FyZC5hbGxpZSkge1xyXG5cdFx0XHQvLyBzb21ldGltZXMgZW5kID0gMCB3aGlsZSBzdGFydCBpcyA+IDBcclxuXHRcdFx0aWYgKGJhc2UubGFzdC5lbmQgPT09IDAgJiYgYmFzZS5sYXN0LnN0YXJ0ID4gMCkge1xyXG5cdFx0XHRcdGJhc2UubGFzdC5lbmQgPSBiYXNlLmxhc3Quc3RhcnQ7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gSUUgd2lsbCBoYXZlIHN0YXJ0IC0xLCBlbmQgb2YgMCB3aGVuIG5vdCBmb2N1c2VkIChzZWUgZGVtbzogaHR0cHM6Ly9qc2ZpZGRsZS5uZXQvTW90dGllL2ZncnlRLzMvKVxyXG5cdFx0XHRpZiAoYmFzZS5sYXN0LnN0YXJ0IDwgMCkge1xyXG5cdFx0XHRcdC8vIGVuc3VyZSBjYXJldCBpcyBhdCB0aGUgZW5kIG9mIHRoZSB0ZXh0IChuZWVkZWQgZm9yIElFKVxyXG5cdFx0XHRcdGJhc2UubGFzdC5zdGFydCA9IGJhc2UubGFzdC5lbmQgPSBiYXNlLm9yaWdpbmFsQ29udGVudC5sZW5ndGg7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoYWxyZWFkeU9wZW4gfHwgcmVkcmF3KSB7XHJcblx0XHRcdC8vIHJlc3RvcmUgY2FyZXQgcG9zaXRpb24gKHVzZXJDbG9zZWQpXHJcblx0XHRcdCRrZXlib2FyZC5jYXJldChiYXNlLiRwcmV2aWV3LCBiYXNlLmxhc3QpO1xyXG5cdFx0XHRiYXNlLm9wZW5pbmcgPSBmYWxzZTtcclxuXHRcdFx0cmV0dXJuIGJhc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gb3BlbmluZyBrZXlib2FyZCBmbGFnOyBkZWxheSBhbGxvd3Mgc3dpdGNoaW5nIGJldHdlZW4ga2V5Ym9hcmRzIHdpdGhvdXQgaW1tZWRpYXRlbHkgY2xvc2luZ1xyXG5cdFx0Ly8gdGhlIGtleWJvYXJkXHJcblx0XHRiYXNlLnRpbWVyMiA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR2YXIgdW5kZWY7XHJcblx0XHRcdGJhc2Uub3BlbmluZyA9IGZhbHNlO1xyXG5cdFx0XHQvLyBOdW1iZXIgaW5wdXRzIGRvbid0IHN1cHBvcnQgc2VsZWN0aW9uU3RhcnQgYW5kIHNlbGVjdGlvbkVuZFxyXG5cdFx0XHQvLyBOdW1iZXIvZW1haWwgaW5wdXRzIGRvbid0IHN1cHBvcnQgc2VsZWN0aW9uU3RhcnQgYW5kIHNlbGVjdGlvbkVuZFxyXG5cdFx0XHRpZiAoIS8obnVtYmVyfGVtYWlsKS9pLnRlc3QoYmFzZS5lbC50eXBlKSAmJiAhby5jYXJldFRvRW5kKSB7XHJcblx0XHRcdFx0Ly8gY2FyZXQgcG9zaXRpb24gaXMgYWx3YXlzIDAsMCBpbiB3ZWJraXQ7IGFuZCBub3RoaW5nIGlzIGZvY3VzZWQgYXQgdGhpcyBwb2ludC4uLiBvZGRcclxuXHRcdFx0XHQvLyBzYXZlIGNhcmV0IHBvc2l0aW9uIGluIHRoZSBpbnB1dCB0byB0cmFuc2ZlciBpdCB0byB0aGUgcHJldmlld1xyXG5cdFx0XHRcdC8vIGluc2lkZSBkZWxheSB0byBnZXQgY29ycmVjdCBjYXJldCBwb3NpdGlvblxyXG5cdFx0XHRcdGJhc2Uuc2F2ZUNhcmV0KHVuZGVmLCB1bmRlZiwgYmFzZS4kZWwpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChvLmluaXRpYWxGb2N1cyB8fCBiYXNlLiRlbC5oYXNDbGFzcygka2V5Ym9hcmQuY3NzLmluaXRpYWxGb2N1cykpIHtcclxuXHRcdFx0XHQka2V5Ym9hcmQuY2FyZXQoYmFzZS4kcHJldmlldywgYmFzZS5sYXN0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBzYXZlIGV2ZW50IHRpbWUgZm9yIGtleWJvYXJkcyB3aXRoIHN0YXlPcGVuOiB0cnVlXHJcblx0XHRcdGJhc2UubGFzdC5ldmVudFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuXHRcdFx0YmFzZS4kZWwudHJpZ2dlcigka2V5Ym9hcmQuZXZlbnRzLmtiVmlzaWJsZSwgW2Jhc2UsIGJhc2UuZWxdKTtcclxuXHRcdFx0YmFzZS50aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdC8vIGdldCB1cGRhdGVkIGNhcmV0IGluZm9ybWF0aW9uIGFmdGVyIHZpc2libGUgZXZlbnQgLSBmaXhlcyAjMzMxXHJcblx0XHRcdFx0aWYgKGJhc2UpIHsgLy8gQ2hlY2sgaWYgYmFzZSBleGlzdHMsIHRoaXMgaXMgYSBjYXNlIHdoZW4gZGVzdHJveSBpcyBjYWxsZWQsIGJlZm9yZSB0aW1lcnMgZmlyZVxyXG5cdFx0XHRcdFx0YmFzZS5zYXZlQ2FyZXQoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIDIwMCk7XHJcblx0XHR9LCAxMCk7XHJcblx0XHQvLyByZXR1cm4gYmFzZSB0byBhbGxvdyBjaGFpbmluZyBpbiB0eXBpbmcgZXh0ZW5zaW9uXHJcblx0XHRyZXR1cm4gYmFzZTtcclxuXHR9O1xyXG5cclxuXHRiYXNlLnVwZGF0ZUxhbmd1YWdlID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0Ly8gY2hhbmdlIGxhbmd1YWdlIGlmIGxheW91dCBpcyBuYW1lZCBzb21ldGhpbmcgbGlrZSAnZnJlbmNoLWF6ZXJ0eS0xJ1xyXG5cdFx0dmFyIGxheW91dHMgPSAka2V5Ym9hcmQubGF5b3V0cyxcclxuXHRcdFx0bGFuZyA9IG8ubGFuZ3VhZ2UgfHwgbGF5b3V0c1tvLmxheW91dF0gJiYgbGF5b3V0c1tvLmxheW91dF0ubGFuZyAmJlxyXG5cdFx0XHRcdGxheW91dHNbby5sYXlvdXRdLmxhbmcgfHwgW28ubGFuZ3VhZ2UgfHwgJ2VuJ10sXHJcblx0XHRcdGtibGFuZyA9ICRrZXlib2FyZC5sYW5ndWFnZTtcclxuXHJcblx0XHQvLyBzb21lIGxhbmd1YWdlcyBpbmNsdWRlIGEgZGFzaCwgZS5nLiAnZW4tZ2InIG9yICdmci1jYSdcclxuXHRcdC8vIGFsbG93IG8ubGFuZ3VhZ2UgdG8gYmUgYSBzdHJpbmcgb3IgYXJyYXkuLi5cclxuXHRcdC8vIGFycmF5IGlzIGZvciBmdXR1cmUgZXhwYW5zaW9uIHdoZXJlIGEgbGF5b3V0IGNhbiBiZSBzZXQgZm9yIG11bHRpcGxlIGxhbmd1YWdlc1xyXG5cdFx0bGFuZyA9IChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobGFuZykgPT09ICdbb2JqZWN0IEFycmF5XScgPyBsYW5nWzBdIDogbGFuZyk7XHJcblx0XHRiYXNlLmxhbmd1YWdlID0gbGFuZztcclxuXHRcdGxhbmcgPSBsYW5nLnNwbGl0KCctJylbMF07XHJcblxyXG5cdFx0Ly8gc2V0IGtleWJvYXJkIGxhbmd1YWdlXHJcblx0XHRvLmRpc3BsYXkgPSAkLmV4dGVuZCh0cnVlLCB7fSxcclxuXHRcdFx0a2JsYW5nLmVuLmRpc3BsYXksXHJcblx0XHRcdGtibGFuZ1tsYW5nXSAmJiBrYmxhbmdbbGFuZ10uZGlzcGxheSB8fCB7fSxcclxuXHRcdFx0YmFzZS5zZXR0aW5ncy5kaXNwbGF5XHJcblx0XHQpO1xyXG5cdFx0by5jb21ib3MgPSAkLmV4dGVuZCh0cnVlLCB7fSxcclxuXHRcdFx0a2JsYW5nLmVuLmNvbWJvcyxcclxuXHRcdFx0a2JsYW5nW2xhbmddICYmIGtibGFuZ1tsYW5nXS5jb21ib3MgfHwge30sXHJcblx0XHRcdGJhc2Uuc2V0dGluZ3MuY29tYm9zXHJcblx0XHQpO1xyXG5cdFx0by53aGVlbE1lc3NhZ2UgPSBrYmxhbmdbbGFuZ10gJiYga2JsYW5nW2xhbmddLndoZWVsTWVzc2FnZSB8fCBrYmxhbmcuZW4ud2hlZWxNZXNzYWdlO1xyXG5cdFx0Ly8gcnRsIGNhbiBiZSBpbiB0aGUgbGF5b3V0IG9yIGluIHRoZSBsYW5ndWFnZSBkZWZpbml0aW9uOyBkZWZhdWx0cyB0byBmYWxzZVxyXG5cdFx0by5ydGwgPSBsYXlvdXRzW28ubGF5b3V0XSAmJiBsYXlvdXRzW28ubGF5b3V0XS5ydGwgfHwga2JsYW5nW2xhbmddICYmIGtibGFuZ1tsYW5nXS5ydGwgfHwgZmFsc2U7XHJcblxyXG5cdFx0Ly8gc2F2ZSBkZWZhdWx0IHJlZ2V4IChpbiBjYXNlIGxvYWRpbmcgYW5vdGhlciBsYXlvdXQgY2hhbmdlcyBpdClcclxuXHRcdGlmIChrYmxhbmdbbGFuZ10gJiYga2JsYW5nW2xhbmddLmNvbWJvUmVnZXgpIHtcclxuXHRcdFx0YmFzZS5yZWdleCA9IGtibGFuZ1tsYW5nXS5jb21ib1JlZ2V4O1xyXG5cdFx0fVxyXG5cdFx0Ly8gZGV0ZXJtaW5lIGlmIFVTICcuJyBvciBFdXJvcGVhbiAnLCcgc3lzdGVtIGJlaW5nIHVzZWRcclxuXHRcdGJhc2UuZGVjaW1hbCA9IC9eXFwuLy50ZXN0KG8uZGlzcGxheS5kZWMpO1xyXG5cdFx0YmFzZS4kZWxcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCdydGwnLCBvLnJ0bClcclxuXHRcdFx0LmNzcygnZGlyZWN0aW9uJywgby5ydGwgPyAncnRsJyA6ICcnKTtcclxuXHR9O1xyXG5cclxuXHRiYXNlLnN0YXJ0dXAgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIga2Jjc3MgPSAka2V5Ym9hcmQuY3NzO1xyXG5cdFx0Ly8gZW5zdXJlIGJhc2UuJHByZXZpZXcgaXMgZGVmaW5lZDsgYnV0IGRvbid0IG92ZXJ3cml0ZSBpdCBpZiBrZXlib2FyZCBpcyBhbHdheXMgdmlzaWJsZVxyXG5cdFx0aWYgKCEoKG8uYWx3YXlzT3BlbiB8fCBvLnVzZXJDbG9zZWQpICYmIGJhc2UuJHByZXZpZXcpKSB7XHJcblx0XHRcdGJhc2UubWFrZVByZXZpZXcoKTtcclxuXHRcdH1cclxuXHRcdGlmICghYmFzZS5oYXNLZXlib2FyZCgpKSB7XHJcblx0XHRcdC8vIGN1c3RvbSBsYXlvdXQgLSBjcmVhdGUgYSB1bmlxdWUgbGF5b3V0IG5hbWUgYmFzZWQgb24gdGhlIGhhc2hcclxuXHRcdFx0aWYgKG8ubGF5b3V0ID09PSAnY3VzdG9tJykge1xyXG5cdFx0XHRcdG8ubGF5b3V0SGFzaCA9ICdjdXN0b20nICsgYmFzZS5jdXN0b21IYXNoKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0YmFzZS5sYXlvdXQgPSBvLmxheW91dCA9PT0gJ2N1c3RvbScgPyBvLmxheW91dEhhc2ggOiBvLmxheW91dDtcclxuXHRcdFx0YmFzZS5sYXN0LmxheW91dCA9IGJhc2UubGF5b3V0O1xyXG5cclxuXHRcdFx0YmFzZS51cGRhdGVMYW5ndWFnZSgpO1xyXG5cdFx0XHRpZiAodHlwZW9mICRrZXlib2FyZC5idWlsdExheW91dHNbYmFzZS5sYXlvdXRdID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdGlmICh0eXBlb2Ygby5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRcdC8vIGNyZWF0ZSBtdXN0IGNhbGwgYnVpbGRLZXlib2FyZCgpIGZ1bmN0aW9uOyBvciBjcmVhdGUgaXQncyBvd24ga2V5Ym9hcmRcclxuXHRcdFx0XHRcdGJhc2UuJGtleWJvYXJkID0gby5jcmVhdGUoYmFzZSk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICghYmFzZS4ka2V5Ym9hcmQubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRiYXNlLmJ1aWxkS2V5Ym9hcmQoYmFzZS5sYXlvdXQsIHRydWUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRiYXNlLiRrZXlib2FyZCA9ICRrZXlib2FyZC5idWlsdExheW91dHNbYmFzZS5sYXlvdXRdLiRrZXlib2FyZC5jbG9uZSgpO1xyXG5cdFx0XHRiYXNlLiRrZXlib2FyZC5kYXRhKCdrZXlib2FyZCcsIGJhc2UpO1xyXG5cdFx0XHRpZiAoKGJhc2UuZWwuaWQgfHwgJycpICE9PSAnJykge1xyXG5cdFx0XHRcdC8vIGFkZCBJRCB0byBrZXlib2FyZCBmb3Igc3R5bGluZyBwdXJwb3Nlc1xyXG5cdFx0XHRcdGJhc2UuJGtleWJvYXJkLmF0dHIoJ2lkJywgYmFzZS5lbC5pZCArICRrZXlib2FyZC5jc3MuaWRTdWZmaXgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRiYXNlLm1ha2VQcmV2aWV3KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQWRkIGxheW91dCBhbmQgbGFndWFnZSBkYXRhLWF0dGlidXRlc1xyXG5cdFx0YmFzZS4ka2V5Ym9hcmRcclxuXHRcdFx0LmF0dHIoJ2RhdGEtJyArIGtiY3NzLmtleWJvYXJkICsgJy1sYXlvdXQnLCBvLmxheW91dClcclxuXHRcdFx0LmF0dHIoJ2RhdGEtJyArIGtiY3NzLmtleWJvYXJkICsgJy1sYW5ndWFnZScsIGJhc2UubGFuZ3VhZ2UpO1xyXG5cclxuXHRcdGJhc2UuJGRlY0J0biA9IGJhc2UuJGtleWJvYXJkLmZpbmQoJy4nICsga2Jjc3Mua2V5UHJlZml4ICsgJ2RlYycpO1xyXG5cdFx0Ly8gYWRkIGVudGVyIHRvIGFsbG93ZWQga2V5czsgZml4ZXMgIzE5MFxyXG5cdFx0aWYgKG8uZW50ZXJOYXZpZ2F0aW9uIHx8IGJhc2UuaXNUZXh0QXJlYSkge1xyXG5cdFx0XHRiYXNlLmFsd2F5c0FsbG93ZWQucHVzaCgka2V5Ym9hcmQua2V5Q29kZXMuZW50ZXIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGJhc2UuYmluZEtleWJvYXJkKCk7XHJcblxyXG5cdFx0YmFzZS4ka2V5Ym9hcmQuYXBwZW5kVG8oby5hcHBlbmRMb2NhbGx5ID8gYmFzZS4kZWwucGFyZW50KCkgOiBvLmFwcGVuZFRvIHx8ICdib2R5Jyk7XHJcblxyXG5cdFx0YmFzZS5iaW5kS2V5cygpO1xyXG5cclxuXHRcdC8vIHJlcG9zaXRpb24ga2V5Ym9hcmQgb24gd2luZG93IHJlc2l6ZVxyXG5cdFx0aWYgKG8ucmVwb3NpdGlvbiAmJiAkLnVpICYmICQudWkucG9zaXRpb24gJiYgby5hcHBlbmRUbyA9PT0gJ2JvZHknKSB7XHJcblx0XHRcdCQod2luZG93KS5iaW5kKCdyZXNpemUnICsgYmFzZS5uYW1lc3BhY2UsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRiYXNlLnJlcG9zaXRpb24oKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdH07XHJcblxyXG5cdGJhc2UucmVwb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdGJhc2UucG9zaXRpb24gPSAkLmlzRW1wdHlPYmplY3Qoby5wb3NpdGlvbikgPyBmYWxzZSA6IG8ucG9zaXRpb247XHJcblx0XHQvLyBwb3NpdGlvbiBhZnRlciBrZXlib2FyZCBpcyB2aXNpYmxlIChyZXF1aXJlZCBmb3IgVUkgcG9zaXRpb24gdXRpbGl0eSlcclxuXHRcdC8vIGFuZCBhcHByb3ByaWF0ZWx5IHNpemVkXHJcblx0XHRpZiAoJC51aSAmJiAkLnVpLnBvc2l0aW9uICYmIGJhc2UucG9zaXRpb24pIHtcclxuXHRcdFx0YmFzZS5wb3NpdGlvbi5vZiA9XHJcblx0XHRcdFx0Ly8gZ2V0IHNpbmdsZSB0YXJnZXQgcG9zaXRpb25cclxuXHRcdFx0XHRiYXNlLnBvc2l0aW9uLm9mIHx8XHJcblx0XHRcdFx0Ly8gT1IgdGFyZ2V0IHN0b3JlZCBpbiBlbGVtZW50IGRhdGEgKG11bHRpcGxlIHRhcmdldHMpXHJcblx0XHRcdFx0YmFzZS4kZWwuZGF0YSgna2V5Ym9hcmRQb3NpdGlvbicpIHx8XHJcblx0XHRcdFx0Ly8gT1IgZGVmYXVsdCBAIGVsZW1lbnRcclxuXHRcdFx0XHRiYXNlLiRlbDtcclxuXHRcdFx0YmFzZS5wb3NpdGlvbi5jb2xsaXNpb24gPSBiYXNlLnBvc2l0aW9uLmNvbGxpc2lvbiB8fCAnZmxpcGZpdCBmbGlwZml0JztcclxuXHRcdFx0YmFzZS5wb3NpdGlvbi5hdCA9IG8udXNlUHJldmlldyA/IG8ucG9zaXRpb24uYXQgOiBvLnBvc2l0aW9uLmF0MjtcclxuXHRcdFx0aWYgKGJhc2UuaXNWaXNpYmxlKCkpIHtcclxuXHRcdFx0XHRiYXNlLiRrZXlib2FyZC5wb3NpdGlvbihiYXNlLnBvc2l0aW9uKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Ly8gbWFrZSBjaGFpbmFibGVcclxuXHRcdHJldHVybiBiYXNlO1xyXG5cdH07XHJcblxyXG5cdGJhc2UubWFrZVByZXZpZXcgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRpZiAoby51c2VQcmV2aWV3KSB7XHJcblx0XHRcdHZhciBpbmR4LCBhdHRycywgYXR0ciwgcmVtb3ZlZEF0dHIsXHJcblx0XHRcdFx0a2Jjc3MgPSAka2V5Ym9hcmQuY3NzO1xyXG5cdFx0XHRiYXNlLiRwcmV2aWV3ID0gYmFzZS4kZWwuY2xvbmUoZmFsc2UpXHJcblx0XHRcdFx0LmRhdGEoJ2tleWJvYXJkJywgYmFzZSlcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3Moa2Jjc3MucGxhY2Vob2xkZXIgKyAnICcgKyBrYmNzcy5pbnB1dClcclxuXHRcdFx0XHQuYWRkQ2xhc3Moa2Jjc3MucHJldmlldyArICcgJyArIG8uY3NzLmlucHV0KVxyXG5cdFx0XHRcdC5hdHRyKCd0YWJpbmRleCcsICctMScpXHJcblx0XHRcdFx0LnNob3coKTsgLy8gZm9yIGhpZGRlbiBpbnB1dHNcclxuXHRcdFx0YmFzZS5wcmV2aWV3ID0gYmFzZS4kcHJldmlld1swXTtcclxuXHJcblx0XHRcdC8vIFN3aXRjaCB0aGUgbnVtYmVyIGlucHV0IGZpZWxkIHRvIHRleHQgc28gdGhlIGNhcmV0IHBvc2l0aW9uaW5nIHdpbGwgd29yayBhZ2FpblxyXG5cdFx0XHRpZiAoYmFzZS5wcmV2aWV3LnR5cGUgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0YmFzZS5wcmV2aWV3LnR5cGUgPSAndGV4dCc7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIHJlbW92ZSBleHRyYW5lb3VzIGF0dHJpYnV0ZXMuXHJcblx0XHRcdHJlbW92ZWRBdHRyID0gL14oZGF0YS18aWR8YXJpYS1oYXNwb3B1cCkvaTtcclxuXHRcdFx0YXR0cnMgPSBiYXNlLiRwcmV2aWV3LmdldCgwKS5hdHRyaWJ1dGVzO1xyXG5cdFx0XHRmb3IgKGluZHggPSBhdHRycy5sZW5ndGggLSAxOyBpbmR4ID49IDA7IGluZHgtLSkge1xyXG5cdFx0XHRcdGF0dHIgPSBhdHRyc1tpbmR4XSAmJiBhdHRyc1tpbmR4XS5uYW1lO1xyXG5cdFx0XHRcdGlmIChyZW1vdmVkQXR0ci50ZXN0KGF0dHIpKSB7XHJcblx0XHRcdFx0XHQvLyByZW1vdmUgZGF0YS1hdHRyaWJ1dGVzIC0gc2VlICMzNTFcclxuXHRcdFx0XHRcdGJhc2UucHJldmlldy5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdC8vIGJ1aWxkIHByZXZpZXcgY29udGFpbmVyIGFuZCBhcHBlbmQgcHJldmlldyBkaXNwbGF5XHJcblx0XHRcdCQoJzxkaXYgLz4nKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyhrYmNzcy53cmFwcGVyKVxyXG5cdFx0XHRcdC5hcHBlbmQoYmFzZS4kcHJldmlldylcclxuXHRcdFx0XHQucHJlcGVuZFRvKGJhc2UuJGtleWJvYXJkKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGJhc2UuJHByZXZpZXcgPSBiYXNlLiRlbDtcclxuXHRcdFx0YmFzZS5wcmV2aWV3ID0gYmFzZS5lbDtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBBZGRlZCBpbiB2MS4yNi44IHRvIGFsbG93IGNoYWluaW5nIG9mIHRoZSBjYXJldCBmdW5jdGlvbiwgZS5nLlxyXG5cdC8vIGtleWJvYXJkLnJldmVhbCgpLmNhcmV0KDQsNSkuaW5zZXJ0VGV4dCgndGVzdCcpLmNhcmV0KCdlbmQnKTtcclxuXHRiYXNlLmNhcmV0ID0gZnVuY3Rpb24ocGFyYW0xLCBwYXJhbTIpIHtcclxuXHRcdHZhciByZXN1bHQgPSAka2V5Ym9hcmQuY2FyZXQoYmFzZS4kcHJldmlldywgcGFyYW0xLCBwYXJhbTIpLFxyXG5cdFx0XHR3YXNTZXRDYXJldCA9IHJlc3VsdCBpbnN0YW5jZW9mICQ7XHJcblx0XHQvLyBDYXJldCB3YXMgc2V0LCBzYXZlIGxhc3QgcG9zaXRpb24gJiBtYWtlIGNoYWluYWJsZVxyXG5cdFx0aWYgKHdhc1NldENhcmV0KSB7XHJcblx0XHRcdGJhc2Uuc2F2ZUNhcmV0KHJlc3VsdC5zdGFydCwgcmVzdWx0LmVuZCk7XHJcblx0XHRcdHJldHVybiBiYXNlO1xyXG5cdFx0fVxyXG5cdFx0Ly8gcmV0dXJuIGNhcmV0IHBvc2l0aW9uIGlmIHVzaW5nIC5jYXJldCgpXHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH07XHJcblxyXG5cdGJhc2Uuc2F2ZUNhcmV0ID0gZnVuY3Rpb24gKHN0YXJ0LCBlbmQsICRlbCkge1xyXG5cdFx0aWYgKGJhc2UuaXNDdXJyZW50KCkpIHtcclxuXHRcdFx0dmFyIHA7XHJcblx0XHRcdGlmICh0eXBlb2Ygc3RhcnQgPT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0Ly8gZ3JhYiAmIHNhdmUgY3VycmVudCBjYXJldCBwb3NpdGlvblxyXG5cdFx0XHRcdHAgPSAka2V5Ym9hcmQuY2FyZXQoJGVsIHx8IGJhc2UuJHByZXZpZXcpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHAgPSAka2V5Ym9hcmQuY2FyZXQoJGVsIHx8IGJhc2UuJHByZXZpZXcsIHN0YXJ0LCBlbmQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGJhc2UubGFzdC5zdGFydCA9IHR5cGVvZiBzdGFydCA9PT0gJ3VuZGVmaW5lZCcgPyBwLnN0YXJ0IDogc3RhcnQ7XHJcblx0XHRcdGJhc2UubGFzdC5lbmQgPSB0eXBlb2YgZW5kID09PSAndW5kZWZpbmVkJyA/IHAuZW5kIDogZW5kO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGJhc2Uuc2F2ZUxhc3RDaGFuZ2UgPSBmdW5jdGlvbiAodmFsKSB7XHJcblx0XHRiYXNlLmxhc3QudmFsID0gdmFsIHx8IGJhc2UuZ2V0VmFsdWUoYmFzZS4kcHJldmlldyB8fCBiYXNlLiRlbCk7XHJcblx0XHRpZiAoYmFzZS5pc0NvbnRlbnRFZGl0YWJsZSkge1xyXG5cdFx0XHRiYXNlLmxhc3QuZWxtcyA9IGJhc2UuZWwuY2xvbmVOb2RlKHRydWUpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGJhc2Uuc2V0U2Nyb2xsID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0Ly8gU2V0IHNjcm9sbCBzbyBjYXJldCAmIGN1cnJlbnQgdGV4dCBpcyBpbiB2aWV3XHJcblx0XHQvLyBuZWVkZWQgZm9yIHZpcnR1YWwga2V5Ym9hcmQgdHlwaW5nLCBOT1QgbWFudWFsIHR5cGluZyAtIGZpeGVzICMyM1xyXG5cdFx0aWYgKCFiYXNlLmlzQ29udGVudEVkaXRhYmxlICYmIGJhc2UubGFzdC52aXJ0dWFsKSB7XHJcblxyXG5cdFx0XHR2YXIgc2Nyb2xsV2lkdGgsIGNsaWVudFdpZHRoLCBhZGp1c3RtZW50LCBkaXJlY3Rpb24sXHJcblx0XHRcdFx0dmFsdWUgPSBiYXNlLmxhc3QudmFsLnN1YnN0cmluZygwLCBNYXRoLm1heChiYXNlLmxhc3Quc3RhcnQsIGJhc2UubGFzdC5lbmQpKTtcclxuXHJcblx0XHRcdGlmICghYmFzZS4kcHJldmlld0NvcHkpIHtcclxuXHRcdFx0XHQvLyBjbG9uZSBwcmV2aWV3XHJcblx0XHRcdFx0YmFzZS4kcHJldmlld0NvcHkgPSBiYXNlLiRwcmV2aWV3LmNsb25lKClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCdpZCcpIC8vIGZpeGVzICMzMzRcclxuXHRcdFx0XHRcdC5jc3Moe1xyXG5cdFx0XHRcdFx0XHRwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuXHRcdFx0XHRcdFx0bGVmdDogMCxcclxuXHRcdFx0XHRcdFx0ekluZGV4OiAtMTAsXHJcblx0XHRcdFx0XHRcdHZpc2liaWxpdHk6ICdoaWRkZW4nXHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCRrZXlib2FyZC5jc3MuaW5wdXRDbG9uZSk7XHJcblx0XHRcdFx0Ly8gcHJldmVudCBzdWJtaXR0aW5nIGNvbnRlbnQgb24gZm9ybSBzdWJtaXNzaW9uXHJcblx0XHRcdFx0YmFzZS4kcHJldmlld0NvcHlbMF0uZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHRcdGlmICghYmFzZS5pc1RleHRBcmVhKSB7XHJcblx0XHRcdFx0XHQvLyBtYWtlIGlucHV0IHplcm8td2lkdGggYmVjYXVzZSB3ZSBuZWVkIGFuIGFjY3VyYXRlIHNjcm9sbFdpZHRoXHJcblx0XHRcdFx0XHRiYXNlLiRwcmV2aWV3Q29weS5jc3Moe1xyXG5cdFx0XHRcdFx0XHQnd2hpdGUtc3BhY2UnOiAncHJlJyxcclxuXHRcdFx0XHRcdFx0J3dpZHRoJzogMFxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmIChvLnVzZVByZXZpZXcpIHtcclxuXHRcdFx0XHRcdC8vIGFkZCBjbG9uZSBpbnNpZGUgb2YgcHJldmlldyB3cmFwcGVyXHJcblx0XHRcdFx0XHRiYXNlLiRwcmV2aWV3LmFmdGVyKGJhc2UuJHByZXZpZXdDb3B5KTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8ganVzdCBzbGFwIHRoYXQgdGhpbmcgaW4gdGhlcmUgc29tZXdoZXJlXHJcblx0XHRcdFx0XHRiYXNlLiRrZXlib2FyZC5wcmVwZW5kKGJhc2UuJHByZXZpZXdDb3B5KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChiYXNlLmlzVGV4dEFyZWEpIHtcclxuXHRcdFx0XHQvLyBuZWVkIHRoZSB0ZXh0YXJlYSBzY3JvbGxIZWlnaHQsIHNvIHNldCB0aGUgY2xvbmUgdGV4dGFyZWEgaGVpZ2h0IHRvIGJlIHRoZSBsaW5lIGhlaWdodFxyXG5cdFx0XHRcdGJhc2UuJHByZXZpZXdDb3B5XHJcblx0XHRcdFx0XHQuaGVpZ2h0KGJhc2UubGluZUhlaWdodClcclxuXHRcdFx0XHRcdC52YWwodmFsdWUpO1xyXG5cdFx0XHRcdC8vIHNldCBzY3JvbGxUb3AgZm9yIFRleHRhcmVhXHJcblx0XHRcdFx0YmFzZS5wcmV2aWV3LnNjcm9sbFRvcCA9IGJhc2UubGluZUhlaWdodCAqXHJcblx0XHRcdFx0XHQoTWF0aC5mbG9vcihiYXNlLiRwcmV2aWV3Q29weVswXS5zY3JvbGxIZWlnaHQgLyBiYXNlLmxpbmVIZWlnaHQpIC0gMSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gYWRkIG5vbi1icmVha2luZyBzcGFjZXNcclxuXHRcdFx0XHRiYXNlLiRwcmV2aWV3Q29weS52YWwodmFsdWUucmVwbGFjZSgvXFxzL2csICdcXHhhMCcpKTtcclxuXHJcblx0XHRcdFx0Ly8gaWYgc2Nyb2xsQWRqdXN0bWVudCBvcHRpb24gaXMgc2V0IHRvIFwiY1wiIG9yIFwiY2VudGVyXCIgdGhlbiBjZW50ZXIgdGhlIGNhcmV0XHJcblx0XHRcdFx0YWRqdXN0bWVudCA9IC9jL2kudGVzdChvLnNjcm9sbEFkanVzdG1lbnQpID8gYmFzZS5wcmV2aWV3LmNsaWVudFdpZHRoIC8gMiA6IG8uc2Nyb2xsQWRqdXN0bWVudDtcclxuXHRcdFx0XHRzY3JvbGxXaWR0aCA9IGJhc2UuJHByZXZpZXdDb3B5WzBdLnNjcm9sbFdpZHRoIC0gMTtcclxuXHJcblx0XHRcdFx0Ly8gc2V0IGluaXRpYWwgc3RhdGUgYXMgbW92aW5nIHJpZ2h0XHJcblx0XHRcdFx0aWYgKHR5cGVvZiBiYXNlLmxhc3Quc2Nyb2xsV2lkdGggPT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHRiYXNlLmxhc3Quc2Nyb2xsV2lkdGggPSBzY3JvbGxXaWR0aDtcclxuXHRcdFx0XHRcdGJhc2UubGFzdC5kaXJlY3Rpb24gPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBpZiBkaXJlY3Rpb24gPSB0cnVlOyB3ZSdyZSBzY3JvbGxpbmcgdG8gdGhlIHJpZ2h0XHJcblx0XHRcdFx0ZGlyZWN0aW9uID0gYmFzZS5sYXN0LnNjcm9sbFdpZHRoID09PSBzY3JvbGxXaWR0aCA/XHJcblx0XHRcdFx0XHRiYXNlLmxhc3QuZGlyZWN0aW9uIDpcclxuXHRcdFx0XHRcdGJhc2UubGFzdC5zY3JvbGxXaWR0aCA8IHNjcm9sbFdpZHRoO1xyXG5cdFx0XHRcdGNsaWVudFdpZHRoID0gYmFzZS5wcmV2aWV3LmNsaWVudFdpZHRoIC0gYWRqdXN0bWVudDtcclxuXHJcblx0XHRcdFx0Ly8gc2V0IHNjcm9sbExlZnQgZm9yIGlucHV0czsgdHJ5IHRvIG1pbWljIHRoZSBpbmhlcml0IGNhcmV0IHBvc2l0aW9uaW5nICsgc2Nyb2xsaW5nOlxyXG5cdFx0XHRcdC8vIGh1ZyByaWdodCB3aGlsZSBzY3JvbGxpbmcgcmlnaHQuLi5cclxuXHRcdFx0XHRpZiAoZGlyZWN0aW9uKSB7XHJcblx0XHRcdFx0XHRpZiAoc2Nyb2xsV2lkdGggPCBjbGllbnRXaWR0aCkge1xyXG5cdFx0XHRcdFx0XHRiYXNlLnByZXZpZXcuc2Nyb2xsTGVmdCA9IDA7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRiYXNlLnByZXZpZXcuc2Nyb2xsTGVmdCA9IHNjcm9sbFdpZHRoIC0gY2xpZW50V2lkdGg7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIGh1ZyBsZWZ0IHdoaWxlIHNjcm9sbGluZyBsZWZ0Li4uXHJcblx0XHRcdFx0XHRpZiAoc2Nyb2xsV2lkdGggPj0gYmFzZS5wcmV2aWV3LnNjcm9sbFdpZHRoIC0gY2xpZW50V2lkdGgpIHtcclxuXHRcdFx0XHRcdFx0YmFzZS5wcmV2aWV3LnNjcm9sbExlZnQgPSBiYXNlLnByZXZpZXcuc2Nyb2xsV2lkdGggLSBhZGp1c3RtZW50O1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChzY3JvbGxXaWR0aCAtIGFkanVzdG1lbnQgPiAwKSB7XHJcblx0XHRcdFx0XHRcdGJhc2UucHJldmlldy5zY3JvbGxMZWZ0ID0gc2Nyb2xsV2lkdGggLSBhZGp1c3RtZW50O1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YmFzZS5wcmV2aWV3LnNjcm9sbExlZnQgPSAwO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0YmFzZS5sYXN0LnNjcm9sbFdpZHRoID0gc2Nyb2xsV2lkdGg7XHJcblx0XHRcdFx0YmFzZS5sYXN0LmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGJhc2UuYmluZEZvY3VzID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYgKG8ub3Blbk9uKSB7XHJcblx0XHRcdC8vIG1ha2Ugc3VyZSBrZXlib2FyZCBpc24ndCBkZXN0cm95ZWRcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgYmFzZSBleGlzdHMsIHRoaXMgaXMgYSBjYXNlIHdoZW4gZGVzdHJveSBpcyBjYWxsZWQsIGJlZm9yZSB0aW1lcnMgaGF2ZSBmaXJlZFxyXG5cdFx0XHRpZiAoYmFzZSAmJiBiYXNlLmVsLmFjdGl2ZSkge1xyXG5cdFx0XHRcdGJhc2UuJGVsLmJpbmQoby5vcGVuT24gKyBiYXNlLm5hbWVzcGFjZSwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0YmFzZS5mb2N1c09uKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Ly8gcmVtb3ZlIGZvY3VzIGZyb20gZWxlbWVudCAobmVlZGVkIGZvciBJRSBzaW5jZSBibHVyIGRvZXNuJ3Qgc2VlbSB0byB3b3JrKVxyXG5cdFx0XHRcdGlmICgkKCc6Zm9jdXMnKVswXSA9PT0gYmFzZS5lbCkge1xyXG5cdFx0XHRcdFx0YmFzZS4kZWwuYmx1cigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGJhc2UuYmluZEtleWJvYXJkID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0dmFyIGV2dCxcclxuXHRcdFx0a2V5Q29kZXMgPSAka2V5Ym9hcmQua2V5Q29kZXMsXHJcblx0XHRcdGxheW91dCA9ICRrZXlib2FyZC5idWlsdExheW91dHNbYmFzZS5sYXlvdXRdLFxyXG5cdFx0XHRuYW1lc3BhY2UgPSBiYXNlLm5hbWVzcGFjZSArICdrZXliaW5kaW5ncyc7XHJcblx0XHRiYXNlLiRwcmV2aWV3XHJcblx0XHRcdC51bmJpbmQoYmFzZS5uYW1lc3BhY2UpXHJcblx0XHRcdC5iaW5kKCdjbGljaycgKyBuYW1lc3BhY2UgKyAnIHRvdWNoc3RhcnQnICsgbmFtZXNwYWNlLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0aWYgKG8uYWx3YXlzT3BlbiAmJiAhYmFzZS5pc0N1cnJlbnQoKSkge1xyXG5cdFx0XHRcdFx0YmFzZS5yZXZlYWwoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gdXBkYXRlIGxhc3QgY2FyZXQgcG9zaXRpb24gYWZ0ZXIgdXNlciBjbGljaywgdXNlIGF0IGxlYXN0IDE1MG1zIG9yIGl0IGRvZXNuJ3Qgd29yayBpbiBJRVxyXG5cdFx0XHRcdGJhc2UudGltZXIyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRpZiAoYmFzZSl7XHJcblx0XHRcdFx0XHRcdGJhc2Uuc2F2ZUNhcmV0KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSwgMTUwKTtcclxuXHJcblx0XHRcdH0pXHJcblx0XHRcdC5iaW5kKCdrZXlwcmVzcycgKyBuYW1lc3BhY2UsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0aWYgKG8ubG9ja0lucHV0KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICghYmFzZS5pc0N1cnJlbnQoKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dmFyIGsgPSBlLmNoYXJDb2RlIHx8IGUud2hpY2gsXHJcblx0XHRcdFx0XHQvLyBjYXBzTG9jayBjYW4gb25seSBiZSBjaGVja2VkIHdoaWxlIHR5cGluZyBhLXpcclxuXHRcdFx0XHRcdGsxID0gayA+PSBrZXlDb2Rlcy5BICYmIGsgPD0ga2V5Q29kZXMuWixcclxuXHRcdFx0XHRcdGsyID0gayA+PSBrZXlDb2Rlcy5hICYmIGsgPD0ga2V5Q29kZXMueixcclxuXHRcdFx0XHRcdHN0ciA9IGJhc2UubGFzdC5rZXkgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGspO1xyXG5cdFx0XHRcdC8vIGNoZWNrLCB0aGF0IGtleXByZXNzIHdhc24ndCByaXNlIGJ5IGZ1bmN0aW9uYWwga2V5XHJcblx0XHRcdFx0Ly8gc3BhY2UgaXMgZmlyc3QgdHlwaW5nIHN5bWJvbCBpbiBVVEY4IHRhYmxlXHJcblx0XHRcdFx0aWYgKGsgPCBrZXlDb2Rlcy5zcGFjZSkgeyAvL3NlZSAjNTQ5XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGJhc2UubGFzdC52aXJ0dWFsID0gZmFsc2U7XHJcblx0XHRcdFx0YmFzZS5sYXN0LmV2ZW50ID0gZTtcclxuXHRcdFx0XHRiYXNlLmxhc3QuJGtleSA9IFtdOyAvLyBub3QgYSB2aXJ0dWFsIGtleWJvYXJkIGtleVxyXG5cdFx0XHRcdGlmIChiYXNlLmNoZWNrQ2FyZXQpIHtcclxuXHRcdFx0XHRcdGJhc2Uuc2F2ZUNhcmV0KCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyB1cGRhdGUgY2Fwc0xvY2tcclxuXHRcdFx0XHRpZiAoayAhPT0ga2V5Q29kZXMuY2Fwc0xvY2sgJiYgKGsxIHx8IGsyKSkge1xyXG5cdFx0XHRcdFx0YmFzZS5jYXBzTG9jayA9IChrMSAmJiAhZS5zaGlmdEtleSkgfHwgKGsyICYmIGUuc2hpZnRLZXkpO1xyXG5cdFx0XHRcdFx0Ly8gaWYgc2hpZnRlZCBrZXlzZXQgbm90IHZpc2libGUsIHRoZW4gc2hvdyBpdFxyXG5cdFx0XHRcdFx0aWYgKGJhc2UuY2Fwc0xvY2sgJiYgIWJhc2Uuc2hpZnRBY3RpdmUpIHtcclxuXHRcdFx0XHRcdFx0YmFzZS5zaGlmdEFjdGl2ZSA9IHRydWU7XHJcblx0XHRcdFx0XHRcdGJhc2Uuc2hvd1NldCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gcmVzdHJpY3QgaW5wdXQgLSBrZXlDb2RlIGluIGtleXByZXNzIHNwZWNpYWwga2V5czpcclxuXHRcdFx0XHQvLyBzZWUgaHR0cDovL3d3dy5hc3F1YXJlLm5ldC9qYXZhc2NyaXB0L3Rlc3RzL0tleUNvZGUuaHRtbFxyXG5cdFx0XHRcdGlmIChvLnJlc3RyaWN0SW5wdXQpIHtcclxuXHRcdFx0XHRcdC8vIGFsbG93IG5hdmlnYXRpb24ga2V5cyB0byB3b3JrIC0gQ2hyb21lIGRvZXNuJ3QgZmlyZSBhIGtleXByZXNzIGV2ZW50ICg4ID0gYmtzcClcclxuXHRcdFx0XHRcdGlmICgoZS53aGljaCA9PT0ga2V5Q29kZXMuYmFja1NwYWNlIHx8IGUud2hpY2ggPT09IDApICYmXHJcblx0XHRcdFx0XHRcdCQuaW5BcnJheShlLmtleUNvZGUsIGJhc2UuYWx3YXlzQWxsb3dlZCkpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gcXVpY2sga2V5IGNoZWNrXHJcblx0XHRcdFx0XHRpZiAoJC5pbkFycmF5KHN0ciwgbGF5b3V0LmFjY2VwdGVkS2V5cykgPT09IC0xKSB7XHJcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0Ly8gY29weSBldmVudCBvYmplY3QgaW4gY2FzZSBlLnByZXZlbnREZWZhdWx0KCkgYnJlYWtzIHdoZW4gY2hhbmdpbmcgdGhlIHR5cGVcclxuXHRcdFx0XHRcdFx0ZXZ0ID0gJC5leHRlbmQoe30sIGUpO1xyXG5cdFx0XHRcdFx0XHRldnQudHlwZSA9ICRrZXlib2FyZC5ldmVudHMuaW5wdXRSZXN0cmljdGVkO1xyXG5cdFx0XHRcdFx0XHRiYXNlLiRlbC50cmlnZ2VyKGV2dCwgW2Jhc2UsIGJhc2UuZWxdKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2UgaWYgKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJlxyXG5cdFx0XHRcdFx0KGUud2hpY2ggPT09IGtleUNvZGVzLkEgfHwgZS53aGljaCA9PT0ga2V5Q29kZXMuQyB8fCBlLndoaWNoID09PSBrZXlDb2Rlcy5WIHx8XHJcblx0XHRcdFx0XHRcdChlLndoaWNoID49IGtleUNvZGVzLlggJiYgZS53aGljaCA8PSBrZXlDb2Rlcy5aKSkpIHtcclxuXHRcdFx0XHRcdC8vIEFsbG93IHNlbGVjdCBhbGwgKGN0cmwtYSksIGNvcHkgKGN0cmwtYyksIHBhc3RlIChjdHJsLXYpICYgY3V0IChjdHJsLXgpICZcclxuXHRcdFx0XHRcdC8vIHJlZG8gKGN0cmwteSkmIHVuZG8gKGN0cmwteik7IG1ldGEga2V5IGZvciBtYWNcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gTWFwcGVkIEtleXMgLSBhbGxvd3MgdHlwaW5nIG9uIGEgcmVndWxhciBrZXlib2FyZCBhbmQgdGhlIG1hcHBlZCBrZXkgaXMgZW50ZXJlZFxyXG5cdFx0XHRcdC8vIFNldCB1cCBhIGtleSBpbiB0aGUgbGF5b3V0IGFzIGZvbGxvd3M6ICdtKGEpOmxhYmVsJzsgbSA9IGtleSB0byBtYXAsIChhKSA9IGFjdHVhbCBrZXlib2FyZCBrZXlcclxuXHRcdFx0XHQvLyB0byBtYXAgdG8gKG9wdGlvbmFsKSwgJzpsYWJlbCcgPSB0aXRsZS90b29sdGlwIChvcHRpb25hbClcclxuXHRcdFx0XHQvLyBleGFtcGxlOiBcXHUwMzkxIG9yIFxcdTAzOTEoQSkgb3IgXFx1MDM5MTphbHBoYSBvciBcXHUwMzkxKEEpOmFscGhhXHJcblx0XHRcdFx0aWYgKGxheW91dC5oYXNNYXBwZWRLZXlzICYmIGxheW91dC5tYXBwZWRLZXlzLmhhc093blByb3BlcnR5KHN0cikpIHtcclxuXHRcdFx0XHRcdGJhc2UubGFzdC5rZXkgPSBsYXlvdXQubWFwcGVkS2V5c1tzdHJdO1xyXG5cdFx0XHRcdFx0YmFzZS5pbnNlcnRUZXh0KGJhc2UubGFzdC5rZXkpO1xyXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAodHlwZW9mIG8uYmVmb3JlSW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHRiYXNlLmluc2VydFRleHQoYmFzZS5sYXN0LmtleSk7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGJhc2UuY2hlY2tNYXhMZW5ndGgoKTtcclxuXHJcblx0XHRcdH0pXHJcblx0XHRcdC5iaW5kKCdrZXl1cCcgKyBuYW1lc3BhY2UsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0aWYgKCFiYXNlLmlzQ3VycmVudCgpKSB7IHJldHVybjsgfVxyXG5cdFx0XHRcdGJhc2UubGFzdC52aXJ0dWFsID0gZmFsc2U7XHJcblx0XHRcdFx0c3dpdGNoIChlLndoaWNoKSB7XHJcblx0XHRcdFx0XHQvLyBJbnNlcnQgdGFiIGtleVxyXG5cdFx0XHRcdGNhc2Uga2V5Q29kZXMudGFiOlxyXG5cdFx0XHRcdFx0Ly8gQWRkZWQgYSBmbGFnIHRvIHByZXZlbnQgZnJvbSB0YWJiaW5nIGludG8gYW4gaW5wdXQsIGtleWJvYXJkIG9wZW5pbmcsIHRoZW4gYWRkaW5nIHRoZSB0YWJcclxuXHRcdFx0XHRcdC8vIHRvIHRoZSBrZXlib2FyZCBwcmV2aWV3IGFyZWEgb24ga2V5dXAuIFNhZGx5IGl0IHN0aWxsIGhhcHBlbnMgaWYgeW91IGRvbid0IHJlbGVhc2UgdGhlIHRhYlxyXG5cdFx0XHRcdFx0Ly8ga2V5IGltbWVkaWF0ZWx5IGJlY2F1c2Uga2V5ZG93biBldmVudCBhdXRvLXJlcGVhdHNcclxuXHRcdFx0XHRcdGlmIChiYXNlLnRhYiAmJiAhby5sb2NrSW5wdXQpIHtcclxuXHRcdFx0XHRcdFx0YmFzZS5zaGlmdEFjdGl2ZSA9IGUuc2hpZnRLZXk7XHJcblx0XHRcdFx0XHRcdC8vIHdoZW4gc3dpdGNoaW5nIGlucHV0cywgdGhlIHRhYiBrZXlhY3Rpb24gcmV0dXJucyBmYWxzZVxyXG5cdFx0XHRcdFx0XHR2YXIgbm90U3dpdGNoaW5nID0gJGtleWJvYXJkLmtleWFjdGlvbi50YWIoYmFzZSk7XHJcblx0XHRcdFx0XHRcdGJhc2UudGFiID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdGlmICghbm90U3dpdGNoaW5nKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0XHQvLyBFc2NhcGUgd2lsbCBoaWRlIHRoZSBrZXlib2FyZFxyXG5cdFx0XHRcdGNhc2Uga2V5Q29kZXMuZXNjYXBlOlxyXG5cdFx0XHRcdFx0aWYgKCFvLmlnbm9yZUVzYykge1xyXG5cdFx0XHRcdFx0XHRiYXNlLmNsb3NlKG8uYXV0b0FjY2VwdCAmJiBvLmF1dG9BY2NlcHRPbkVzYyA/ICd0cnVlJyA6IGZhbHNlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIHRocm90dGxlIHRoZSBjaGVjayBjb21ibyBmdW5jdGlvbiBiZWNhdXNlIGZhc3QgdHlwZXJzIHdpbGwgaGF2ZSBhbiBpbmNvcnJlY3RseSBwb3NpdGlvbmVkIGNhcmV0XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KGJhc2UudGhyb3R0bGVkKTtcclxuXHRcdFx0XHRiYXNlLnRocm90dGxlZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0Ly8gZml4IGVycm9yIGluIE9TWD8gc2VlIGlzc3VlICMxMDJcclxuXHRcdFx0XHRcdGlmIChiYXNlICYmIGJhc2UuaXNWaXNpYmxlKCkpIHtcclxuXHRcdFx0XHRcdFx0YmFzZS5jaGVja0NvbWJvcygpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIDEwMCk7XHJcblxyXG5cdFx0XHRcdGJhc2UuY2hlY2tNYXhMZW5ndGgoKTtcclxuXHJcblx0XHRcdFx0YmFzZS5sYXN0LnByZVZhbCA9ICcnICsgYmFzZS5sYXN0LnZhbDtcclxuXHRcdFx0XHRiYXNlLnNhdmVMYXN0Q2hhbmdlKCk7XHJcblxyXG5cdFx0XHRcdC8vIGRvbid0IGFsdGVyIFwiZVwiIG9yIHRoZSBcImtleXVwXCIgZXZlbnQgbmV2ZXIgZmluaXNoZXMgcHJvY2Vzc2luZzsgZml4ZXMgIzU1MlxyXG5cdFx0XHRcdHZhciBldmVudCA9ICQuRXZlbnQoICRrZXlib2FyZC5ldmVudHMua2JDaGFuZ2UgKTtcclxuXHRcdFx0XHQvLyBiYXNlLmxhc3Qua2V5IG1heSBiZSBlbXB0eSBzdHJpbmcgKHNoaWZ0LCBlbnRlciwgdGFiLCBldGMpIHdoZW4ga2V5Ym9hcmQgaXMgZmlyc3QgdmlzaWJsZVxyXG5cdFx0XHRcdC8vIHVzZSBlLmtleSBpbnN0ZWFkLCBpZiBicm93c2VyIHN1cHBvcnRzIGl0XHJcblx0XHRcdFx0ZXZlbnQuYWN0aW9uID0gYmFzZS5sYXN0LmtleTtcclxuXHRcdFx0XHRiYXNlLiRlbC50cmlnZ2VyKGV2ZW50LCBbYmFzZSwgYmFzZS5lbF0pO1xyXG5cclxuXHRcdFx0XHQvLyBjaGFuZ2UgY2FsbGJhY2sgaXMgbm8gbG9uZ2VyIGJvdW5kIHRvIHRoZSBpbnB1dCBlbGVtZW50IGFzIHRoZSBjYWxsYmFjayBjb3VsZCBiZVxyXG5cdFx0XHRcdC8vIGNhbGxlZCBkdXJpbmcgYW4gZXh0ZXJuYWwgY2hhbmdlIGV2ZW50IHdpdGggYWxsIHRoZSBuZWNlc3NhcnkgcGFyYW1ldGVycyAoaXNzdWUgIzE1NylcclxuXHRcdFx0XHRpZiAodHlwZW9mIG8uY2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHRldmVudC50eXBlID0gJGtleWJvYXJkLmV2ZW50cy5pbnB1dENoYW5nZTtcclxuXHRcdFx0XHRcdG8uY2hhbmdlKGV2ZW50LCBiYXNlLCBiYXNlLmVsKTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKG8uYWNjZXB0VmFsaWQgJiYgby5hdXRvQWNjZXB0T25WYWxpZCkge1xyXG5cdFx0XHRcdFx0aWYgKFxyXG5cdFx0XHRcdFx0XHR0eXBlb2Ygby52YWxpZGF0ZSA9PT0gJ2Z1bmN0aW9uJyAmJlxyXG5cdFx0XHRcdFx0XHRvLnZhbGlkYXRlKGJhc2UsIGJhc2UuZ2V0VmFsdWUoYmFzZS4kcHJldmlldykpXHJcblx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0YmFzZS4kcHJldmlldy5ibHVyKCk7XHJcblx0XHRcdFx0XHRcdGJhc2UuYWNjZXB0KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYmluZCgna2V5ZG93bicgKyBuYW1lc3BhY2UsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0YmFzZS5sYXN0LmtleVByZXNzID0gZS53aGljaDtcclxuXHRcdFx0XHQvLyBlbnN1cmUgYWx3YXlzT3BlbiBrZXlib2FyZHMgYXJlIG1hZGUgYWN0aXZlXHJcblx0XHRcdFx0aWYgKG8uYWx3YXlzT3BlbiAmJiAhYmFzZS5pc0N1cnJlbnQoKSkge1xyXG5cdFx0XHRcdFx0YmFzZS5yZXZlYWwoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gcHJldmVudCB0YWIga2V5IGZyb20gbGVhdmluZyB0aGUgcHJldmlldyB3aW5kb3dcclxuXHRcdFx0XHRpZiAoZS53aGljaCA9PT0ga2V5Q29kZXMudGFiKSB7XHJcblx0XHRcdFx0XHQvLyBhbGxvdyB0YWIgdG8gcGFzcyB0aHJvdWdoIC0gdGFiIHRvIG5leHQgaW5wdXQvc2hpZnQtdGFiIGZvciBwcmV2XHJcblx0XHRcdFx0XHRiYXNlLnRhYiA9IHRydWU7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmIChvLmxvY2tJbnB1dCB8fCBlLnRpbWVTdGFtcCA9PT0gYmFzZS5sYXN0LnRpbWVTdGFtcCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICFvLmxvY2tJbnB1dDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGJhc2UubGFzdC50aW1lU3RhbXAgPSBlLnRpbWVTdGFtcDsgLy8gZml4ZXMgIzY1OVxyXG5cdFx0XHRcdGJhc2UubGFzdC52aXJ0dWFsID0gZmFsc2U7XHJcblx0XHRcdFx0c3dpdGNoIChlLndoaWNoKSB7XHJcblxyXG5cdFx0XHRcdGNhc2Uga2V5Q29kZXMuYmFja1NwYWNlOlxyXG5cdFx0XHRcdFx0JGtleWJvYXJkLmtleWFjdGlvbi5ia3NwKGJhc2UsIG51bGwsIGUpO1xyXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdGNhc2Uga2V5Q29kZXMuZW50ZXI6XHJcblx0XHRcdFx0XHQka2V5Ym9hcmQua2V5YWN0aW9uLmVudGVyKGJhc2UsIG51bGwsIGUpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdFx0Ly8gU2hvdyBjYXBzTG9ja1xyXG5cdFx0XHRcdGNhc2Uga2V5Q29kZXMuY2Fwc0xvY2s6XHJcblx0XHRcdFx0XHRiYXNlLnNoaWZ0QWN0aXZlID0gYmFzZS5jYXBzTG9jayA9ICFiYXNlLmNhcHNMb2NrO1xyXG5cdFx0XHRcdFx0YmFzZS5zaG93U2V0KCk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0Y2FzZSBrZXlDb2Rlcy5WOlxyXG5cdFx0XHRcdFx0Ly8gcHJldmVudCBjdHJsLXYvY21kLXZcclxuXHRcdFx0XHRcdGlmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSB7XHJcblx0XHRcdFx0XHRcdGlmIChvLnByZXZlbnRQYXN0ZSkge1xyXG5cdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YmFzZS5jaGVja0NvbWJvcygpOyAvLyBjaGVjayBwYXN0ZWQgY29udGVudFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYmluZCgnbW91c2V1cCB0b3VjaGVuZCAnLnNwbGl0KCcgJykuam9pbihuYW1lc3BhY2UgKyAnICcpLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0YmFzZS5sYXN0LnZpcnR1YWwgPSB0cnVlO1xyXG5cdFx0XHRcdGJhc2Uuc2F2ZUNhcmV0KCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIHByZXZlbnQga2V5Ym9hcmQgZXZlbnQgYnViYmxpbmdcclxuXHRcdGJhc2UuJGtleWJvYXJkLmJpbmQoJ21vdXNlZG93biBjbGljayB0b3VjaHN0YXJ0ICcuc3BsaXQoJyAnKS5qb2luKGJhc2UubmFtZXNwYWNlICsgJyAnKSwgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0aWYgKCFiYXNlLmlzQ3VycmVudCgpKSB7XHJcblx0XHRcdFx0YmFzZS5yZXZlYWwoKTtcclxuXHRcdFx0XHQkKGJhc2UuZWwub3duZXJEb2N1bWVudCkudHJpZ2dlcignY2hlY2trZXlib2FyZCcgKyBiYXNlLm5hbWVzcGFjZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0YmFzZS5zZXRGb2N1cygpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gSWYgcHJldmVudGluZyBwYXN0ZSwgYmxvY2sgY29udGV4dCBtZW51IChyaWdodCBjbGljaylcclxuXHRcdGlmIChvLnByZXZlbnRQYXN0ZSkge1xyXG5cdFx0XHRiYXNlLiRwcmV2aWV3LmJpbmQoJ2NvbnRleHRtZW51JyArIGJhc2UubmFtZXNwYWNlLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGJhc2UuJGVsLmJpbmQoJ2NvbnRleHRtZW51JyArIGJhc2UubmFtZXNwYWNlLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdH07XHJcblxyXG5cdGJhc2UuYmluZEJ1dHRvbiA9IGZ1bmN0aW9uKGV2ZW50cywgaGFuZGxlcikge1xyXG5cdFx0dmFyIGJ1dHRvbiA9ICcuJyArICRrZXlib2FyZC5jc3Mua2V5QnV0dG9uLFxyXG5cdFx0XHRjYWxsYmFjayA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdC8vIHNhdmUgY2xvc2VzdCBrZXlib2FyZCB3cmFwcGVyL2lucHV0IHRvIGNoZWNrIGluIGNoZWNrQ2xvc2UgZnVuY3Rpb25cclxuXHRcdFx0XHRlLiR0YXJnZXQgPSAkKHRoaXMpLmNsb3Nlc3QoJy4nICsgJGtleWJvYXJkLmNzcy5rZXlib2FyZCArICcsIC4nICsgJGtleWJvYXJkLmNzcy5pbnB1dCk7XHJcblx0XHRcdFx0aGFuZGxlci5jYWxsKHRoaXMsIGUpO1xyXG5cdFx0XHR9O1xyXG5cdFx0aWYgKCQuZm4ub24pIHtcclxuXHRcdFx0Ly8galF1ZXJ5IHYxLjcrXHJcblx0XHRcdGJhc2UuJGtleWJvYXJkLm9uKGV2ZW50cywgYnV0dG9uLCBjYWxsYmFjayk7XHJcblx0XHR9IGVsc2UgaWYgKCQuZm4uZGVsZWdhdGUpIHtcclxuXHRcdFx0Ly8galF1ZXJ5IHYxLjQuMiAtIDMuMC4wXHJcblx0XHRcdGJhc2UuJGtleWJvYXJkLmRlbGVnYXRlKGJ1dHRvbiwgZXZlbnRzLCBjYWxsYmFjayk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gYmFzZTtcclxuXHR9O1xyXG5cclxuXHRiYXNlLnVuYmluZEJ1dHRvbiA9IGZ1bmN0aW9uKG5hbWVzcGFjZSkge1xyXG5cdFx0aWYgKCQuZm4ub2ZmKSB7XHJcblx0XHRcdC8vIGpRdWVyeSB2MS43K1xyXG5cdFx0XHRiYXNlLiRrZXlib2FyZC5vZmYobmFtZXNwYWNlKTtcclxuXHRcdH0gZWxzZSBpZiAoJC5mbi51bmRlbGVnYXRlKSB7XHJcblx0XHRcdC8vIGpRdWVyeSB2MS40LjIgLSAzLjAuMCAobmFtZXNwYWNlIG9ubHkgYWRkZWQgaW4gdjEuNilcclxuXHRcdFx0YmFzZS4ka2V5Ym9hcmQudW5kZWxlZ2F0ZSgnLicgKyAka2V5Ym9hcmQuY3NzLmtleUJ1dHRvbiwgbmFtZXNwYWNlKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBiYXNlO1xyXG5cdH07XHJcblxyXG5cdGJhc2UuYmluZEtleXMgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIga2Jjc3MgPSAka2V5Ym9hcmQuY3NzO1xyXG5cdFx0YmFzZVxyXG5cdFx0XHQudW5iaW5kQnV0dG9uKGJhc2UubmFtZXNwYWNlICsgJyAnICsgYmFzZS5uYW1lc3BhY2UgKyAna2InKVxyXG5cdFx0XHQvLyBDaGFuZ2UgaG92ZXIgY2xhc3MgYW5kIHRvb2x0aXAgLSBtb3ZlZCB0aGlzIHRvdWNoc3RhcnQgYmVmb3JlIG9wdGlvbi5rZXlCaW5kaW5nIHRvdWNoc3RhcnRcclxuXHRcdFx0Ly8gdG8gcHJldmVudCBtb3VzZXdoZWVsIGxhZy9kdXBsaWNhdGlvbiAtIEZpeGVzICMzNzkgJiAjNDExXHJcblx0XHRcdC5iaW5kQnV0dG9uKCdtb3VzZWVudGVyIG1vdXNlbGVhdmUgdG91Y2hzdGFydCAnLnNwbGl0KCcgJykuam9pbihiYXNlLm5hbWVzcGFjZSArICcgJyksIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0aWYgKChvLmFsd2F5c09wZW4gfHwgby51c2VyQ2xvc2VkKSAmJiBlLnR5cGUgIT09ICdtb3VzZWxlYXZlJyAmJiAhYmFzZS5pc0N1cnJlbnQoKSkge1xyXG5cdFx0XHRcdFx0YmFzZS5yZXZlYWwoKTtcclxuXHRcdFx0XHRcdGJhc2Uuc2V0Rm9jdXMoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCFiYXNlLmlzQ3VycmVudCgpIHx8IHRoaXMuZGlzYWJsZWQpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dmFyICRrZXlzLCB0eHQsXHJcblx0XHRcdFx0XHRsYXN0ID0gYmFzZS5sYXN0LFxyXG5cdFx0XHRcdFx0JHRoaXMgPSAkKHRoaXMpLFxyXG5cdFx0XHRcdFx0dHlwZSA9IGUudHlwZTtcclxuXHJcblx0XHRcdFx0aWYgKG8udXNlV2hlZWwgJiYgYmFzZS53aGVlbCkge1xyXG5cdFx0XHRcdFx0JGtleXMgPSBiYXNlLmdldExheWVycygkdGhpcyk7XHJcblx0XHRcdFx0XHR0eHQgPSAoJGtleXMubGVuZ3RoID8gJGtleXMubWFwKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gJCh0aGlzKS5hdHRyKCdkYXRhLXZhbHVlJykgfHwgJyc7XHJcblx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHRcdC5nZXQoKSA6ICcnKSB8fCBbJHRoaXMudGV4dCgpXTtcclxuXHRcdFx0XHRcdGxhc3Qud2hlZWxfJEtleXMgPSAka2V5cztcclxuXHRcdFx0XHRcdGxhc3Qud2hlZWxMYXllcnMgPSB0eHQ7XHJcblx0XHRcdFx0XHRsYXN0LndoZWVsSW5kZXggPSAkLmluQXJyYXkoJHRoaXMuYXR0cignZGF0YS12YWx1ZScpLCB0eHQpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCh0eXBlID09PSAnbW91c2VlbnRlcicgfHwgdHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSAmJiBiYXNlLmVsLnR5cGUgIT09ICdwYXNzd29yZCcgJiZcclxuXHRcdFx0XHRcdCEkdGhpcy5oYXNDbGFzcyhvLmNzcy5idXR0b25EaXNhYmxlZCkpIHtcclxuXHRcdFx0XHRcdCR0aGlzLmFkZENsYXNzKG8uY3NzLmJ1dHRvbkhvdmVyKTtcclxuXHRcdFx0XHRcdGlmIChvLnVzZVdoZWVsICYmIGJhc2Uud2hlZWwpIHtcclxuXHRcdFx0XHRcdFx0JHRoaXMuYXR0cigndGl0bGUnLCBmdW5jdGlvbiAoaSwgdCkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIHNob3cgbW91c2Ugd2hlZWwgbWVzc2FnZVxyXG5cdFx0XHRcdFx0XHRcdHJldHVybiAoYmFzZS53aGVlbCAmJiB0ID09PSAnJyAmJiBiYXNlLnNldHMgJiYgdHh0Lmxlbmd0aCA+IDEgJiYgdHlwZSAhPT0gJ3RvdWNoc3RhcnQnKSA/XHJcblx0XHRcdFx0XHRcdFx0XHRvLndoZWVsTWVzc2FnZSA6IHQ7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAodHlwZSA9PT0gJ21vdXNlbGVhdmUnKSB7XHJcblx0XHRcdFx0XHQvLyBuZWVkZWQgb3IgSUUgZmxpY2tlcnMgcmVhbGx5IGJhZFxyXG5cdFx0XHRcdFx0JHRoaXMucmVtb3ZlQ2xhc3MoKGJhc2UuZWwudHlwZSA9PT0gJ3Bhc3N3b3JkJykgPyAnJyA6IG8uY3NzLmJ1dHRvbkhvdmVyKTtcclxuXHRcdFx0XHRcdGlmIChvLnVzZVdoZWVsICYmIGJhc2Uud2hlZWwpIHtcclxuXHRcdFx0XHRcdFx0bGFzdC53aGVlbEluZGV4ID0gMDtcclxuXHRcdFx0XHRcdFx0bGFzdC53aGVlbExheWVycyA9IFtdO1xyXG5cdFx0XHRcdFx0XHRsYXN0LndoZWVsXyRLZXlzID0gW107XHJcblx0XHRcdFx0XHRcdCR0aGlzXHJcblx0XHRcdFx0XHRcdFx0LmF0dHIoJ3RpdGxlJywgZnVuY3Rpb24gKGksIHQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAodCA9PT0gby53aGVlbE1lc3NhZ2UpID8gJycgOiB0O1xyXG5cdFx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHRcdFx0Lmh0bWwoJHRoaXMuYXR0cignZGF0YS1odG1sJykpOyAvLyByZXN0b3JlIG9yaWdpbmFsIGJ1dHRvbiB0ZXh0XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQvLyBrZXlCaW5kaW5nID0gJ21vdXNlZG93biB0b3VjaHN0YXJ0JyBieSBkZWZhdWx0XHJcblx0XHRcdC5iaW5kQnV0dG9uKG8ua2V5QmluZGluZy5zcGxpdCgnICcpLmpvaW4oYmFzZS5uYW1lc3BhY2UgKyAnICcpICsgYmFzZS5uYW1lc3BhY2UgKyAnICcgK1xyXG5cdFx0XHRcdCRrZXlib2FyZC5ldmVudHMua2JSZXBlYXRlciwgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0Ly8gcHJldmVudCBlcnJvcnMgd2hlbiBleHRlcm5hbCB0cmlnZ2VycyBhdHRlbXB0IHRvICd0eXBlJyAtIHNlZSBpc3N1ZSAjMTU4XHJcblx0XHRcdFx0aWYgKCFiYXNlLiRrZXlib2FyZC5pcygnOnZpc2libGUnKSB8fCB0aGlzLmRpc2FibGVkKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHZhciBhY3Rpb24sXHJcblx0XHRcdFx0XHRsYXN0ID0gYmFzZS5sYXN0LFxyXG5cdFx0XHRcdFx0JGtleSA9ICQodGhpcyksXHJcblx0XHRcdFx0XHQvLyBwcmV2ZW50IG1vdXNlZG93biAmIHRvdWNoc3RhcnQgZnJvbSBib3RoIGZpcmluZyBldmVudHMgYXQgdGhlIHNhbWUgdGltZSAtIHNlZSAjMTg0XHJcblx0XHRcdFx0XHR0aW1lciA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cclxuXHRcdFx0XHRpZiAoby51c2VXaGVlbCAmJiBiYXNlLndoZWVsKSB7XHJcblx0XHRcdFx0XHQvLyBnZXQga2V5cyBmcm9tIG90aGVyIGxheWVycy9rZXlzZXRzIChzaGlmdCwgYWx0LCBtZXRhLCBldGMpIHRoYXQgbGluZSB1cCBieSBkYXRhLXBvc2l0aW9uXHJcblx0XHRcdFx0XHQvLyB0YXJnZXQgbW91c2V3aGVlbCBzZWxlY3RlZCBrZXlcclxuXHRcdFx0XHRcdCRrZXkgPSBsYXN0LndoZWVsXyRLZXlzLmxlbmd0aCAmJiBsYXN0LndoZWVsSW5kZXggPiAtMSA/IGxhc3Qud2hlZWxfJEtleXMuZXEobGFzdC53aGVlbEluZGV4KSA6ICRrZXk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGFjdGlvbiA9ICRrZXkuYXR0cignZGF0YS1hY3Rpb24nKTtcclxuXHRcdFx0XHRpZiAodGltZXIgLSAobGFzdC5ldmVudFRpbWUgfHwgMCkgPCBvLnByZXZlbnREb3VibGVFdmVudFRpbWUpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bGFzdC5ldmVudFRpbWUgPSB0aW1lcjtcclxuXHRcdFx0XHRsYXN0LmV2ZW50ID0gZTtcclxuXHRcdFx0XHRsYXN0LnZpcnR1YWwgPSB0cnVlO1xyXG5cdFx0XHRcdGxhc3QuJGtleSA9ICRrZXk7XHJcblx0XHRcdFx0bGFzdC5rZXkgPSAka2V5LmF0dHIoJ2RhdGEtdmFsdWUnKTtcclxuXHRcdFx0XHRsYXN0LmtleVByZXNzID0gJyc7XHJcblx0XHRcdFx0Ly8gU3RhcnQgY2FyZXQgaW4gSUUgd2hlbiBub3QgZm9jdXNlZCAoaGFwcGVucyB3aXRoIGVhY2ggdmlydHVhbCBrZXlib2FyZCBidXR0b24gY2xpY2tcclxuXHRcdFx0XHRiYXNlLnNldEZvY3VzKCk7XHJcblx0XHRcdFx0aWYgKC9ebWV0YS8udGVzdChhY3Rpb24pKSB7XHJcblx0XHRcdFx0XHRhY3Rpb24gPSAnbWV0YSc7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIGtleWFjdGlvbiBpcyBhZGRlZCBhcyBhIHN0cmluZywgb3ZlcnJpZGUgb3JpZ2luYWwgYWN0aW9uICYgdGV4dFxyXG5cdFx0XHRcdGlmIChhY3Rpb24gPT09IGxhc3Qua2V5ICYmIHR5cGVvZiAka2V5Ym9hcmQua2V5YWN0aW9uW2FjdGlvbl0gPT09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFx0XHRsYXN0LmtleSA9IGFjdGlvbiA9ICRrZXlib2FyZC5rZXlhY3Rpb25bYWN0aW9uXTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGFjdGlvbiBpbiAka2V5Ym9hcmQua2V5YWN0aW9uICYmIHR5cGVvZiAka2V5Ym9hcmQua2V5YWN0aW9uW2FjdGlvbl0gPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRcdC8vIHN0b3AgcHJvY2Vzc2luZyBpZiBhY3Rpb24gcmV0dXJucyBmYWxzZSAoY2xvc2UgJiBjYW5jZWwpXHJcblx0XHRcdFx0XHRpZiAoJGtleWJvYXJkLmtleWFjdGlvblthY3Rpb25dKGJhc2UsIHRoaXMsIGUpID09PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRhY3Rpb24gPSBudWxsOyAvLyBwcmV2ZW50IGluc2VydGluZyBhY3Rpb24gbmFtZVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBzdG9wIHByb2Nlc3NpbmcgaWYga2V5Ym9hcmQgY2xvc2VkIGFuZCBrZXlhY3Rpb24gZGlkIG5vdCByZXR1cm4gZmFsc2UgLSBzZWUgIzUzNlxyXG5cdFx0XHRcdGlmICghYmFzZS5oYXNLZXlib2FyZCgpKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICh0eXBlb2YgYWN0aW9uICE9PSAndW5kZWZpbmVkJyAmJiBhY3Rpb24gIT09IG51bGwpIHtcclxuXHRcdFx0XHRcdGxhc3Qua2V5ID0gJCh0aGlzKS5oYXNDbGFzcyhrYmNzcy5rZXlBY3Rpb24pID8gYWN0aW9uIDogbGFzdC5rZXk7XHJcblx0XHRcdFx0XHRiYXNlLmluc2VydFRleHQobGFzdC5rZXkpO1xyXG5cdFx0XHRcdFx0aWYgKCFiYXNlLmNhcHNMb2NrICYmICFvLnN0aWNreVNoaWZ0ICYmICFlLnNoaWZ0S2V5KSB7XHJcblx0XHRcdFx0XHRcdGJhc2Uuc2hpZnRBY3RpdmUgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0YmFzZS5zaG93U2V0KCRrZXkuYXR0cignZGF0YS1uYW1lJykpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBzZXQgY2FyZXQgaWYgY2FyZXQgbW92ZWQgYnkgYWN0aW9uIGZ1bmN0aW9uOyBhbHNvLCBhdHRlbXB0IHRvIGZpeCBpc3N1ZSAjMTMxXHJcblx0XHRcdFx0JGtleWJvYXJkLmNhcmV0KGJhc2UuJHByZXZpZXcsIGxhc3QpO1xyXG5cdFx0XHRcdGJhc2UuY2hlY2tDb21ib3MoKTtcclxuXHRcdFx0XHRlID0gJC5leHRlbmQoe30sIGUsICQuRXZlbnQoJGtleWJvYXJkLmV2ZW50cy5rYkNoYW5nZSkpO1xyXG5cdFx0XHRcdGUudGFyZ2V0ID0gYmFzZS5lbDtcclxuXHRcdFx0XHRlLmFjdGlvbiA9IGxhc3Qua2V5O1xyXG5cdFx0XHRcdGJhc2UuJGVsLnRyaWdnZXIoZSwgW2Jhc2UsIGJhc2UuZWxdKTtcclxuXHRcdFx0XHRsYXN0LnByZVZhbCA9ICcnICsgbGFzdC52YWw7XHJcblx0XHRcdFx0YmFzZS5zYXZlTGFzdENoYW5nZSgpO1xyXG5cclxuXHRcdFx0XHRpZiAodHlwZW9mIG8uY2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHRlLnR5cGUgPSAka2V5Ym9hcmQuZXZlbnRzLmlucHV0Q2hhbmdlO1xyXG5cdFx0XHRcdFx0by5jaGFuZ2UoZSwgYmFzZSwgYmFzZS5lbCk7XHJcblx0XHRcdFx0XHQvLyByZXR1cm4gZmFsc2UgdG8gcHJldmVudCByZW9wZW5pbmcga2V5Ym9hcmQgaWYgYmFzZS5hY2NlcHQoKSB3YXMgY2FsbGVkXHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fSlcclxuXHRcdFx0Ly8gdXNpbmcgJ2tiJyBuYW1lc3BhY2UgZm9yIG1vdXNlIHJlcGVhdCBmdW5jdGlvbmFsaXR5IHRvIGtlZXAgaXQgc2VwYXJhdGVcclxuXHRcdFx0Ly8gSSBuZWVkIHRvIHRyaWdnZXIgYSAncmVwZWF0ZXIua2V5Ym9hcmQnIHRvIG1ha2UgaXQgd29ya1xyXG5cdFx0XHQuYmluZEJ1dHRvbignbW91c2V1cCcgKyBiYXNlLm5hbWVzcGFjZSArICcgJyArICdtb3VzZWxlYXZlIHRvdWNoZW5kIHRvdWNobW92ZSB0b3VjaGNhbmNlbCAnLnNwbGl0KCcgJylcclxuXHRcdFx0XHQuam9pbihiYXNlLm5hbWVzcGFjZSArICdrYiAnKSwgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHRiYXNlLmxhc3QudmlydHVhbCA9IHRydWU7XHJcblx0XHRcdFx0dmFyIG9mZnNldCxcclxuXHRcdFx0XHRcdCR0aGlzID0gJCh0aGlzKTtcclxuXHRcdFx0XHRpZiAoZS50eXBlID09PSAndG91Y2htb3ZlJykge1xyXG5cdFx0XHRcdFx0Ly8gaWYgbW92aW5nIHdpdGhpbiB0aGUgc2FtZSBrZXksIGRvbid0IHN0b3AgcmVwZWF0aW5nXHJcblx0XHRcdFx0XHRvZmZzZXQgPSAkdGhpcy5vZmZzZXQoKTtcclxuXHRcdFx0XHRcdG9mZnNldC5yaWdodCA9IG9mZnNldC5sZWZ0ICsgJHRoaXMub3V0ZXJXaWR0aCgpO1xyXG5cdFx0XHRcdFx0b2Zmc2V0LmJvdHRvbSA9IG9mZnNldC50b3AgKyAkdGhpcy5vdXRlckhlaWdodCgpO1xyXG5cdFx0XHRcdFx0aWYgKGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VYID49IG9mZnNldC5sZWZ0ICYmXHJcblx0XHRcdFx0XHRcdGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VYIDwgb2Zmc2V0LnJpZ2h0ICYmXHJcblx0XHRcdFx0XHRcdGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VZID49IG9mZnNldC50b3AgJiZcclxuXHRcdFx0XHRcdFx0ZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVkgPCBvZmZzZXQuYm90dG9tKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSBpZiAoLyhtb3VzZWxlYXZlfHRvdWNoZW5kfHRvdWNoY2FuY2VsKS9pLnRlc3QoZS50eXBlKSkge1xyXG5cdFx0XHRcdFx0JHRoaXMucmVtb3ZlQ2xhc3Moby5jc3MuYnV0dG9uSG92ZXIpOyAvLyBuZWVkZWQgZm9yIHRvdWNoIGRldmljZXNcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aWYgKCFvLm5vRm9jdXMgJiYgYmFzZS5pc0N1cnJlbnQoKSAmJiBiYXNlLmlzVmlzaWJsZSgpKSB7XHJcblx0XHRcdFx0XHRcdGJhc2UuJHByZXZpZXcuZm9jdXMoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmIChiYXNlLmNoZWNrQ2FyZXQpIHtcclxuXHRcdFx0XHRcdFx0JGtleWJvYXJkLmNhcmV0KGJhc2UuJHByZXZpZXcsIGJhc2UubGFzdCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGJhc2UubW91c2VSZXBlYXQgPSBbZmFsc2UsICcnXTtcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoYmFzZS5yZXBlYXRlcik7IC8vIG1ha2Ugc3VyZSBrZXkgcmVwZWF0IHN0b3BzIVxyXG5cdFx0XHRcdGlmIChvLmFjY2VwdFZhbGlkICYmIG8uYXV0b0FjY2VwdE9uVmFsaWQpIHtcclxuXHRcdFx0XHRcdGlmIChcclxuXHRcdFx0XHRcdFx0dHlwZW9mIG8udmFsaWRhdGUgPT09ICdmdW5jdGlvbicgJiZcclxuXHRcdFx0XHRcdFx0by52YWxpZGF0ZShiYXNlLCBiYXNlLmdldFZhbHVlKCkpXHJcblx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0YmFzZS4kcHJldmlldy5ibHVyKCk7XHJcblx0XHRcdFx0XHRcdGJhc2UuYWNjZXB0KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSlcclxuXHRcdFx0Ly8gcHJldmVudCBmb3JtIHN1Ym1pdHMgd2hlbiBrZXlib2FyZCBpcyBib3VuZCBsb2NhbGx5IC0gaXNzdWUgIzY0XHJcblx0XHRcdC5iaW5kQnV0dG9uKCdjbGljaycgKyBiYXNlLm5hbWVzcGFjZSwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSlcclxuXHRcdFx0Ly8gQWxsb3cgbW91c2V3aGVlbCB0byBzY3JvbGwgdGhyb3VnaCBvdGhlciBrZXlzZXRzIG9mIHRoZSBzYW1lIChub24tYWN0aW9uKSBrZXlcclxuXHRcdFx0LmJpbmRCdXR0b24oJ21vdXNld2hlZWwnICsgYmFzZS5uYW1lc3BhY2UsIGJhc2UudGhyb3R0bGVFdmVudChmdW5jdGlvbiAoZSwgZGVsdGEpIHtcclxuXHRcdFx0XHR2YXIgJGJ0biA9ICQodGhpcyk7XHJcblx0XHRcdFx0Ly8gbm8gbW91c2UgcmVwZWF0IGZvciBhY3Rpb24ga2V5cyAoc2hpZnQsIGN0cmwsIGFsdCwgbWV0YSwgZXRjKVxyXG5cdFx0XHRcdGlmICghJGJ0biB8fCAkYnRuLmhhc0NsYXNzKGtiY3NzLmtleUFjdGlvbikgfHwgYmFzZS5sYXN0LndoZWVsXyRLZXlzWzBdICE9PSB0aGlzKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmIChvLnVzZVdoZWVsICYmIGJhc2Uud2hlZWwpIHtcclxuXHRcdFx0XHRcdC8vIGRlbHRhWSB1c2VkIGJ5IG5ld2VyIHZlcnNpb25zIG9mIG1vdXNld2hlZWwgcGx1Z2luXHJcblx0XHRcdFx0XHRkZWx0YSA9IGRlbHRhIHx8IGUuZGVsdGFZO1xyXG5cdFx0XHRcdFx0dmFyIG4sXHJcblx0XHRcdFx0XHRcdHR4dCA9IGJhc2UubGFzdC53aGVlbExheWVycyB8fCBbXTtcclxuXHRcdFx0XHRcdGlmICh0eHQubGVuZ3RoID4gMSkge1xyXG5cdFx0XHRcdFx0XHRuID0gYmFzZS5sYXN0LndoZWVsSW5kZXggKyAoZGVsdGEgPiAwID8gLTEgOiAxKTtcclxuXHRcdFx0XHRcdFx0aWYgKG4gPiB0eHQubGVuZ3RoIC0gMSkge1xyXG5cdFx0XHRcdFx0XHRcdG4gPSAwO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmIChuIDwgMCkge1xyXG5cdFx0XHRcdFx0XHRcdG4gPSB0eHQubGVuZ3RoIC0gMTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0biA9IDA7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRiYXNlLmxhc3Qud2hlZWxJbmRleCA9IG47XHJcblx0XHRcdFx0XHQkYnRuLmh0bWwodHh0W25dKTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIDMwKSlcclxuXHRcdFx0LmJpbmRCdXR0b24oJ21vdXNlZG93biB0b3VjaHN0YXJ0ICcuc3BsaXQoJyAnKS5qb2luKGJhc2UubmFtZXNwYWNlICsgJ2tiICcpLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0dmFyICRidG4gPSAkKHRoaXMpO1xyXG5cdFx0XHRcdC8vIG5vIG1vdXNlIHJlcGVhdCBmb3IgYWN0aW9uIGtleXMgKHNoaWZ0LCBjdHJsLCBhbHQsIG1ldGEsIGV0YylcclxuXHRcdFx0XHRpZiAoXHJcblx0XHRcdFx0XHQhJGJ0biB8fCAoXHJcblx0XHRcdFx0XHRcdCRidG4uaGFzQ2xhc3Moa2Jjc3Mua2V5QWN0aW9uKSAmJlxyXG5cdFx0XHRcdFx0XHQvLyBtb3VzZSByZXBlYXRlZCBhY3Rpb24ga2V5IGV4Y2VwdGlvbnNcclxuXHRcdFx0XHRcdFx0ISRidG4uaXMoJy4nICsga2Jjc3Mua2V5UHJlZml4ICsgKCd0YWIgYmtzcCBzcGFjZSBlbnRlcicuc3BsaXQoJyAnKS5qb2luKCcsLicgKyBrYmNzcy5rZXlQcmVmaXgpKSlcclxuXHRcdFx0XHRcdClcclxuXHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKG8ucmVwZWF0UmF0ZSAhPT0gMCkge1xyXG5cdFx0XHRcdFx0Ly8gc2F2ZSB0aGUga2V5LCBtYWtlIHN1cmUgd2UgYXJlIHJlcGVhdGluZyB0aGUgcmlnaHQgb25lIChmYXN0IHR5cGVycylcclxuXHRcdFx0XHRcdGJhc2UubW91c2VSZXBlYXQgPSBbdHJ1ZSwgJGJ0bl07XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdFx0Ly8gZG9uJ3QgcmVwZWF0IGtleXMgaWYgaXQgaXMgZGlzYWJsZWQgLSBzZWUgIzQzMVxyXG5cdFx0XHRcdFx0XHRpZiAoYmFzZSAmJiBiYXNlLm1vdXNlUmVwZWF0WzBdICYmIGJhc2UubW91c2VSZXBlYXRbMV0gPT09ICRidG4gJiYgISRidG5bMF0uZGlzYWJsZWQpIHtcclxuXHRcdFx0XHRcdFx0XHRiYXNlLnJlcGVhdEtleSgkYnRuKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSwgby5yZXBlYXREZWxheSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSk7XHJcblx0fTtcclxuXHJcblx0Ly8gTm8gY2FsbCBvbiB0YWlsaW5nIGV2ZW50XHJcblx0YmFzZS50aHJvdHRsZUV2ZW50ID0gZnVuY3Rpb24oY2IsIHRpbWUpIHtcclxuXHRcdHZhciBpbnRlcm07XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICghaW50ZXJtKSB7XHJcblx0XHRcdFx0Y2IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHRcdFx0XHRpbnRlcm0gPSB0cnVlO1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRpbnRlcm0gPSBmYWxzZTtcclxuXHRcdFx0XHR9LCB0aW1lKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9O1xyXG5cclxuXHRiYXNlLmV4ZWNDb21tYW5kID0gZnVuY3Rpb24oY21kLCBzdHIpIHtcclxuXHRcdGJhc2UuZWwub3duZXJEb2N1bWVudC5leGVjQ29tbWFuZChjbWQsIGZhbHNlLCBzdHIpO1xyXG5cdFx0YmFzZS5lbC5ub3JtYWxpemUoKTtcclxuXHRcdGlmIChvLnJlcG9zaXRpb24pIHtcclxuXHRcdFx0YmFzZS5yZXBvc2l0aW9uKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0YmFzZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgkZWwpIHtcclxuXHRcdCRlbCA9ICRlbCB8fCBiYXNlLiRwcmV2aWV3O1xyXG5cdFx0cmV0dXJuICRlbFtiYXNlLmlzQ29udGVudEVkaXRhYmxlID8gJ3RleHQnIDogJ3ZhbCddKCk7XHJcblx0fTtcclxuXHJcblx0YmFzZS5zZXRWYWx1ZSA9IGZ1bmN0aW9uICh0eHQsICRlbCkge1xyXG5cdFx0JGVsID0gJGVsIHx8IGJhc2UuJHByZXZpZXc7XHJcblx0XHRpZiAoYmFzZS5pc0NvbnRlbnRFZGl0YWJsZSkge1xyXG5cdFx0XHRpZiAodHh0ICE9PSAkZWwudGV4dCgpKSB7XHJcblx0XHRcdFx0JGtleWJvYXJkLnJlcGxhY2VDb250ZW50KCRlbCwgdHh0KTtcclxuXHRcdFx0XHRiYXNlLnNhdmVDYXJldCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkZWwudmFsKHR4dCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gYmFzZTtcclxuXHR9O1xyXG5cclxuXHQvLyBJbnNlcnQgdGV4dCBhdCBjYXJldC9zZWxlY3Rpb24gLSB0aGFua3MgdG8gRGVyZWsgV2lja3dpcmUgZm9yIGZpeGluZyB0aGlzIHVwIVxyXG5cdGJhc2UuaW5zZXJ0VGV4dCA9IGZ1bmN0aW9uICh0eHQpIHtcclxuXHRcdGlmICghYmFzZS4kcHJldmlldykgeyByZXR1cm4gYmFzZTsgfVxyXG5cdFx0aWYgKHR5cGVvZiBvLmJlZm9yZUluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHR0eHQgPSBvLmJlZm9yZUluc2VydChiYXNlLmxhc3QuZXZlbnQsIGJhc2UsIGJhc2UuZWwsIHR4dCk7XHJcblx0XHR9XHJcblx0XHRpZiAodHlwZW9mIHR4dCA9PT0gJ3VuZGVmaW5lZCcgfHwgdHh0ID09PSBmYWxzZSkge1xyXG5cdFx0XHRiYXNlLmxhc3Qua2V5ID0gJyc7XHJcblx0XHRcdHJldHVybiBiYXNlO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJhc2UuaXNDb250ZW50RWRpdGFibGUpIHtcclxuXHRcdFx0cmV0dXJuIGJhc2UuaW5zZXJ0Q29udGVudEVkaXRhYmxlKHR4dCk7XHJcblx0XHR9XHJcblx0XHR2YXIgdCxcclxuXHRcdFx0YmtzcCA9IGZhbHNlLFxyXG5cdFx0XHRpc0Jrc3AgPSB0eHQgPT09ICdcXGInLFxyXG5cdFx0XHQvLyB1c2UgYmFzZS4kcHJldmlldy52YWwoKSBpbnN0ZWFkIG9mIGJhc2UucHJldmlldy52YWx1ZSAodmFsLmxlbmd0aCBpbmNsdWRlcyBjYXJyaWFnZSByZXR1cm5zIGluIElFKS5cclxuXHRcdFx0dmFsID0gYmFzZS5nZXRWYWx1ZSgpLFxyXG5cdFx0XHRwb3MgPSAka2V5Ym9hcmQuY2FyZXQoYmFzZS4kcHJldmlldyksXHJcblx0XHRcdGxlbiA9IHZhbC5sZW5ndGg7IC8vIHNhdmUgb3JpZ2luYWwgY29udGVudCBsZW5ndGhcclxuXHJcblx0XHQvLyBzaWxseSBJRSBjYXJldCBoYWNrcy4uLiBpdCBzaG91bGQgd29yayBjb3JyZWN0bHksIGJ1dCBuYXZpZ2F0aW5nIHVzaW5nIGFycm93IGtleXMgaW4gYSB0ZXh0YXJlYVxyXG5cdFx0Ly8gaXMgc3RpbGwgZGlmZmljdWx0XHJcblx0XHQvLyBpbiBJRSwgcG9zLmVuZCBjYW4gYmUgemVybyBhZnRlciBpbnB1dCBsb3NlcyBmb2N1c1xyXG5cdFx0aWYgKHBvcy5lbmQgPCBwb3Muc3RhcnQpIHtcclxuXHRcdFx0cG9zLmVuZCA9IHBvcy5zdGFydDtcclxuXHRcdH1cclxuXHRcdGlmIChwb3Muc3RhcnQgPiBsZW4pIHtcclxuXHRcdFx0cG9zLmVuZCA9IHBvcy5zdGFydCA9IGxlbjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoYmFzZS5pc1RleHRBcmVhKSB7XHJcblx0XHRcdC8vIFRoaXMgbWFrZXMgc3VyZSB0aGUgY2FyZXQgbW92ZXMgdG8gdGhlIG5leHQgbGluZSBhZnRlciBjbGlja2luZyBvbiBlbnRlciAobWFudWFsIHR5cGluZyB3b3JrcyBmaW5lKVxyXG5cdFx0XHRpZiAoJGtleWJvYXJkLm1zaWUgJiYgdmFsLnN1YnN0cmluZyhwb3Muc3RhcnQsIHBvcy5zdGFydCArIDEpID09PSAnXFxuJykge1xyXG5cdFx0XHRcdHBvcy5zdGFydCArPSAxO1xyXG5cdFx0XHRcdHBvcy5lbmQgKz0gMTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHQgPSBwb3Muc3RhcnQ7XHJcblx0XHRpZiAodHh0ID09PSAne2R9Jykge1xyXG5cdFx0XHR0eHQgPSAnJztcclxuXHRcdFx0cG9zLmVuZCArPSAxO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChpc0Jrc3ApIHtcclxuXHRcdFx0dHh0ID0gJyc7XHJcblx0XHRcdGJrc3AgPSBpc0Jrc3AgJiYgdCA9PT0gcG9zLmVuZCAmJiB0ID4gMDtcclxuXHRcdH1cclxuXHRcdHZhbCA9IHZhbC5zdWJzdHJpbmcoMCwgdCAtIChia3NwID8gMSA6IDApKSArIHR4dCArIHZhbC5zdWJzdHJpbmcocG9zLmVuZCk7XHJcblx0XHR0ICs9IGJrc3AgPyAtMSA6IHR4dC5sZW5ndGg7XHJcblxyXG5cdFx0YmFzZS5zZXRWYWx1ZSh2YWwpO1xyXG5cdFx0YmFzZS5zYXZlQ2FyZXQodCwgdCk7IC8vIHNhdmUgY2FyZXQgaW4gY2FzZSBvZiBia3NwXHJcblx0XHRiYXNlLnNldFNjcm9sbCgpO1xyXG5cdFx0Ly8gc2VlICM1MDYuLiBhbGxvdyBjaGFpbmluZyBvZiBpbnNlcnRUZXh0XHJcblx0XHRyZXR1cm4gYmFzZTtcclxuXHR9O1xyXG5cclxuXHRiYXNlLmluc2VydENvbnRlbnRFZGl0YWJsZSA9IGZ1bmN0aW9uICh0eHQpIHtcclxuXHRcdGJhc2UuJHByZXZpZXcuZm9jdXMoKTtcclxuXHRcdGJhc2UuZXhlY0NvbW1hbmQoJ2luc2VydFRleHQnLCB0eHQpO1xyXG5cdFx0YmFzZS5zYXZlQ2FyZXQoKTtcclxuXHRcdHJldHVybiBiYXNlO1xyXG5cdH07XHJcblxyXG5cdC8vIGNoZWNrIG1heCBsZW5ndGhcclxuXHRiYXNlLmNoZWNrTWF4TGVuZ3RoID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYgKCFiYXNlLiRwcmV2aWV3KSB7IHJldHVybjsgfVxyXG5cdFx0dmFyIHN0YXJ0LCBjYXJldCxcclxuXHRcdFx0dmFsID0gYmFzZS5nZXRWYWx1ZSgpLFxyXG5cdFx0XHRsZW4gPSBiYXNlLmlzQ29udGVudEVkaXRhYmxlID8gJGtleWJvYXJkLmdldEVkaXRhYmxlTGVuZ3RoKGJhc2UuZWwpIDogdmFsLmxlbmd0aDtcclxuXHRcdGlmIChvLm1heExlbmd0aCAhPT0gZmFsc2UgJiYgbGVuID4gby5tYXhMZW5ndGgpIHtcclxuXHRcdFx0c3RhcnQgPSAka2V5Ym9hcmQuY2FyZXQoYmFzZS4kcHJldmlldykuc3RhcnQ7XHJcblx0XHRcdGNhcmV0ID0gTWF0aC5taW4oc3RhcnQsIG8ubWF4TGVuZ3RoKTtcclxuXHJcblx0XHRcdC8vIHByZXZlbnQgaW5zZXJ0aW5nIG5ldyBjaGFyYWN0ZXJzIHdoZW4gbWF4ZWQgIzI4OVxyXG5cdFx0XHRpZiAoIW8ubWF4SW5zZXJ0KSB7XHJcblx0XHRcdFx0dmFsID0gYmFzZS5sYXN0LnZhbDtcclxuXHRcdFx0XHRjYXJldCA9IHN0YXJ0IC0gMTsgLy8gbW92ZSBjYXJldCBiYWNrIG9uZVxyXG5cdFx0XHR9XHJcblx0XHRcdGJhc2Uuc2V0VmFsdWUodmFsLnN1YnN0cmluZygwLCBvLm1heExlbmd0aCkpO1xyXG5cdFx0XHQvLyByZXN0b3JlIGNhcmV0IG9uIGNoYW5nZSwgb3RoZXJ3aXNlIGl0IGVuZHMgdXAgYXQgdGhlIGVuZC5cclxuXHRcdFx0YmFzZS5zYXZlQ2FyZXQoY2FyZXQsIGNhcmV0KTtcclxuXHRcdH1cclxuXHRcdGlmIChiYXNlLiRkZWNCdG4ubGVuZ3RoKSB7XHJcblx0XHRcdGJhc2UuY2hlY2tEZWNpbWFsKCk7XHJcblx0XHR9XHJcblx0XHQvLyBhbGxvdyBjaGFpbmluZ1xyXG5cdFx0cmV0dXJuIGJhc2U7XHJcblx0fTtcclxuXHJcblx0Ly8gbW91c2Vkb3duIHJlcGVhdGVyXHJcblx0YmFzZS5yZXBlYXRLZXkgPSBmdW5jdGlvbiAoa2V5KSB7XHJcblx0XHRrZXkudHJpZ2dlcigka2V5Ym9hcmQuZXZlbnRzLmtiUmVwZWF0ZXIpO1xyXG5cdFx0aWYgKGJhc2UubW91c2VSZXBlYXRbMF0pIHtcclxuXHRcdFx0YmFzZS5yZXBlYXRlciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGlmIChiYXNlKXtcclxuXHRcdFx0XHRcdGJhc2UucmVwZWF0S2V5KGtleSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCBiYXNlLnJlcGVhdFRpbWUpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGJhc2UuZ2V0S2V5U2V0ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0dmFyIHNldHMgPSBbXTtcclxuXHRcdGlmIChiYXNlLmFsdEFjdGl2ZSkge1xyXG5cdFx0XHRzZXRzLnB1c2goJ2FsdCcpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJhc2Uuc2hpZnRBY3RpdmUpIHtcclxuXHRcdFx0c2V0cy5wdXNoKCdzaGlmdCcpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJhc2UubWV0YUFjdGl2ZSkge1xyXG5cdFx0XHQvLyBiYXNlLm1ldGFBY3RpdmUgY29udGFpbnMgdGhlIHN0cmluZyBuYW1lIG9mIHRoZVxyXG5cdFx0XHQvLyBjdXJyZW50IG1ldGEga2V5c2V0XHJcblx0XHRcdHNldHMucHVzaChiYXNlLm1ldGFBY3RpdmUpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHNldHMubGVuZ3RoID8gc2V0cy5qb2luKCcrJykgOiAnbm9ybWFsJztcclxuXHR9O1xyXG5cclxuXHQvLyBtYWtlIGl0IGVhc2llciB0byBzd2l0Y2gga2V5c2V0cyB2aWEgQVBJXHJcblx0Ly8gc2hvd0tleVNldCgnc2hpZnQrYWx0K21ldGExJylcclxuXHRiYXNlLnNob3dLZXlTZXQgPSBmdW5jdGlvbiAoc3RyKSB7XHJcblx0XHRpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0YmFzZS5sYXN0LmtleXNldCA9IFtiYXNlLnNoaWZ0QWN0aXZlLCBiYXNlLmFsdEFjdGl2ZSwgYmFzZS5tZXRhQWN0aXZlXTtcclxuXHRcdFx0YmFzZS5zaGlmdEFjdGl2ZSA9IC9zaGlmdC9pLnRlc3Qoc3RyKTtcclxuXHRcdFx0YmFzZS5hbHRBY3RpdmUgPSAvYWx0L2kudGVzdChzdHIpO1xyXG5cdFx0XHRpZiAoL1xcYm1ldGEvLnRlc3Qoc3RyKSkge1xyXG5cdFx0XHRcdGJhc2UubWV0YUFjdGl2ZSA9IHRydWU7XHJcblx0XHRcdFx0YmFzZS5zaG93U2V0KHN0ci5tYXRjaCgvXFxibWV0YVtcXHctXSsvaSlbMF0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGJhc2UubWV0YUFjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdGJhc2Uuc2hvd1NldCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRiYXNlLnNob3dTZXQoc3RyKTtcclxuXHRcdH1cclxuXHRcdC8vIGFsbG93IGNoYWluaW5nXHJcblx0XHRyZXR1cm4gYmFzZTtcclxuXHR9O1xyXG5cclxuXHRiYXNlLnNob3dTZXQgPSBmdW5jdGlvbiAobmFtZSkge1xyXG5cdFx0aWYgKCFiYXNlLmhhc0tleWJvYXJkKCkpIHsgcmV0dXJuOyB9XHJcblx0XHRvID0gYmFzZS5vcHRpb25zOyAvLyByZWZyZXNoIG9wdGlvbnNcclxuXHRcdHZhciBrYmNzcyA9ICRrZXlib2FyZC5jc3MsXHJcblx0XHRcdHByZWZpeCA9ICcuJyArIGtiY3NzLmtleVByZWZpeCxcclxuXHRcdFx0YWN0aXZlID0gby5jc3MuYnV0dG9uQWN0aXZlLFxyXG5cdFx0XHRrZXkgPSAnJyxcclxuXHRcdFx0dG9TaG93ID0gKGJhc2Uuc2hpZnRBY3RpdmUgPyAxIDogMCkgKyAoYmFzZS5hbHRBY3RpdmUgPyAyIDogMCk7XHJcblx0XHRpZiAoIWJhc2Uuc2hpZnRBY3RpdmUpIHtcclxuXHRcdFx0YmFzZS5jYXBzTG9jayA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0Ly8gY2hlY2sgbWV0YSBrZXkgc2V0XHJcblx0XHRpZiAoYmFzZS5tZXRhQWN0aXZlKSB7XHJcblx0XHRcdC8vIHJlbW92ZSBcIi1zaGlmdFwiIGFuZCBcIi1hbHRcIiBmcm9tIG1ldGEgbmFtZSBpZiBpdCBleGlzdHNcclxuXHRcdFx0aWYgKGJhc2Uuc2hpZnRBY3RpdmUpIHtcclxuXHRcdFx0XHRuYW1lID0gKG5hbWUgfHwgJycpLnJlcGxhY2UoJy1zaGlmdCcsICcnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoYmFzZS5hbHRBY3RpdmUpIHtcclxuXHRcdFx0XHRuYW1lID0gKG5hbWUgfHwgJycpLnJlcGxhY2UoJy1hbHQnLCAnJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gdGhlIG5hbWUgYXR0cmlidXRlIGNvbnRhaW5zIHRoZSBtZXRhIHNldCBuYW1lICdtZXRhOTknXHJcblx0XHRcdGtleSA9ICgvXm1ldGEvaS50ZXN0KG5hbWUpKSA/IG5hbWUgOiAnJztcclxuXHRcdFx0Ly8gc2F2ZSBhY3RpdmUgbWV0YSBrZXlzZXQgbmFtZVxyXG5cdFx0XHRpZiAoa2V5ID09PSAnJykge1xyXG5cdFx0XHRcdGtleSA9IChiYXNlLm1ldGFBY3RpdmUgPT09IHRydWUpID8gJycgOiBiYXNlLm1ldGFBY3RpdmU7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YmFzZS5tZXRhQWN0aXZlID0ga2V5O1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIGlmIG1ldGEga2V5c2V0IGRvZXNuJ3QgaGF2ZSBhIHNoaWZ0IG9yIGFsdCBrZXlzZXQsIHRoZW4gc2hvdyBqdXN0IHRoZSBtZXRhIGtleSBzZXRcclxuXHRcdFx0aWYgKCghby5zdGlja3lTaGlmdCAmJiBiYXNlLmxhc3Qua2V5c2V0WzJdICE9PSBiYXNlLm1ldGFBY3RpdmUpIHx8XHJcblx0XHRcdFx0KChiYXNlLnNoaWZ0QWN0aXZlIHx8IGJhc2UuYWx0QWN0aXZlKSAmJlxyXG5cdFx0XHRcdCFiYXNlLiRrZXlib2FyZC5maW5kKCcuJyArIGtiY3NzLmtleVNldCArICctJyArIGtleSArIGJhc2Uucm93c1t0b1Nob3ddKS5sZW5ndGgpKSB7XHJcblx0XHRcdFx0YmFzZS5zaGlmdEFjdGl2ZSA9IGJhc2UuYWx0QWN0aXZlID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoIW8uc3RpY2t5U2hpZnQgJiYgYmFzZS5sYXN0LmtleXNldFsyXSAhPT0gYmFzZS5tZXRhQWN0aXZlICYmIGJhc2Uuc2hpZnRBY3RpdmUpIHtcclxuXHRcdFx0Ly8gc3dpdGNoaW5nIGZyb20gbWV0YSBrZXkgc2V0IGJhY2sgdG8gZGVmYXVsdCwgcmVzZXQgc2hpZnQgJiBhbHQgaWYgdXNpbmcgc3RpY2t5U2hpZnRcclxuXHRcdFx0YmFzZS5zaGlmdEFjdGl2ZSA9IGJhc2UuYWx0QWN0aXZlID0gZmFsc2U7XHJcblx0XHR9XHJcblx0XHR0b1Nob3cgPSAoYmFzZS5zaGlmdEFjdGl2ZSA/IDEgOiAwKSArIChiYXNlLmFsdEFjdGl2ZSA/IDIgOiAwKTtcclxuXHRcdGtleSA9ICh0b1Nob3cgPT09IDAgJiYgIWJhc2UubWV0YUFjdGl2ZSkgPyAnLW5vcm1hbCcgOiAoa2V5ID09PSAnJykgPyAnJyA6ICctJyArIGtleTtcclxuXHRcdGlmICghYmFzZS4ka2V5Ym9hcmQuZmluZCgnLicgKyBrYmNzcy5rZXlTZXQgKyBrZXkgKyBiYXNlLnJvd3NbdG9TaG93XSkubGVuZ3RoKSB7XHJcblx0XHRcdC8vIGtleXNldCBkb2Vzbid0IGV4aXN0LCBzbyByZXN0b3JlIGxhc3Qga2V5c2V0IHNldHRpbmdzXHJcblx0XHRcdGJhc2Uuc2hpZnRBY3RpdmUgPSBiYXNlLmxhc3Qua2V5c2V0WzBdO1xyXG5cdFx0XHRiYXNlLmFsdEFjdGl2ZSA9IGJhc2UubGFzdC5rZXlzZXRbMV07XHJcblx0XHRcdGJhc2UubWV0YUFjdGl2ZSA9IGJhc2UubGFzdC5rZXlzZXRbMl07XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGJhc2UuJGtleWJvYXJkXHJcblx0XHRcdC5maW5kKHByZWZpeCArICdhbHQsJyArIHByZWZpeCArICdzaGlmdCwuJyArIGtiY3NzLmtleUFjdGlvbiArICdbY2xhc3MqPW1ldGFdJylcclxuXHRcdFx0LnJlbW92ZUNsYXNzKGFjdGl2ZSlcclxuXHRcdFx0LmVuZCgpXHJcblx0XHRcdC5maW5kKHByZWZpeCArICdhbHQnKVxyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoYWN0aXZlLCBiYXNlLmFsdEFjdGl2ZSlcclxuXHRcdFx0LmVuZCgpXHJcblx0XHRcdC5maW5kKHByZWZpeCArICdzaGlmdCcpXHJcblx0XHRcdC50b2dnbGVDbGFzcyhhY3RpdmUsIGJhc2Uuc2hpZnRBY3RpdmUpXHJcblx0XHRcdC5lbmQoKVxyXG5cdFx0XHQuZmluZChwcmVmaXggKyAnbG9jaycpXHJcblx0XHRcdC50b2dnbGVDbGFzcyhhY3RpdmUsIGJhc2UuY2Fwc0xvY2spXHJcblx0XHRcdC5lbmQoKVxyXG5cdFx0XHQuZmluZCgnLicgKyBrYmNzcy5rZXlTZXQpXHJcblx0XHRcdC5oaWRlKClcclxuXHRcdFx0LmVuZCgpXHJcblx0XHRcdC5maW5kKCcuJyArIChrYmNzcy5rZXlBY3Rpb24gKyBwcmVmaXggKyBrZXkpLnJlcGxhY2UoJy0tJywgJy0nKSlcclxuXHRcdFx0LmFkZENsYXNzKGFjdGl2ZSk7XHJcblxyXG5cdFx0Ly8gc2hvdyBrZXlzZXQgdXNpbmcgaW5saW5lLWJsb2NrICggZXh0ZW5kZXIgbGF5b3V0IHdpbGwgdGhlbiBsaW5lIHVwIClcclxuXHRcdGJhc2UuJGtleWJvYXJkLmZpbmQoJy4nICsga2Jjc3Mua2V5U2V0ICsga2V5ICsgYmFzZS5yb3dzW3RvU2hvd10pWzBdLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcclxuXHRcdGlmIChiYXNlLm1ldGFBY3RpdmUpIHtcclxuXHRcdFx0YmFzZS4ka2V5Ym9hcmQuZmluZChwcmVmaXggKyBiYXNlLm1ldGFBY3RpdmUpXHJcblx0XHRcdFx0Ly8gYmFzZS5tZXRhQWN0aXZlIGNvbnRhaW5zIHRoZSBzdHJpbmcgXCJtZXRhI1wiIG9yIGZhbHNlXHJcblx0XHRcdFx0Ly8gd2l0aG91dCB0aGUgIT09IGZhbHNlLCBqUXVlcnkgVUkgdHJpZXMgdG8gdHJhbnNpdGlvbiB0aGUgY2xhc3Nlc1xyXG5cdFx0XHRcdC50b2dnbGVDbGFzcyhhY3RpdmUsIGJhc2UubWV0YUFjdGl2ZSAhPT0gZmFsc2UpO1xyXG5cdFx0fVxyXG5cdFx0YmFzZS5sYXN0LmtleXNldCA9IFtiYXNlLnNoaWZ0QWN0aXZlLCBiYXNlLmFsdEFjdGl2ZSwgYmFzZS5tZXRhQWN0aXZlXTtcclxuXHRcdGJhc2UuJGVsLnRyaWdnZXIoJGtleWJvYXJkLmV2ZW50cy5rYktleXNldENoYW5nZSwgW2Jhc2UsIGJhc2UuZWxdKTtcclxuXHRcdGlmIChvLnJlcG9zaXRpb24pIHtcclxuXHRcdFx0YmFzZS5yZXBvc2l0aW9uKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gY2hlY2sgZm9yIGtleSBjb21ib3MgKGRlYWQga2V5cylcclxuXHRiYXNlLmNoZWNrQ29tYm9zID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0Ly8gcmV0dXJuIHZhbCBmb3IgY2xvc2UgZnVuY3Rpb25cclxuXHRcdGlmICggIShcclxuXHRcdFx0YmFzZS5pc1Zpc2libGUoKSB8fCAoXHJcblx0XHRcdFx0YmFzZS5oYXNLZXlib2FyZCgpICYmXHJcblx0XHRcdFx0YmFzZS4ka2V5Ym9hcmQuaGFzQ2xhc3MoICRrZXlib2FyZC5jc3MuaGFzRm9jdXMgKVxyXG5cdFx0XHQpXHJcblx0XHQpICkge1xyXG5cdFx0XHRyZXR1cm4gYmFzZS5nZXRWYWx1ZShiYXNlLiRwcmV2aWV3IHx8IGJhc2UuJGVsKTtcclxuXHRcdH1cclxuXHRcdHZhciByLCB0LCB0MiwgcmVwbCxcclxuXHRcdFx0Ly8gdXNlIGJhc2UuJHByZXZpZXcudmFsKCkgaW5zdGVhZCBvZiBiYXNlLnByZXZpZXcudmFsdWVcclxuXHRcdFx0Ly8gKHZhbC5sZW5ndGggaW5jbHVkZXMgY2FycmlhZ2UgcmV0dXJucyBpbiBJRSkuXHJcblx0XHRcdHZhbCA9IGJhc2UuZ2V0VmFsdWUoKSxcclxuXHRcdFx0cG9zID0gJGtleWJvYXJkLmNhcmV0KGJhc2UuJHByZXZpZXcpLFxyXG5cdFx0XHRsYXlvdXQgPSAka2V5Ym9hcmQuYnVpbHRMYXlvdXRzW2Jhc2UubGF5b3V0XSxcclxuXHRcdFx0bWF4ID0gYmFzZS5pc0NvbnRlbnRFZGl0YWJsZSA/ICRrZXlib2FyZC5nZXRFZGl0YWJsZUxlbmd0aChiYXNlLmVsKSA6IHZhbC5sZW5ndGgsXHJcblx0XHRcdC8vIHNhdmUgb3JpZ2luYWwgY29udGVudCBsZW5ndGhcclxuXHRcdFx0bGVuID0gbWF4O1xyXG5cdFx0Ly8gcmV0dXJuIGlmIHZhbCBpcyBlbXB0eTsgZml4ZXMgIzM1MlxyXG5cdFx0aWYgKHZhbCA9PT0gJycpIHtcclxuXHRcdFx0Ly8gY2hlY2sgdmFsaWQgb24gZW1wdHkgc3RyaW5nIC0gc2VlICM0MjlcclxuXHRcdFx0aWYgKG8uYWNjZXB0VmFsaWQpIHtcclxuXHRcdFx0XHRiYXNlLmNoZWNrVmFsaWQoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdmFsO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHNpbGx5IElFIGNhcmV0IGhhY2tzLi4uIGl0IHNob3VsZCB3b3JrIGNvcnJlY3RseSwgYnV0IG5hdmlnYXRpbmcgdXNpbmcgYXJyb3cga2V5cyBpbiBhIHRleHRhcmVhXHJcblx0XHQvLyBpcyBzdGlsbCBkaWZmaWN1bHRcclxuXHRcdC8vIGluIElFLCBwb3MuZW5kIGNhbiBiZSB6ZXJvIGFmdGVyIGlucHV0IGxvc2VzIGZvY3VzXHJcblx0XHRpZiAocG9zLmVuZCA8IHBvcy5zdGFydCkge1xyXG5cdFx0XHRwb3MuZW5kID0gcG9zLnN0YXJ0O1xyXG5cdFx0fVxyXG5cdFx0aWYgKHBvcy5zdGFydCA+IGxlbikge1xyXG5cdFx0XHRwb3MuZW5kID0gcG9zLnN0YXJ0ID0gbGVuO1xyXG5cdFx0fVxyXG5cdFx0Ly8gVGhpcyBtYWtlcyBzdXJlIHRoZSBjYXJldCBtb3ZlcyB0byB0aGUgbmV4dCBsaW5lIGFmdGVyIGNsaWNraW5nIG9uIGVudGVyIChtYW51YWwgdHlwaW5nIHdvcmtzIGZpbmUpXHJcblx0XHRpZiAoJGtleWJvYXJkLm1zaWUgJiYgdmFsLnN1YnN0cmluZyhwb3Muc3RhcnQsIHBvcy5zdGFydCArIDEpID09PSAnXFxuJykge1xyXG5cdFx0XHRwb3Muc3RhcnQgKz0gMTtcclxuXHRcdFx0cG9zLmVuZCArPSAxO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChvLnVzZUNvbWJvcykge1xyXG5cdFx0XHQvLyBrZWVwICdhJyBhbmQgJ28nIGluIHRoZSByZWdleCBmb3IgYWUgYW5kIG9lIGxpZ2F0dXJlICjDpizFkylcclxuXHRcdFx0Ly8gdGhhbmtzIHRvIEtlbm55VE06IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xLzQyNzUwNzdcclxuXHRcdFx0Ly8gb3JpZ2luYWwgcmVnZXggLyhbYFxcJ35cXF5cXFwiYW9dKShbYS16XSkvbWlnIG1vdmVkIHRvICQua2V5Ym9hcmQuY29tYm9SZWdleFxyXG5cdFx0XHRpZiAoJGtleWJvYXJkLm1zaWUpIHtcclxuXHRcdFx0XHQvLyBvbGQgSUUgbWF5IG5vdCBoYXZlIHRoZSBjYXJldCBwb3NpdGlvbmVkIGNvcnJlY3RseSwgc28ganVzdCBjaGVjayB0aGUgd2hvbGUgdGhpbmdcclxuXHRcdFx0XHR2YWwgPSB2YWwucmVwbGFjZShiYXNlLnJlZ2V4LCBmdW5jdGlvbiAocywgYWNjZW50LCBsZXR0ZXIpIHtcclxuXHRcdFx0XHRcdHJldHVybiAoby5jb21ib3MuaGFzT3duUHJvcGVydHkoYWNjZW50KSkgPyBvLmNvbWJvc1thY2NlbnRdW2xldHRlcl0gfHwgcyA6IHM7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Ly8gcHJldmVudCBjb21ibyByZXBsYWNlIGVycm9yLCBpbiBjYXNlIHRoZSBrZXlib2FyZCBjbG9zZXMgLSBzZWUgaXNzdWUgIzExNlxyXG5cdFx0XHR9IGVsc2UgaWYgKGJhc2UuJHByZXZpZXcubGVuZ3RoKSB7XHJcblx0XHRcdFx0Ly8gTW9kZXJuIGJyb3dzZXJzIC0gY2hlY2sgZm9yIGNvbWJvcyBmcm9tIGxhc3QgdHdvIGNoYXJhY3RlcnMgbGVmdCBvZiB0aGUgY2FyZXRcclxuXHRcdFx0XHR0ID0gcG9zLnN0YXJ0IC0gKHBvcy5zdGFydCAtIDIgPj0gMCA/IDIgOiAwKTtcclxuXHRcdFx0XHQvLyB0YXJnZXQgbGFzdCB0d28gY2hhcmFjdGVyc1xyXG5cdFx0XHRcdCRrZXlib2FyZC5jYXJldChiYXNlLiRwcmV2aWV3LCB0LCBwb3MuZW5kKTtcclxuXHRcdFx0XHQvLyBkbyBjb21ibyByZXBsYWNlXHJcblx0XHRcdFx0dCA9ICRrZXlib2FyZC5jYXJldChiYXNlLiRwcmV2aWV3KTtcclxuXHRcdFx0XHRyZXBsID0gZnVuY3Rpb24gKHR4dCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICh0eHQgfHwgJycpLnJlcGxhY2UoYmFzZS5yZWdleCwgZnVuY3Rpb24gKHMsIGFjY2VudCwgbGV0dGVyKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiAoby5jb21ib3MuaGFzT3duUHJvcGVydHkoYWNjZW50KSkgPyBvLmNvbWJvc1thY2NlbnRdW2xldHRlcl0gfHwgcyA6IHM7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdHQyID0gcmVwbCh0LnRleHQpO1xyXG5cdFx0XHRcdC8vIGFkZCBjb21ibyBiYWNrXHJcblx0XHRcdFx0Ly8gcHJldmVudCBlcnJvciBpZiBjYXJldCBkb2Vzbid0IHJldHVybiBhIGZ1bmN0aW9uXHJcblx0XHRcdFx0aWYgKHQgJiYgdC5yZXBsYWNlU3RyICYmIHQyICE9PSB0LnRleHQpIHtcclxuXHRcdFx0XHRcdGlmIChiYXNlLmlzQ29udGVudEVkaXRhYmxlKSB7XHJcblx0XHRcdFx0XHRcdCRrZXlib2FyZC5yZXBsYWNlQ29udGVudChlbCwgcmVwbCk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRiYXNlLnNldFZhbHVlKHQucmVwbGFjZVN0cih0MikpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR2YWwgPSBiYXNlLmdldFZhbHVlKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBjaGVjayBpbnB1dCByZXN0cmljdGlvbnMgLSBpbiBjYXNlIGNvbnRlbnQgd2FzIHBhc3RlZFxyXG5cdFx0aWYgKG8ucmVzdHJpY3RJbnB1dCAmJiB2YWwgIT09ICcnKSB7XHJcblx0XHRcdHQgPSBsYXlvdXQuYWNjZXB0ZWRLZXlzLmxlbmd0aDtcclxuXHJcblx0XHRcdHIgPSBsYXlvdXQuYWNjZXB0ZWRLZXlzUmVnZXg7XHJcblx0XHRcdGlmICghcikge1xyXG5cdFx0XHRcdHQyID0gJC5tYXAobGF5b3V0LmFjY2VwdGVkS2V5cywgZnVuY3Rpb24gKHYpIHtcclxuXHRcdFx0XHRcdC8vIGVzY2FwZSBhbnkgc3BlY2lhbCBjaGFyYWN0ZXJzXHJcblx0XHRcdFx0XHRyZXR1cm4gdi5yZXBsYWNlKGJhc2UuZXNjYXBlUmVnZXgsICdcXFxcJCYnKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRpZiAoYmFzZS5hbHdheXNBbGxvd2VkLmluZGV4T2YoJGtleWJvYXJkLmtleUNvZGVzLmVudGVyKSA+IC0xKSB7XHJcblx0XHRcdFx0XHR0Mi5wdXNoKCdcXFxcbicpOyAvLyBGaXhlcyAjNjg2XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHIgPSBsYXlvdXQuYWNjZXB0ZWRLZXlzUmVnZXggPSBuZXcgUmVnRXhwKCcoJyArIHQyLmpvaW4oJ3wnKSArICcpJywgJ2cnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBvbmx5IHNhdmUgbWF0Y2hpbmcga2V5c1xyXG5cdFx0XHR0MiA9IHZhbC5tYXRjaChyKTtcclxuXHRcdFx0aWYgKHQyKSB7XHJcblx0XHRcdFx0dmFsID0gdDIuam9pbignJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gbm8gdmFsaWQgY2hhcmFjdGVyc1xyXG5cdFx0XHRcdHZhbCA9ICcnO1xyXG5cdFx0XHRcdGxlbiA9IDA7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBzYXZlIGNoYW5nZXMsIHRoZW4gcmVwb3NpdGlvbiBjYXJldFxyXG5cdFx0cG9zLnN0YXJ0ICs9IG1heCAtIGxlbjtcclxuXHRcdHBvcy5lbmQgKz0gbWF4IC0gbGVuO1xyXG5cclxuXHRcdGJhc2Uuc2V0VmFsdWUodmFsKTtcclxuXHRcdGJhc2Uuc2F2ZUNhcmV0KHBvcy5zdGFydCwgcG9zLmVuZCk7XHJcblx0XHQvLyBzZXQgc2Nyb2xsIHRvIGtlZXAgY2FyZXQgaW4gdmlld1xyXG5cdFx0YmFzZS5zZXRTY3JvbGwoKTtcclxuXHRcdGJhc2UuY2hlY2tNYXhMZW5ndGgoKTtcclxuXHJcblx0XHRpZiAoby5hY2NlcHRWYWxpZCkge1xyXG5cdFx0XHRiYXNlLmNoZWNrVmFsaWQoKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB2YWw7IC8vIHJldHVybiB0ZXh0LCB1c2VkIGZvciBrZXlib2FyZCBjbG9zaW5nIHNlY3Rpb25cclxuXHR9O1xyXG5cclxuXHQvLyBUb2dnbGUgYWNjZXB0IGJ1dHRvbiBjbGFzc2VzLCBpZiB2YWxpZGF0aW5nXHJcblx0YmFzZS5jaGVja1ZhbGlkID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0dmFyIGtiY3NzID0gJGtleWJvYXJkLmNzcyxcclxuXHRcdFx0JGFjY2VwdCA9IGJhc2UuJGtleWJvYXJkLmZpbmQoJy4nICsga2Jjc3Mua2V5UHJlZml4ICsgJ2FjY2VwdCcpLFxyXG5cdFx0XHR2YWxpZCA9IHRydWU7XHJcblx0XHRpZiAodHlwZW9mIG8udmFsaWRhdGUgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0dmFsaWQgPSBvLnZhbGlkYXRlKGJhc2UsIGJhc2UuZ2V0VmFsdWUoKSwgZmFsc2UpO1xyXG5cdFx0fVxyXG5cdFx0Ly8gdG9nZ2xlIGFjY2VwdCBidXR0b24gY2xhc3NlczsgZGVmaW5lZCBpbiB0aGUgY3NzXHJcblx0XHQkYWNjZXB0XHJcblx0XHRcdC50b2dnbGVDbGFzcyhrYmNzcy5pbnB1dEludmFsaWQsICF2YWxpZClcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKGtiY3NzLmlucHV0VmFsaWQsIHZhbGlkKVxyXG5cdFx0XHQvLyB1cGRhdGUgdGl0bGUgdG8gaW5kaWNhdGUgdGhhdCB0aGUgZW50cnkgaXMgdmFsaWQgb3IgaW52YWxpZFxyXG5cdFx0XHQuYXR0cigndGl0bGUnLCAkYWNjZXB0LmF0dHIoJ2RhdGEtdGl0bGUnKSArICcgKCcgKyBvLmRpc3BsYXlbdmFsaWQgPyAndmFsaWQnIDogJ2ludmFsaWQnXSArICcpJyk7XHJcblx0fTtcclxuXHJcblx0Ly8gRGVjaW1hbCBidXR0b24gZm9yIG51bSBwYWQgLSBvbmx5IGFsbG93IG9uZSAobm90IHVzZWQgYnkgZGVmYXVsdClcclxuXHRiYXNlLmNoZWNrRGVjaW1hbCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdC8vIENoZWNrIFVTICcuJyBvciBFdXJvcGVhbiAnLCcgZm9ybWF0XHJcblx0XHRpZiAoKGJhc2UuZGVjaW1hbCAmJiAvXFwuL2cudGVzdChiYXNlLnByZXZpZXcudmFsdWUpKSB8fFxyXG5cdFx0XHQoIWJhc2UuZGVjaW1hbCAmJiAvXFwsL2cudGVzdChiYXNlLnByZXZpZXcudmFsdWUpKSkge1xyXG5cdFx0XHRiYXNlLiRkZWNCdG5cclxuXHRcdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0XHQnZGlzYWJsZWQnOiAnZGlzYWJsZWQnLFxyXG5cdFx0XHRcdFx0J2FyaWEtZGlzYWJsZWQnOiAndHJ1ZSdcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyhvLmNzcy5idXR0b25Ib3ZlcilcclxuXHRcdFx0XHQuYWRkQ2xhc3Moby5jc3MuYnV0dG9uRGlzYWJsZWQpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0YmFzZS4kZGVjQnRuXHJcblx0XHRcdFx0LnJlbW92ZUF0dHIoJ2Rpc2FibGVkJylcclxuXHRcdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0XHQnYXJpYS1kaXNhYmxlZCc6ICdmYWxzZSdcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5hZGRDbGFzcyhvLmNzcy5idXR0b25EZWZhdWx0KVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyhvLmNzcy5idXR0b25EaXNhYmxlZCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gZ2V0IG90aGVyIGxheWVyIHZhbHVlcyBmb3IgYSBzcGVjaWZpYyBrZXlcclxuXHRiYXNlLmdldExheWVycyA9IGZ1bmN0aW9uICgkZWwpIHtcclxuXHRcdHZhciBrYmNzcyA9ICRrZXlib2FyZC5jc3MsXHJcblx0XHRcdGtleSA9ICRlbC5hdHRyKCdkYXRhLXBvcycpLFxyXG5cdFx0XHQka2V5cyA9ICRlbC5jbG9zZXN0KCcuJyArIGtiY3NzLmtleWJvYXJkKVxyXG5cdFx0XHQuZmluZCgnYnV0dG9uW2RhdGEtcG9zPVwiJyArIGtleSArICdcIl0nKTtcclxuXHRcdHJldHVybiAka2V5cy5maWx0ZXIoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRyZXR1cm4gJCh0aGlzKVxyXG5cdFx0XHRcdC5maW5kKCcuJyArIGtiY3NzLmtleVRleHQpXHJcblx0XHRcdFx0LnRleHQoKSAhPT0gJyc7XHJcblx0XHR9KVxyXG5cdFx0LmFkZCgkZWwpO1xyXG5cdH07XHJcblxyXG5cdC8vIEdvIHRvIG5leHQgb3IgcHJldiBpbnB1dHNcclxuXHQvLyBnb1RvTmV4dCA9IHRydWUsIHRoZW4gZ28gdG8gbmV4dCBpbnB1dDsgaWYgZmFsc2UgZ28gdG8gcHJldlxyXG5cdC8vIGlzQWNjZXB0ZWQgaXMgZnJvbSBhdXRvQWNjZXB0IG9wdGlvbiBvciB0cnVlIGlmIHVzZXIgcHJlc3NlcyBzaGlmdCtlbnRlclxyXG5cdGJhc2Uuc3dpdGNoSW5wdXQgPSBmdW5jdGlvbiAoZ29Ub05leHQsIGlzQWNjZXB0ZWQpIHtcclxuXHRcdGlmICh0eXBlb2Ygby5zd2l0Y2hJbnB1dCA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRvLnN3aXRjaElucHV0KGJhc2UsIGdvVG9OZXh0LCBpc0FjY2VwdGVkKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIGJhc2UuJGtleWJvYXJkIG1heSBiZSBhbiBlbXB0eSBhcnJheSAtIHNlZSAjMjc1IChhcG9kNDIpXHJcblx0XHRcdGlmIChiYXNlLiRrZXlib2FyZC5sZW5ndGgpIHtcclxuXHRcdFx0XHRiYXNlLiRrZXlib2FyZC5oaWRlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0dmFyIGtiLFxyXG5cdFx0XHRcdHN0b3BwZWQgPSBmYWxzZSxcclxuXHRcdFx0XHRhbGwgPSAkKCdidXR0b24sIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBhLCBbY29udGVudGVkaXRhYmxlXScpXHJcblx0XHRcdFx0XHQuZmlsdGVyKCc6dmlzaWJsZScpXHJcblx0XHRcdFx0XHQubm90KCc6ZGlzYWJsZWQnKSxcclxuXHRcdFx0XHRpbmR4ID0gYWxsLmluZGV4KGJhc2UuJGVsKSArIChnb1RvTmV4dCA/IDEgOiAtMSk7XHJcblx0XHRcdGlmIChiYXNlLiRrZXlib2FyZC5sZW5ndGgpIHtcclxuXHRcdFx0XHRiYXNlLiRrZXlib2FyZC5zaG93KCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGluZHggPiBhbGwubGVuZ3RoIC0gMSkge1xyXG5cdFx0XHRcdHN0b3BwZWQgPSBvLnN0b3BBdEVuZDtcclxuXHRcdFx0XHRpbmR4ID0gMDsgLy8gZ28gdG8gZmlyc3QgaW5wdXRcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoaW5keCA8IDApIHtcclxuXHRcdFx0XHRzdG9wcGVkID0gby5zdG9wQXRFbmQ7XHJcblx0XHRcdFx0aW5keCA9IGFsbC5sZW5ndGggLSAxOyAvLyBzdG9wIG9yIGdvIHRvIGxhc3RcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIXN0b3BwZWQpIHtcclxuXHRcdFx0XHRpc0FjY2VwdGVkID0gYmFzZS5jbG9zZShpc0FjY2VwdGVkKTtcclxuXHRcdFx0XHRpZiAoIWlzQWNjZXB0ZWQpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0a2IgPSBhbGwuZXEoaW5keCkuZGF0YSgna2V5Ym9hcmQnKTtcclxuXHRcdFx0XHRpZiAoa2IgJiYga2Iub3B0aW9ucy5vcGVuT24ubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRrYi5mb2N1c09uKCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGFsbC5lcShpbmR4KS5mb2N1cygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH07XHJcblxyXG5cdC8vIENsb3NlIHRoZSBrZXlib2FyZCwgaWYgdmlzaWJsZS4gUGFzcyBhIHN0YXR1cyBvZiB0cnVlLCBpZiB0aGUgY29udGVudCB3YXMgYWNjZXB0ZWRcclxuXHQvLyAoZm9yIHRoZSBldmVudCB0cmlnZ2VyKS5cclxuXHRiYXNlLmNsb3NlID0gZnVuY3Rpb24gKGFjY2VwdGVkKSB7XHJcblx0XHRpZiAoYmFzZS5pc09wZW4gJiYgYmFzZS4ka2V5Ym9hcmQubGVuZ3RoKSB7XHJcblx0XHRcdGNsZWFyVGltZW91dChiYXNlLnRocm90dGxlZCk7XHJcblx0XHRcdHZhciBrYmNzcyA9ICRrZXlib2FyZC5jc3MsXHJcblx0XHRcdFx0a2JldmVudHMgPSAka2V5Ym9hcmQuZXZlbnRzLFxyXG5cdFx0XHRcdHZhbCA9IGFjY2VwdGVkID8gYmFzZS5jaGVja0NvbWJvcygpIDogYmFzZS5vcmlnaW5hbENvbnRlbnQ7XHJcblx0XHRcdC8vIHZhbGlkYXRlIGlucHV0IGlmIGFjY2VwdGVkXHJcblx0XHRcdGlmIChhY2NlcHRlZCAmJiB0eXBlb2Ygby52YWxpZGF0ZSA9PT0gJ2Z1bmN0aW9uJyAmJiAhby52YWxpZGF0ZShiYXNlLCB2YWwsIHRydWUpKSB7XHJcblx0XHRcdFx0dmFsID0gYmFzZS5vcmlnaW5hbENvbnRlbnQ7XHJcblx0XHRcdFx0YWNjZXB0ZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRpZiAoby5jYW5jZWxDbG9zZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRiYXNlLmlzQ3VycmVudChmYWxzZSk7XHJcblx0XHRcdGJhc2UuaXNPcGVuID0gby5hbHdheXNPcGVuIHx8IG8udXNlckNsb3NlZDtcclxuXHRcdFx0aWYgKGJhc2UuaXNDb250ZW50RWRpdGFibGUgJiYgIWFjY2VwdGVkKSB7XHJcblx0XHRcdFx0Ly8gYmFzZS5vcmlnaW5hbENvbnRlbnQgc3RvcmVzIHRoZSBIVE1MXHJcblx0XHRcdFx0YmFzZS4kZWwuaHRtbCh2YWwpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGJhc2Uuc2V0VmFsdWUodmFsLCBiYXNlLiRlbCk7XHJcblx0XHRcdH1cclxuXHRcdFx0YmFzZS4kZWxcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3Moa2Jjc3MuaXNDdXJyZW50ICsgJyAnICsga2Jjc3MuaW5wdXRBdXRvQWNjZXB0ZWQpXHJcblx0XHRcdFx0Ly8gYWRkICd1aS1rZXlib2FyZC1hdXRvYWNjZXB0ZWQnIHRvIGlucHV0cyAtIHNlZSBpc3N1ZSAjNjZcclxuXHRcdFx0XHQuYWRkQ2xhc3MoKGFjY2VwdGVkIHx8IGZhbHNlKSA/IGFjY2VwdGVkID09PSB0cnVlID8gJycgOiBrYmNzcy5pbnB1dEF1dG9BY2NlcHRlZCA6ICcnKVxyXG5cdFx0XHRcdC8vIHRyaWdnZXIgZGVmYXVsdCBjaGFuZ2UgZXZlbnQgLSBzZWUgaXNzdWUgIzE0NlxyXG5cdFx0XHRcdC50cmlnZ2VyKGtiZXZlbnRzLmlucHV0Q2hhbmdlKTtcclxuXHRcdFx0Ly8gZG9uJ3QgdHJpZ2dlciBhbiBlbXB0eSBldmVudCAtIHNlZSBpc3N1ZSAjNDYzXHJcblx0XHRcdGlmICghby5hbHdheXNPcGVuKSB7XHJcblx0XHRcdFx0Ly8gZG9uJ3QgdHJpZ2dlciBiZWZvcmVDbG9zZSBpZiBrZXlib2FyZCBpcyBhbHdheXMgb3BlblxyXG5cdFx0XHRcdGJhc2UuJGVsLnRyaWdnZXIoa2JldmVudHMua2JCZWZvcmVDbG9zZSwgW2Jhc2UsIGJhc2UuZWwsIChhY2NlcHRlZCB8fCBmYWxzZSldKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBzYXZlIGNhcmV0IGFmdGVyIHVwZGF0aW5nIHZhbHVlIChmaXhlcyB1c2VyQ2xvc2VkIGlzc3VlIHdpdGggY2hhbmdpbmcgZm9jdXMpXHJcblx0XHRcdCRrZXlib2FyZC5jYXJldChiYXNlLiRwcmV2aWV3LCBiYXNlLmxhc3QpO1xyXG5cclxuXHRcdFx0YmFzZS4kZWxcclxuXHRcdFx0XHQudHJpZ2dlcigoKGFjY2VwdGVkIHx8IGZhbHNlKSA/IGtiZXZlbnRzLmlucHV0QWNjZXB0ZWQgOiBrYmV2ZW50cy5pbnB1dENhbmNlbGVkKSwgW2Jhc2UsIGJhc2UuZWxdKVxyXG5cdFx0XHRcdC50cmlnZ2VyKChvLmFsd2F5c09wZW4pID8ga2JldmVudHMua2JJbmFjdGl2ZSA6IGtiZXZlbnRzLmtiSGlkZGVuLCBbYmFzZSwgYmFzZS5lbF0pXHJcblx0XHRcdFx0LmJsdXIoKTtcclxuXHJcblx0XHRcdC8vIGJhc2UgaXMgdW5kZWZpbmVkIGlmIGtleWJvYXJkIHdhcyBkZXN0cm95ZWQgLSBmaXhlcyAjMzU4XHJcblx0XHRcdGlmIChiYXNlKSB7XHJcblx0XHRcdFx0Ly8gYWRkIGNsb3NlIGV2ZW50IHRpbWVcclxuXHRcdFx0XHRiYXNlLmxhc3QuZXZlbnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0XHRcdFx0aWYgKCEoby5hbHdheXNPcGVuIHx8IG8udXNlckNsb3NlZCAmJiBhY2NlcHRlZCA9PT0gJ3RydWUnKSAmJiBiYXNlLiRrZXlib2FyZC5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdC8vIGZyZWUgdXAgbWVtb3J5XHJcblx0XHRcdFx0XHRiYXNlLnJlbW92ZUtleWJvYXJkKCk7XHJcblx0XHRcdFx0XHQvLyByZWJpbmQgaW5wdXQgZm9jdXMgLSBkZWxheWVkIHRvIGZpeCBJRSBpc3N1ZSAjNzJcclxuXHRcdFx0XHRcdGJhc2UudGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGJhc2UpIHtcclxuXHRcdFx0XHRcdFx0XHRiYXNlLmJpbmRGb2N1cygpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9LCAyMDApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIWJhc2Uud2F0ZXJtYXJrICYmIGJhc2UuZWwudmFsdWUgPT09ICcnICYmIGJhc2UuaW5QbGFjZWhvbGRlciAhPT0gJycpIHtcclxuXHRcdFx0XHRcdGJhc2UuJGVsLmFkZENsYXNzKGtiY3NzLnBsYWNlaG9sZGVyKTtcclxuXHRcdFx0XHRcdGJhc2Uuc2V0VmFsdWUoYmFzZS5pblBsYWNlaG9sZGVyLCBiYXNlLiRlbCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gISFhY2NlcHRlZDtcclxuXHR9O1xyXG5cclxuXHRiYXNlLmFjY2VwdCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdHJldHVybiBiYXNlLmNsb3NlKHRydWUpO1xyXG5cdH07XHJcblxyXG5cdGJhc2UuY2hlY2tDbG9zZSA9IGZ1bmN0aW9uIChlKSB7XHJcblx0XHRpZiAoYmFzZS5vcGVuaW5nKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdHZhciBrYmNzcyA9ICQua2V5Ym9hcmQuY3NzLFxyXG5cdFx0XHQkdGFyZ2V0ID0gZS4kdGFyZ2V0IHx8ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy4nICsgJGtleWJvYXJkLmNzcy5rZXlib2FyZCArICcsIC4nICsgJGtleWJvYXJkLmNzcy5pbnB1dCk7XHJcblx0XHRpZiAoISR0YXJnZXQubGVuZ3RoKSB7XHJcblx0XHRcdCR0YXJnZXQgPSAkKGUudGFyZ2V0KTtcclxuXHRcdH1cclxuXHRcdC8vIG5lZWRlZCBmb3IgSUUgdG8gYWxsb3cgc3dpdGNoaW5nIGJldHdlZW4ga2V5Ym9hcmRzIHNtb290aGx5XHJcblx0XHRpZiAoJHRhcmdldC5sZW5ndGggJiYgJHRhcmdldC5oYXNDbGFzcyhrYmNzcy5rZXlib2FyZCkpIHtcclxuXHRcdFx0dmFyIGtiID0gJHRhcmdldC5kYXRhKCdrZXlib2FyZCcpO1xyXG5cdFx0XHQvLyBvbmx5IHRyaWdnZXIgb24gc2VsZlxyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0a2IgIT09IGJhc2UgJiZcclxuXHRcdFx0XHQha2IuJGVsLmhhc0NsYXNzKGtiY3NzLmlzQ3VycmVudCkgJiZcclxuXHRcdFx0XHRrYi5vcHRpb25zLm9wZW5PbiAmJlxyXG5cdFx0XHRcdGUudHlwZSA9PT0gby5vcGVuT25cclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0a2IuZm9jdXNPbigpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRiYXNlLmVzY0Nsb3NlKGUsICR0YXJnZXQpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIGNhbGxiYWNrIGZ1bmN0aW9ucyBjYWxsZWQgdG8gY2hlY2sgaWYgdGhlIGtleWJvYXJkIG5lZWRzIHRvIGJlIGNsb3NlZFxyXG5cdC8vIGUuZy4gb24gZXNjYXBlIG9yIGNsaWNraW5nIG91dHNpZGUgdGhlIGtleWJvYXJkXHJcblx0YmFzZS5lc2NDbG9zZUNhbGxiYWNrID0ge1xyXG5cdFx0Ly8ga2VlcCBrZXlib2FyZCBvcGVuIGlmIGFsd2F5c09wZW4gb3Igc3RheU9wZW4gaXMgdHJ1ZSAtIGZpeGVzIG11dGxpcGxlXHJcblx0XHQvLyBhbHdheXMgb3BlbiBrZXlib2FyZHMgb3Igc2luZ2xlIHN0YXkgb3BlbiBrZXlib2FyZFxyXG5cdFx0a2VlcE9wZW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gIWJhc2UuaXNPcGVuO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGJhc2UuZXNjQ2xvc2UgPSBmdW5jdGlvbiAoZSwgJGVsKSB7XHJcblx0XHRpZiAoIWJhc2UuaXNPcGVuKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGlmIChlICYmIGUudHlwZSA9PT0gJ2tleXVwJykge1xyXG5cdFx0XHRyZXR1cm4gKGUud2hpY2ggPT09ICRrZXlib2FyZC5rZXlDb2Rlcy5lc2NhcGUgJiYgIW8uaWdub3JlRXNjKSA/XHJcblx0XHRcdFx0YmFzZS5jbG9zZShvLmF1dG9BY2NlcHQgJiYgby5hdXRvQWNjZXB0T25Fc2MgPyAndHJ1ZScgOiBmYWxzZSkgOlxyXG5cdFx0XHRcdCcnO1xyXG5cdFx0fVxyXG5cdFx0dmFyIHNob3VsZFN0YXlPcGVuID0gZmFsc2UsXHJcblx0XHRcdCR0YXJnZXQgPSAkZWwubGVuZ3RoICYmICRlbCB8fCAkKGUudGFyZ2V0KTtcclxuXHRcdCQuZWFjaChiYXNlLmVzY0Nsb3NlQ2FsbGJhY2ssIGZ1bmN0aW9uKGksIGNhbGxiYWNrKSB7XHJcblx0XHRcdGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRzaG91bGRTdGF5T3BlbiA9IHNob3VsZFN0YXlPcGVuIHx8IGNhbGxiYWNrKCR0YXJnZXQpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdGlmIChzaG91bGRTdGF5T3Blbikge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHQvLyBpZ25vcmUgYXV0b2FjY2VwdCBpZiB1c2luZyBlc2NhcGUgLSBnb29kIGlkZWE/XHJcblx0XHRpZiAoIWJhc2UuaXNDdXJyZW50KCkgJiYgYmFzZS5pc09wZW4gfHwgYmFzZS5pc09wZW4gJiYgJHRhcmdldFswXSAhPT0gYmFzZS5lbCkge1xyXG5cdFx0XHQvLyBkb24ndCBjbG9zZSBpZiBzdGF5T3BlbiBpcyBzZXQ7IGJ1dCBjbG9zZSBpZiBhIGRpZmZlcmVudCBrZXlib2FyZCBpcyBiZWluZyBvcGVuZWRcclxuXHRcdFx0aWYgKChvLnN0YXlPcGVuIHx8IG8udXNlckNsb3NlZCkgJiYgISR0YXJnZXQuaGFzQ2xhc3MoJGtleWJvYXJkLmNzcy5pbnB1dCkpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gc3RvcCBwcm9wb2dhdGlvbiBpbiBJRSAtIGFuIGlucHV0IGdldHRpbmcgZm9jdXMgZG9lc24ndCBvcGVuIGEga2V5Ym9hcmQgaWYgb25lIGlzIGFscmVhZHkgb3BlblxyXG5cdFx0XHRpZiAoJGtleWJvYXJkLmFsbGllKSB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChvLmNsb3NlQnlDbGlja0V2ZW50KSB7XHJcblx0XHRcdFx0Ly8gb25seSBjbG9zZSB0aGUga2V5Ym9hcmQgaWYgdGhlIHVzZXIgaXMgY2xpY2tpbmcgb24gYW4gaW5wdXQgb3IgaWYgdGhleSBjYXVzZSBhIGNsaWNrXHJcblx0XHRcdFx0Ly8gZXZlbnQgKHRvdWNoc3RhcnQvbW91c2Vkb3duIHdpbGwgbm90IGZvcmNlIHRoZSBjbG9zZSB3aXRoIHRoaXMgc2V0dGluZylcclxuXHRcdFx0XHR2YXIgbmFtZSA9ICR0YXJnZXRbMF0gJiYgJHRhcmdldFswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHRcdGlmIChuYW1lID09PSAnaW5wdXQnIHx8IG5hbWUgPT09ICd0ZXh0YXJlYScgfHwgZS50eXBlID09PSAnY2xpY2snKSB7XHJcblx0XHRcdFx0XHRiYXNlLmNsb3NlKG8uYXV0b0FjY2VwdCA/ICd0cnVlJyA6IGZhbHNlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gc2VuZCAndHJ1ZScgaW5zdGVhZCBvZiBhIHRydWUgKGJvb2xlYW4pLCB0aGUgaW5wdXQgd29uJ3QgZ2V0IGEgJ3VpLWtleWJvYXJkLWF1dG9hY2NlcHRlZCdcclxuXHRcdFx0XHQvLyBjbGFzcyBuYW1lIC0gc2VlIGlzc3VlICM2NlxyXG5cdFx0XHRcdGJhc2UuY2xvc2Uoby5hdXRvQWNjZXB0ID8gJ3RydWUnIDogZmFsc2UpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gQnVpbGQgZGVmYXVsdCBidXR0b25cclxuXHRiYXNlLmtleUJ0biA9ICQoJzxidXR0b24gLz4nKVxyXG5cdFx0LmF0dHIoe1xyXG5cdFx0XHQncm9sZSc6ICdidXR0b24nLFxyXG5cdFx0XHQndHlwZSc6ICdidXR0b24nLFxyXG5cdFx0XHQnYXJpYS1kaXNhYmxlZCc6ICdmYWxzZScsXHJcblx0XHRcdCd0YWJpbmRleCc6ICctMSdcclxuXHRcdH0pXHJcblx0XHQuYWRkQ2xhc3MoJGtleWJvYXJkLmNzcy5rZXlCdXR0b24pO1xyXG5cclxuXHQvLyBjb252ZXJ0IGtleSBuYW1lcyBpbnRvIGEgY2xhc3MgbmFtZVxyXG5cdGJhc2UucHJvY2Vzc05hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xyXG5cdFx0dmFyIGluZGV4LCBuLFxyXG5cdFx0XHRwcm9jZXNzID0gKG5hbWUgfHwgJycpLnJlcGxhY2UoL1teYS16MC05LV9dL2dpLCAnJyksXHJcblx0XHRcdGxlbiA9IHByb2Nlc3MubGVuZ3RoLFxyXG5cdFx0XHRuZXdOYW1lID0gW107XHJcblx0XHRpZiAobGVuID4gMSAmJiBuYW1lID09PSBwcm9jZXNzKSB7XHJcblx0XHRcdC8vIHJldHVybiBuYW1lIGlmIGJhc2ljIHRleHRcclxuXHRcdFx0cmV0dXJuIG5hbWU7XHJcblx0XHR9XHJcblx0XHQvLyByZXR1cm4gY2hhcmFjdGVyIGNvZGUgc2VxdWVuY2VcclxuXHRcdGxlbiA9IG5hbWUubGVuZ3RoO1xyXG5cdFx0aWYgKGxlbikge1xyXG5cdFx0XHRmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBsZW47IGluZGV4KyspIHtcclxuXHRcdFx0XHRuID0gbmFtZVtpbmRleF07XHJcblx0XHRcdFx0Ly8ga2VlcCAnLScgYW5kICdfJy4uLiBzbyBmb3IgZGFzaCwgd2UgZ2V0IHR3byBkYXNoZXMgaW4gYSByb3dcclxuXHRcdFx0XHRuZXdOYW1lLnB1c2goL1thLXowLTktX10vaS50ZXN0KG4pID9cclxuXHRcdFx0XHRcdCgvWy1fXS8udGVzdChuKSAmJiBpbmRleCAhPT0gMCA/ICcnIDogbikgOlxyXG5cdFx0XHRcdFx0KGluZGV4ID09PSAwID8gJycgOiAnLScpICsgbi5jaGFyQ29kZUF0KDApXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gbmV3TmFtZS5qb2luKCcnKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBuYW1lO1xyXG5cdH07XHJcblxyXG5cdGJhc2UucHJvY2Vzc0tleXMgPSBmdW5jdGlvbiAobmFtZSkge1xyXG5cdFx0dmFyIHRtcCwgcGFydHMsXHJcblx0XHRcdGh0bWxJbmRleCA9IG5hbWUuaW5kZXhPZignPC8nKSxcclxuXHRcdFx0ZGF0YSA9IHtcclxuXHRcdFx0XHRuYW1lOiBuYW1lLFxyXG5cdFx0XHRcdG1hcDogJycsXHJcblx0XHRcdFx0dGl0bGU6ICcnXHJcblx0XHRcdH07XHJcblx0XHRpZiAoaHRtbEluZGV4ID4gLTEpIHtcclxuXHRcdFx0Ly8gSWYgaXQgbG9va3MgbGlrZSBIVE1MLCBza2lwIHByb2Nlc3Npbmc7IHNlZSAjNzQzXHJcblx0XHRcdC8vIGh0bWwgbWF5IGluY2x1ZGUgY29sb25zOyBzZWUgIzcwMVxyXG5cdFx0XHRyZXR1cm4gZGF0YTtcclxuXHRcdH1cclxuXHRcdC8vIERvbid0IHNwbGl0IGNvbG9ucyBmb2xsb3dlZCBieSAvLywgZS5nLiBodHRwczovLzsgRml4ZXMgIzU1NVxyXG5cdFx0cGFydHMgPSBuYW1lLnNwbGl0KC86KD8hXFwvXFwvKS8pO1xyXG5cclxuXHRcdC8qIG1hcCBkZWZpbmVkIGtleXNcclxuXHRcdGZvcm1hdCAna2V5KEEpOkxhYmVsX2Zvcl9rZXlfKGlnbm9yZV9wYXJlbnRoZXNlc19oZXJlKSdcclxuXHRcdFx0J2tleScgPSBrZXkgdGhhdCBpcyBzZWVuIChjYW4gYW55IGNoYXJhY3RlcihzKTsgYnV0IGl0IG1pZ2h0IG5lZWQgdG8gYmUgZXNjYXBlZCB1c2luZyAnXFwnXHJcblx0XHRcdG9yIGVudGVyZWQgYXMgdW5pY29kZSAnXFx1IyMjIydcclxuXHRcdFx0JyhBKScgPSB0aGUgYWN0dWFsIGtleSBvbiB0aGUgcmVhbCBrZXlib2FyZCB0byByZW1hcFxyXG5cdFx0XHQnOkxhYmVsX2Zvcl9rZXknIGVuZHMgdXAgaW4gdGhlIHRpdGxlL3Rvb2x0aXBcclxuXHRcdEV4YW1wbGVzOlxyXG5cdFx0XHQnXFx1MDM5MShBKTphbHBoYScsICd4KHkpOnRoaXNfKG1pZ2h0KV9jYXVzZV9wcm9ibGVtc1xyXG5cdFx0XHRvciBlZGdlIGNhc2VzIG9mICc6KHgpJywgJ3goOiknLCAneCgoKScgb3IgJ3goKSknXHJcblx0XHRFbmhhbmNlbWVudCAoaWYgSSBjYW4gZ2V0IGFsdCBrZXlzIHRvIHdvcmspOlxyXG5cdFx0XHRBIG1hcHBlZCBrZXkgd2lsbCBpbmNsdWRlIHRoZSBtb2Qga2V5LCBlLmcuICd4KGFsdC14KScgb3IgJ3goYWx0LXNoaWZ0LXgpJ1xyXG5cdFx0Ki9cclxuXHRcdGlmICgvXFwoLitcXCkvLnRlc3QocGFydHNbMF0pIHx8IC9eOlxcKC4rXFwpLy50ZXN0KG5hbWUpIHx8IC9cXChbKDopXVxcKS8udGVzdChuYW1lKSkge1xyXG5cdFx0XHQvLyBlZGdlIGNhc2VzICd4KDopJywgJ3goKCknIG9yICd4KCkpJ1xyXG5cdFx0XHRpZiAoL1xcKFsoOildXFwpLy50ZXN0KG5hbWUpKSB7XHJcblx0XHRcdFx0dG1wID0gcGFydHNbMF0ubWF0Y2goLyhbXihdKylcXCgoLispXFwpLyk7XHJcblx0XHRcdFx0aWYgKHRtcCAmJiB0bXAubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRkYXRhLm5hbWUgPSB0bXBbMV07XHJcblx0XHRcdFx0XHRkYXRhLm1hcCA9IHRtcFsyXTtcclxuXHRcdFx0XHRcdGRhdGEudGl0bGUgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbignOicpIDogJyc7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIGVkZ2UgY2FzZXMgJ3goOiknLCAnOih4KScgb3IgJzooOiknXHJcblx0XHRcdFx0XHRkYXRhLm5hbWUgPSBuYW1lLm1hdGNoKC8oW14oXSspLylbMF07XHJcblx0XHRcdFx0XHRpZiAoZGF0YS5uYW1lID09PSAnOicpIHtcclxuXHRcdFx0XHRcdFx0Ly8gJzooOik6dGVzdCcgPT4gcGFydHMgPSBbICcnLCAnKCcsICcpJywgJ3RpdGxlJyBdIG5lZWQgdG8gc2xpY2UgMVxyXG5cdFx0XHRcdFx0XHRwYXJ0cyA9IHBhcnRzLnNsaWNlKDEpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKHRtcCA9PT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHQvLyAneCg6KTp0ZXN0JyA9PiBwYXJ0cyA9IFsgJ3goJywgJyknLCAndGl0bGUnIF0gbmVlZCB0byBzbGljZSAyXHJcblx0XHRcdFx0XHRcdGRhdGEubWFwID0gJzonO1xyXG5cdFx0XHRcdFx0XHRwYXJ0cyA9IHBhcnRzLnNsaWNlKDIpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZGF0YS50aXRsZSA9IHBhcnRzLmxlbmd0aCA/IHBhcnRzLmpvaW4oJzonKSA6ICcnO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBleGFtcGxlOiBcXHUwMzkxKEEpOmFscGhhOyBleHRyYWN0ICdBJyBmcm9tICcoQSknXHJcblx0XHRcdFx0ZGF0YS5tYXAgPSBuYW1lLm1hdGNoKC9cXCgoW14oKV0rPylcXCkvKVsxXTtcclxuXHRcdFx0XHQvLyByZW1vdmUgJyhBKScsIGxlZnQgd2l0aCAnXFx1MDM5MTphbHBoYSdcclxuXHRcdFx0XHRuYW1lID0gbmFtZS5yZXBsYWNlKC9cXCgoW14oKV0rKVxcKS8sICcnKTtcclxuXHRcdFx0XHR0bXAgPSBuYW1lLnNwbGl0KCc6Jyk7XHJcblx0XHRcdFx0Ly8gZ2V0ICdcXHUwMzkxJyBmcm9tICdcXHUwMzkxOmFscGhhJ1xyXG5cdFx0XHRcdGlmICh0bXBbMF0gPT09ICcnKSB7XHJcblx0XHRcdFx0XHRkYXRhLm5hbWUgPSAnOic7XHJcblx0XHRcdFx0XHRwYXJ0cyA9IHBhcnRzLnNsaWNlKDEpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRkYXRhLm5hbWUgPSB0bXBbMF07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGRhdGEudGl0bGUgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbignOicpIDogJyc7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIGZpbmQga2V5IGxhYmVsXHJcblx0XHRcdC8vIGNvcm5lciBjYXNlIG9mICc6OjsnIHJlZHVjZWQgdG8gJzo7Jywgc3BsaXQgYXMgWycnLCAnOyddXHJcblx0XHRcdGlmIChuYW1lICE9PSAnJyAmJiBwYXJ0c1swXSA9PT0gJycpIHtcclxuXHRcdFx0XHRkYXRhLm5hbWUgPSAnOic7XHJcblx0XHRcdFx0cGFydHMgPSBwYXJ0cy5zbGljZSgxKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRkYXRhLm5hbWUgPSBwYXJ0c1swXTtcclxuXHRcdFx0fVxyXG5cdFx0XHRkYXRhLnRpdGxlID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oJzonKSA6ICcnO1xyXG5cdFx0fVxyXG5cdFx0ZGF0YS50aXRsZSA9ICQudHJpbShkYXRhLnRpdGxlKS5yZXBsYWNlKC9fL2csICcgJyk7XHJcblx0XHRyZXR1cm4gZGF0YTtcclxuXHR9O1xyXG5cclxuXHQvLyBBZGQga2V5IGZ1bmN0aW9uXHJcblx0Ly8ga2V5TmFtZSA9IHRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiBjYWxsZWQgaW4gJC5rZXlib2FyZC5rZXlhY3Rpb24gd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWRcclxuXHQvLyBuYW1lID0gbmFtZSBhZGRlZCB0byBrZXksIG9yIGNyb3NzLXJlZmVyZW5jZWQgaW4gdGhlIGRpc3BsYXkgb3B0aW9uc1xyXG5cdC8vIGJhc2UudGVtcFswXSA9IGtleXNldCB0byBhdHRhY2ggdGhlIG5ldyBidXR0b25cclxuXHQvLyByZWdLZXkgPSB0cnVlIHdoZW4gaXQgaXMgbm90IGFuIGFjdGlvbiBrZXlcclxuXHRiYXNlLmFkZEtleSA9IGZ1bmN0aW9uIChrZXlOYW1lLCBhY3Rpb24sIHJlZ0tleSkge1xyXG5cdFx0dmFyIGtleUNsYXNzLCB0bXAsIGtleXMsXHJcblx0XHRcdGRhdGEgPSB7fSxcclxuXHRcdFx0dHh0ID0gYmFzZS5wcm9jZXNzS2V5cyhyZWdLZXkgPyBrZXlOYW1lIDogYWN0aW9uKSxcclxuXHRcdFx0a2Jjc3MgPSAka2V5Ym9hcmQuY3NzO1xyXG5cclxuXHRcdGlmICghcmVnS2V5ICYmIG8uZGlzcGxheVt0eHQubmFtZV0pIHtcclxuXHRcdFx0a2V5cyA9IGJhc2UucHJvY2Vzc0tleXMoby5kaXNwbGF5W3R4dC5uYW1lXSk7XHJcblx0XHRcdC8vIGFjdGlvbiBjb250YWluZWQgaW4gXCJrZXlOYW1lXCIgKGUuZy4ga2V5TmFtZSA9IFwiYWNjZXB0XCIsXHJcblx0XHRcdC8vIGFjdGlvbiA9IFwiYVwiICh1c2UgY2hlY2ttYXJrIGluc3RlYWQgb2YgdGV4dCkpXHJcblx0XHRcdGtleXMuYWN0aW9uID0gYmFzZS5wcm9jZXNzS2V5cyhrZXlOYW1lKS5uYW1lO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gd2hlbiByZWdLZXkgaXMgdHJ1ZSwga2V5TmFtZSBpcyB0aGUgc2FtZSBhcyBhY3Rpb25cclxuXHRcdFx0a2V5cyA9IHR4dDtcclxuXHRcdFx0a2V5cy5hY3Rpb24gPSB0eHQubmFtZTtcclxuXHRcdH1cclxuXHJcblx0XHRkYXRhLm5hbWUgPSBiYXNlLnByb2Nlc3NOYW1lKHR4dC5uYW1lKTtcclxuXHRcdGlmIChrZXlzLm5hbWUgIT09ICcnKSB7XHJcblx0XHRcdGlmIChrZXlzLm1hcCAhPT0gJycpIHtcclxuXHRcdFx0XHQka2V5Ym9hcmQuYnVpbHRMYXlvdXRzW2Jhc2UubGF5b3V0XS5tYXBwZWRLZXlzW2tleXMubWFwXSA9IGtleXMubmFtZTtcclxuXHRcdFx0XHQka2V5Ym9hcmQuYnVpbHRMYXlvdXRzW2Jhc2UubGF5b3V0XS5hY2NlcHRlZEtleXMucHVzaChrZXlzLm5hbWUpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKHJlZ0tleSkge1xyXG5cdFx0XHRcdCRrZXlib2FyZC5idWlsdExheW91dHNbYmFzZS5sYXlvdXRdLmFjY2VwdGVkS2V5cy5wdXNoKGtleXMubmFtZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAocmVnS2V5KSB7XHJcblx0XHRcdGtleUNsYXNzID0gZGF0YS5uYW1lID09PSAnJyA/ICcnIDoga2Jjc3Mua2V5UHJlZml4ICsgZGF0YS5uYW1lO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gQWN0aW9uIGtleXMgd2lsbCBoYXZlIHRoZSAndWkta2V5Ym9hcmQtYWN0aW9ua2V5JyBjbGFzc1xyXG5cdFx0XHRrZXlDbGFzcyA9IGtiY3NzLmtleUFjdGlvbiArICcgJyArIGtiY3NzLmtleVByZWZpeCArIGtleXMuYWN0aW9uO1xyXG5cdFx0fVxyXG5cdFx0Ly8gJ1xcdTIxOTAnLmxlbmd0aCA9IDEgYmVjYXVzZSB0aGUgdW5pY29kZSBpcyBjb252ZXJ0ZWQsIHNvIGlmIG1vcmUgdGhhbiBvbmUgY2hhcmFjdGVyLFxyXG5cdFx0Ly8gYWRkIHRoZSB3aWRlIGNsYXNzXHJcblx0XHRrZXlDbGFzcyArPSAoa2V5cy5uYW1lLmxlbmd0aCA+IDIgPyAnICcgKyBrYmNzcy5rZXlXaWRlIDogJycpICsgJyAnICsgby5jc3MuYnV0dG9uRGVmYXVsdDtcclxuXHJcblx0XHQvLyBBbGxvdyBIVE1MIGluIHRoZSBrZXkubmFtZVxyXG5cdFx0ZGF0YS5odG1sID0gJzxzcGFuIGNsYXNzPVwiJyArIGtiY3NzLmtleVRleHQgKyAnXCI+JyArIGtleXMubmFtZSArICc8L3NwYW4+JztcclxuXHJcblx0XHRkYXRhLiRrZXkgPSBiYXNlLmtleUJ0blxyXG5cdFx0XHQuY2xvbmUoKVxyXG5cdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0J2RhdGEtdmFsdWUnOiByZWdLZXkgPyBrZXlzLm5hbWUgOiBrZXlzLmFjdGlvbiwgLy8gdmFsdWVcclxuXHRcdFx0XHQnZGF0YS1uYW1lJzoga2V5cy5hY3Rpb24sXHJcblx0XHRcdFx0J2RhdGEtcG9zJzogYmFzZS50ZW1wWzFdICsgJywnICsgYmFzZS50ZW1wWzJdLFxyXG5cdFx0XHRcdCdkYXRhLWFjdGlvbic6IGtleXMuYWN0aW9uLFxyXG5cdFx0XHRcdCdkYXRhLWh0bWwnOiBkYXRhLmh0bWxcclxuXHRcdFx0fSlcclxuXHRcdFx0Ly8gYWRkICd1aS1rZXlib2FyZC0nICsgZGF0YS5uYW1lIGZvciBhbGwga2V5c1xyXG5cdFx0XHQvLyAgKGUuZy4gJ0Jrc3AnIHdpbGwgaGF2ZSAndWkta2V5Ym9hcmQtYnNrcCcgY2xhc3MpXHJcblx0XHRcdC8vIGFueSBub24tYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgd2lsbCBiZSByZXBsYWNlZCB3aXRoXHJcblx0XHRcdC8vICB0aGVpciBkZWNpbWFsIHVuaWNvZGUgdmFsdWVcclxuXHRcdFx0Ly8gIChlLmcuICd+JyBpcyBhIHJlZ3VsYXIga2V5LCBjbGFzcyA9ICd1aS1rZXlib2FyZC0xMjYnXHJcblx0XHRcdC8vICAoMTI2IGlzIHRoZSB1bmljb2RlIGRlY2ltYWwgdmFsdWUgLSBzYW1lIGFzICYjMTI2OylcclxuXHRcdFx0Ly8gIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX1VuaWNvZGVfY2hhcmFjdGVycyNDb250cm9sX2NvZGVzXHJcblx0XHRcdC5hZGRDbGFzcyhrZXlDbGFzcylcclxuXHRcdFx0Lmh0bWwoZGF0YS5odG1sKVxyXG5cdFx0XHQuYXBwZW5kVG8oYmFzZS50ZW1wWzBdKTtcclxuXHJcblx0XHRpZiAoa2V5cy5tYXApIHtcclxuXHRcdFx0ZGF0YS4ka2V5LmF0dHIoJ2RhdGEtbWFwcGVkJywga2V5cy5tYXApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGtleXMudGl0bGUgfHwgdHh0LnRpdGxlKSB7XHJcblx0XHRcdGRhdGEuJGtleS5hdHRyKHtcclxuXHRcdFx0XHQnZGF0YS10aXRsZSc6IHR4dC50aXRsZSB8fCBrZXlzLnRpdGxlLCAvLyB1c2VkIHRvIGFsbG93IGFkZGluZyBjb250ZW50IHRvIHRpdGxlXHJcblx0XHRcdFx0J3RpdGxlJzogdHh0LnRpdGxlIHx8IGtleXMudGl0bGVcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHR5cGVvZiBvLmJ1aWxkS2V5ID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdGRhdGEgPSBvLmJ1aWxkS2V5KGJhc2UsIGRhdGEpO1xyXG5cdFx0XHQvLyBjb3B5IGh0bWwgYmFjayB0byBhdHRyaWJ1dGVzXHJcblx0XHRcdHRtcCA9IGRhdGEuJGtleS5odG1sKCk7XHJcblx0XHRcdGRhdGEuJGtleS5hdHRyKCdkYXRhLWh0bWwnLCB0bXApO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGRhdGEuJGtleTtcclxuXHR9O1xyXG5cclxuXHRiYXNlLmN1c3RvbUhhc2ggPSBmdW5jdGlvbiAobGF5b3V0KSB7XHJcblx0XHQvKmpzaGludCBiaXR3aXNlOmZhbHNlICovXHJcblx0XHR2YXIgaSwgYXJyYXksIGhhc2gsIGNoYXJhY3RlciwgbGVuLFxyXG5cdFx0XHRhcnJheXMgPSBbXSxcclxuXHRcdFx0bWVyZ2VkID0gW107XHJcblx0XHQvLyBwYXNzIGxheW91dCB0byBhbGxvdyBmb3IgdGVzdGluZ1xyXG5cdFx0bGF5b3V0ID0gdHlwZW9mIGxheW91dCA9PT0gJ3VuZGVmaW5lZCcgPyBvLmN1c3RvbUxheW91dCA6IGxheW91dDtcclxuXHRcdC8vIGdldCBhbGwgbGF5b3V0IGFycmF5c1xyXG5cdFx0Zm9yIChhcnJheSBpbiBsYXlvdXQpIHtcclxuXHRcdFx0aWYgKGxheW91dC5oYXNPd25Qcm9wZXJ0eShhcnJheSkpIHtcclxuXHRcdFx0XHRhcnJheXMucHVzaChsYXlvdXRbYXJyYXldKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Ly8gZmxhdHRlbiBhcnJheVxyXG5cdFx0bWVyZ2VkID0gbWVyZ2VkLmNvbmNhdC5hcHBseShtZXJnZWQsIGFycmF5cykuam9pbignICcpO1xyXG5cdFx0Ly8gcHJvZHVjZSBoYXNoIG5hbWUgLSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS83NjE2NDg0LzE0NTM0NlxyXG5cdFx0aGFzaCA9IDA7XHJcblx0XHRsZW4gPSBtZXJnZWQubGVuZ3RoO1xyXG5cdFx0aWYgKGxlbiA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm4gaGFzaDtcclxuXHRcdH1cclxuXHRcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG5cdFx0XHRjaGFyYWN0ZXIgPSBtZXJnZWQuY2hhckNvZGVBdChpKTtcclxuXHRcdFx0aGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hhcmFjdGVyO1xyXG5cdFx0XHRoYXNoID0gaGFzaCAmIGhhc2g7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGhhc2g7XHJcblx0fTtcclxuXHJcblx0YmFzZS5idWlsZEtleWJvYXJkID0gZnVuY3Rpb24gKG5hbWUsIGludGVybmFsKSB7XHJcblx0XHQvLyBvLmRpc3BsYXkgaXMgZW1wdHkgd2hlbiB0aGlzIGlzIGNhbGxlZCBmcm9tIHRoZSBzY3JhbWJsZSBleHRlbnNpb24gKHdoZW4gYWx3YXlzT3Blbjp0cnVlKVxyXG5cdFx0aWYgKCQuaXNFbXB0eU9iamVjdChvLmRpc3BsYXkpKSB7XHJcblx0XHRcdC8vIHNldCBrZXlib2FyZCBsYW5ndWFnZVxyXG5cdFx0XHRiYXNlLnVwZGF0ZUxhbmd1YWdlKCk7XHJcblx0XHR9XHJcblx0XHR2YXIgaW5kZXgsIHJvdywgJHJvdywgY3VycmVudFNldCxcclxuXHRcdFx0a2Jjc3MgPSAka2V5Ym9hcmQuY3NzLFxyXG5cdFx0XHRzZXRzID0gMCxcclxuXHRcdFx0bGF5b3V0ID0gJGtleWJvYXJkLmJ1aWx0TGF5b3V0c1tuYW1lIHx8IGJhc2UubGF5b3V0IHx8IG8ubGF5b3V0XSA9IHtcclxuXHRcdFx0XHRtYXBwZWRLZXlzOiB7fSxcclxuXHRcdFx0XHRhY2NlcHRlZEtleXM6IFtdXHJcblx0XHRcdH0sXHJcblx0XHRcdGFjY2VwdGVkS2V5cyA9IGxheW91dC5hY2NlcHRlZEtleXMgPSBvLnJlc3RyaWN0SW5jbHVkZSA/XHJcblx0XHRcdFx0KCcnICsgby5yZXN0cmljdEluY2x1ZGUpLnNwbGl0KC9cXHMrLykgfHwgW10gOlxyXG5cdFx0XHRcdFtdLFxyXG5cdFx0XHQvLyB1c2luZyAkbGF5b3V0IHRlbXBvcmFyaWx5IHRvIGhvbGQga2V5Ym9hcmQgcG9wdXAgY2xhc3NuYW1lc1xyXG5cdFx0XHQkbGF5b3V0ID0ga2Jjc3Mua2V5Ym9hcmQgKyAnICcgKyBvLmNzcy5wb3B1cCArICcgJyArIG8uY3NzLmNvbnRhaW5lciArXHJcblx0XHRcdFx0KG8uYWx3YXlzT3BlbiB8fCBvLnVzZXJDbG9zZWQgPyAnICcgKyBrYmNzcy5hbHdheXNPcGVuIDogJycpLFxyXG5cclxuXHRcdFx0Y29udGFpbmVyID0gJCgnPGRpdiAvPicpXHJcblx0XHRcdFx0LmFkZENsYXNzKCRsYXlvdXQpXHJcblx0XHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdFx0J3JvbGUnOiAndGV4dGJveCdcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5oaWRlKCk7XHJcblxyXG5cdFx0Ly8gYWxsb3cgYWRkaW5nIFwie3NwYWNlfVwiIGFzIGFuIGFjY2VwdGVkIGtleSAtIEZpeGVzICM2MjdcclxuXHRcdGluZGV4ID0gJC5pbkFycmF5KCd7c3BhY2V9JywgYWNjZXB0ZWRLZXlzKTtcclxuXHRcdGlmIChpbmRleCA+IC0xKSB7XHJcblx0XHRcdGFjY2VwdGVkS2V5c1tpbmRleF0gPSAnICc7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gdmVyaWZ5IGxheW91dCBvciBzZXR1cCBjdXN0b20ga2V5Ym9hcmRcclxuXHRcdGlmICgoaW50ZXJuYWwgJiYgby5sYXlvdXQgPT09ICdjdXN0b20nKSB8fCAhJGtleWJvYXJkLmxheW91dHMuaGFzT3duUHJvcGVydHkoby5sYXlvdXQpKSB7XHJcblx0XHRcdG8ubGF5b3V0ID0gJ2N1c3RvbSc7XHJcblx0XHRcdCRsYXlvdXQgPSAka2V5Ym9hcmQubGF5b3V0cy5jdXN0b20gPSBvLmN1c3RvbUxheW91dCB8fCB7XHJcblx0XHRcdFx0J25vcm1hbCc6IFsne2NhbmNlbH0nXVxyXG5cdFx0XHR9O1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JGxheW91dCA9ICRrZXlib2FyZC5sYXlvdXRzW2ludGVybmFsID8gby5sYXlvdXQgOiBuYW1lIHx8IGJhc2UubGF5b3V0IHx8IG8ubGF5b3V0XTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBNYWluIGtleWJvYXJkIGJ1aWxkaW5nIGxvb3BcclxuXHRcdCQuZWFjaCgkbGF5b3V0LCBmdW5jdGlvbiAoc2V0LCBrZXlTZXQpIHtcclxuXHRcdFx0Ly8gc2tpcCBsYXlvdXQgbmFtZSAmIGxhbmcgc2V0dGluZ3NcclxuXHRcdFx0aWYgKHNldCAhPT0gJycgJiYgIS9eKG5hbWV8bGFuZ3xydGwpJC9pLnRlc3Qoc2V0KSkge1xyXG5cdFx0XHRcdC8vIGtlZXAgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgZm9yIGNoYW5nZSBmcm9tIGRlZmF1bHQgdG8gbm9ybWFsIG5hbWluZ1xyXG5cdFx0XHRcdGlmIChzZXQgPT09ICdkZWZhdWx0Jykge1xyXG5cdFx0XHRcdFx0c2V0ID0gJ25vcm1hbCc7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHNldHMrKztcclxuXHRcdFx0XHQkcm93ID0gJCgnPGRpdiAvPicpXHJcblx0XHRcdFx0XHQuYXR0cignbmFtZScsIHNldCkgLy8gYWRkZWQgZm9yIHR5cGluZyBleHRlbnNpb25cclxuXHRcdFx0XHRcdC5hZGRDbGFzcyhrYmNzcy5rZXlTZXQgKyAnICcgKyBrYmNzcy5rZXlTZXQgKyAnLScgKyBzZXQpXHJcblx0XHRcdFx0XHQuYXBwZW5kVG8oY29udGFpbmVyKVxyXG5cdFx0XHRcdFx0LnRvZ2dsZShzZXQgPT09ICdub3JtYWwnKTtcclxuXHJcblx0XHRcdFx0Zm9yIChyb3cgPSAwOyByb3cgPCBrZXlTZXQubGVuZ3RoOyByb3crKykge1xyXG5cdFx0XHRcdFx0Ly8gcmVtb3ZlIGV4dHJhIHNwYWNlcyBiZWZvcmUgc3BsaXRpbmcgKHJlZ2V4IHByb2JhYmx5IGNvdWxkIGJlIGltcHJvdmVkKVxyXG5cdFx0XHRcdFx0Y3VycmVudFNldCA9ICQudHJpbShrZXlTZXRbcm93XSkucmVwbGFjZSgvXFx7KFxcLj8pW1xccytdPzpbXFxzK10/KFxcLj8pXFx9L2csICd7JDE6JDJ9Jyk7XHJcblx0XHRcdFx0XHRiYXNlLmJ1aWxkUm93KCRyb3csIHJvdywgY3VycmVudFNldC5zcGxpdCgvXFxzKy8pLCBhY2NlcHRlZEtleXMpO1xyXG5cdFx0XHRcdFx0JHJvdy5maW5kKCcuJyArIGtiY3NzLmtleUJ1dHRvbiArICcsLicgKyBrYmNzcy5rZXlTcGFjZXIpXHJcblx0XHRcdFx0XHRcdC5maWx0ZXIoJzpsYXN0JylcclxuXHRcdFx0XHRcdFx0LmFmdGVyKCc8YnIgY2xhc3M9XCInICsga2Jjc3MuZW5kUm93ICsgJ1wiLz4nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmIChzZXRzID4gMSkge1xyXG5cdFx0XHRiYXNlLnNldHMgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0bGF5b3V0Lmhhc01hcHBlZEtleXMgPSAhKCQuaXNFbXB0eU9iamVjdChsYXlvdXQubWFwcGVkS2V5cykpO1xyXG5cdFx0bGF5b3V0LiRrZXlib2FyZCA9IGNvbnRhaW5lcjtcclxuXHRcdHJldHVybiBjb250YWluZXI7XHJcblx0fTtcclxuXHJcblx0YmFzZS5idWlsZFJvdyA9IGZ1bmN0aW9uICgkcm93LCByb3csIGtleXMsIGFjY2VwdGVkS2V5cykge1xyXG5cdFx0dmFyIHQsIHR4dCwga2V5LCBpc0FjdGlvbiwgYWN0aW9uLCBtYXJnaW4sXHJcblx0XHRcdGtiY3NzID0gJGtleWJvYXJkLmNzcztcclxuXHRcdGZvciAoa2V5ID0gMDsga2V5IDwga2V5cy5sZW5ndGg7IGtleSsrKSB7XHJcblx0XHRcdC8vIHVzZWQgYnkgYWRkS2V5IGZ1bmN0aW9uXHJcblx0XHRcdGJhc2UudGVtcCA9IFskcm93LCByb3csIGtleV07XHJcblx0XHRcdGlzQWN0aW9uID0gZmFsc2U7XHJcblxyXG5cdFx0XHQvLyBpZ25vcmUgZW1wdHkga2V5c1xyXG5cdFx0XHRpZiAoa2V5c1trZXldLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBwcm9jZXNzIGhlcmUgaWYgaXQncyBhbiBhY3Rpb24ga2V5XHJcblx0XHRcdGlmICgvXlxce1xcUytcXH0kLy50ZXN0KGtleXNba2V5XSkpIHtcclxuXHRcdFx0XHRhY3Rpb24gPSBrZXlzW2tleV0ubWF0Y2goL15cXHsoXFxTKylcXH0kLylbMV07XHJcblx0XHRcdFx0Ly8gYWRkIGFjdGl2ZSBjbGFzcyBpZiB0aGVyZSBhcmUgZG91YmxlIGV4Y2xhbWF0aW9uIHBvaW50cyBpbiB0aGUgbmFtZVxyXG5cdFx0XHRcdGlmICgvXFwhXFwhLy50ZXN0KGFjdGlvbikpIHtcclxuXHRcdFx0XHRcdGFjdGlvbiA9IGFjdGlvbi5yZXBsYWNlKCchIScsICcnKTtcclxuXHRcdFx0XHRcdGlzQWN0aW9uID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIGFkZCBlbXB0eSBzcGFjZVxyXG5cdFx0XHRcdGlmICgvXnNwOigoXFxkKyk/KFtcXC58LF1cXGQrKT8pKGVtfHB4KT8kL2kudGVzdChhY3Rpb24pKSB7XHJcblx0XHRcdFx0XHQvLyBub3QgcGVyZmVjdCBnbG9iYWxpemF0aW9uLCBidXQgYWxsb3dzIHlvdSB0byB1c2Uge3NwOjEsMWVtfSwge3NwOjEuMmVtfSBvciB7c3A6MTVweH1cclxuXHRcdFx0XHRcdG1hcmdpbiA9IHBhcnNlRmxvYXQoYWN0aW9uXHJcblx0XHRcdFx0XHRcdC5yZXBsYWNlKC8sLywgJy4nKVxyXG5cdFx0XHRcdFx0XHQubWF0Y2goL15zcDooKFxcZCspPyhbXFwufCxdXFxkKyk/KShlbXxweCk/JC9pKVsxXSB8fCAwXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0JCgnPHNwYW4gY2xhc3M9XCInICsga2Jjc3Mua2V5VGV4dCArICdcIj48L3NwYW4+JylcclxuXHRcdFx0XHRcdFx0Ly8gcHJldmlvdXNseSB7c3A6MX0gd291bGQgYWRkIDFlbSBtYXJnaW4gdG8gZWFjaCBzaWRlIG9mIGEgMCB3aWR0aCBzcGFuXHJcblx0XHRcdFx0XHRcdC8vIG5vdyBGaXJlZm94IGRvZXNuJ3Qgc2VlbSB0byByZW5kZXIgMHB4IGRpbWVuc2lvbnMsIHNvIG5vdyB3ZSBzZXQgdGhlXHJcblx0XHRcdFx0XHRcdC8vIDFlbSBtYXJnaW4geCAyIGZvciB0aGUgd2lkdGhcclxuXHRcdFx0XHRcdFx0LndpZHRoKChhY3Rpb24ubWF0Y2goL3B4L2kpID8gbWFyZ2luICsgJ3B4JyA6IChtYXJnaW4gKiAyKSArICdlbScpKVxyXG5cdFx0XHRcdFx0XHQuYWRkQ2xhc3Moa2Jjc3Mua2V5U3BhY2VyKVxyXG5cdFx0XHRcdFx0XHQuYXBwZW5kVG8oJHJvdyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBhZGQgZW1wdHkgYnV0dG9uXHJcblx0XHRcdFx0aWYgKC9eZW1wdHkoOigoXFxkKyk/KFtcXC58LF1cXGQrKT8pKGVtfHB4KT8pPyQvaS50ZXN0KGFjdGlvbikpIHtcclxuXHRcdFx0XHRcdG1hcmdpbiA9ICgvOi8udGVzdChhY3Rpb24pKSA/IHBhcnNlRmxvYXQoYWN0aW9uXHJcblx0XHRcdFx0XHRcdC5yZXBsYWNlKC8sLywgJy4nKVxyXG5cdFx0XHRcdFx0XHQubWF0Y2goL15lbXB0eTooKFxcZCspPyhbXFwufCxdXFxkKyk/KShlbXxweCk/JC9pKVsxXSB8fCAwXHJcblx0XHRcdFx0XHQpIDogJyc7XHJcblx0XHRcdFx0XHRiYXNlXHJcblx0XHRcdFx0XHRcdC5hZGRLZXkoJycsICcgJywgdHJ1ZSlcclxuXHRcdFx0XHRcdFx0LmFkZENsYXNzKG8uY3NzLmJ1dHRvbkRpc2FibGVkICsgJyAnICsgby5jc3MuYnV0dG9uRW1wdHkpXHJcblx0XHRcdFx0XHRcdC5hdHRyKCdhcmlhLWRpc2FibGVkJywgdHJ1ZSlcclxuXHRcdFx0XHRcdFx0LndpZHRoKG1hcmdpbiA/IChhY3Rpb24ubWF0Y2goJ3B4JykgPyBtYXJnaW4gKyAncHgnIDogKG1hcmdpbiAqIDIpICsgJ2VtJykgOiAnJyk7XHJcblx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIG1ldGEga2V5c1xyXG5cdFx0XHRcdGlmICgvXm1ldGFbXFx3LV0rXFw6PyhcXHcrKT8vaS50ZXN0KGFjdGlvbikpIHtcclxuXHRcdFx0XHRcdGJhc2VcclxuXHRcdFx0XHRcdFx0LmFkZEtleShhY3Rpb24uc3BsaXQoJzonKVswXSwgYWN0aW9uKVxyXG5cdFx0XHRcdFx0XHQuYWRkQ2xhc3Moa2Jjc3Mua2V5SGFzQWN0aXZlKTtcclxuXHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gc3dpdGNoIG5lZWRlZCBmb3IgYWN0aW9uIGtleXMgd2l0aCBtdWx0aXBsZSBuYW1lcy9zaG9ydGN1dHMgb3JcclxuXHRcdFx0XHQvLyBkZWZhdWx0IHdpbGwgY2F0Y2ggYWxsIG90aGVyc1xyXG5cdFx0XHRcdHR4dCA9IGFjdGlvbi5zcGxpdCgnOicpO1xyXG5cdFx0XHRcdHN3aXRjaCAodHh0WzBdLnRvTG93ZXJDYXNlKCkpIHtcclxuXHJcblx0XHRcdFx0Y2FzZSAnYSc6XHJcblx0XHRcdFx0Y2FzZSAnYWNjZXB0JzpcclxuXHRcdFx0XHRcdGJhc2VcclxuXHRcdFx0XHRcdFx0LmFkZEtleSgnYWNjZXB0JywgYWN0aW9uKVxyXG5cdFx0XHRcdFx0XHQuYWRkQ2xhc3Moby5jc3MuYnV0dG9uQWN0aW9uICsgJyAnICsga2Jjc3Mua2V5QWN0aW9uKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRjYXNlICdhbHQnOlxyXG5cdFx0XHRcdGNhc2UgJ2FsdGdyJzpcclxuXHRcdFx0XHRcdGJhc2VcclxuXHRcdFx0XHRcdFx0LmFkZEtleSgnYWx0JywgYWN0aW9uKVxyXG5cdFx0XHRcdFx0XHQuYWRkQ2xhc3Moa2Jjc3Mua2V5SGFzQWN0aXZlKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRjYXNlICdiJzpcclxuXHRcdFx0XHRjYXNlICdia3NwJzpcclxuXHRcdFx0XHRcdGJhc2UuYWRkS2V5KCdia3NwJywgYWN0aW9uKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRjYXNlICdjJzpcclxuXHRcdFx0XHRjYXNlICdjYW5jZWwnOlxyXG5cdFx0XHRcdFx0YmFzZVxyXG5cdFx0XHRcdFx0XHQuYWRkS2V5KCdjYW5jZWwnLCBhY3Rpb24pXHJcblx0XHRcdFx0XHRcdC5hZGRDbGFzcyhvLmNzcy5idXR0b25BY3Rpb24gKyAnICcgKyBrYmNzcy5rZXlBY3Rpb24pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdFx0Ly8gdG9nZ2xlIGNvbWJvL2RpYWNyaXRpYyBrZXlcclxuXHRcdFx0XHRcdC8qanNoaW50IC1XMDgzICovXHJcblx0XHRcdFx0Y2FzZSAnY29tYm8nOlxyXG5cdFx0XHRcdFx0YmFzZVxyXG5cdFx0XHRcdFx0XHQuYWRkS2V5KCdjb21ibycsIGFjdGlvbilcclxuXHRcdFx0XHRcdFx0LmFkZENsYXNzKGtiY3NzLmtleUhhc0FjdGl2ZSlcclxuXHRcdFx0XHRcdFx0LmF0dHIoJ3RpdGxlJywgZnVuY3Rpb24gKGluZHgsIHRpdGxlKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gYWRkIGNvbWJvIGtleSBzdGF0ZSB0byB0aXRsZVxyXG5cdFx0XHRcdFx0XHRcdHJldHVybiB0aXRsZSArICcgJyArIG8uZGlzcGxheVtvLnVzZUNvbWJvcyA/ICdhY3RpdmUnIDogJ2Rpc2FibGVkJ107XHJcblx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHRcdC50b2dnbGVDbGFzcyhvLmNzcy5idXR0b25BY3RpdmUsIG8udXNlQ29tYm9zKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRcdC8vIERlY2ltYWwgLSB1bmlxdWUgZGVjaW1hbCBwb2ludCAobnVtIHBhZCBsYXlvdXQpXHJcblx0XHRcdFx0Y2FzZSAnZGVjJzpcclxuXHRcdFx0XHRcdGFjY2VwdGVkS2V5cy5wdXNoKChiYXNlLmRlY2ltYWwpID8gJy4nIDogJywnKTtcclxuXHRcdFx0XHRcdGJhc2UuYWRkS2V5KCdkZWMnLCBhY3Rpb24pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdGNhc2UgJ2UnOlxyXG5cdFx0XHRcdGNhc2UgJ2VudGVyJzpcclxuXHRcdFx0XHRcdGJhc2VcclxuXHRcdFx0XHRcdFx0LmFkZEtleSgnZW50ZXInLCBhY3Rpb24pXHJcblx0XHRcdFx0XHRcdC5hZGRDbGFzcyhvLmNzcy5idXR0b25BY3Rpb24gKyAnICcgKyBrYmNzcy5rZXlBY3Rpb24pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdGNhc2UgJ2xvY2snOlxyXG5cdFx0XHRcdFx0YmFzZVxyXG5cdFx0XHRcdFx0XHQuYWRkS2V5KCdsb2NrJywgYWN0aW9uKVxyXG5cdFx0XHRcdFx0XHQuYWRkQ2xhc3Moa2Jjc3Mua2V5SGFzQWN0aXZlKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRjYXNlICdzJzpcclxuXHRcdFx0XHRjYXNlICdzaGlmdCc6XHJcblx0XHRcdFx0XHRiYXNlXHJcblx0XHRcdFx0XHRcdC5hZGRLZXkoJ3NoaWZ0JywgYWN0aW9uKVxyXG5cdFx0XHRcdFx0XHQuYWRkQ2xhc3Moa2Jjc3Mua2V5SGFzQWN0aXZlKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRcdC8vIENoYW5nZSBzaWduIChmb3IgbnVtIHBhZCBsYXlvdXQpXHJcblx0XHRcdFx0Y2FzZSAnc2lnbic6XHJcblx0XHRcdFx0XHRhY2NlcHRlZEtleXMucHVzaCgnLScpO1xyXG5cdFx0XHRcdFx0YmFzZS5hZGRLZXkoJ3NpZ24nLCBhY3Rpb24pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdGNhc2UgJ3NwYWNlJzpcclxuXHRcdFx0XHRcdGFjY2VwdGVkS2V5cy5wdXNoKCcgJyk7XHJcblx0XHRcdFx0XHRiYXNlLmFkZEtleSgnc3BhY2UnLCBhY3Rpb24pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdGNhc2UgJ3QnOlxyXG5cdFx0XHRcdGNhc2UgJ3RhYic6XHJcblx0XHRcdFx0XHRiYXNlLmFkZEtleSgndGFiJywgYWN0aW9uKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0aWYgKCRrZXlib2FyZC5rZXlhY3Rpb24uaGFzT3duUHJvcGVydHkodHh0WzBdKSkge1xyXG5cdFx0XHRcdFx0XHRiYXNlXHJcblx0XHRcdFx0XHRcdFx0LmFkZEtleSh0eHRbMF0sIGFjdGlvbilcclxuXHRcdFx0XHRcdFx0XHQudG9nZ2xlQ2xhc3Moby5jc3MuYnV0dG9uQWN0aW9uICsgJyAnICsga2Jjc3Mua2V5QWN0aW9uLCBpc0FjdGlvbik7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdC8vIHJlZ3VsYXIgYnV0dG9uIChub3QgYW4gYWN0aW9uIGtleSlcclxuXHRcdFx0XHR0ID0ga2V5c1trZXldO1xyXG5cdFx0XHRcdGJhc2UuYWRkS2V5KHQsIHQsIHRydWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0YmFzZS5yZW1vdmVCaW5kaW5ncyA9IGZ1bmN0aW9uIChuYW1lc3BhY2UpIHtcclxuXHRcdCQoZG9jdW1lbnQpLnVuYmluZChuYW1lc3BhY2UpO1xyXG5cdFx0aWYgKGJhc2UuZWwub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQpIHtcclxuXHRcdFx0JChiYXNlLmVsLm93bmVyRG9jdW1lbnQpLnVuYmluZChuYW1lc3BhY2UpO1xyXG5cdFx0fVxyXG5cdFx0JCh3aW5kb3cpLnVuYmluZChuYW1lc3BhY2UpO1xyXG5cdFx0YmFzZS4kZWwudW5iaW5kKG5hbWVzcGFjZSk7XHJcblx0fTtcclxuXHJcblx0YmFzZS5yZW1vdmVLZXlib2FyZCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdGJhc2UuJGRlY0J0biA9IFtdO1xyXG5cdFx0Ly8gYmFzZS4kcHJldmlldyA9PT0gYmFzZS4kZWwgd2hlbiBvLnVzZVByZXZpZXcgaXMgZmFsc2UgLSBmaXhlcyAjNDQyXHJcblx0XHRpZiAoby51c2VQcmV2aWV3KSB7XHJcblx0XHRcdGJhc2UuJHByZXZpZXcucmVtb3ZlRGF0YSgna2V5Ym9hcmQnKTtcclxuXHRcdH1cclxuXHRcdGJhc2UuJHByZXZpZXcudW5iaW5kKGJhc2UubmFtZXNwYWNlICsgJ2tleWJpbmRpbmdzJyk7XHJcblx0XHRiYXNlLnByZXZpZXcgPSBudWxsO1xyXG5cdFx0YmFzZS4kcHJldmlldyA9IG51bGw7XHJcblx0XHRiYXNlLiRwcmV2aWV3Q29weSA9IG51bGw7XHJcblx0XHRiYXNlLiRrZXlib2FyZC5yZW1vdmVEYXRhKCdrZXlib2FyZCcpO1xyXG5cdFx0YmFzZS4ka2V5Ym9hcmQucmVtb3ZlKCk7XHJcblx0XHRiYXNlLiRrZXlib2FyZCA9IFtdO1xyXG5cdFx0YmFzZS5pc09wZW4gPSBmYWxzZTtcclxuXHRcdGJhc2UuaXNDdXJyZW50KGZhbHNlKTtcclxuXHR9O1xyXG5cclxuXHRiYXNlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuXHRcdHZhciBpbmRleCxcclxuXHRcdFx0a2Jjc3MgPSAka2V5Ym9hcmQuY3NzLFxyXG5cdFx0XHRsZW4gPSBiYXNlLmV4dGVuc2lvbk5hbWVzcGFjZS5sZW5ndGgsXHJcblx0XHRcdHRtcCA9IFtcclxuXHRcdFx0XHRrYmNzcy5pbnB1dCxcclxuXHRcdFx0XHRrYmNzcy5sb2NrZWQsXHJcblx0XHRcdFx0a2Jjc3MucGxhY2Vob2xkZXIsXHJcblx0XHRcdFx0a2Jjc3Mubm9LZXlib2FyZCxcclxuXHRcdFx0XHRrYmNzcy5hbHdheXNPcGVuLFxyXG5cdFx0XHRcdG8uY3NzLmlucHV0LFxyXG5cdFx0XHRcdGtiY3NzLmlzQ3VycmVudFxyXG5cdFx0XHRdLmpvaW4oJyAnKTtcclxuXHRcdGNsZWFyVGltZW91dChiYXNlLnRpbWVyKTtcclxuXHRcdGNsZWFyVGltZW91dChiYXNlLnRpbWVyMik7XHJcblx0XHRjbGVhclRpbWVvdXQoYmFzZS50aW1lcjMpO1xyXG5cdFx0aWYgKGJhc2UuJGtleWJvYXJkLmxlbmd0aCkge1xyXG5cdFx0XHRiYXNlLnJlbW92ZUtleWJvYXJkKCk7XHJcblx0XHR9XHJcblx0XHRpZiAoYmFzZS5vcHRpb25zLm9wZW5Pbikge1xyXG5cdFx0XHRiYXNlLnJlbW92ZUJpbmRpbmdzKGJhc2Uub3B0aW9ucy5vcGVuT24pO1xyXG5cdFx0fVxyXG5cdFx0YmFzZS5yZW1vdmVCaW5kaW5ncyhiYXNlLm5hbWVzcGFjZSk7XHJcblx0XHRiYXNlLnJlbW92ZUJpbmRpbmdzKGJhc2UubmFtZXNwYWNlICsgJ2NhbGxiYWNrcycpO1xyXG5cdFx0Zm9yIChpbmRleCA9IDA7IGluZGV4IDwgbGVuOyBpbmRleCsrKSB7XHJcblx0XHRcdGJhc2UucmVtb3ZlQmluZGluZ3MoYmFzZS5leHRlbnNpb25OYW1lc3BhY2VbaW5kZXhdKTtcclxuXHRcdH1cclxuXHRcdGJhc2UuZWwuYWN0aXZlID0gZmFsc2U7XHJcblxyXG5cdFx0YmFzZS4kZWxcclxuXHRcdFx0LnJlbW92ZUNsYXNzKHRtcClcclxuXHRcdFx0LnJlbW92ZUF0dHIoJ2FyaWEtaGFzcG9wdXAnKVxyXG5cdFx0XHQucmVtb3ZlQXR0cigncm9sZScpXHJcblx0XHRcdC5yZW1vdmVBdHRyKCdyZWFkb25seScpXHJcblx0XHRcdC5yZW1vdmVEYXRhKCdrZXlib2FyZCcpO1xyXG5cdFx0YmFzZSA9IG51bGw7XHJcblxyXG5cdFx0aWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRjYWxsYmFjaygpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIFJ1biBpbml0aWFsaXplclxyXG5cdGJhc2UuaW5pdCgpO1xyXG5cclxuXHR9OyAvLyBlbmQgJC5rZXlib2FyZCBkZWZpbml0aW9uXHJcblxyXG5cdC8vIGV2ZW50LndoaWNoICYgQVNDSUkgdmFsdWVzXHJcblx0JGtleWJvYXJkLmtleUNvZGVzID0ge1xyXG5cdFx0YmFja1NwYWNlOiA4LFxyXG5cdFx0dGFiOiA5LFxyXG5cdFx0ZW50ZXI6IDEzLFxyXG5cdFx0Y2Fwc0xvY2s6IDIwLFxyXG5cdFx0ZXNjYXBlOiAyNyxcclxuXHRcdHNwYWNlOiAzMixcclxuXHRcdHBhZ2VVcDogMzMsXHJcblx0XHRwYWdlRG93bjogMzQsXHJcblx0XHRlbmQ6IDM1LFxyXG5cdFx0aG9tZTogMzYsXHJcblx0XHRsZWZ0OiAzNyxcclxuXHRcdHVwOiAzOCxcclxuXHRcdHJpZ2h0OiAzOSxcclxuXHRcdGRvd246IDQwLFxyXG5cdFx0aW5zZXJ0OiA0NSxcclxuXHRcdGRlbGV0ZTogNDYsXHJcblx0XHQvLyBldmVudC53aGljaCBrZXlDb2RlcyAodXBwZXJjYXNlIGxldHRlcnMpXHJcblx0XHRBOiA2NSxcclxuXHRcdFo6IDkwLFxyXG5cdFx0VjogODYsXHJcblx0XHRDOiA2NyxcclxuXHRcdFg6IDg4LFxyXG5cclxuXHRcdC8vIEFTQ0lJIGxvd2VyY2FzZSBhICYgelxyXG5cdFx0YTogOTcsXHJcblx0XHR6OiAxMjJcclxuXHR9O1xyXG5cclxuXHQka2V5Ym9hcmQuY3NzID0ge1xyXG5cdFx0Ly8ga2V5Ym9hcmQgaWQgc3VmZml4XHJcblx0XHRpZFN1ZmZpeDogJ19rZXlib2FyZCcsXHJcblx0XHQvLyBjbGFzcyBuYW1lIHRvIHNldCBpbml0aWFsIGZvY3VzXHJcblx0XHRpbml0aWFsRm9jdXM6ICdrZXlib2FyZC1pbml0LWZvY3VzJyxcclxuXHRcdC8vIGVsZW1lbnQgY2xhc3MgbmFtZXNcclxuXHRcdGlucHV0OiAndWkta2V5Ym9hcmQtaW5wdXQnLFxyXG5cdFx0aW5wdXRDbG9uZTogJ3VpLWtleWJvYXJkLXByZXZpZXctY2xvbmUnLFxyXG5cdFx0d3JhcHBlcjogJ3VpLWtleWJvYXJkLXByZXZpZXctd3JhcHBlcicsXHJcblx0XHRwcmV2aWV3OiAndWkta2V5Ym9hcmQtcHJldmlldycsXHJcblx0XHRrZXlib2FyZDogJ3VpLWtleWJvYXJkJyxcclxuXHRcdGtleVNldDogJ3VpLWtleWJvYXJkLWtleXNldCcsXHJcblx0XHRrZXlCdXR0b246ICd1aS1rZXlib2FyZC1idXR0b24nLFxyXG5cdFx0a2V5V2lkZTogJ3VpLWtleWJvYXJkLXdpZGVrZXknLFxyXG5cdFx0a2V5UHJlZml4OiAndWkta2V5Ym9hcmQtJyxcclxuXHRcdGtleVRleHQ6ICd1aS1rZXlib2FyZC10ZXh0JywgLy8gc3BhbiB3aXRoIGJ1dHRvbiB0ZXh0XHJcblx0XHRrZXlIYXNBY3RpdmU6ICd1aS1rZXlib2FyZC1oYXNhY3RpdmVzdGF0ZScsXHJcblx0XHRrZXlBY3Rpb246ICd1aS1rZXlib2FyZC1hY3Rpb25rZXknLFxyXG5cdFx0a2V5U3BhY2VyOiAndWkta2V5Ym9hcmQtc3BhY2VyJywgLy8gZW1wdHkga2V5c1xyXG5cdFx0a2V5VG9nZ2xlOiAndWkta2V5Ym9hcmQtdG9nZ2xlJyxcclxuXHRcdGtleURpc2FibGVkOiAndWkta2V5Ym9hcmQtZGlzYWJsZWQnLFxyXG5cdFx0Ly8gQ2xhc3MgZm9yIEJScyB3aXRoIGEgZGl2IHdyYXBwZXIgaW5zaWRlIG9mIGNvbnRlbnRlZGl0YWJsZVxyXG5cdFx0ZGl2V3JhcHBlckNFOiAndWkta2V5Ym9hcmQtZGl2LXdyYXBwZXInLFxyXG5cdFx0Ly8gc3RhdGVzXHJcblx0XHRsb2NrZWQ6ICd1aS1rZXlib2FyZC1sb2NrZWRpbnB1dCcsXHJcblx0XHRhbHdheXNPcGVuOiAndWkta2V5Ym9hcmQtYWx3YXlzLW9wZW4nLFxyXG5cdFx0bm9LZXlib2FyZDogJ3VpLWtleWJvYXJkLW5va2V5Ym9hcmQnLFxyXG5cdFx0cGxhY2Vob2xkZXI6ICd1aS1rZXlib2FyZC1wbGFjZWhvbGRlcicsXHJcblx0XHRoYXNGb2N1czogJ3VpLWtleWJvYXJkLWhhcy1mb2N1cycsXHJcblx0XHRpc0N1cnJlbnQ6ICd1aS1rZXlib2FyZC1pbnB1dC1jdXJyZW50JyxcclxuXHRcdC8vIHZhbGlkYXRpb24gJiBhdXRvYWNjZXB0XHJcblx0XHRpbnB1dFZhbGlkOiAndWkta2V5Ym9hcmQtdmFsaWQtaW5wdXQnLFxyXG5cdFx0aW5wdXRJbnZhbGlkOiAndWkta2V5Ym9hcmQtaW52YWxpZC1pbnB1dCcsXHJcblx0XHRpbnB1dEF1dG9BY2NlcHRlZDogJ3VpLWtleWJvYXJkLWF1dG9hY2NlcHRlZCcsXHJcblx0XHRlbmRSb3c6ICd1aS1rZXlib2FyZC1idXR0b24tZW5kcm93JyAvLyBjbGFzcyBhZGRlZCB0byA8YnI+XHJcblx0fTtcclxuXHJcblx0JGtleWJvYXJkLmV2ZW50cyA9IHtcclxuXHRcdC8vIGtleWJvYXJkIGV2ZW50c1xyXG5cdFx0a2JDaGFuZ2U6ICdrZXlib2FyZENoYW5nZScsXHJcblx0XHRrYkJlZm9yZUNsb3NlOiAnYmVmb3JlQ2xvc2UnLFxyXG5cdFx0a2JCZWZvcmVWaXNpYmxlOiAnYmVmb3JlVmlzaWJsZScsXHJcblx0XHRrYlZpc2libGU6ICd2aXNpYmxlJyxcclxuXHRcdGtiSW5pdDogJ2luaXRpYWxpemVkJyxcclxuXHRcdGtiSW5hY3RpdmU6ICdpbmFjdGl2ZScsXHJcblx0XHRrYkhpZGRlbjogJ2hpZGRlbicsXHJcblx0XHRrYlJlcGVhdGVyOiAncmVwZWF0ZXInLFxyXG5cdFx0a2JLZXlzZXRDaGFuZ2U6ICdrZXlzZXRDaGFuZ2UnLFxyXG5cdFx0Ly8gaW5wdXQgZXZlbnRzXHJcblx0XHRpbnB1dEFjY2VwdGVkOiAnYWNjZXB0ZWQnLFxyXG5cdFx0aW5wdXRDYW5jZWxlZDogJ2NhbmNlbGVkJyxcclxuXHRcdGlucHV0Q2hhbmdlOiAnY2hhbmdlJyxcclxuXHRcdGlucHV0UmVzdHJpY3RlZDogJ3Jlc3RyaWN0ZWQnXHJcblx0fTtcclxuXHJcblx0Ly8gQWN0aW9uIGtleSBmdW5jdGlvbiBsaXN0XHJcblx0JGtleWJvYXJkLmtleWFjdGlvbiA9IHtcclxuXHRcdGFjY2VwdDogZnVuY3Rpb24gKGJhc2UpIHtcclxuXHRcdFx0YmFzZS5jbG9zZSh0cnVlKTsgLy8gc2FtZSBhcyBiYXNlLmFjY2VwdCgpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7IC8vIHJldHVybiBmYWxzZSBwcmV2ZW50cyBmdXJ0aGVyIHByb2Nlc3NpbmdcclxuXHRcdH0sXHJcblx0XHRhbHQ6IGZ1bmN0aW9uIChiYXNlKSB7XHJcblx0XHRcdGJhc2UuYWx0QWN0aXZlID0gIWJhc2UuYWx0QWN0aXZlO1xyXG5cdFx0XHRiYXNlLnNob3dTZXQoKTtcclxuXHRcdH0sXHJcblx0XHRia3NwOiBmdW5jdGlvbiAoYmFzZSkge1xyXG5cdFx0XHRpZiAoYmFzZS5pc0NvbnRlbnRFZGl0YWJsZSkge1xyXG5cdFx0XHRcdGJhc2UuZXhlY0NvbW1hbmQoJ2RlbGV0ZScpO1xyXG5cdFx0XHRcdC8vIHNhdmUgbmV3IGNhcmV0IHBvc2l0aW9uXHJcblx0XHRcdFx0YmFzZS5zYXZlQ2FyZXQoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyB0aGUgc2NyaXB0IGxvb2tzIGZvciB0aGUgJ1xcYicgc3RyaW5nIGFuZCBpbml0aWF0ZXMgYSBiYWNrc3BhY2VcclxuXHRcdFx0XHRiYXNlLmluc2VydFRleHQoJ1xcYicpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0Y2FuY2VsOiBmdW5jdGlvbiAoYmFzZSkge1xyXG5cdFx0XHRiYXNlLmNsb3NlKCk7XHJcblx0XHRcdHJldHVybiBmYWxzZTsgLy8gcmV0dXJuIGZhbHNlIHByZXZlbnRzIGZ1cnRoZXIgcHJvY2Vzc2luZ1xyXG5cdFx0fSxcclxuXHRcdGNsZWFyOiBmdW5jdGlvbiAoYmFzZSkge1xyXG5cdFx0XHRiYXNlLiRwcmV2aWV3W2Jhc2UuaXNDb250ZW50RWRpdGFibGUgPyAndGV4dCcgOiAndmFsJ10oJycpO1xyXG5cdFx0XHRpZiAoYmFzZS4kZGVjQnRuLmxlbmd0aCkge1xyXG5cdFx0XHRcdGJhc2UuY2hlY2tEZWNpbWFsKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRjb21ibzogZnVuY3Rpb24gKGJhc2UpIHtcclxuXHRcdFx0dmFyIG8gPSBiYXNlLm9wdGlvbnMsXHJcblx0XHRcdFx0YyA9ICFvLnVzZUNvbWJvcyxcclxuXHRcdFx0XHQkY29tYm8gPSBiYXNlLiRrZXlib2FyZC5maW5kKCcuJyArICRrZXlib2FyZC5jc3Mua2V5UHJlZml4ICsgJ2NvbWJvJyk7XHJcblx0XHRcdG8udXNlQ29tYm9zID0gYztcclxuXHRcdFx0JGNvbWJvXHJcblx0XHRcdFx0LnRvZ2dsZUNsYXNzKG8uY3NzLmJ1dHRvbkFjdGl2ZSwgYylcclxuXHRcdFx0XHQvLyB1cGRhdGUgY29tYm8ga2V5IHN0YXRlXHJcblx0XHRcdFx0LmF0dHIoJ3RpdGxlJywgJGNvbWJvLmF0dHIoJ2RhdGEtdGl0bGUnKSArICcgKCcgKyBvLmRpc3BsYXlbYyA/ICdhY3RpdmUnIDogJ2Rpc2FibGVkJ10gKyAnKScpO1xyXG5cdFx0XHRpZiAoYykge1xyXG5cdFx0XHRcdGJhc2UuY2hlY2tDb21ib3MoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9LFxyXG5cdFx0ZGVjOiBmdW5jdGlvbiAoYmFzZSkge1xyXG5cdFx0XHRiYXNlLmluc2VydFRleHQoKGJhc2UuZGVjaW1hbCkgPyAnLicgOiAnLCcpO1xyXG5cdFx0fSxcclxuXHRcdGRlbDogZnVuY3Rpb24gKGJhc2UpIHtcclxuXHRcdFx0aWYgKGJhc2UuaXNDb250ZW50RWRpdGFibGUpIHtcclxuXHRcdFx0XHRiYXNlLmV4ZWNDb21tYW5kKCdmb3J3YXJkRGVsZXRlJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gdGhlIHNjcmlwdCBsb29rcyBmb3IgdGhlICd7ZH0nIHN0cmluZyBhbmQgaW5pdGlhdGVzIGEgZGVsZXRlXHJcblx0XHRcdFx0YmFzZS5pbnNlcnRUZXh0KCd7ZH0nKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdC8vIHJlc2V0cyB0byBiYXNlIGtleXNldCAoZGVwcmVjYXRlZCBiZWNhdXNlIFwiZGVmYXVsdFwiIGlzIGEgcmVzZXJ2ZWQgd29yZClcclxuXHRcdCdkZWZhdWx0JzogZnVuY3Rpb24gKGJhc2UpIHtcclxuXHRcdFx0YmFzZS5zaGlmdEFjdGl2ZSA9IGJhc2UuYWx0QWN0aXZlID0gYmFzZS5tZXRhQWN0aXZlID0gZmFsc2U7XHJcblx0XHRcdGJhc2Uuc2hvd1NldCgpO1xyXG5cdFx0fSxcclxuXHRcdC8vIGVsIGlzIHRoZSBwcmVzc2VkIGtleSAoYnV0dG9uKSBvYmplY3Q7IGl0IGlzIG51bGwgd2hlbiB0aGUgcmVhbCBrZXlib2FyZCBlbnRlciBpcyBwcmVzc2VkXHJcblx0XHRlbnRlcjogZnVuY3Rpb24gKGJhc2UsIGVsLCBlKSB7XHJcblx0XHRcdHZhciBvID0gYmFzZS5vcHRpb25zO1xyXG5cdFx0XHQvLyBzaGlmdCtlbnRlciBpbiB0ZXh0YXJlYXNcclxuXHRcdFx0aWYgKGUuc2hpZnRLZXkpIHtcclxuXHRcdFx0XHQvLyB0ZXh0YXJlYSwgaW5wdXQgJiBjb250ZW50ZWRpdGFibGUgLSBlbnRlck1vZCArIHNoaWZ0ICsgZW50ZXIgPSBhY2NlcHQsXHJcblx0XHRcdFx0Ly8gIHRoZW4gZ28gdG8gcHJldjsgYmFzZS5zd2l0Y2hJbnB1dChnb1RvTmV4dCwgYXV0b0FjY2VwdClcclxuXHRcdFx0XHQvLyB0ZXh0YXJlYSAmIGlucHV0IC0gc2hpZnQgKyBlbnRlciA9IGFjY2VwdCAobm8gbmF2aWdhdGlvbilcclxuXHRcdFx0XHRyZXR1cm4gKG8uZW50ZXJOYXZpZ2F0aW9uKSA/IGJhc2Uuc3dpdGNoSW5wdXQoIWVbby5lbnRlck1vZF0sIHRydWUpIDogYmFzZS5jbG9zZSh0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBpbnB1dCBvbmx5IC0gZW50ZXJNb2QgKyBlbnRlciB0byBuYXZpZ2F0ZVxyXG5cdFx0XHRpZiAoby5lbnRlck5hdmlnYXRpb24gJiYgKCFiYXNlLmlzVGV4dEFyZWEgfHwgZVtvLmVudGVyTW9kXSkpIHtcclxuXHRcdFx0XHRyZXR1cm4gYmFzZS5zd2l0Y2hJbnB1dCghZVtvLmVudGVyTW9kXSwgby5hdXRvQWNjZXB0ID8gJ3RydWUnIDogZmFsc2UpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIHByZXNzaW5nIHZpcnR1YWwgZW50ZXIgYnV0dG9uIGluc2lkZSBvZiBhIHRleHRhcmVhIC0gYWRkIGEgY2FycmlhZ2UgcmV0dXJuXHJcblx0XHRcdC8vIGUudGFyZ2V0IGlzIHNwYW4gd2hlbiBjbGlja2luZyBvbiB0ZXh0IGFuZCBidXR0b24gYXQgb3RoZXIgdGltZXNcclxuXHRcdFx0aWYgKGJhc2UuaXNUZXh0QXJlYSAmJiAkKGUudGFyZ2V0KS5jbG9zZXN0KCdidXR0b24nKS5sZW5ndGgpIHtcclxuXHRcdFx0XHQvLyBJRTggZml4IChzcGFjZSArIFxcbikgLSBmaXhlcyAjNzEgdGhhbmtzIEJsb29raWUhXHJcblx0XHRcdFx0YmFzZS5pbnNlcnRUZXh0KCgka2V5Ym9hcmQubXNpZSA/ICcgJyA6ICcnKSArICdcXG4nKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoYmFzZS5pc0NvbnRlbnRFZGl0YWJsZSAmJiAhby5lbnRlck5hdmlnYXRpb24pIHtcclxuXHRcdFx0XHRiYXNlLmV4ZWNDb21tYW5kKCdpbnNlcnRIVE1MJywgJzxkaXY+PGJyIGNsYXNzPVwiJyArICRrZXlib2FyZC5jc3MuZGl2V3JhcHBlckNFICsgJ1wiPjwvZGl2PicpO1xyXG5cdFx0XHRcdC8vIFVzaW5nIGJhY2tzcGFjZSBvbiB3cmFwcGVkIEJScyB3aWxsIG5vdyBzaGlmdCB0aGUgdGV4dG5vZGUgaW5zaWRlIG9mIHRoZSB3cmFwcGVkIEJSXHJcblx0XHRcdFx0Ly8gQWx0aG91Z2ggbm90IGlkZWFsLCB0aGUgY2FyZXQgaXMgbW92ZWQgYWZ0ZXIgdGhlIGJsb2NrIC0gc2VlIHRoZSB3aWtpIHBhZ2UgZm9yXHJcblx0XHRcdFx0Ly8gbW9yZSBkZXRhaWxzOiBodHRwczovL2dpdGh1Yi5jb20vTW90dGllL0tleWJvYXJkL3dpa2kvQ29udGVudGVkaXRhYmxlI2xpbWl0YXRpb25zXHJcblx0XHRcdFx0Ly8gbW92ZSBjYXJldCBhZnRlciBhIGRlbGF5IHRvIGFsbG93IHJlbmRlcmluZyBvZiBIVE1MXHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdCRrZXlib2FyZC5rZXlhY3Rpb24ucmlnaHQoYmFzZSk7XHJcblx0XHRcdFx0XHRiYXNlLnNhdmVDYXJldCgpO1xyXG5cdFx0XHRcdH0sIDApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0Ly8gY2FwcyBsb2NrIGtleVxyXG5cdFx0bG9jazogZnVuY3Rpb24gKGJhc2UpIHtcclxuXHRcdFx0YmFzZS5sYXN0LmtleXNldFswXSA9IGJhc2Uuc2hpZnRBY3RpdmUgPSBiYXNlLmNhcHNMb2NrID0gIWJhc2UuY2Fwc0xvY2s7XHJcblx0XHRcdGJhc2Uuc2hvd1NldCgpO1xyXG5cdFx0fSxcclxuXHRcdGxlZnQ6IGZ1bmN0aW9uIChiYXNlKSB7XHJcblx0XHRcdHZhciBwID0gJGtleWJvYXJkLmNhcmV0KGJhc2UuJHByZXZpZXcpO1xyXG5cdFx0XHRpZiAocC5zdGFydCAtIDEgPj0gMCkge1xyXG5cdFx0XHRcdC8vIG1vdmUgYm90aCBzdGFydCBhbmQgZW5kIG9mIGNhcmV0IChwcmV2ZW50cyB0ZXh0IHNlbGVjdGlvbikgJiBzYXZlIGNhcmV0IHBvc2l0aW9uXHJcblx0XHRcdFx0YmFzZS5sYXN0LnN0YXJ0ID0gYmFzZS5sYXN0LmVuZCA9IHAuc3RhcnQgLSAxO1xyXG5cdFx0XHRcdCRrZXlib2FyZC5jYXJldChiYXNlLiRwcmV2aWV3LCBiYXNlLmxhc3QpO1xyXG5cdFx0XHRcdGJhc2Uuc2V0U2Nyb2xsKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRtZXRhOiBmdW5jdGlvbiAoYmFzZSwgZWwpIHtcclxuXHRcdFx0dmFyICRlbCA9ICQoZWwpO1xyXG5cdFx0XHRiYXNlLm1ldGFBY3RpdmUgPSAhJGVsLmhhc0NsYXNzKGJhc2Uub3B0aW9ucy5jc3MuYnV0dG9uQWN0aXZlKTtcclxuXHRcdFx0YmFzZS5zaG93U2V0KCRlbC5hdHRyKCdkYXRhLW5hbWUnKSk7XHJcblx0XHR9LFxyXG5cdFx0bmV4dDogZnVuY3Rpb24gKGJhc2UpIHtcclxuXHRcdFx0YmFzZS5zd2l0Y2hJbnB1dCh0cnVlLCBiYXNlLm9wdGlvbnMuYXV0b0FjY2VwdCk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH0sXHJcblx0XHQvLyBzYW1lIGFzICdkZWZhdWx0JyAtIHJlc2V0cyB0byBiYXNlIGtleXNldFxyXG5cdFx0bm9ybWFsOiBmdW5jdGlvbiAoYmFzZSkge1xyXG5cdFx0XHRiYXNlLnNoaWZ0QWN0aXZlID0gYmFzZS5hbHRBY3RpdmUgPSBiYXNlLm1ldGFBY3RpdmUgPSBmYWxzZTtcclxuXHRcdFx0YmFzZS5zaG93U2V0KCk7XHJcblx0XHR9LFxyXG5cdFx0cHJldjogZnVuY3Rpb24gKGJhc2UpIHtcclxuXHRcdFx0YmFzZS5zd2l0Y2hJbnB1dChmYWxzZSwgYmFzZS5vcHRpb25zLmF1dG9BY2NlcHQpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9LFxyXG5cdFx0cmlnaHQ6IGZ1bmN0aW9uIChiYXNlKSB7XHJcblx0XHRcdHZhciBwID0gJGtleWJvYXJkLmNhcmV0KGJhc2UuJHByZXZpZXcpLFxyXG5cdFx0XHRcdGxlbiA9IGJhc2UuaXNDb250ZW50RWRpdGFibGUgPyAka2V5Ym9hcmQuZ2V0RWRpdGFibGVMZW5ndGgoYmFzZS5lbCkgOiBiYXNlLmdldFZhbHVlKCkubGVuZ3RoO1xyXG5cdFx0XHRpZiAocC5lbmQgKyAxIDw9IGxlbikge1xyXG5cdFx0XHRcdC8vIG1vdmUgYm90aCBzdGFydCBhbmQgZW5kIG9mIGNhcmV0IHRvIGVuZCBwb3NpdGlvblxyXG5cdFx0XHRcdC8vIChwcmV2ZW50cyB0ZXh0IHNlbGVjdGlvbikgJiYgc2F2ZSBjYXJldCBwb3NpdGlvblxyXG5cdFx0XHRcdGJhc2UubGFzdC5zdGFydCA9IGJhc2UubGFzdC5lbmQgPSBwLmVuZCArIDE7XHJcblx0XHRcdFx0JGtleWJvYXJkLmNhcmV0KGJhc2UuJHByZXZpZXcsIGJhc2UubGFzdCk7XHJcblx0XHRcdFx0YmFzZS5zZXRTY3JvbGwoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdHNoaWZ0OiBmdW5jdGlvbiAoYmFzZSkge1xyXG5cdFx0XHRiYXNlLmxhc3Qua2V5c2V0WzBdID0gYmFzZS5zaGlmdEFjdGl2ZSA9ICFiYXNlLnNoaWZ0QWN0aXZlO1xyXG5cdFx0XHRiYXNlLnNob3dTZXQoKTtcclxuXHRcdH0sXHJcblx0XHRzaWduOiBmdW5jdGlvbiAoYmFzZSkge1xyXG5cdFx0XHRpZiAoL15bKy1dP1xcZCpcXC4/XFxkKiQvLnRlc3QoYmFzZS5nZXRWYWx1ZSgpKSkge1xyXG5cdFx0XHRcdHZhciBjYXJldCxcclxuXHRcdFx0XHRcdHAgPSAka2V5Ym9hcmQuY2FyZXQoYmFzZS4kcHJldmlldyksXHJcblx0XHRcdFx0XHR2YWwgPSBiYXNlLmdldFZhbHVlKCksXHJcblx0XHRcdFx0XHRsZW4gPSBiYXNlLmlzQ29udGVudEVkaXRhYmxlID8gJGtleWJvYXJkLmdldEVkaXRhYmxlTGVuZ3RoKGJhc2UuZWwpIDogdmFsLmxlbmd0aDtcclxuXHRcdFx0XHRiYXNlLnNldFZhbHVlKHZhbCAqIC0xKTtcclxuXHRcdFx0XHRjYXJldCA9IGxlbiAtIHZhbC5sZW5ndGg7XHJcblx0XHRcdFx0YmFzZS5sYXN0LnN0YXJ0ID0gcC5zdGFydCArIGNhcmV0O1xyXG5cdFx0XHRcdGJhc2UubGFzdC5lbmQgPSBwLmVuZCArIGNhcmV0O1xyXG5cdFx0XHRcdCRrZXlib2FyZC5jYXJldChiYXNlLiRwcmV2aWV3LCBiYXNlLmxhc3QpO1xyXG5cdFx0XHRcdGJhc2Uuc2V0U2Nyb2xsKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRzcGFjZTogZnVuY3Rpb24gKGJhc2UpIHtcclxuXHRcdFx0YmFzZS5pbnNlcnRUZXh0KCcgJyk7XHJcblx0XHR9LFxyXG5cdFx0dGFiOiBmdW5jdGlvbiAoYmFzZSkge1xyXG5cdFx0XHR2YXIgbyA9IGJhc2Uub3B0aW9ucztcclxuXHRcdFx0aWYgKCFiYXNlLmlzVGV4dEFyZWEpIHtcclxuXHRcdFx0XHRpZiAoby50YWJOYXZpZ2F0aW9uKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYmFzZS5zd2l0Y2hJbnB1dCghYmFzZS5zaGlmdEFjdGl2ZSwgdHJ1ZSk7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChiYXNlLmlzSW5wdXQpIHtcclxuXHRcdFx0XHRcdC8vIGlnbm9yZSB0YWIga2V5IGluIGlucHV0XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGJhc2UuaW5zZXJ0VGV4dCgnXFx0Jyk7XHJcblx0XHR9LFxyXG5cdFx0dG9nZ2xlOiBmdW5jdGlvbiAoYmFzZSkge1xyXG5cdFx0XHRiYXNlLmVuYWJsZWQgPSAhYmFzZS5lbmFibGVkO1xyXG5cdFx0XHRiYXNlLnRvZ2dsZSgpO1xyXG5cdFx0fSxcclxuXHRcdC8vICoqKiBTcGVjaWFsIGFjdGlvbiBrZXlzOiBOQlNQICYgemVyby13aWR0aCBjaGFyYWN0ZXJzICoqKlxyXG5cdFx0Ly8gTm9uLWJyZWFraW5nIHNwYWNlXHJcblx0XHROQlNQOiAnXFx1MDBhMCcsXHJcblx0XHQvLyB6ZXJvIHdpZHRoIHNwYWNlXHJcblx0XHRaV1NQOiAnXFx1MjAwYicsXHJcblx0XHQvLyBaZXJvIHdpZHRoIG5vbi1qb2luZXJcclxuXHRcdFpXTko6ICdcXHUyMDBjJyxcclxuXHRcdC8vIFplcm8gd2lkdGggam9pbmVyXHJcblx0XHRaV0o6ICdcXHUyMDBkJyxcclxuXHRcdC8vIExlZnQtdG8tcmlnaHQgTWFya1xyXG5cdFx0TFJNOiAnXFx1MjAwZScsXHJcblx0XHQvLyBSaWdodC10by1sZWZ0IE1hcmtcclxuXHRcdFJMTTogJ1xcdTIwMGYnXHJcblx0fTtcclxuXHJcblx0Ly8gRGVmYXVsdCBrZXlib2FyZCBsYXlvdXRzXHJcblx0JGtleWJvYXJkLmJ1aWx0TGF5b3V0cyA9IHt9O1xyXG5cdCRrZXlib2FyZC5sYXlvdXRzID0ge1xyXG5cdFx0J2FscGhhJzoge1xyXG5cdFx0XHQnbm9ybWFsJzogW1xyXG5cdFx0XHRcdCdgIDEgMiAzIDQgNSA2IDcgOCA5IDAgLSA9IHtia3NwfScsXHJcblx0XHRcdFx0J3t0YWJ9IGEgYiBjIGQgZSBmIGcgaCBpIGogWyBdIFxcXFwnLFxyXG5cdFx0XHRcdCdrIGwgbSBuIG8gcCBxIHIgcyA7IFxcJyB7ZW50ZXJ9JyxcclxuXHRcdFx0XHQne3NoaWZ0fSB0IHUgdiB3IHggeSB6ICwgLiAvIHtzaGlmdH0nLFxyXG5cdFx0XHRcdCd7YWNjZXB0fSB7c3BhY2V9IHtjYW5jZWx9J1xyXG5cdFx0XHRdLFxyXG5cdFx0XHQnc2hpZnQnOiBbXHJcblx0XHRcdFx0J34gISBAICMgJCAlIF4gJiAqICggKSBfICsge2Jrc3B9JyxcclxuXHRcdFx0XHQne3RhYn0gQSBCIEMgRCBFIEYgRyBIIEkgSiB7IH0gfCcsXHJcblx0XHRcdFx0J0sgTCBNIE4gTyBQIFEgUiBTIDogXCIge2VudGVyfScsXHJcblx0XHRcdFx0J3tzaGlmdH0gVCBVIFYgVyBYIFkgWiA8ID4gPyB7c2hpZnR9JyxcclxuXHRcdFx0XHQne2FjY2VwdH0ge3NwYWNlfSB7Y2FuY2VsfSdcclxuXHRcdFx0XVxyXG5cdFx0fSxcclxuXHRcdCdxd2VydHknOiB7XHJcblx0XHRcdCdub3JtYWwnOiBbXHJcblx0XHRcdFx0J2AgMSAyIDMgNCA1IDYgNyA4IDkgMCAtID0ge2Jrc3B9JyxcclxuXHRcdFx0XHQne3RhYn0gcSB3IGUgciB0IHkgdSBpIG8gcCBbIF0gXFxcXCcsXHJcblx0XHRcdFx0J2EgcyBkIGYgZyBoIGogayBsIDsgXFwnIHtlbnRlcn0nLFxyXG5cdFx0XHRcdCd7c2hpZnR9IHogeCBjIHYgYiBuIG0gLCAuIC8ge3NoaWZ0fScsXHJcblx0XHRcdFx0J3thY2NlcHR9IHtzcGFjZX0ge2NhbmNlbH0nXHJcblx0XHRcdF0sXHJcblx0XHRcdCdzaGlmdCc6IFtcclxuXHRcdFx0XHQnfiAhIEAgIyAkICUgXiAmICogKCApIF8gKyB7YmtzcH0nLFxyXG5cdFx0XHRcdCd7dGFifSBRIFcgRSBSIFQgWSBVIEkgTyBQIHsgfSB8JyxcclxuXHRcdFx0XHQnQSBTIEQgRiBHIEggSiBLIEwgOiBcIiB7ZW50ZXJ9JyxcclxuXHRcdFx0XHQne3NoaWZ0fSBaIFggQyBWIEIgTiBNIDwgPiA/IHtzaGlmdH0nLFxyXG5cdFx0XHRcdCd7YWNjZXB0fSB7c3BhY2V9IHtjYW5jZWx9J1xyXG5cdFx0XHRdXHJcblx0XHR9LFxyXG5cdFx0J2ludGVybmF0aW9uYWwnOiB7XHJcblx0XHRcdCdub3JtYWwnOiBbXHJcblx0XHRcdFx0J2AgMSAyIDMgNCA1IDYgNyA4IDkgMCAtID0ge2Jrc3B9JyxcclxuXHRcdFx0XHQne3RhYn0gcSB3IGUgciB0IHkgdSBpIG8gcCBbIF0gXFxcXCcsXHJcblx0XHRcdFx0J2EgcyBkIGYgZyBoIGogayBsIDsgXFwnIHtlbnRlcn0nLFxyXG5cdFx0XHRcdCd7c2hpZnR9IHogeCBjIHYgYiBuIG0gLCAuIC8ge3NoaWZ0fScsXHJcblx0XHRcdFx0J3thY2NlcHR9IHthbHR9IHtzcGFjZX0ge2FsdH0ge2NhbmNlbH0nXHJcblx0XHRcdF0sXHJcblx0XHRcdCdzaGlmdCc6IFtcclxuXHRcdFx0XHQnfiAhIEAgIyAkICUgXiAmICogKCApIF8gKyB7YmtzcH0nLFxyXG5cdFx0XHRcdCd7dGFifSBRIFcgRSBSIFQgWSBVIEkgTyBQIHsgfSB8JyxcclxuXHRcdFx0XHQnQSBTIEQgRiBHIEggSiBLIEwgOiBcIiB7ZW50ZXJ9JyxcclxuXHRcdFx0XHQne3NoaWZ0fSBaIFggQyBWIEIgTiBNIDwgPiA/IHtzaGlmdH0nLFxyXG5cdFx0XHRcdCd7YWNjZXB0fSB7YWx0fSB7c3BhY2V9IHthbHR9IHtjYW5jZWx9J1xyXG5cdFx0XHRdLFxyXG5cdFx0XHQnYWx0JzogW1xyXG5cdFx0XHRcdCd+IFxcdTAwYTEgXFx1MDBiMiBcXHUwMGIzIFxcdTAwYTQgXFx1MjBhYyBcXHUwMGJjIFxcdTAwYmQgXFx1MDBiZSBcXHUyMDE4IFxcdTIwMTkgXFx1MDBhNSBcXHUwMGQ3IHtia3NwfScsXHJcblx0XHRcdFx0J3t0YWJ9IFxcdTAwZTQgXFx1MDBlNSBcXHUwMGU5IFxcdTAwYWUgXFx1MDBmZSBcXHUwMGZjIFxcdTAwZmEgXFx1MDBlZCBcXHUwMGYzIFxcdTAwZjYgXFx1MDBhYiBcXHUwMGJiIFxcdTAwYWMnLFxyXG5cdFx0XHRcdCdcXHUwMGUxIFxcdTAwZGYgXFx1MDBmMCBmIGcgaCBqIGsgXFx1MDBmOCBcXHUwMGI2IFxcdTAwYjQge2VudGVyfScsXHJcblx0XHRcdFx0J3tzaGlmdH0gXFx1MDBlNiB4IFxcdTAwYTkgdiBiIFxcdTAwZjEgXFx1MDBiNSBcXHUwMGU3ID4gXFx1MDBiZiB7c2hpZnR9JyxcclxuXHRcdFx0XHQne2FjY2VwdH0ge2FsdH0ge3NwYWNlfSB7YWx0fSB7Y2FuY2VsfSdcclxuXHRcdFx0XSxcclxuXHRcdFx0J2FsdC1zaGlmdCc6IFtcclxuXHRcdFx0XHQnfiBcXHUwMGI5IFxcdTAwYjIgXFx1MDBiMyBcXHUwMGEzIFxcdTIwYWMgXFx1MDBiYyBcXHUwMGJkIFxcdTAwYmUgXFx1MjAxOCBcXHUyMDE5IFxcdTAwYTUgXFx1MDBmNyB7YmtzcH0nLFxyXG5cdFx0XHRcdCd7dGFifSBcXHUwMGM0IFxcdTAwYzUgXFx1MDBjOSBcXHUwMGFlIFxcdTAwZGUgXFx1MDBkYyBcXHUwMGRhIFxcdTAwY2QgXFx1MDBkMyBcXHUwMGQ2IFxcdTAwYWIgXFx1MDBiYiBcXHUwMGE2JyxcclxuXHRcdFx0XHQnXFx1MDBjNCBcXHUwMGE3IFxcdTAwZDAgRiBHIEggSiBLIFxcdTAwZDggXFx1MDBiMCBcXHUwMGE4IHtlbnRlcn0nLFxyXG5cdFx0XHRcdCd7c2hpZnR9IFxcdTAwYzYgWCBcXHUwMGEyIFYgQiBcXHUwMGQxIFxcdTAwYjUgXFx1MDBjNyAuIFxcdTAwYmYge3NoaWZ0fScsXHJcblx0XHRcdFx0J3thY2NlcHR9IHthbHR9IHtzcGFjZX0ge2FsdH0ge2NhbmNlbH0nXHJcblx0XHRcdF1cclxuXHRcdH0sXHJcblx0XHQnY29sZW1hayc6IHtcclxuXHRcdFx0J25vcm1hbCc6IFtcclxuXHRcdFx0XHQnYCAxIDIgMyA0IDUgNiA3IDggOSAwIC0gPSB7YmtzcH0nLFxyXG5cdFx0XHRcdCd7dGFifSBxIHcgZiBwIGcgaiBsIHUgeSA7IFsgXSBcXFxcJyxcclxuXHRcdFx0XHQne2Jrc3B9IGEgciBzIHQgZCBoIG4gZSBpIG8gXFwnIHtlbnRlcn0nLFxyXG5cdFx0XHRcdCd7c2hpZnR9IHogeCBjIHYgYiBrIG0gLCAuIC8ge3NoaWZ0fScsXHJcblx0XHRcdFx0J3thY2NlcHR9IHtzcGFjZX0ge2NhbmNlbH0nXHJcblx0XHRcdF0sXHJcblx0XHRcdCdzaGlmdCc6IFtcclxuXHRcdFx0XHQnfiAhIEAgIyAkICUgXiAmICogKCApIF8gKyB7YmtzcH0nLFxyXG5cdFx0XHRcdCd7dGFifSBRIFcgRiBQIEcgSiBMIFUgWSA6IHsgfSB8JyxcclxuXHRcdFx0XHQne2Jrc3B9IEEgUiBTIFQgRCBIIE4gRSBJIE8gXCIge2VudGVyfScsXHJcblx0XHRcdFx0J3tzaGlmdH0gWiBYIEMgViBCIEsgTSA8ID4gPyB7c2hpZnR9JyxcclxuXHRcdFx0XHQne2FjY2VwdH0ge3NwYWNlfSB7Y2FuY2VsfSdcclxuXHRcdFx0XVxyXG5cdFx0fSxcclxuXHRcdCdkdm9yYWsnOiB7XHJcblx0XHRcdCdub3JtYWwnOiBbXHJcblx0XHRcdFx0J2AgMSAyIDMgNCA1IDYgNyA4IDkgMCBbIF0ge2Jrc3B9JyxcclxuXHRcdFx0XHQne3RhYn0gXFwnICwgLiBwIHkgZiBnIGMgciBsIC8gPSBcXFxcJyxcclxuXHRcdFx0XHQnYSBvIGUgdSBpIGQgaCB0IG4gcyAtIHtlbnRlcn0nLFxyXG5cdFx0XHRcdCd7c2hpZnR9IDsgcSBqIGsgeCBiIG0gdyB2IHoge3NoaWZ0fScsXHJcblx0XHRcdFx0J3thY2NlcHR9IHtzcGFjZX0ge2NhbmNlbH0nXHJcblx0XHRcdF0sXHJcblx0XHRcdCdzaGlmdCc6IFtcclxuXHRcdFx0XHQnfiAhIEAgIyAkICUgXiAmICogKCApIHsgfSB7YmtzcH0nLFxyXG5cdFx0XHRcdCd7dGFifSBcIiA8ID4gUCBZIEYgRyBDIFIgTCA/ICsgfCcsXHJcblx0XHRcdFx0J0EgTyBFIFUgSSBEIEggVCBOIFMgXyB7ZW50ZXJ9JyxcclxuXHRcdFx0XHQne3NoaWZ0fSA6IFEgSiBLIFggQiBNIFcgViBaIHtzaGlmdH0nLFxyXG5cdFx0XHRcdCd7YWNjZXB0fSB7c3BhY2V9IHtjYW5jZWx9J1xyXG5cdFx0XHRdXHJcblx0XHR9LFxyXG5cdFx0J251bSc6IHtcclxuXHRcdFx0J25vcm1hbCc6IFtcclxuXHRcdFx0XHQnPSAoICkge2J9JyxcclxuXHRcdFx0XHQne2NsZWFyfSAvICogLScsXHJcblx0XHRcdFx0JzcgOCA5ICsnLFxyXG5cdFx0XHRcdCc0IDUgNiB7c2lnbn0nLFxyXG5cdFx0XHRcdCcxIDIgMyAlJyxcclxuXHRcdFx0XHQnMCB7ZGVjfSB7YX0ge2N9J1xyXG5cdFx0XHRdXHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JGtleWJvYXJkLmxhbmd1YWdlID0ge1xyXG5cdFx0ZW46IHtcclxuXHRcdFx0ZGlzcGxheToge1xyXG5cdFx0XHRcdC8vIGNoZWNrIG1hcmsgLSBzYW1lIGFjdGlvbiBhcyBhY2NlcHRcclxuXHRcdFx0XHQnYSc6ICdcXHUyNzE0OkFjY2VwdCAoU2hpZnQrRW50ZXIpJyxcclxuXHRcdFx0XHQnYWNjZXB0JzogJ0FjY2VwdDpBY2NlcHQgKFNoaWZ0K0VudGVyKScsXHJcblx0XHRcdFx0Ly8gb3RoZXIgYWx0ZXJuYXRpdmVzIFxcdTIzMTFcclxuXHRcdFx0XHQnYWx0JzogJ0FsdDpcXHUyMzI1IEFsdEdyJyxcclxuXHRcdFx0XHQvLyBMZWZ0IGFycm93IChzYW1lIGFzICZsYXJyOylcclxuXHRcdFx0XHQnYic6ICdcXHUyMzJiOkJhY2tzcGFjZScsXHJcblx0XHRcdFx0J2Jrc3AnOiAnQmtzcDpCYWNrc3BhY2UnLFxyXG5cdFx0XHRcdC8vIGJpZyBYLCBjbG9zZSAtIHNhbWUgYWN0aW9uIGFzIGNhbmNlbFxyXG5cdFx0XHRcdCdjJzogJ1xcdTI3MTY6Q2FuY2VsIChFc2MpJyxcclxuXHRcdFx0XHQnY2FuY2VsJzogJ0NhbmNlbDpDYW5jZWwgKEVzYyknLFxyXG5cdFx0XHRcdC8vIGNsZWFyIG51bSBwYWRcclxuXHRcdFx0XHQnY2xlYXInOiAnQzpDbGVhcicsXHJcblx0XHRcdFx0J2NvbWJvJzogJ1xcdTAwZjY6VG9nZ2xlIENvbWJvIEtleXMnLFxyXG5cdFx0XHRcdC8vIGRlY2ltYWwgcG9pbnQgZm9yIG51bSBwYWQgKG9wdGlvbmFsKSwgY2hhbmdlICcuJyB0byAnLCcgZm9yIEV1cm9wZWFuIGZvcm1hdFxyXG5cdFx0XHRcdCdkZWMnOiAnLjpEZWNpbWFsJyxcclxuXHRcdFx0XHQvLyBkb3duLCB0aGVuIGxlZnQgYXJyb3cgLSBlbnRlciBzeW1ib2xcclxuXHRcdFx0XHQnZSc6ICdcXHUyM2NlOkVudGVyJyxcclxuXHRcdFx0XHQnZW1wdHknOiAnXFx1MDBhMCcsXHJcblx0XHRcdFx0J2VudGVyJzogJ0VudGVyOkVudGVyIFxcdTIzY2UnLFxyXG5cdFx0XHRcdC8vIGxlZnQgYXJyb3cgKG1vdmUgY2FyZXQpXHJcblx0XHRcdFx0J2xlZnQnOiAnXFx1MjE5MCcsXHJcblx0XHRcdFx0Ly8gY2FwcyBsb2NrXHJcblx0XHRcdFx0J2xvY2snOiAnTG9jazpcXHUyMWVhIENhcHMgTG9jaycsXHJcblx0XHRcdFx0J25leHQnOiAnTmV4dCBcXHUyMWU4JyxcclxuXHRcdFx0XHQncHJldic6ICdcXHUyMWU2IFByZXYnLFxyXG5cdFx0XHRcdC8vIHJpZ2h0IGFycm93IChtb3ZlIGNhcmV0KVxyXG5cdFx0XHRcdCdyaWdodCc6ICdcXHUyMTkyJyxcclxuXHRcdFx0XHQvLyB0aGljayBob2xsb3cgdXAgYXJyb3dcclxuXHRcdFx0XHQncyc6ICdcXHUyMWU3OlNoaWZ0JyxcclxuXHRcdFx0XHQnc2hpZnQnOiAnU2hpZnQ6U2hpZnQnLFxyXG5cdFx0XHRcdC8vICsvLSBzaWduIGZvciBudW0gcGFkXHJcblx0XHRcdFx0J3NpZ24nOiAnXFx1MDBiMTpDaGFuZ2UgU2lnbicsXHJcblx0XHRcdFx0J3NwYWNlJzogJ1xcdTAwYTA6U3BhY2UnLFxyXG5cdFx0XHRcdC8vIHJpZ2h0IGFycm93IHRvIGJhciAodXNlZCBzaW5jZSB0aGlzIHZpcnR1YWwga2V5Ym9hcmQgd29ya3Mgd2l0aCBvbmUgZGlyZWN0aW9uYWwgdGFicylcclxuXHRcdFx0XHQndCc6ICdcXHUyMWU1OlRhYicsXHJcblx0XHRcdFx0Ly8gXFx1MjFiOSBpcyB0aGUgdHJ1ZSB0YWIgc3ltYm9sIChsZWZ0ICYgcmlnaHQgYXJyb3dzKVxyXG5cdFx0XHRcdCd0YWInOiAnXFx1MjFlNSBUYWI6VGFiJyxcclxuXHRcdFx0XHQvLyByZXBsYWNlZCBieSBhbiBpbWFnZVxyXG5cdFx0XHRcdCd0b2dnbGUnOiAnICcsXHJcblxyXG5cdFx0XHRcdC8vIGFkZGVkIHRvIHRpdGxlcyBvZiBrZXlzXHJcblx0XHRcdFx0Ly8gYWNjZXB0IGtleSBzdGF0dXMgd2hlbiBhY2NlcHRWYWxpZDp0cnVlXHJcblx0XHRcdFx0J3ZhbGlkJzogJ3ZhbGlkJyxcclxuXHRcdFx0XHQnaW52YWxpZCc6ICdpbnZhbGlkJyxcclxuXHRcdFx0XHQvLyBjb21ibyBrZXkgc3RhdGVzXHJcblx0XHRcdFx0J2FjdGl2ZSc6ICdhY3RpdmUnLFxyXG5cdFx0XHRcdCdkaXNhYmxlZCc6ICdkaXNhYmxlZCdcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vIE1lc3NhZ2UgYWRkZWQgdG8gdGhlIGtleSB0aXRsZSB3aGlsZSBob3ZlcmluZywgaWYgdGhlIG1vdXNld2hlZWwgcGx1Z2luIGV4aXN0c1xyXG5cdFx0XHR3aGVlbE1lc3NhZ2U6ICdVc2UgbW91c2V3aGVlbCB0byBzZWUgb3RoZXIga2V5cycsXHJcblxyXG5cdFx0XHRjb21ib1JlZ2V4OiAvKFtgXFwnflxcXlxcXCJhb10pKFthLXpdKS9taWcsXHJcblx0XHRcdGNvbWJvczoge1xyXG5cdFx0XHRcdC8vIGdyYXZlXHJcblx0XHRcdFx0J2AnOiB7IGE6ICdcXHUwMGUwJywgQTogJ1xcdTAwYzAnLCBlOiAnXFx1MDBlOCcsIEU6ICdcXHUwMGM4JywgaTogJ1xcdTAwZWMnLCBJOiAnXFx1MDBjYycsIG86ICdcXHUwMGYyJyxcclxuXHRcdFx0XHRcdFx0TzogJ1xcdTAwZDInLCB1OiAnXFx1MDBmOScsIFU6ICdcXHUwMGQ5JywgeTogJ1xcdTFlZjMnLCBZOiAnXFx1MWVmMicgfSxcclxuXHRcdFx0XHQvLyBhY3V0ZSAmIGNlZGlsbGFcclxuXHRcdFx0XHRcIidcIjogeyBhOiAnXFx1MDBlMScsIEE6ICdcXHUwMGMxJywgZTogJ1xcdTAwZTknLCBFOiAnXFx1MDBjOScsIGk6ICdcXHUwMGVkJywgSTogJ1xcdTAwY2QnLCBvOiAnXFx1MDBmMycsXHJcblx0XHRcdFx0XHRcdE86ICdcXHUwMGQzJywgdTogJ1xcdTAwZmEnLCBVOiAnXFx1MDBkYScsIHk6ICdcXHUwMGZkJywgWTogJ1xcdTAwZGQnIH0sXHJcblx0XHRcdFx0Ly8gdW1sYXV0L3RyZW1hXHJcblx0XHRcdFx0J1wiJzogeyBhOiAnXFx1MDBlNCcsIEE6ICdcXHUwMGM0JywgZTogJ1xcdTAwZWInLCBFOiAnXFx1MDBjYicsIGk6ICdcXHUwMGVmJywgSTogJ1xcdTAwY2YnLCBvOiAnXFx1MDBmNicsXHJcblx0XHRcdFx0XHRcdE86ICdcXHUwMGQ2JywgdTogJ1xcdTAwZmMnLCBVOiAnXFx1MDBkYycsIHk6ICdcXHUwMGZmJywgWTogJ1xcdTAxNzgnIH0sXHJcblx0XHRcdFx0Ly8gY2lyY3VtZmxleFxyXG5cdFx0XHRcdCdeJzogeyBhOiAnXFx1MDBlMicsIEE6ICdcXHUwMGMyJywgZTogJ1xcdTAwZWEnLCBFOiAnXFx1MDBjYScsIGk6ICdcXHUwMGVlJywgSTogJ1xcdTAwY2UnLCBvOiAnXFx1MDBmNCcsXHJcblx0XHRcdFx0XHRcdE86ICdcXHUwMGQ0JywgdTogJ1xcdTAwZmInLCBVOiAnXFx1MDBkYicsIHk6ICdcXHUwMTc3JywgWTogJ1xcdTAxNzYnIH0sXHJcblx0XHRcdFx0Ly8gdGlsZGVcclxuXHRcdFx0XHQnfic6IHsgYTogJ1xcdTAwZTMnLCBBOiAnXFx1MDBjMycsIGU6ICdcXHUxZWJkJywgRTogJ1xcdTFlYmMnLCBpOiAnXFx1MDEyOScsIEk6ICdcXHUwMTI4JywgbzogJ1xcdTAwZjUnLFxyXG5cdFx0XHRcdFx0XHRPOiAnXFx1MDBkNScsIHU6ICdcXHUwMTY5JywgVTogJ1xcdTAxNjgnLCB5OiAnXFx1MWVmOScsIFk6ICdcXHUxZWY4JywgbjogJ1xcdTAwZjEnLCBOOiAnXFx1MDBkMScgfVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JGtleWJvYXJkLmRlZmF1bHRPcHRpb25zID0ge1xyXG5cdFx0Ly8gc2V0IHRoaXMgdG8gSVNPIDYzOS0xIGxhbmd1YWdlIGNvZGUgdG8gb3ZlcnJpZGUgbGFuZ3VhZ2Ugc2V0IGJ5IHRoZSBsYXlvdXRcclxuXHRcdC8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9JU09fNjM5LTFfY29kZXNcclxuXHRcdC8vIGxhbmd1YWdlIGRlZmF1bHRzIHRvICdlbicgaWYgbm90IGZvdW5kXHJcblx0XHRsYW5ndWFnZTogbnVsbCxcclxuXHRcdHJ0bDogZmFsc2UsXHJcblxyXG5cdFx0Ly8gKioqIGNob29zZSBsYXlvdXQgJiBwb3NpdGlvbmluZyAqKipcclxuXHRcdGxheW91dDogJ3F3ZXJ0eScsXHJcblx0XHRjdXN0b21MYXlvdXQ6IG51bGwsXHJcblxyXG5cdFx0cG9zaXRpb246IHtcclxuXHRcdFx0Ly8gb3B0aW9uYWwgLSBudWxsIChhdHRhY2ggdG8gaW5wdXQvdGV4dGFyZWEpIG9yIGEgalF1ZXJ5IG9iamVjdCAoYXR0YWNoIGVsc2V3aGVyZSlcclxuXHRcdFx0b2Y6IG51bGwsXHJcblx0XHRcdG15OiAnY2VudGVyIHRvcCcsXHJcblx0XHRcdGF0OiAnY2VudGVyIHRvcCcsXHJcblx0XHRcdC8vIHVzZWQgd2hlbiAndXNlUHJldmlldycgaXMgZmFsc2UgKGNlbnRlcnMgdGhlIGtleWJvYXJkIGF0IHRoZSBib3R0b20gb2YgdGhlIGlucHV0L3RleHRhcmVhKVxyXG5cdFx0XHRhdDI6ICdjZW50ZXIgYm90dG9tJ1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBhbGxvdyBqUXVlcnkgcG9zaXRpb24gdXRpbGl0eSB0byByZXBvc2l0aW9uIHRoZSBrZXlib2FyZCBvbiB3aW5kb3cgcmVzaXplXHJcblx0XHRyZXBvc2l0aW9uOiB0cnVlLFxyXG5cclxuXHRcdC8vIHByZXZpZXcgYWRkZWQgYWJvdmUga2V5Ym9hcmQgaWYgdHJ1ZSwgb3JpZ2luYWwgaW5wdXQvdGV4dGFyZWEgdXNlZCBpZiBmYWxzZVxyXG5cdFx0dXNlUHJldmlldzogdHJ1ZSxcclxuXHJcblx0XHQvLyBpZiB0cnVlLCB0aGUga2V5Ym9hcmQgd2lsbCBhbHdheXMgYmUgdmlzaWJsZVxyXG5cdFx0YWx3YXlzT3BlbjogZmFsc2UsXHJcblxyXG5cdFx0Ly8gZ2l2ZSB0aGUgcHJldmlldyBpbml0aWFsIGZvY3VzIHdoZW4gdGhlIGtleWJvYXJkIGJlY29tZXMgdmlzaWJsZVxyXG5cdFx0aW5pdGlhbEZvY3VzOiB0cnVlLFxyXG5cclxuXHRcdC8vIGF2b2lkIGNoYW5naW5nIHRoZSBmb2N1cyAoaGFyZHdhcmUga2V5Ym9hcmQgcHJvYmFibHkgd29uJ3Qgd29yaylcclxuXHRcdG5vRm9jdXM6IGZhbHNlLFxyXG5cclxuXHRcdC8vIGlmIHRydWUsIGtleWJvYXJkIHdpbGwgcmVtYWluIG9wZW4gZXZlbiBpZiB0aGUgaW5wdXQgbG9zZXMgZm9jdXMsIGJ1dCBjbG9zZXMgb24gZXNjYXBlXHJcblx0XHQvLyBvciB3aGVuIGFub3RoZXIga2V5Ym9hcmQgb3BlbnMuXHJcblx0XHRzdGF5T3BlbjogZmFsc2UsXHJcblxyXG5cdFx0Ly8gUHJldmVudHMgdGhlIGtleWJvYXJkIGZyb20gY2xvc2luZyB3aGVuIHRoZSB1c2VyIGNsaWNrcyBvciBwcmVzc2VzIG91dHNpZGUgdGhlIGtleWJvYXJkXHJcblx0XHQvLyB0aGUgYGF1dG9BY2NlcHRgIG9wdGlvbiBtdXN0IGFsc28gYmUgc2V0IHRvIHRydWUgd2hlbiB0aGlzIG9wdGlvbiBpcyB0cnVlIG9yIGNoYW5nZXMgYXJlIGxvc3RcclxuXHRcdHVzZXJDbG9zZWQ6IGZhbHNlLFxyXG5cclxuXHRcdC8vIGlmIHRydWUsIGtleWJvYXJkIHdpbGwgbm90IGNsb3NlIGlmIHlvdSBwcmVzcyBlc2NhcGUuXHJcblx0XHRpZ25vcmVFc2M6IGZhbHNlLFxyXG5cclxuXHRcdC8vIGlmIHRydWUsIGtleWJvYXJkIHdpbGwgb25seSBjbG9zZWQgb24gY2xpY2sgZXZlbnQgaW5zdGVhZCBvZiBtb3VzZWRvd24gYW5kIHRvdWNoc3RhcnRcclxuXHRcdGNsb3NlQnlDbGlja0V2ZW50OiBmYWxzZSxcclxuXHJcblx0XHRjc3M6IHtcclxuXHRcdFx0Ly8gaW5wdXQgJiBwcmV2aWV3XHJcblx0XHRcdGlucHV0OiAndWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCcsXHJcblx0XHRcdC8vIGtleWJvYXJkIGNvbnRhaW5lclxyXG5cdFx0XHRjb250YWluZXI6ICd1aS13aWRnZXQtY29udGVudCB1aS13aWRnZXQgdWktY29ybmVyLWFsbCB1aS1oZWxwZXItY2xlYXJmaXgnLFxyXG5cdFx0XHQvLyBrZXlib2FyZCBjb250YWluZXIgZXh0cmEgY2xhc3MgKHNhbWUgYXMgY29udGFpbmVyLCBidXQgc2VwYXJhdGUpXHJcblx0XHRcdHBvcHVwOiAnJyxcclxuXHRcdFx0Ly8gZGVmYXVsdCBzdGF0ZVxyXG5cdFx0XHRidXR0b25EZWZhdWx0OiAndWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsJyxcclxuXHRcdFx0Ly8gaG92ZXJlZCBidXR0b25cclxuXHRcdFx0YnV0dG9uSG92ZXI6ICd1aS1zdGF0ZS1ob3ZlcicsXHJcblx0XHRcdC8vIEFjdGlvbiBrZXlzIChlLmcuIEFjY2VwdCwgQ2FuY2VsLCBUYWIsIGV0Yyk7IHRoaXMgcmVwbGFjZXMgJ2FjdGlvbkNsYXNzJyBvcHRpb25cclxuXHRcdFx0YnV0dG9uQWN0aW9uOiAndWktc3RhdGUtYWN0aXZlJyxcclxuXHRcdFx0Ly8gQWN0aXZlIGtleXMgKGUuZy4gc2hpZnQgZG93biwgbWV0YSBrZXlzZXQgYWN0aXZlLCBjb21ibyBrZXlzIGFjdGl2ZSlcclxuXHRcdFx0YnV0dG9uQWN0aXZlOiAndWktc3RhdGUtYWN0aXZlJyxcclxuXHRcdFx0Ly8gdXNlZCB3aGVuIGRpc2FibGluZyB0aGUgZGVjaW1hbCBidXR0b24ge2RlY30gd2hlbiBhIGRlY2ltYWwgZXhpc3RzIGluIHRoZSBpbnB1dCBhcmVhXHJcblx0XHRcdGJ1dHRvbkRpc2FibGVkOiAndWktc3RhdGUtZGlzYWJsZWQnLFxyXG5cdFx0XHRidXR0b25FbXB0eTogJ3VpLWtleWJvYXJkLWVtcHR5J1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyAqKiogVXNlYWJpbGl0eSAqKipcclxuXHRcdC8vIEF1dG8tYWNjZXB0IGNvbnRlbnQgd2hlbiBjbGlja2luZyBvdXRzaWRlIHRoZSBrZXlib2FyZCAocG9wdXAgd2lsbCBjbG9zZSlcclxuXHRcdGF1dG9BY2NlcHQ6IGZhbHNlLFxyXG5cdFx0Ly8gQXV0by1hY2NlcHQgY29udGVudCBldmVuIGlmIHRoZSB1c2VyIHByZXNzZXMgZXNjYXBlIChvbmx5IHdvcmtzIGlmIGBhdXRvQWNjZXB0YCBpcyBgdHJ1ZWApXHJcblx0XHRhdXRvQWNjZXB0T25Fc2M6IGZhbHNlLFxyXG5cclxuXHRcdC8vIFByZXZlbnRzIGRpcmVjdCBpbnB1dCBpbiB0aGUgcHJldmlldyB3aW5kb3cgd2hlbiB0cnVlXHJcblx0XHRsb2NrSW5wdXQ6IGZhbHNlLFxyXG5cclxuXHRcdC8vIFByZXZlbnQga2V5cyBub3QgaW4gdGhlIGRpc3BsYXllZCBrZXlib2FyZCBmcm9tIGJlaW5nIHR5cGVkIGluXHJcblx0XHRyZXN0cmljdElucHV0OiBmYWxzZSxcclxuXHRcdC8vIEFkZGl0aW9uYWwgYWxsb3dlZCBjaGFyYWN0ZXJzIHdoaWxlIHJlc3RyaWN0SW5wdXQgaXMgdHJ1ZVxyXG5cdFx0cmVzdHJpY3RJbmNsdWRlOiAnJywgLy8gZS5nLiAnYSBiIGZvbyBcXHVkODNkXFx1ZGUzOCdcclxuXHJcblx0XHQvLyBDaGVjayBpbnB1dCBhZ2FpbnN0IHZhbGlkYXRlIGZ1bmN0aW9uLCBpZiB2YWxpZCB0aGUgYWNjZXB0IGJ1dHRvbiBnZXRzIGEgY2xhc3MgbmFtZSBvZlxyXG5cdFx0Ly8gJ3VpLWtleWJvYXJkLXZhbGlkLWlucHV0Jy4gSWYgaW52YWxpZCwgdGhlIGFjY2VwdCBidXR0b24gZ2V0cyBhIGNsYXNzIG5hbWUgb2ZcclxuXHRcdC8vICd1aS1rZXlib2FyZC1pbnZhbGlkLWlucHV0J1xyXG5cdFx0YWNjZXB0VmFsaWQ6IGZhbHNlLFxyXG5cdFx0Ly8gQXV0by1hY2NlcHQgd2hlbiBpbnB1dCBpcyB2YWxpZDsgcmVxdWlyZXMgYGFjY2VwdFZhbGlkYCBzZXQgYHRydWVgICYgdmFsaWRhdGUgY2FsbGJhY2tcclxuXHRcdGF1dG9BY2NlcHRPblZhbGlkOiBmYWxzZSxcclxuXHRcdC8vIENoZWNrIHZhbGlkYXRpb24gb24ga2V5Ym9hcmQgaW5pdGlhbGl6YXRpb24uIElmIGZhbHNlLCB0aGUgXCJBY2NlcHRcIiBrZXkgc3RhdGUgKGNvbG9yKVxyXG5cdFx0Ly8gd2lsbCBub3QgY2hhbmdlIHRvIHNob3cgaWYgdGhlIGNvbnRlbnQgaXMgdmFsaWQsIG9yIG5vdFxyXG5cdFx0Y2hlY2tWYWxpZE9uSW5pdDogdHJ1ZSxcclxuXHJcblx0XHQvLyBpZiBhY2NlcHRWYWxpZCBpcyB0cnVlICYgdGhlIHZhbGlkYXRlIGZ1bmN0aW9uIHJldHVybnMgYSBmYWxzZSwgdGhpcyBvcHRpb24gd2lsbCBjYW5jZWxcclxuXHRcdC8vIGEga2V5Ym9hcmQgY2xvc2Ugb25seSBhZnRlciB0aGUgYWNjZXB0IGJ1dHRvbiBpcyBwcmVzc2VkXHJcblx0XHRjYW5jZWxDbG9zZTogdHJ1ZSxcclxuXHJcblx0XHQvLyB0YWIgdG8gZ28gdG8gbmV4dCwgc2hpZnQtdGFiIGZvciBwcmV2aW91cyAoZGVmYXVsdCBiZWhhdmlvcilcclxuXHRcdHRhYk5hdmlnYXRpb246IGZhbHNlLFxyXG5cclxuXHRcdC8vIGVudGVyIGZvciBuZXh0IGlucHV0OyBzaGlmdCtlbnRlciBhY2NlcHRzIGNvbnRlbnQgJiBnb2VzIHRvIG5leHRcclxuXHRcdC8vIHNoaWZ0ICsgJ2VudGVyTW9kJyArIGVudGVyICgnZW50ZXJNb2QnIGlzIHRoZSBhbHQgYXMgc2V0IGJlbG93KSB3aWxsIGFjY2VwdCBjb250ZW50IGFuZCBnb1xyXG5cdFx0Ly8gdG8gcHJldmlvdXMgaW4gYSB0ZXh0YXJlYVxyXG5cdFx0ZW50ZXJOYXZpZ2F0aW9uOiBmYWxzZSxcclxuXHRcdC8vIG1vZCBrZXkgb3B0aW9uczogJ2N0cmxLZXknLCAnc2hpZnRLZXknLCAnYWx0S2V5JywgJ21ldGFLZXknIChNQUMgb25seSlcclxuXHRcdGVudGVyTW9kOiAnYWx0S2V5JywgLy8gYWx0LWVudGVyIHRvIGdvIHRvIHByZXZpb3VzOyBzaGlmdC1hbHQtZW50ZXIgdG8gYWNjZXB0ICYgZ28gdG8gcHJldmlvdXNcclxuXHJcblx0XHQvLyBpZiB0cnVlLCB0aGUgbmV4dCBidXR0b24gd2lsbCBzdG9wIG9uIHRoZSBsYXN0IGtleWJvYXJkIGlucHV0L3RleHRhcmVhOyBwcmV2IGJ1dHRvbiBzdG9wcyBhdCBmaXJzdFxyXG5cdFx0Ly8gaWYgZmFsc2UsIHRoZSBuZXh0IGJ1dHRvbiB3aWxsIHdyYXAgdG8gdGFyZ2V0IHRoZSBmaXJzdCBpbnB1dC90ZXh0YXJlYTsgcHJldiB3aWxsIGdvIHRvIHRoZSBsYXN0XHJcblx0XHRzdG9wQXRFbmQ6IHRydWUsXHJcblxyXG5cdFx0Ly8gU2V0IHRoaXMgdG8gYXBwZW5kIHRoZSBrZXlib2FyZCBhZnRlciB0aGUgaW5wdXQvdGV4dGFyZWEgKGFwcGVuZGVkIHRvIHRoZSBpbnB1dC90ZXh0YXJlYSBwYXJlbnQpLlxyXG5cdFx0Ly8gVGhpcyBvcHRpb24gd29ya3MgYmVzdCB3aGVuIHRoZSBpbnB1dCBjb250YWluZXIgZG9lc24ndCBoYXZlIGEgc2V0IHdpZHRoICYgd2hlbiB0aGUgJ3RhYk5hdmlnYXRpb24nXHJcblx0XHQvLyBvcHRpb24gaXMgdHJ1ZS5cclxuXHRcdGFwcGVuZExvY2FsbHk6IGZhbHNlLFxyXG5cdFx0Ly8gV2hlbiBhcHBlbmRMb2NhbGx5IGlzIGZhbHNlLCB0aGUga2V5Ym9hcmQgd2lsbCBiZSBhcHBlbmRlZCB0byB0aGlzIG9iamVjdFxyXG5cdFx0YXBwZW5kVG86ICdib2R5JyxcclxuXHJcblx0XHQvLyBXcmFwIGFsbCA8YnI+cyBpbnNpZGUgb2YgYSBjb250ZW50ZWRpdGFibGUgaW4gYSBkaXY7IHdpdGhvdXQgd3JhcHBpbmcsIHRoZSBjYXJldFxyXG5cdFx0Ly8gcG9zaXRpb24gd2lsbCBub3QgYmUgYWNjdXJhdGVcclxuXHRcdHdyYXBCUnM6IHRydWUsXHJcblxyXG5cdFx0Ly8gSWYgZmFsc2UsIHRoZSBzaGlmdCBrZXkgd2lsbCByZW1haW4gYWN0aXZlIHVudGlsIHRoZSBuZXh0IGtleSBpcyAobW91c2UpIGNsaWNrZWQgb247IGlmIHRydWUgaXQgd2lsbFxyXG5cdFx0Ly8gc3RheSBhY3RpdmUgdW50aWwgcHJlc3NlZCBhZ2FpblxyXG5cdFx0c3RpY2t5U2hpZnQ6IHRydWUsXHJcblxyXG5cdFx0Ly8gUHJldmVudCBwYXN0aW5nIGNvbnRlbnQgaW50byB0aGUgYXJlYVxyXG5cdFx0cHJldmVudFBhc3RlOiBmYWxzZSxcclxuXHJcblx0XHQvLyBjYXJldCBwbGFjZWQgYXQgdGhlIGVuZCBvZiBhbnkgdGV4dCB3aGVuIGtleWJvYXJkIGJlY29tZXMgdmlzaWJsZVxyXG5cdFx0Y2FyZXRUb0VuZDogZmFsc2UsXHJcblxyXG5cdFx0Ly8gY2FyZXQgc3RheXMgdGhpcyBtYW55IHBpeGVscyBmcm9tIHRoZSBlZGdlIG9mIHRoZSBpbnB1dCB3aGlsZSBzY3JvbGxpbmcgbGVmdC9yaWdodDtcclxuXHRcdC8vIHVzZSBcImNcIiBvciBcImNlbnRlclwiIHRvIGNlbnRlciB0aGUgY2FyZXQgd2hpbGUgc2Nyb2xsaW5nXHJcblx0XHRzY3JvbGxBZGp1c3RtZW50OiAxMCxcclxuXHJcblx0XHQvLyBTZXQgdGhlIG1heCBudW1iZXIgb2YgY2hhcmFjdGVycyBhbGxvd2VkIGluIHRoZSBpbnB1dCwgc2V0dGluZyBpdCB0byBmYWxzZSBkaXNhYmxlcyB0aGlzIG9wdGlvblxyXG5cdFx0bWF4TGVuZ3RoOiBmYWxzZSxcclxuXHRcdC8vIGFsbG93IGluc2VydGluZyBjaGFyYWN0ZXJzIEAgY2FyZXQgd2hlbiBtYXhMZW5ndGggaXMgc2V0XHJcblx0XHRtYXhJbnNlcnQ6IHRydWUsXHJcblxyXG5cdFx0Ly8gTW91c2UgcmVwZWF0IGRlbGF5IC0gd2hlbiBjbGlja2luZy90b3VjaGluZyBhIHZpcnR1YWwga2V5Ym9hcmQga2V5LCBhZnRlciB0aGlzIGRlbGF5IHRoZSBrZXkgd2lsbFxyXG5cdFx0Ly8gc3RhcnQgcmVwZWF0aW5nXHJcblx0XHRyZXBlYXREZWxheTogNTAwLFxyXG5cclxuXHRcdC8vIE1vdXNlIHJlcGVhdCByYXRlIC0gYWZ0ZXIgdGhlIHJlcGVhdERlbGF5LCB0aGlzIGlzIHRoZSByYXRlIChjaGFyYWN0ZXJzIHBlciBzZWNvbmQpIGF0IHdoaWNoIHRoZVxyXG5cdFx0Ly8ga2V5IGlzIHJlcGVhdGVkIEFkZGVkIHRvIHNpbXVsYXRlIGhvbGRpbmcgZG93biBhIHJlYWwga2V5Ym9hcmQga2V5IGFuZCBoYXZpbmcgaXQgcmVwZWF0LiBJIGhhdmVuJ3RcclxuXHRcdC8vIGNhbGN1bGF0ZWQgdGhlIHVwcGVyIGxpbWl0IG9mIHRoaXMgcmF0ZSwgYnV0IGl0IGlzIGxpbWl0ZWQgdG8gaG93IGZhc3QgdGhlIGphdmFzY3JpcHQgY2FuIHByb2Nlc3NcclxuXHRcdC8vIHRoZSBrZXlzLiBBbmQgZm9yIG1lLCBpbiBGaXJlZm94LCBpdCdzIGFyb3VuZCAyMC5cclxuXHRcdHJlcGVhdFJhdGU6IDIwLFxyXG5cclxuXHRcdC8vIHJlc2V0cyB0aGUga2V5Ym9hcmQgdG8gdGhlIGRlZmF1bHQga2V5c2V0IHdoZW4gdmlzaWJsZVxyXG5cdFx0cmVzZXREZWZhdWx0OiB0cnVlLFxyXG5cclxuXHRcdC8vIEV2ZW50IChuYW1lc3BhY2VkKSBvbiB0aGUgaW5wdXQgdG8gcmV2ZWFsIHRoZSBrZXlib2FyZC4gVG8gZGlzYWJsZSBpdCwganVzdCBzZXQgaXQgdG8gJycuXHJcblx0XHRvcGVuT246ICdmb2N1cycsXHJcblxyXG5cdFx0Ly8gZW5hYmxlIHRoZSBrZXlib2FyZCBvbiByZWFkb25seSBpbnB1dHNcclxuXHRcdGFjdGl2ZU9uUmVhZG9ubHk6IGZhbHNlLFxyXG5cclxuXHRcdC8vIEV2ZW50IChuYW1lcGFjZWQpIGZvciB3aGVuIHRoZSBjaGFyYWN0ZXIgaXMgYWRkZWQgdG8gdGhlIGlucHV0IChjbGlja2luZyBvbiB0aGUga2V5Ym9hcmQpXHJcblx0XHRrZXlCaW5kaW5nOiAnbW91c2Vkb3duIHRvdWNoc3RhcnQnLFxyXG5cclxuXHRcdC8vIGVuYWJsZS9kaXNhYmxlIG1vdXNld2hlZWwgZnVuY3Rpb25hbGl0eVxyXG5cdFx0Ly8gZW5hYmxpbmcgc3RpbGwgZGVwZW5kcyBvbiB0aGUgbW91c2V3aGVlbCBwbHVnaW5cclxuXHRcdHVzZVdoZWVsOiB0cnVlLFxyXG5cclxuXHRcdC8vIGNvbWJvcyAoZW11bGF0ZSBkZWFkIGtleXMgOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0tleWJvYXJkX2xheW91dCNVUy1JbnRlcm5hdGlvbmFsKVxyXG5cdFx0Ly8gaWYgdXNlciBpbnB1dHMgYGEgdGhlIHNjcmlwdCBjb252ZXJ0cyBpdCB0byDDoCwgXm8gYmVjb21lcyDDtCwgZXRjLlxyXG5cdFx0dXNlQ29tYm9zOiB0cnVlLFxyXG5cclxuXHRcdC8qXHJcblx0XHRcdC8vICoqKiBNZXRob2RzICoqKlxyXG5cdFx0XHQvLyBjb21tZW50aW5nIHRoZXNlIG91dCB0byByZWR1Y2UgdGhlIHNpemUgb2YgdGhlIG1pbmlmaWVkIHZlcnNpb25cclxuXHRcdFx0Ly8gQ2FsbGJhY2tzIC0gYXR0YWNoIGEgZnVuY3Rpb24gdG8gYW55IG9mIHRoZXNlIGNhbGxiYWNrcyBhcyBkZXNpcmVkXHJcblx0XHRcdGluaXRpYWxpemVkICAgOiBmdW5jdGlvbihlLCBrZXlib2FyZCwgZWwpIHt9LFxyXG5cdFx0XHRiZWZvcmVWaXNpYmxlIDogZnVuY3Rpb24oZSwga2V5Ym9hcmQsIGVsKSB7fSxcclxuXHRcdFx0dmlzaWJsZSAgICAgICA6IGZ1bmN0aW9uKGUsIGtleWJvYXJkLCBlbCkge30sXHJcblx0XHRcdGJlZm9yZUluc2VydCAgOiBmdW5jdGlvbihlLCBrZXlib2FyZCwgZWwsIHRleHRUb0FkZCkgeyByZXR1cm4gdGV4dFRvQWRkOyB9LFxyXG5cdFx0XHRjaGFuZ2UgICAgICAgIDogZnVuY3Rpb24oZSwga2V5Ym9hcmQsIGVsKSB7fSxcclxuXHRcdFx0YmVmb3JlQ2xvc2UgICA6IGZ1bmN0aW9uKGUsIGtleWJvYXJkLCBlbCwgYWNjZXB0ZWQpIHt9LFxyXG5cdFx0XHRhY2NlcHRlZCAgICAgIDogZnVuY3Rpb24oZSwga2V5Ym9hcmQsIGVsKSB7fSxcclxuXHRcdFx0Y2FuY2VsZWQgICAgICA6IGZ1bmN0aW9uKGUsIGtleWJvYXJkLCBlbCkge30sXHJcblx0XHRcdHJlc3RyaWN0ZWQgICAgOiBmdW5jdGlvbihlLCBrZXlib2FyZCwgZWwpIHt9LFxyXG5cdFx0XHRoaWRkZW4gICAgICAgIDogZnVuY3Rpb24oZSwga2V5Ym9hcmQsIGVsKSB7fSxcclxuXHRcdFx0Ly8gY2FsbGVkIGluc3RlYWQgb2YgYmFzZS5zd2l0Y2hJbnB1dFxyXG5cdFx0XHRzd2l0Y2hJbnB1dCAgIDogZnVuY3Rpb24oa2V5Ym9hcmQsIGdvVG9OZXh0LCBpc0FjY2VwdGVkKSB7fSxcclxuXHRcdFx0Ly8gdXNlZCBpZiB5b3Ugd2FudCB0byBjcmVhdGUgYSBjdXN0b20gbGF5b3V0IG9yIG1vZGlmeSB0aGUgYnVpbHQtaW4ga2V5Ym9hcmRcclxuXHRcdFx0Y3JlYXRlICAgICAgICA6IGZ1bmN0aW9uKGtleWJvYXJkKSB7IHJldHVybiBrZXlib2FyZC5idWlsZEtleWJvYXJkKCk7IH0sXHJcblxyXG5cdFx0XHQvLyBidWlsZCBrZXkgY2FsbGJhY2tcclxuXHRcdFx0YnVpbGRLZXkgOiBmdW5jdGlvbigga2V5Ym9hcmQsIGRhdGEgKSB7XHJcblx0XHRcdFx0LyAqXHJcblx0XHRcdFx0ZGF0YSA9IHtcclxuXHRcdFx0XHQvLyBSRUFEIE9OTFlcclxuXHRcdFx0XHRpc0FjdGlvbiA6IFtib29sZWFuXSB0cnVlIGlmIGtleSBpcyBhbiBhY3Rpb24ga2V5XHJcblx0XHRcdFx0bmFtZSAgICAgOiBbc3RyaW5nXSAga2V5IGNsYXNzIG5hbWUgc3VmZml4ICggcHJlZml4ID0gJ3VpLWtleWJvYXJkLScgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCBtYXkgaW5jbHVkZSBkZWNpbWFsIGFzY2lpIHZhbHVlIG9mIGNoYXJhY3RlclxyXG5cdFx0XHRcdHZhbHVlICAgIDogW3N0cmluZ10gIHRleHQgaW5zZXJ0ZWQgKG5vbi1hY3Rpb24ga2V5cylcclxuXHRcdFx0XHR0aXRsZSAgICA6IFtzdHJpbmddICB0aXRsZSBhdHRyaWJ1dGUgb2Yga2V5XHJcblx0XHRcdFx0YWN0aW9uICAgOiBbc3RyaW5nXSAga2V5YWN0aW9uIG5hbWVcclxuXHRcdFx0XHRodG1sICAgICA6IFtzdHJpbmddICBIVE1MIG9mIHRoZSBrZXk7IGl0IGluY2x1ZGVzIGEgPHNwYW4+IHdyYXBwaW5nIHRoZSB0ZXh0XHJcblx0XHRcdFx0Ly8gdXNlIHRvIG1vZGlmeSBrZXkgSFRNTFxyXG5cdFx0XHRcdCRrZXkgICAgIDogW29iamVjdF0gIGpRdWVyeSBzZWxlY3RvciBvZiBrZXkgd2hpY2ggaXMgYWxyZWFkeSBhcHBlbmRlZCB0byBrZXlib2FyZFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQqIC9cclxuXHRcdFx0XHRyZXR1cm4gZGF0YTtcclxuXHRcdFx0fSxcclxuXHRcdCovXHJcblxyXG5cdFx0Ly8gdGhpcyBjYWxsYmFjayBpcyBjYWxsZWQsIGlmIHRoZSBhY2NlcHRWYWxpZCBpcyB0cnVlLCBhbmQganVzdCBiZWZvcmUgdGhlICdiZWZvcmVDbG9zZScgdG8gY2hlY2tcclxuXHRcdC8vIHRoZSB2YWx1ZSBpZiB0aGUgdmFsdWUgaXMgdmFsaWQsIHJldHVybiB0cnVlIGFuZCB0aGUga2V5Ym9hcmQgd2lsbCBjb250aW51ZSBhcyBpdCBzaG91bGRcclxuXHRcdC8vIChjbG9zZSBpZiBub3QgYWx3YXlzIG9wZW4sIGV0YykuIElmIHRoZSB2YWx1ZSBpcyBub3QgdmFsaWQsIHJldHVybiBmYWxzZSBhbmQgY2xlYXIgdGhlIGtleWJvYXJkXHJcblx0XHQvLyB2YWx1ZSAoIGxpa2UgdGhpcyBcImtleWJvYXJkLiRwcmV2aWV3LnZhbCgnJyk7XCIgKSwgaWYgZGVzaXJlZC4gVGhlIHZhbGlkYXRlIGZ1bmN0aW9uIGlzIGNhbGxlZCBhZnRlclxyXG5cdFx0Ly8gZWFjaCBpbnB1dCwgdGhlICdpc0Nsb3NpbmcnIHZhbHVlIHdpbGwgYmUgZmFsc2U7IHdoZW4gdGhlIGFjY2VwdCBidXR0b24gaXMgY2xpY2tlZCxcclxuXHRcdC8vICdpc0Nsb3NpbmcnIGlzIHRydWVcclxuXHRcdHZhbGlkYXRlOiBmdW5jdGlvbiAoLyoga2V5Ym9hcmQsIHZhbHVlLCBpc0Nsb3NpbmcgKi8pIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cdH07XHJcblxyXG5cdC8vIGZvciBjaGVja2luZyBjb21ib3NcclxuXHQka2V5Ym9hcmQuY29tYm9SZWdleCA9IC8oW2BcXCd+XFxeXFxcImFvXSkoW2Etel0pL21pZztcclxuXHJcblx0Ly8gc3RvcmUgY3VycmVudCBrZXlib2FyZCBlbGVtZW50OyB1c2VkIGJ5IGJhc2UuaXNDdXJyZW50KClcclxuXHQka2V5Ym9hcmQuY3VycmVudEtleWJvYXJkID0gJyc7XHJcblxyXG5cdCQoJzwhLS1baWYgbHRlIElFIDhdPjxzY3JpcHQ+alF1ZXJ5KFwiYm9keVwiKS5hZGRDbGFzcyhcIm9sZGllXCIpOzwvc2NyaXB0PjwhW2VuZGlmXS0tPjwhLS1baWYgSUVdPicgK1xyXG5cdFx0XHQnPHNjcmlwdD5qUXVlcnkoXCJib2R5XCIpLmFkZENsYXNzKFwiaWVcIik7PC9zY3JpcHQ+PCFbZW5kaWZdLS0+JylcclxuXHRcdC5hcHBlbmRUbygnYm9keScpXHJcblx0XHQucmVtb3ZlKCk7XHJcblx0JGtleWJvYXJkLm1zaWUgPSAkKCdib2R5JykuaGFzQ2xhc3MoJ29sZGllJyk7IC8vIE9sZCBJRSBmbGFnLCB1c2VkIGZvciBjYXJldCBwb3NpdGlvbmluZ1xyXG5cdCRrZXlib2FyZC5hbGxpZSA9ICQoJ2JvZHknKS5oYXNDbGFzcygnaWUnKTtcclxuXHJcblx0JGtleWJvYXJkLndhdGVybWFyayA9ICh0eXBlb2YgKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JykucGxhY2Vob2xkZXIpICE9PSAndW5kZWZpbmVkJyk7XHJcblxyXG5cdCRrZXlib2FyZC5jaGVja0NhcmV0U3VwcG9ydCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdGlmICh0eXBlb2YgJGtleWJvYXJkLmNoZWNrQ2FyZXQgIT09ICdib29sZWFuJykge1xyXG5cdFx0XHQvLyBDaGVjayBpZiBjYXJldCBwb3NpdGlvbiBpcyBzYXZlZCB3aGVuIGlucHV0IGlzIGhpZGRlbiBvciBsb3NlcyBmb2N1c1xyXG5cdFx0XHQvLyAoKmNvdWdoKiBhbGwgdmVyc2lvbnMgb2YgSUUgYW5kIEkgdGhpbmsgT3BlcmEgaGFzL2hhZCBhbiBpc3N1ZSBhcyB3ZWxsXHJcblx0XHRcdHZhciAkdGVtcCA9ICQoJzxkaXYgc3R5bGU9XCJoZWlnaHQ6MHB4O3dpZHRoOjBweDtvdmVyZmxvdzpoaWRkZW47cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDotMTAwcHg7XCI+JyArXHJcblx0XHRcdFx0JzxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPVwidGVzdGluZ1wiLz48L2Rpdj4nKS5wcmVwZW5kVG8oJ2JvZHknKTsgLy8gc3RvcCBwYWdlIHNjcm9sbGluZ1xyXG5cdFx0XHQka2V5Ym9hcmQuY2FyZXQoJHRlbXAuZmluZCgnaW5wdXQnKSwgMywgMyk7XHJcblx0XHRcdC8vIEFsc28gc2F2ZSBjYXJldCBwb3NpdGlvbiBvZiB0aGUgaW5wdXQgaWYgaXQgaXMgbG9ja2VkXHJcblx0XHRcdCRrZXlib2FyZC5jaGVja0NhcmV0ID0gJGtleWJvYXJkLmNhcmV0KCR0ZW1wLmZpbmQoJ2lucHV0JykuaGlkZSgpLnNob3coKSkuc3RhcnQgIT09IDM7XHJcblx0XHRcdCR0ZW1wLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuICRrZXlib2FyZC5jaGVja0NhcmV0O1xyXG5cdH07XHJcblxyXG5cdCRrZXlib2FyZC5jYXJldCA9IGZ1bmN0aW9uKCRlbCwgcGFyYW0xLCBwYXJhbTIpIHtcclxuXHRcdGlmICghJGVsIHx8ICEkZWwubGVuZ3RoIHx8ICRlbC5pcygnOmhpZGRlbicpIHx8ICRlbC5jc3MoJ3Zpc2liaWxpdHknKSA9PT0gJ2hpZGRlbicpIHtcclxuXHRcdFx0cmV0dXJuIHt9O1xyXG5cdFx0fVxyXG5cdFx0dmFyIHN0YXJ0LCBlbmQsIHR4dCwgcG9zLFxyXG5cdFx0XHRrYiA9ICRlbC5kYXRhKCAna2V5Ym9hcmQnICksXHJcblx0XHRcdG5vRm9jdXMgPSBrYiAmJiBrYi5vcHRpb25zLm5vRm9jdXMsXHJcblx0XHRcdGZvcm1FbCA9IC8odGV4dGFyZWF8aW5wdXQpL2kudGVzdCgkZWxbMF0ubm9kZU5hbWUpO1xyXG5cdFx0aWYgKCFub0ZvY3VzKSB7ICRlbC5mb2N1cygpOyB9XHJcblx0XHQvLyBzZXQgY2FyZXQgcG9zaXRpb25cclxuXHRcdGlmICh0eXBlb2YgcGFyYW0xICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHQvLyBhbGxvdyBzZXR0aW5nIGNhcmV0IHVzaW5nICggJGVsLCB7IHN0YXJ0OiB4LCBlbmQ6IHkgfSApXHJcblx0XHRcdGlmICh0eXBlb2YgcGFyYW0xID09PSAnb2JqZWN0JyAmJiAnc3RhcnQnIGluIHBhcmFtMSAmJiAnZW5kJyBpbiBwYXJhbTEpIHtcclxuXHRcdFx0XHRzdGFydCA9IHBhcmFtMS5zdGFydDtcclxuXHRcdFx0XHRlbmQgPSBwYXJhbTEuZW5kO1xyXG5cdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiBwYXJhbTIgPT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0cGFyYW0yID0gcGFyYW0xOyAvLyBzZXQgY2FyZXQgdXNpbmcgc3RhcnQgcG9zaXRpb25cclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBzZXQgY2FyZXQgdXNpbmcgKCAkZWwsIHN0YXJ0LCBlbmQgKTtcclxuXHRcdFx0aWYgKHR5cGVvZiBwYXJhbTEgPT09ICdudW1iZXInICYmIHR5cGVvZiBwYXJhbTIgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0c3RhcnQgPSBwYXJhbTE7XHJcblx0XHRcdFx0ZW5kID0gcGFyYW0yO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBwYXJhbTEgPT09ICdzdGFydCcgKSB7XHJcblx0XHRcdFx0c3RhcnQgPSBlbmQgPSAwO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgcGFyYW0xID09PSAnc3RyaW5nJyApIHtcclxuXHRcdFx0XHQvLyB1bmtub3duIHN0cmluZyBzZXR0aW5nLCBtb3ZlIGNhcmV0IHRvIGVuZFxyXG5cdFx0XHRcdHN0YXJ0ID0gZW5kID0gJ2VuZCc7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vICoqKiBTRVQgQ0FSRVQgUE9TSVRJT04gKioqXHJcblx0XHRcdC8vIG1vZGlmeSB0aGUgbGluZSBiZWxvdyB0byBhZGFwdCB0byBvdGhlciBjYXJldCBwbHVnaW5zXHJcblx0XHRcdHJldHVybiBmb3JtRWwgP1xyXG5cdFx0XHRcdCRlbC5jYXJldCggc3RhcnQsIGVuZCwgbm9Gb2N1cyApIDpcclxuXHRcdFx0XHQka2V5Ym9hcmQuc2V0RWRpdGFibGVDYXJldCggJGVsLCBzdGFydCwgZW5kICk7XHJcblx0XHR9XHJcblx0XHQvLyAqKiogR0VUIENBUkVUIFBPU0lUSU9OICoqKlxyXG5cdFx0Ly8gbW9kaWZ5IHRoZSBsaW5lIGJlbG93IHRvIGFkYXB0IHRvIG90aGVyIGNhcmV0IHBsdWdpbnNcclxuXHRcdGlmIChmb3JtRWwpIHtcclxuXHRcdFx0Ly8gbW9kaWZ5IHRoZSBsaW5lIGJlbG93IHRvIGFkYXB0IHRvIG90aGVyIGNhcmV0IHBsdWdpbnNcclxuXHRcdFx0cG9zID0gJGVsLmNhcmV0KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBjb250ZW50ZWRpdGFibGVcclxuXHRcdFx0cG9zID0gJGtleWJvYXJkLmdldEVkaXRhYmxlQ2FyZXQoJGVsWzBdKTtcclxuXHRcdH1cclxuXHRcdHN0YXJ0ID0gcG9zLnN0YXJ0O1xyXG5cdFx0ZW5kID0gcG9zLmVuZDtcclxuXHJcblx0XHQvLyAqKiogdXRpbGl0aWVzICoqKlxyXG5cdFx0dHh0ID0gZm9ybUVsICYmICRlbFswXS52YWx1ZSB8fCAkZWwudGV4dCgpIHx8ICcnO1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0c3RhcnQgOiBzdGFydCxcclxuXHRcdFx0ZW5kIDogZW5kLFxyXG5cdFx0XHQvLyByZXR1cm4gc2VsZWN0ZWQgdGV4dFxyXG5cdFx0XHR0ZXh0IDogdHh0LnN1YnN0cmluZyggc3RhcnQsIGVuZCApLFxyXG5cdFx0XHQvLyByZXR1cm4gYSByZXBsYWNlIHNlbGVjdGVkIHN0cmluZyBtZXRob2RcclxuXHRcdFx0cmVwbGFjZVN0ciA6IGZ1bmN0aW9uKCBzdHIgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHR4dC5zdWJzdHJpbmcoIDAsIHN0YXJ0ICkgKyBzdHIgKyB0eHQuc3Vic3RyaW5nKCBlbmQsIHR4dC5sZW5ndGggKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9O1xyXG5cclxuXHQka2V5Ym9hcmQuaXNUZXh0Tm9kZSA9IGZ1bmN0aW9uKGVsKSB7XHJcblx0XHRyZXR1cm4gZWwgJiYgZWwubm9kZVR5cGUgPT09IDM7XHJcblx0fTtcclxuXHJcblx0JGtleWJvYXJkLmlzQmxvY2sgPSBmdW5jdGlvbihlbCwgbm9kZSkge1xyXG5cdFx0dmFyIHdpbiA9IGVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XHJcblx0XHRpZiAoXHJcblx0XHRcdG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiBub2RlICE9PSBlbCAmJlxyXG5cdFx0XHR3aW4uZ2V0Q29tcHV0ZWRTdHlsZShub2RlKS5kaXNwbGF5ID09PSAnYmxvY2snXHJcblx0XHQpIHtcclxuXHRcdFx0cmV0dXJuIDE7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gMDtcclxuXHR9O1xyXG5cclxuXHQvLyBXcmFwIGFsbCBCUidzIGluc2lkZSBvZiBjb250ZW50ZWRpdGFibGVcclxuXHQka2V5Ym9hcmQud3JhcEJScyA9IGZ1bmN0aW9uKGNvbnRhaW5lcikge1xyXG5cdFx0dmFyICRlbCA9ICQoY29udGFpbmVyKS5maW5kKCdicjpub3QoLicgKyAka2V5Ym9hcmQuY3NzLmRpdldyYXBwZXJDRSArICcpJyk7XHJcblx0XHRpZiAoJGVsLmxlbmd0aCkge1xyXG5cdFx0XHQkLmVhY2goJGVsLCBmdW5jdGlvbihpLCBlbCkge1xyXG5cdFx0XHRcdHZhciBsZW4gPSBlbC5wYXJlbnROb2RlLmNoaWxkTm9kZXMubGVuZ3RoO1xyXG5cdFx0XHRcdGlmIChcclxuXHRcdFx0XHRcdC8vIHdyYXAgQlJzIGlmIG5vdCBzb2xvIGNoaWxkXHJcblx0XHRcdFx0XHRsZW4gIT09IDEgfHxcclxuXHRcdFx0XHRcdC8vIE9yIGlmIEJSIGlzIHdyYXBwZWQgYnkgYSBzcGFuXHJcblx0XHRcdFx0XHRsZW4gPT09IDEgJiYgISRrZXlib2FyZC5pc0Jsb2NrKGNvbnRhaW5lciwgZWwucGFyZW50Tm9kZSlcclxuXHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdCQoZWwpLmFkZENsYXNzKCRrZXlib2FyZC5jc3MuZGl2V3JhcHBlckNFKS53cmFwKCc8ZGl2PicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JGtleWJvYXJkLmdldEVkaXRhYmxlQ2FyZXQgPSBmdW5jdGlvbihjb250YWluZXIpIHtcclxuXHRcdGNvbnRhaW5lciA9ICQoY29udGFpbmVyKVswXTtcclxuXHRcdGlmICghY29udGFpbmVyLmlzQ29udGVudEVkaXRhYmxlKSB7IHJldHVybiB7fTsgfVxyXG5cdFx0dmFyIGVuZCwgdGV4dCxcclxuXHRcdFx0b3B0aW9ucyA9ICgkKGNvbnRhaW5lcikuZGF0YSgna2V5Ym9hcmQnKSB8fCB7fSkub3B0aW9ucyxcclxuXHRcdFx0ZG9jID0gY29udGFpbmVyLm93bmVyRG9jdW1lbnQsXHJcblx0XHRcdHJhbmdlID0gZG9jLmdldFNlbGVjdGlvbigpLmdldFJhbmdlQXQoMCksXHJcblx0XHRcdHJlc3VsdCA9IHBhdGhUb05vZGUocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0T2Zmc2V0KSxcclxuXHRcdFx0c3RhcnQgPSByZXN1bHQucG9zaXRpb247XHJcblx0XHRpZiAob3B0aW9ucy53cmFwQlJzICE9PSBmYWxzZSkge1xyXG5cdFx0XHQka2V5Ym9hcmQud3JhcEJScyhjb250YWluZXIpO1xyXG5cdFx0fVxyXG5cdFx0ZnVuY3Rpb24gcGF0aFRvTm9kZShlbmROb2RlLCBvZmZzZXQpIHtcclxuXHRcdFx0dmFyIG5vZGUsIGFkanVzdCxcclxuXHRcdFx0XHR0eHQgPSAnJyxcclxuXHRcdFx0XHRkb25lID0gZmFsc2UsXHJcblx0XHRcdFx0cG9zaXRpb24gPSAwLFxyXG5cdFx0XHRcdG5vZGVzID0gJC5tYWtlQXJyYXkoY29udGFpbmVyLmNoaWxkTm9kZXMpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gY2hlY2tCbG9jayh2YWwpIHtcclxuXHRcdFx0XHRpZiAodmFsKSB7XHJcblx0XHRcdFx0XHRwb3NpdGlvbiArPSB2YWw7XHJcblx0XHRcdFx0XHR0eHQgKz0gb3B0aW9ucyAmJiBvcHRpb25zLnJlcGxhY2VDUiB8fCAnXFxuJztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHdoaWxlICghZG9uZSAmJiBub2Rlcy5sZW5ndGgpIHtcclxuXHRcdFx0XHRub2RlID0gbm9kZXMuc2hpZnQoKTtcclxuXHRcdFx0XHRpZiAobm9kZSA9PT0gZW5kTm9kZSkge1xyXG5cdFx0XHRcdFx0ZG9uZSA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBBZGQgb25lIGlmIHByZXZpb3VzIHNpYmxpbmcgd2FzIGEgYmxvY2sgbm9kZSAoZGl2LCBwLCBldGMpXHJcblx0XHRcdFx0YWRqdXN0ID0gJGtleWJvYXJkLmlzQmxvY2soY29udGFpbmVyLCBub2RlLnByZXZpb3VzU2libGluZyk7XHJcblx0XHRcdFx0Y2hlY2tCbG9jayhhZGp1c3QpO1xyXG5cclxuXHRcdFx0XHRpZiAoJGtleWJvYXJkLmlzVGV4dE5vZGUobm9kZSkpIHtcclxuXHRcdFx0XHRcdHBvc2l0aW9uICs9IGRvbmUgPyBvZmZzZXQgOiBub2RlLmxlbmd0aDtcclxuXHRcdFx0XHRcdHR4dCArPSBub2RlLnRleHRDb250ZW50O1xyXG5cdFx0XHRcdFx0aWYgKGRvbmUpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHtwb3NpdGlvbjogcG9zaXRpb24sIHRleHQ6IHR4dH07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIGlmICghZG9uZSAmJiBub2RlLmNoaWxkTm9kZXMpIHtcclxuXHRcdFx0XHRcdG5vZGVzID0gJC5tYWtlQXJyYXkobm9kZS5jaGlsZE5vZGVzKS5jb25jYXQobm9kZXMpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBBZGQgb25lIGlmIHdlJ3JlIGluc2lkZSBhIGJsb2NrIG5vZGUgKGRpdiwgcCwgZXRjKVxyXG5cdFx0XHRcdC8vIGFuZCBwcmV2aW91cyBzaWJsaW5nIHdhcyBhIHRleHQgbm9kZVxyXG5cdFx0XHRcdGFkanVzdCA9ICRrZXlib2FyZC5pc1RleHROb2RlKG5vZGUucHJldmlvdXNTaWJsaW5nKSAmJiAka2V5Ym9hcmQuaXNCbG9jayhjb250YWluZXIsIG5vZGUpO1xyXG5cdFx0XHRcdGNoZWNrQmxvY2soYWRqdXN0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4ge3Bvc2l0aW9uOiBwb3NpdGlvbiwgdGV4dDogdHh0fTtcclxuXHRcdH1cclxuXHRcdC8vIGNoZWNrIG9mIHN0YXJ0IGFuZCBlbmQgYXJlIHRoZSBzYW1lXHJcblx0XHRpZiAocmFuZ2UuZW5kQ29udGFpbmVyID09PSByYW5nZS5zdGFydENvbnRhaW5lciAmJiByYW5nZS5lbmRPZmZzZXQgPT09IHJhbmdlLnN0YXJ0T2Zmc2V0KSB7XHJcblx0XHRcdGVuZCA9IHN0YXJ0O1xyXG5cdFx0XHR0ZXh0ID0gJyc7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXN1bHQgPSBwYXRoVG9Ob2RlKHJhbmdlLmVuZENvbnRhaW5lciwgcmFuZ2UuZW5kT2Zmc2V0KTtcclxuXHRcdFx0ZW5kID0gcmVzdWx0LnBvc2l0aW9uO1xyXG5cdFx0XHR0ZXh0ID0gcmVzdWx0LnRleHQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0c3RhcnQ6IHN0YXJ0LFxyXG5cdFx0XHRlbmQ6IGVuZCxcclxuXHRcdFx0dGV4dDogdGV4dFxyXG5cdFx0fTtcclxuXHR9O1xyXG5cclxuXHQka2V5Ym9hcmQuZ2V0RWRpdGFibGVMZW5ndGggPSBmdW5jdGlvbihjb250YWluZXIpIHtcclxuXHRcdHZhciByZXN1bHQgPSAka2V5Ym9hcmQuc2V0RWRpdGFibGVDYXJldChjb250YWluZXIsICdnZXRNYXgnKTtcclxuXHRcdC8vIGlmIG5vdCBhIG51bWJlciwgdGhlIGNvbnRhaW5lciBpcyBub3QgYSBjb250ZW50ZWRpdGFibGUgZWxlbWVudFxyXG5cdFx0cmV0dXJuIHR5cGVvZiByZXN1bHQgPT09ICdudW1iZXInID8gcmVzdWx0IDogbnVsbDtcclxuXHR9O1xyXG5cclxuXHQka2V5Ym9hcmQuc2V0RWRpdGFibGVDYXJldCA9IGZ1bmN0aW9uKGNvbnRhaW5lciwgc3RhcnQsIGVuZCkge1xyXG5cdFx0Y29udGFpbmVyID0gJChjb250YWluZXIpWzBdO1xyXG5cdFx0aWYgKCFjb250YWluZXIuaXNDb250ZW50RWRpdGFibGUpIHsgcmV0dXJuIHt9OyB9XHJcblx0XHR2YXIgZG9jID0gY29udGFpbmVyLm93bmVyRG9jdW1lbnQsXHJcblx0XHRcdHJhbmdlID0gZG9jLmNyZWF0ZVJhbmdlKCksXHJcblx0XHRcdHNlbCA9IGRvYy5nZXRTZWxlY3Rpb24oKSxcclxuXHRcdFx0b3B0aW9ucyA9ICgkKGNvbnRhaW5lcikuZGF0YSgna2V5Ym9hcmQnKSB8fCB7fSkub3B0aW9ucyxcclxuXHRcdFx0cyA9IHN0YXJ0LFxyXG5cdFx0XHRlID0gZW5kLFxyXG5cdFx0XHR0ZXh0ID0gJycsXHJcblx0XHRcdHJlc3VsdCA9IGZpbmROb2RlKHN0YXJ0ID09PSAnZ2V0TWF4JyA/ICdlbmQnIDogc3RhcnQpO1xyXG5cdFx0ZnVuY3Rpb24gZmluZE5vZGUob2Zmc2V0KSB7XHJcblx0XHRcdGlmIChvZmZzZXQgPT09ICdlbmQnKSB7XHJcblx0XHRcdFx0Ly8gU2V0IHNvbWUgdmFsdWUgPiBjb250ZW50IGxlbmd0aDsgYnV0IHJldHVybiBtYXhcclxuXHRcdFx0XHRvZmZzZXQgPSBjb250YWluZXIuaW5uZXJIVE1MLmxlbmd0aDtcclxuXHRcdFx0fSBlbHNlIGlmIChvZmZzZXQgPCAwKSB7XHJcblx0XHRcdFx0b2Zmc2V0ID0gMDtcclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgbm9kZSwgY2hlY2ssXHJcblx0XHRcdFx0dHh0ID0gJycsXHJcblx0XHRcdFx0ZG9uZSA9IGZhbHNlLFxyXG5cdFx0XHRcdHBvc2l0aW9uID0gMCxcclxuXHRcdFx0XHRsYXN0ID0gMCxcclxuXHRcdFx0XHRtYXggPSAwLFxyXG5cdFx0XHRcdG5vZGVzID0gJC5tYWtlQXJyYXkoY29udGFpbmVyLmNoaWxkTm9kZXMpO1xyXG5cdFx0XHRmdW5jdGlvbiB1cGRhdGVUZXh0KHZhbCkge1xyXG5cdFx0XHRcdHR4dCArPSB2YWwgPyBvcHRpb25zICYmIG9wdGlvbnMucmVwbGFjZUNSIHx8ICdcXG4nIDogJyc7XHJcblx0XHRcdFx0cmV0dXJuIHZhbCA+IDA7XHJcblx0XHRcdH1cclxuXHRcdFx0ZnVuY3Rpb24gY2hlY2tEb25lKGFkaikge1xyXG5cdFx0XHRcdHZhciB2YWwgPSBwb3NpdGlvbiArIGFkajtcclxuXHRcdFx0XHRsYXN0ID0gbWF4O1xyXG5cdFx0XHRcdG1heCArPSBhZGo7XHJcblx0XHRcdFx0aWYgKG9mZnNldCAtIHZhbCA+PSAwKSB7XHJcblx0XHRcdFx0XHRwb3NpdGlvbiA9IHZhbDtcclxuXHRcdFx0XHRcdHJldHVybiBvZmZzZXQgLSBwb3NpdGlvbiA8PSAwO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gb2Zmc2V0IC0gdmFsIDw9IDA7XHJcblx0XHRcdH1cclxuXHRcdFx0d2hpbGUgKCFkb25lICYmIG5vZGVzLmxlbmd0aCkge1xyXG5cdFx0XHRcdG5vZGUgPSBub2Rlcy5zaGlmdCgpO1xyXG5cdFx0XHRcdC8vIEFkZCBvbmUgaWYgdGhlIHByZXZpb3VzIHNpYmxpbmcgd2FzIGEgYmxvY2sgbm9kZSAoZGl2LCBwLCBldGMpXHJcblx0XHRcdFx0Y2hlY2sgPSAka2V5Ym9hcmQuaXNCbG9jayhjb250YWluZXIsIG5vZGUucHJldmlvdXNTaWJsaW5nKTtcclxuXHRcdFx0XHRpZiAodXBkYXRlVGV4dChjaGVjaykgJiYgY2hlY2tEb25lKGNoZWNrKSkge1xyXG5cdFx0XHRcdFx0ZG9uZSA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIEFkZCBvbmUgaWYgd2UncmUgaW5zaWRlIGEgYmxvY2sgbm9kZSAoZGl2LCBwLCBldGMpXHJcblx0XHRcdFx0Y2hlY2sgPSAka2V5Ym9hcmQuaXNUZXh0Tm9kZShub2RlLnByZXZpb3VzU2libGluZykgJiYgJGtleWJvYXJkLmlzQmxvY2soY29udGFpbmVyLCBub2RlKTtcclxuXHRcdFx0XHRpZiAodXBkYXRlVGV4dChjaGVjaykgJiYgY2hlY2tEb25lKGNoZWNrKSkge1xyXG5cdFx0XHRcdFx0ZG9uZSA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICgka2V5Ym9hcmQuaXNUZXh0Tm9kZShub2RlKSkge1xyXG5cdFx0XHRcdFx0dHh0ICs9IG5vZGUudGV4dENvbnRlbnQ7XHJcblx0XHRcdFx0XHRpZiAoY2hlY2tEb25lKG5vZGUubGVuZ3RoKSkge1xyXG5cdFx0XHRcdFx0XHRjaGVjayA9IG9mZnNldCAtIHBvc2l0aW9uID09PSAwICYmIHBvc2l0aW9uIC0gbGFzdCA+PSAxID8gbm9kZS5sZW5ndGggOiBvZmZzZXQgLSBwb3NpdGlvbjtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0XHRub2RlOiBub2RlLFxyXG5cdFx0XHRcdFx0XHRcdG9mZnNldDogY2hlY2ssXHJcblx0XHRcdFx0XHRcdFx0cG9zaXRpb246IG9mZnNldCxcclxuXHRcdFx0XHRcdFx0XHR0ZXh0OiB0eHRcclxuXHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2UgaWYgKCFkb25lICYmIG5vZGUuY2hpbGROb2Rlcykge1xyXG5cdFx0XHRcdFx0bm9kZXMgPSAkLm1ha2VBcnJheShub2RlLmNoaWxkTm9kZXMpLmNvbmNhdChub2Rlcyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBub2Rlcy5sZW5ndGggP1xyXG5cdFx0XHRcdHtub2RlOiBub2RlLCBvZmZzZXQ6IG9mZnNldCAtIHBvc2l0aW9uLCBwb3NpdGlvbjogb2Zmc2V0LCB0ZXh0OiB0eHR9IDpcclxuXHRcdFx0XHQvLyBPZmZzZXQgaXMgbGFyZ2VyIHRoYW4gY29udGVudCwgcmV0dXJuIG1heFxyXG5cdFx0XHRcdHtub2RlOiBub2RlLCBvZmZzZXQ6IG5vZGUgJiYgbm9kZS5sZW5ndGggfHwgMCwgcG9zaXRpb246IG1heCwgdGV4dDogdHh0fTtcclxuXHRcdH1cclxuXHRcdGlmIChyZXN1bHQubm9kZSkge1xyXG5cdFx0XHRzID0gcmVzdWx0LnBvc2l0aW9uOyAvLyBBZGp1c3QgaWYgc3RhcnQgPiBjb250ZW50IGxlbmd0aFxyXG5cdFx0XHRpZiAoc3RhcnQgPT09ICdnZXRNYXgnKSB7XHJcblx0XHRcdFx0cmV0dXJuIHM7XHJcblx0XHRcdH1cclxuXHRcdFx0cmFuZ2Uuc2V0U3RhcnQocmVzdWx0Lm5vZGUsIHJlc3VsdC5vZmZzZXQpO1xyXG5cdFx0XHQvLyBPbmx5IGZpbmQgZW5kIGlmID4gc3RhcnQgYW5kIGlzIGRlZmluZWQuLi4gdGhpcyBhbGxvd3MgcGFzc2luZ1xyXG5cdFx0XHQvLyBzZXRFZGl0YWJsZUNhcmV0KGVsLCAnZW5kJykgb3Igc2V0RWRpdGFibGVDYXJldChlbCwgMTAsICdlbmQnKTtcclxuXHRcdFx0aWYgKHR5cGVvZiBlbmQgIT09ICd1bmRlZmluZWQnICYmIGVuZCAhPT0gc3RhcnQpIHtcclxuXHRcdFx0XHRyZXN1bHQgPSBmaW5kTm9kZShlbmQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChyZXN1bHQubm9kZSkge1xyXG5cdFx0XHRcdGUgPSByZXN1bHQucG9zaXRpb247IC8vIEFkanVzdCBpZiBlbmQgPiBjb250ZW50IGxlbmd0aFxyXG5cdFx0XHRcdHJhbmdlLnNldEVuZChyZXN1bHQubm9kZSwgcmVzdWx0Lm9mZnNldCk7XHJcblx0XHRcdFx0dGV4dCA9IHMgPT09IGUgPyAnJyA6IHJlc3VsdC50ZXh0LnN1YnN0cmluZyhzLCBlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XHJcblx0XHRcdHNlbC5hZGRSYW5nZShyYW5nZSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRzdGFydDogcyxcclxuXHRcdFx0ZW5kOiBlLFxyXG5cdFx0XHR0ZXh0OiB0ZXh0XHJcblx0XHR9O1xyXG5cdH07XHJcblxyXG5cdCRrZXlib2FyZC5yZXBsYWNlQ29udGVudCA9IGZ1bmN0aW9uIChlbCwgcGFyYW0pIHtcclxuXHRcdGVsID0gJChlbClbMF07XHJcblx0XHR2YXIgbm9kZSwgaSwgc3RyLFxyXG5cdFx0XHR0eXBlID0gdHlwZW9mIHBhcmFtLFxyXG5cdFx0XHRjYXJldCA9ICRrZXlib2FyZC5nZXRFZGl0YWJsZUNhcmV0KGVsKS5zdGFydCxcclxuXHRcdFx0Y2hhckluZGV4ID0gMCxcclxuXHRcdFx0bm9kZVN0YWNrID0gW2VsXTtcclxuXHRcdHdoaWxlICgobm9kZSA9IG5vZGVTdGFjay5wb3AoKSkpIHtcclxuXHRcdFx0aWYgKCRrZXlib2FyZC5pc1RleHROb2RlKG5vZGUpKSB7XHJcblx0XHRcdFx0aWYgKHR5cGUgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRcdGlmIChjYXJldCA+PSBjaGFySW5kZXggJiYgY2FyZXQgPD0gY2hhckluZGV4ICsgbm9kZS5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0bm9kZS50ZXh0Q29udGVudCA9IHBhcmFtKG5vZGUudGV4dENvbnRlbnQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdC8vIG1heWJlIG5vdCB0aGUgYmVzdCBtZXRob2QsIGJ1dCBpdCB3b3JrcyBmb3Igc2ltcGxlIGNoYW5nZXNcclxuXHRcdFx0XHRcdHN0ciA9IHBhcmFtLnN1YnN0cmluZyhjaGFySW5kZXgsIGNoYXJJbmRleCArIG5vZGUubGVuZ3RoKTtcclxuXHRcdFx0XHRcdGlmIChzdHIgIT09IG5vZGUudGV4dENvbnRlbnQpIHtcclxuXHRcdFx0XHRcdFx0bm9kZS50ZXh0Q29udGVudCA9IHN0cjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y2hhckluZGV4ICs9IG5vZGUubGVuZ3RoO1xyXG5cdFx0XHR9IGVsc2UgaWYgKG5vZGUgJiYgbm9kZS5jaGlsZE5vZGVzKSB7XHJcblx0XHRcdFx0aSA9IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7XHJcblx0XHRcdFx0d2hpbGUgKGktLSkge1xyXG5cdFx0XHRcdFx0bm9kZVN0YWNrLnB1c2gobm9kZS5jaGlsZE5vZGVzW2ldKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGkgPSAka2V5Ym9hcmQuZ2V0RWRpdGFibGVDYXJldChlbCk7XHJcblx0XHQka2V5Ym9hcmQuc2V0RWRpdGFibGVDYXJldChlbCwgaS5zdGFydCwgaS5zdGFydCk7XHJcblx0fTtcclxuXHJcblx0JC5mbi5rZXlib2FyZCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0aWYgKCEkKHRoaXMpLmRhdGEoJ2tleWJvYXJkJykpIHtcclxuXHRcdFx0XHQvKmpzaGludCBub25ldzpmYWxzZSAqL1xyXG5cdFx0XHRcdChuZXcgJC5rZXlib2FyZCh0aGlzLCBvcHRpb25zKSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH07XHJcblxyXG5cdCQuZm4uZ2V0a2V5Ym9hcmQgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5kYXRhKCdrZXlib2FyZCcpO1xyXG5cdH07XHJcblxyXG5cdC8qIENvcHlyaWdodCAoYykgMjAxMCBDLiBGLiwgV29uZyAoPGEgaHJlZj1cImh0dHA6Ly9jbG91ZGdlbi53MG5nLmhrXCI+Q2xvdWRnZW4gRXhhbXBsZXQgU3RvcmU8L2E+KVxyXG5cdCAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZTpcclxuXHQgKiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdCAqIEhpZ2hseSBtb2RpZmllZCBmcm9tIHRoZSBvcmlnaW5hbFxyXG5cdCAqL1xyXG5cclxuXHQkLmZuLmNhcmV0ID0gZnVuY3Rpb24gKHN0YXJ0LCBlbmQsIG5vRm9jdXMpIHtcclxuXHRcdGlmIChcclxuXHRcdFx0dHlwZW9mIHRoaXNbMF0gPT09ICd1bmRlZmluZWQnIHx8XHJcblx0XHRcdHRoaXMuaXMoJzpoaWRkZW4nKSB8fFxyXG5cdFx0XHR0aGlzLmNzcygndmlzaWJpbGl0eScpID09PSAnaGlkZGVuJyB8fFxyXG5cdFx0XHQhLyhJTlBVVHxURVhUQVJFQSkvaS50ZXN0KHRoaXNbMF0ubm9kZU5hbWUpXHJcblx0XHQpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblx0XHR2YXIgc2VsUmFuZ2UsIHJhbmdlLCBzdG9yZWRfcmFuZ2UsIHR4dCwgdmFsLFxyXG5cdFx0XHQkZWwgPSB0aGlzLFxyXG5cdFx0XHRlbCA9ICRlbFswXSxcclxuXHRcdFx0c2VsZWN0aW9uID0gZWwub3duZXJEb2N1bWVudC5zZWxlY3Rpb24sXHJcblx0XHRcdHNUb3AgPSBlbC5zY3JvbGxUb3AsXHJcblx0XHRcdHNzID0gZmFsc2UsXHJcblx0XHRcdHN1cHBvcnRDYXJldCA9IHRydWU7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRzcyA9ICdzZWxlY3Rpb25TdGFydCcgaW4gZWw7XHJcblx0XHR9IGNhdGNoIChlcnIpIHtcclxuXHRcdFx0c3VwcG9ydENhcmV0ID0gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRpZiAoc3VwcG9ydENhcmV0ICYmIHR5cGVvZiBzdGFydCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0aWYgKCEvKGVtYWlsfG51bWJlcikvaS50ZXN0KGVsLnR5cGUpKSB7XHJcblx0XHRcdFx0aWYgKHNzKSB7XHJcblx0XHRcdFx0XHRlbC5zZWxlY3Rpb25TdGFydCA9IHN0YXJ0O1xyXG5cdFx0XHRcdFx0ZWwuc2VsZWN0aW9uRW5kID0gZW5kO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRzZWxSYW5nZSA9IGVsLmNyZWF0ZVRleHRSYW5nZSgpO1xyXG5cdFx0XHRcdFx0c2VsUmFuZ2UuY29sbGFwc2UodHJ1ZSk7XHJcblx0XHRcdFx0XHRzZWxSYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIHN0YXJ0KTtcclxuXHRcdFx0XHRcdHNlbFJhbmdlLm1vdmVFbmQoJ2NoYXJhY3RlcicsIGVuZCAtIHN0YXJ0KTtcclxuXHRcdFx0XHRcdHNlbFJhbmdlLnNlbGVjdCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBtdXN0IGJlIHZpc2libGUgb3IgSUU4IGNyYXNoZXM7IElFOSBpbiBjb21wYXRpYmlsaXR5IG1vZGUgd29ya3MgZmluZSAtIGlzc3VlICM1NlxyXG5cdFx0XHRpZiAoIW5vRm9jdXMgJiYgKCRlbC5pcygnOnZpc2libGUnKSB8fCAkZWwuY3NzKCd2aXNpYmlsaXR5JykgIT09ICdoaWRkZW4nKSkge1xyXG5cdFx0XHRcdGVsLmZvY3VzKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWwuc2Nyb2xsVG9wID0gc1RvcDtcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblx0XHRpZiAoLyhlbWFpbHxudW1iZXIpL2kudGVzdChlbC50eXBlKSkge1xyXG5cdFx0XHQvLyBmaXggc3VnZ2VzdGVkIGJ5IHJhZHVhbmFzdGFzZSAoaHR0cHM6Ly9naXRodWIuY29tL01vdHRpZS9LZXlib2FyZC9pc3N1ZXMvMTA1I2lzc3VlY29tbWVudC00MDQ1NjUzNSlcclxuXHRcdFx0c3RhcnQgPSBlbmQgPSAkZWwudmFsKCkubGVuZ3RoO1xyXG5cdFx0fSBlbHNlIGlmIChzcykge1xyXG5cdFx0XHRzdGFydCA9IGVsLnNlbGVjdGlvblN0YXJ0O1xyXG5cdFx0XHRlbmQgPSBlbC5zZWxlY3Rpb25FbmQ7XHJcblx0XHR9IGVsc2UgaWYgKHNlbGVjdGlvbikge1xyXG5cdFx0XHRpZiAoZWwubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gJ1RFWFRBUkVBJykge1xyXG5cdFx0XHRcdHZhbCA9ICRlbC52YWwoKTtcclxuXHRcdFx0XHRyYW5nZSA9IHNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xyXG5cdFx0XHRcdHN0b3JlZF9yYW5nZSA9IHJhbmdlLmR1cGxpY2F0ZSgpO1xyXG5cdFx0XHRcdHN0b3JlZF9yYW5nZS5tb3ZlVG9FbGVtZW50VGV4dChlbCk7XHJcblx0XHRcdFx0c3RvcmVkX3JhbmdlLnNldEVuZFBvaW50KCdFbmRUb0VuZCcsIHJhbmdlKTtcclxuXHRcdFx0XHQvLyB0aGFua3MgdG8gdGhlIGF3ZXNvbWUgY29tbWVudHMgaW4gdGhlIHJhbmd5IHBsdWdpblxyXG5cdFx0XHRcdHN0YXJ0ID0gc3RvcmVkX3JhbmdlLnRleHQucmVwbGFjZSgvXFxyL2csICdcXG4nKS5sZW5ndGg7XHJcblx0XHRcdFx0ZW5kID0gc3RhcnQgKyByYW5nZS50ZXh0LnJlcGxhY2UoL1xcci9nLCAnXFxuJykubGVuZ3RoO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHZhbCA9ICRlbC52YWwoKS5yZXBsYWNlKC9cXHIvZywgJ1xcbicpO1xyXG5cdFx0XHRcdHJhbmdlID0gc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkuZHVwbGljYXRlKCk7XHJcblx0XHRcdFx0cmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgdmFsLmxlbmd0aCk7XHJcblx0XHRcdFx0c3RhcnQgPSAocmFuZ2UudGV4dCA9PT0gJycgPyB2YWwubGVuZ3RoIDogdmFsLmxhc3RJbmRleE9mKHJhbmdlLnRleHQpKTtcclxuXHRcdFx0XHRyYW5nZSA9IHNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLmR1cGxpY2F0ZSgpO1xyXG5cdFx0XHRcdHJhbmdlLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgLXZhbC5sZW5ndGgpO1xyXG5cdFx0XHRcdGVuZCA9IHJhbmdlLnRleHQubGVuZ3RoO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBjYXJldCBwb3NpdGlvbmluZyBub3Qgc3VwcG9ydGVkXHJcblx0XHRcdHN0YXJ0ID0gZW5kID0gKGVsLnZhbHVlIHx8ICcnKS5sZW5ndGg7XHJcblx0XHR9XHJcblx0XHR0eHQgPSAoZWwudmFsdWUgfHwgJycpO1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0c3RhcnQ6IHN0YXJ0LFxyXG5cdFx0XHRlbmQ6IGVuZCxcclxuXHRcdFx0dGV4dDogdHh0LnN1YnN0cmluZyhzdGFydCwgZW5kKSxcclxuXHRcdFx0cmVwbGFjZTogZnVuY3Rpb24gKHN0cikge1xyXG5cdFx0XHRcdHJldHVybiB0eHQuc3Vic3RyaW5nKDAsIHN0YXJ0KSArIHN0ciArIHR4dC5zdWJzdHJpbmcoZW5kLCB0eHQubGVuZ3RoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9O1xyXG5cclxuXHRyZXR1cm4gJGtleWJvYXJkO1xyXG5cclxufSkpO1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IGpRdWVyeTsiLCIvKipcclxuICAgICAgICAgICAgICAgXyBfX19fXyAgICAgICAgICAgXyAgICAgICAgICBfICAgICBfICAgICAgXHJcbiAgICAgICAgICAgICAgfCB8ICBfXyBcXCAgICAgICAgIChfKSAgICAgICAgfCB8ICAgfCB8ICAgICBcclxuICAgICAgX19fIF9fXyB8IHwgfF9fKSB8X19fICBfX18gXyBfX19fX18gX3wgfF9fIHwgfCBfX18gXHJcbiAgICAgLyBfXy8gXyBcXHwgfCAgXyAgLy8gXyBcXC8gX198IHxfICAvIF9gIHwgJ18gXFx8IHwvIF8gXFxcclxuICAgIHwgKF98IChfKSB8IHwgfCBcXCBcXCAgX18vXFxfXyBcXCB8LyAvIChffCB8IHxfKSB8IHwgIF9fL1xyXG4gICAgIFxcX19fXFxfX18vfF98X3wgIFxcX1xcX19ffHxfX18vXy9fX19cXF9fLF98Xy5fXy98X3xcXF9fX3xcclxuXHQgXHJcblx0djEuNyAtIGpRdWVyeSBwbHVnaW4gY3JlYXRlZCBieSBBbHZhcm8gUHJpZXRvIExhdXJvYmFcclxuXHRcclxuXHRMaWNlbmNlczogTUlUICYgR1BMXHJcblx0RmVlbCBmcmVlIHRvIHVzZSBvciBtb2RpZnkgdGhpcyBwbHVnaW4gYXMgZmFyIGFzIG15IGZ1bGwgbmFtZSBpcyBrZXB0XHRcclxuKi9cclxuXHJcbihmdW5jdGlvbigkKXsgXHRcclxuXHRcclxuXHQvL0lFOCBQb2x5ZmlsbFxyXG5cdGlmKCFBcnJheS5pbmRleE9mKSB7IEFycmF5LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24ob2JqKSB7IGZvcih2YXIgaT0wOyBpPHRoaXMubGVuZ3RoO2krKyl7aWYodGhpc1tpXT09b2JqKXtyZXR1cm4gaTt9fSByZXR1cm4gLTE7IH19XHJcblx0XHJcblx0dmFyIGQgPSAkKGRvY3VtZW50KTsgXHRcdC8vd2luZG93IG9iamVjdFxyXG5cdHZhciBoID0gJChcImhlYWRcIik7XHRcdFx0Ly9oZWFkIG9iamVjdFxyXG5cdHZhciBkcmFnID0gbnVsbDtcdFx0XHQvL3JlZmVyZW5jZSB0byB0aGUgY3VycmVudCBncmlwIHRoYXQgaXMgYmVpbmcgZHJhZ2dlZFxyXG5cdHZhciB0YWJsZXMgPSB7fTtcdFx0XHQvL29iamVjdCBvZiB0aGUgYWxyZWFkeSBwcm9jZXNzZWQgdGFibGVzICh0YWJsZS5pZCBhcyBrZXkpXHJcblx0dmFyXHRjb3VudCA9IDA7XHRcdFx0XHQvL2ludGVybmFsIGNvdW50IHRvIGNyZWF0ZSB1bmlxdWUgSURzIHdoZW4gbmVlZGVkLlx0XHJcblx0XHJcblx0Ly9jb21tb24gc3RyaW5ncyBmb3IgcGFja2luZ1xyXG5cdHZhciBJRCA9IFwiaWRcIjtcdFxyXG5cdHZhciBQWCA9IFwicHhcIjtcclxuXHR2YXIgU0lHTkFUVVJFID1cIkpDb2xSZXNpemVyXCI7XHJcbiAgICB2YXIgRkxFWCA9IFwiSkNMUkZsZXhcIjtcclxuXHRcclxuXHQvL3Nob3J0LWN1dHNcclxuXHR2YXIgSSA9IHBhcnNlSW50O1xyXG5cdHZhciBNID0gTWF0aDtcclxuXHR2YXIgaWUgPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ1RyaWRlbnQvNC4wJyk+MDtcclxuXHR2YXIgUztcclxuICAgIHZhciBwYWQgPSBcIlwiXHJcblx0dHJ5e1MgPSBzZXNzaW9uU3RvcmFnZTt9Y2F0Y2goZSl7fVx0Ly9GaXJlZm94IGNyYXNoZXMgd2hlbiBleGVjdXRlZCBhcyBsb2NhbCBmaWxlIHN5c3RlbVxyXG4gICAgXHJcblx0XHJcblx0Ly9hcHBlbmQgcmVxdWlyZWQgQ1NTIHJ1bGVzICBcclxuICAgIGguYXBwZW5kKFwiPHN0eWxlIHR5cGU9J3RleHQvY3NzJz4gIC5KQ29sUmVzaXplcnt0YWJsZS1sYXlvdXQ6Zml4ZWQ7fSAuSkNvbFJlc2l6ZXIgPiB0Ym9keSA+IHRyID4gdGQsIC5KQ29sUmVzaXplciA+IHRib2R5ID4gdHIgPiB0aHtvdmVyZmxvdzpoaWRkZW59ICAuSlBhZGRpbmcgPiB0Ym9keSA+IHRyID4gdGQsIC5KUGFkZGluZyA+IHRib2R5ID4gdHIgPiB0aHtwYWRkaW5nLWxlZnQ6MCFpbXBvcnRhbnQ7IHBhZGRpbmctcmlnaHQ6MCFpbXBvcnRhbnQ7fSAuSkNMUmdyaXBzeyBoZWlnaHQ6MHB4OyBwb3NpdGlvbjpyZWxhdGl2ZTt9IC5KQ0xSZ3JpcHttYXJnaW4tbGVmdDotNXB4OyBwb3NpdGlvbjphYnNvbHV0ZTsgei1pbmRleDo1OyB9IC5KQ0xSZ3JpcCAuSkNvbFJlc2l6ZXJ7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1jb2xvcjpyZWQ7ZmlsdGVyOmFscGhhKG9wYWNpdHk9MSk7b3BhY2l0eTowO3dpZHRoOjEwcHg7aGVpZ2h0OjEwMCU7Y3Vyc29yOiBjb2wtcmVzaXplO3RvcDowcHh9IC5KQ0xSTGFzdEdyaXB7cG9zaXRpb246YWJzb2x1dGU7IHdpZHRoOjFweDsgfSAuSkNMUmdyaXBEcmFneyBib3JkZXItbGVmdDoxcHggZG90dGVkIGJsYWNrO1x0fSAuSkNMUkZsZXh7d2lkdGg6YXV0byFpbXBvcnRhbnQ7fSAuSkNMUmdyaXAuSkNMUmRpc2FibGVkR3JpcCAuSkNvbFJlc2l6ZXJ7Y3Vyc29yOmRlZmF1bHQ7IGRpc3BsYXk6bm9uZTt9PC9zdHlsZT5cIik7XHJcblxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZ1bmN0aW9uIHRvIGFsbG93IGNvbHVtbiByZXNpemluZyBmb3IgdGFibGUgb2JqZWN0cy4gSXQgaXMgdGhlIHN0YXJ0aW5nIHBvaW50IHRvIGFwcGx5IHRoZSBwbHVnaW4uXHJcblx0ICogQHBhcmFtIHtET00gbm9kZX0gdGIgLSByZWZlcmVuY2UgdG8gdGhlIERPTSB0YWJsZSBvYmplY3QgdG8gYmUgZW5oYW5jZWRcclxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1x0LSBzb21lIGN1c3RvbWl6YXRpb24gdmFsdWVzXHJcblx0ICovXHJcblx0dmFyIGluaXQgPSBmdW5jdGlvbiggdGIsIG9wdGlvbnMpe1x0XHJcblx0XHR2YXIgdCA9ICQodGIpO1x0XHRcdFx0ICAgIC8vdGhlIHRhYmxlIG9iamVjdCBpcyB3cmFwcGVkXHJcbiAgICAgICAgdC5vcHQgPSBvcHRpb25zOyAgICAgICAgICAgICAgICAvL2VhY2ggdGFibGUgaGFzIGl0cyBvd24gb3B0aW9ucyBhdmFpbGFibGUgYXQgYW55dGltZVxyXG4gICAgICAgIHQubW9kZSA9IG9wdGlvbnMucmVzaXplTW9kZTsgICAgLy9zaG9ydGN1dHNcclxuICAgICAgICB0LmRjID0gdC5vcHQuZGlzYWJsZWRDb2x1bW5zO1xyXG4gICAgICAgIGlmKHQub3B0LnJlbW92ZVBhZGRpbmcpIHQuYWRkQ2xhc3MoXCJKUGFkZGluZ1wiKTtcclxuXHRcdGlmKHQub3B0LmRpc2FibGUpIHJldHVybiBkZXN0cm95KHQpO1x0XHRcdFx0Ly90aGUgdXNlciBpcyBhc2tpbmcgdG8gZGVzdHJveSBhIHByZXZpb3VzbHkgY29sUmVzaXplZCB0YWJsZVxyXG5cdFx0dmFyXHRpZCA9IHQuaWQgPSB0LmF0dHIoSUQpIHx8IFNJR05BVFVSRStjb3VudCsrO1x0Ly9pdHMgaWQgaXMgb2J0YWluZWQsIGlmIG51bGwgbmV3IG9uZSBpcyBnZW5lcmF0ZWRcdFx0XHJcblx0XHR0LnAgPSB0Lm9wdC5wb3N0YmFja1NhZmU7IFx0XHRcdFx0XHRcdFx0Ly9zaG9ydC1jdXQgdG8gZGV0ZWN0IHBvc3RiYWNrIHNhZmUgXHRcdFxyXG5cdFx0aWYoIXQuaXMoXCJ0YWJsZVwiKSB8fCB0YWJsZXNbaWRdICYmICF0Lm9wdC5wYXJ0aWFsUmVmcmVzaCkgcmV0dXJuOyBcdFx0Ly9pZiB0aGUgb2JqZWN0IGlzIG5vdCBhIHRhYmxlIG9yIGlmIGl0IHdhcyBhbHJlYWR5IHByb2Nlc3NlZCB0aGVuIGl0IGlzIGlnbm9yZWQuXHJcblx0XHRpZiAodC5vcHQuaG92ZXJDdXJzb3IgIT09ICdjb2wtcmVzaXplJykgaC5hcHBlbmQoXCI8c3R5bGUgdHlwZT0ndGV4dC9jc3MnPi5KQ0xSZ3JpcCAuSkNvbFJlc2l6ZXI6aG92ZXJ7Y3Vyc29yOlwiKyB0Lm9wdC5ob3ZlckN1cnNvciArXCIhaW1wb3J0YW50fTwvc3R5bGU+XCIpOyAgLy9pZiBob3ZlckN1cnNvciBoYXMgYmVlbiBzZXQsIGFwcGVuZCB0aGUgc3R5bGVcclxuICAgICAgICB0LmFkZENsYXNzKFNJR05BVFVSRSkuYXR0cihJRCwgaWQpLmJlZm9yZSgnPGRpdiBjbGFzcz1cIkpDTFJncmlwc1wiLz4nKTtcdC8vdGhlIGdyaXBzIGNvbnRhaW5lciBvYmplY3QgaXMgYWRkZWQuIFNpZ25hdHVyZSBjbGFzcyBmb3JjZXMgdGFibGUgcmVuZGVyaW5nIGluIGZpeGVkLWxheW91dCBtb2RlIHRvIHByZXZlbnQgY29sdW1uJ3MgbWluLXdpZHRoXHJcblx0XHR0LmcgPSBbXTsgdC5jID0gW107IHQudyA9IHQud2lkdGgoKTsgdC5nYyA9IHQucHJldigpOyB0LmY9dC5vcHQuZml4ZWQ7XHQvL3QuYyBhbmQgdC5nIGFyZSBhcnJheXMgb2YgY29sdW1ucyBhbmQgZ3JpcHMgcmVzcGVjdGl2ZWx5XHRcdFx0XHRcclxuXHRcdGlmKG9wdGlvbnMubWFyZ2luTGVmdCkgdC5nYy5jc3MoXCJtYXJnaW5MZWZ0XCIsIG9wdGlvbnMubWFyZ2luTGVmdCk7ICBcdC8vaWYgdGhlIHRhYmxlIGNvbnRhaW5zIG1hcmdpbnMsIGl0IG11c3QgYmUgc3BlY2lmaWVkXHJcblx0XHRpZihvcHRpb25zLm1hcmdpblJpZ2h0KSB0LmdjLmNzcyhcIm1hcmdpblJpZ2h0XCIsIG9wdGlvbnMubWFyZ2luUmlnaHQpOyAgXHQvL3NpbmNlIHRoZXJlIGlzIG5vIChkaXJlY3QpIHdheSB0byBvYnRhaW4gbWFyZ2luIHZhbHVlcyBpbiBpdHMgb3JpZ2luYWwgdW5pdHMgKCUsIGVtLCAuLi4pXHJcblx0XHR0LmNzID0gSShpZT8gdGIuY2VsbFNwYWNpbmcgfHwgdGIuY3VycmVudFN0eWxlLmJvcmRlclNwYWNpbmcgOnQuY3NzKCdib3JkZXItc3BhY2luZycpKXx8MjtcdC8vdGFibGUgY2VsbHNwYWNpbmcgKG5vdCBldmVuIGpRdWVyeSBpcyBmdWxseSBjcm9zcy1icm93c2VyKVxyXG5cdFx0dC5iICA9IEkoaWU/IHRiLmJvcmRlciB8fCB0Yi5jdXJyZW50U3R5bGUuYm9yZGVyTGVmdFdpZHRoIDp0LmNzcygnYm9yZGVyLWxlZnQtd2lkdGgnKSl8fDE7XHQvL291dGVyIGJvcmRlciB3aWR0aCAoYWdhaW4gY3Jvc3MtYnJvd3NlciBpc3N1ZXMpXHJcblx0XHQvLyBpZighKHRiLnN0eWxlLndpZHRoIHx8IHRiLndpZHRoKSkgdC53aWR0aCh0LndpZHRoKCkpOyAvL0kgYW0gbm90IGFuIElFIGZhbiBhdCBhbGwsIGJ1dCBpdCBpcyBhIHBpdHkgdGhhdCBvbmx5IElFIGhhcyB0aGUgY3VycmVudFN0eWxlIGF0dHJpYnV0ZSB3b3JraW5nIGFzIGV4cGVjdGVkLiBGb3IgdGhpcyByZWFzb24gSSBjYW4gbm90IGNoZWNrIGVhc2lseSBpZiB0aGUgdGFibGUgaGFzIGFuIGV4cGxpY2l0IHdpZHRoIG9yIGlmIGl0IGlzIHJlbmRlcmVkIGFzIFwiYXV0b1wiXHJcblx0XHR0YWJsZXNbaWRdID0gdDsgXHQvL3RoZSB0YWJsZSBvYmplY3QgaXMgc3RvcmVkIHVzaW5nIGl0cyBpZCBhcyBrZXlcdFxyXG5cdFx0Y3JlYXRlR3JpcHModCk7XHRcdC8vZ3JpcHMgYXJlIGNyZWF0ZWQgXHJcblx0XHJcblx0fTtcclxuXHJcblxyXG5cdC8qKlxyXG5cdCAqIFRoaXMgZnVuY3Rpb24gYWxsb3dzIHRvIHJlbW92ZSBhbnkgZW5oYW5jZW1lbnRzIHBlcmZvcm1lZCBieSB0aGlzIHBsdWdpbiBvbiBhIHByZXZpb3VzbHkgcHJvY2Vzc2VkIHRhYmxlLlxyXG5cdCAqIEBwYXJhbSB7alF1ZXJ5IHJlZn0gdCAtIHRhYmxlIG9iamVjdFxyXG5cdCAqL1xyXG5cdHZhciBkZXN0cm95ID0gZnVuY3Rpb24odCl7XHJcblx0XHR2YXIgaWQ9dC5hdHRyKElEKSwgdD10YWJsZXNbaWRdO1x0XHQvL2l0cyB0YWJsZSBvYmplY3QgaXMgZm91bmRcclxuXHRcdGlmKCF0fHwhdC5pcyhcInRhYmxlXCIpKSByZXR1cm47XHRcdFx0Ly9pZiBub25lLCB0aGVuIGl0IHdhc24ndCBwcm9jZXNzZWRcdCBcclxuXHRcdHQucmVtb3ZlQ2xhc3MoU0lHTkFUVVJFK1wiIFwiK0ZMRVgpLmdjLnJlbW92ZSgpO1x0Ly9jbGFzcyBhbmQgZ3JpcHMgYXJlIHJlbW92ZWRcclxuXHRcdGRlbGV0ZSB0YWJsZXNbaWRdO1x0XHRcdFx0XHRcdC8vY2xlYW4gdXAgZGF0YVxyXG5cdH07XHJcblxyXG5cclxuXHQvKipcclxuXHQgKiBGdW5jdGlvbiB0byBjcmVhdGUgYWxsIHRoZSBncmlwcyBhc3NvY2lhdGVkIHdpdGggdGhlIHRhYmxlIGdpdmVuIGJ5IHBhcmFtZXRlcnMgXHJcblx0ICogQHBhcmFtIHtqUXVlcnkgcmVmfSB0IC0gdGFibGUgb2JqZWN0XHJcblx0ICovXHJcblx0dmFyIGNyZWF0ZUdyaXBzID0gZnVuY3Rpb24odCl7XHRcclxuXHRcclxuICAgICAgICB2YXIgdGggPSB0LmZpbmQoXCI+dGhlYWQ+dHI6Zmlyc3Q+dGgsPnRoZWFkPnRyOmZpcnN0PnRkXCIpOyAvL3RhYmxlIGhlYWRlcnMgYXJlIG9idGFpbmVkXHJcblx0XHRpZighdGgubGVuZ3RoKSB0aCA9IHQuZmluZChcIj50Ym9keT50cjpmaXJzdD50aCw+dHI6Zmlyc3Q+dGgsPnRib2R5PnRyOmZpcnN0PnRkLCA+dHI6Zmlyc3Q+dGRcIik7XHQgLy9idXQgaGVhZGVycyBjYW4gYWxzbyBiZSBpbmNsdWRlZCBpbiBkaWZmZXJlbnQgd2F5c1xyXG5cdFx0dGggPSB0aC5maWx0ZXIoXCI6dmlzaWJsZVwiKTtcdFx0XHRcdFx0Ly9maWx0ZXIgaW52aXNpYmxlIGNvbHVtbnNcclxuXHRcdHQuY2cgPSB0LmZpbmQoXCJjb2xcIik7IFx0XHRcdFx0XHRcdC8vYSB0YWJsZSBjYW4gYWxzbyBjb250YWluIGEgY29sZ3JvdXAgd2l0aCBjb2wgZWxlbWVudHNcdFx0XHJcblx0XHR0LmxuID0gdGgubGVuZ3RoO1x0XHRcdFx0XHRcdFx0Ly90YWJsZSBsZW5ndGggaXMgc3RvcmVkXHRcclxuXHRcdGlmKHQucCAmJiBTICYmIFNbdC5pZF0pbWVtZW50byh0LHRoKTtcdFx0Ly9pZiAncG9zdGJhY2tTYWZlJyBpcyBlbmFibGVkIGFuZCB0aGVyZSBpcyBkYXRhIGZvciB0aGUgY3VycmVudCB0YWJsZSwgaXRzIGNvbG91bW4gbGF5b3V0IGlzIHJlc3RvcmVkXHJcblx0XHR0aC5lYWNoKGZ1bmN0aW9uKGkpe1x0XHRcdFx0XHRcdC8vaXRlcmF0ZSB0aHJvdWdoIHRoZSB0YWJsZSBjb2x1bW4gaGVhZGVyc1x0XHRcdFxyXG5cdFx0XHR2YXIgYyA9ICQodGhpcyk7IFx0XHRcdFx0XHRcdC8vanF1ZXJ5IHdyYXAgZm9yIHRoZSBjdXJyZW50IGNvbHVtblx0XHRcclxuICAgICAgICAgICAgdmFyIGRjID0gdC5kYy5pbmRleE9mKGkpIT0tMTsgICAgICAgICAgIC8vaXMgdGhpcyBhIGRpc2FibGVkIGNvbHVtbj9cclxuXHRcdFx0dmFyIGcgPSAkKHQuZ2MuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiSkNMUmdyaXBcIj48L2Rpdj4nKVswXS5sYXN0Q2hpbGQpOyAvL2FkZCB0aGUgdmlzdWFsIG5vZGUgdG8gYmUgdXNlZCBhcyBncmlwXHJcbiAgICAgICAgICAgIGcuYXBwZW5kKGRjID8gXCJcIjogdC5vcHQuZ3JpcElubmVySHRtbCkuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiJytTSUdOQVRVUkUrJ1wiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICBpZihpID09IHQubG4tMSl7ICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGUgY3VycmVudCBncmlwIGlzIHRoZSBsYXMgb25lIFxyXG4gICAgICAgICAgICAgICAgZy5hZGRDbGFzcyhcIkpDTFJMYXN0R3JpcFwiKTsgICAgICAgICAvL2FkZCBhIGRpZmZlcmVudCBjc3MgY2xhc3MgdG8gc3RseWUgaXQgaW4gYSBkaWZmZXJlbnQgd2F5IGlmIG5lZWRlZFxyXG4gICAgICAgICAgICAgICAgaWYodC5mKSBnLmh0bWwoXCJcIik7ICAgICAgICAgICAgICAgICAvL2lmIHRoZSB0YWJsZSByZXNpemluZyBtb2RlIGlzIHNldCB0byBmaXhlZCwgdGhlIGxhc3QgZ3JpcCBpcyByZW1vdmVkIHNpbmNlIHRhYmxlIHdpdGggY2FuIG5vdCBjaGFuZ2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBnLmJpbmQoJ3RvdWNoc3RhcnQgbW91c2Vkb3duJywgb25HcmlwTW91c2VEb3duKTsgLy9iaW5kIHRoZSBtb3VzZWRvd24gZXZlbnQgdG8gc3RhcnQgZHJhZ2dpbmcgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWRjKXsgXHJcbiAgICAgICAgICAgICAgICAvL2lmIG5vcm1hbCBjb2x1bW4gYmluZCB0aGUgbW91c2Vkb3duIGV2ZW50IHRvIHN0YXJ0IGRyYWdnaW5nLCBpZiBkaXNhYmxlZCB0aGVuIGFwcGx5IGl0cyBjc3MgY2xhc3NcclxuICAgICAgICAgICAgICAgIGcucmVtb3ZlQ2xhc3MoJ0pDTFJkaXNhYmxlZEdyaXAnKS5iaW5kKCd0b3VjaHN0YXJ0IG1vdXNlZG93bicsIG9uR3JpcE1vdXNlRG93bik7ICAgICAgXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgZy5hZGRDbGFzcygnSkNMUmRpc2FibGVkR3JpcCcpOyBcclxuICAgICAgICAgICAgfVxyXG5cclxuXHRcdFx0Zy50ID0gdDsgZy5pID0gaTsgZy5jID0gYztcdGMudyA9Yy53aWR0aCgpO1x0XHQvL3NvbWUgdmFsdWVzIGFyZSBzdG9yZWQgaW4gdGhlIGdyaXAncyBub2RlIGRhdGEgYXMgc2hvcnRjdXRcclxuXHRcdFx0dC5nLnB1c2goZyk7IHQuYy5wdXNoKGMpO1x0XHRcdFx0XHRcdC8vdGhlIGN1cnJlbnQgZ3JpcCBhbmQgY29sdW1uIGFyZSBhZGRlZCB0byBpdHMgdGFibGUgb2JqZWN0XHJcblx0XHRcdGMud2lkdGgoYy53KS5yZW1vdmVBdHRyKFwid2lkdGhcIik7XHRcdFx0XHQvL3RoZSB3aWR0aCBvZiB0aGUgY29sdW1uIGlzIGNvbnZlcnRlZCBpbnRvIHBpeGVsLWJhc2VkIG1lYXN1cmVtZW50c1xyXG5cdFx0XHRnLmRhdGEoU0lHTkFUVVJFLCB7aTppLCB0OnQuYXR0cihJRCksIGxhc3Q6IGkgPT0gdC5sbi0xfSk7XHQgLy9ncmlwIGluZGV4IGFuZCBpdHMgdGFibGUgbmFtZSBhcmUgc3RvcmVkIGluIHRoZSBIVE1MIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0fSk7IFx0XHJcblx0XHR0LmNnLnJlbW92ZUF0dHIoXCJ3aWR0aFwiKTtcdC8vcmVtb3ZlIHRoZSB3aWR0aCBhdHRyaWJ1dGUgZnJvbSBlbGVtZW50cyBpbiB0aGUgY29sZ3JvdXAgXHJcblxyXG5cdFx0dC5maW5kKCd0ZCwgdGgnKS5ub3QodGgpLm5vdCgndGFibGUgdGgsIHRhYmxlIHRkJykuZWFjaChmdW5jdGlvbigpeyAgXHJcblx0XHRcdCQodGhpcykucmVtb3ZlQXR0cignd2lkdGgnKTtcdC8vdGhlIHdpZHRoIGF0dHJpYnV0ZSBpcyByZW1vdmVkIGZyb20gYWxsIHRhYmxlIGNlbGxzIHdoaWNoIGFyZSBub3QgbmVzdGVkIGluIG90aGVyIHRhYmxlcyBhbmQgZG9udCBiZWxvbmcgdG8gdGhlIGhlYWRlclxyXG5cdFx0fSk7XHRcdFxyXG4gICAgICAgIGlmKCF0LmYpe1xyXG4gICAgICAgICAgICB0LnJlbW92ZUF0dHIoJ3dpZHRoJykuYWRkQ2xhc3MoRkxFWCk7IC8vaWYgbm90IGZpeGVkLCBsZXQgdGhlIHRhYmxlIGdyb3cgYXMgbmVlZGVkXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN5bmNHcmlwcyh0KTsgXHRcdFx0XHQvL3RoZSBncmlwcyBhcmUgcG9zaXRpb25lZCBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgdGFibGUgbGF5b3V0XHRcdFx0XHJcbiAgICAgICAgLy90aGVyZSBpcyBhIHNtYWxsIHByb2JsZW0sIHNvbWUgY2VsbHMgaW4gdGhlIHRhYmxlIGNvdWxkIGNvbnRhaW4gZGltZW5zaW9uIHZhbHVlcyBpbnRlcmZlcmluZyB3aXRoIHRoZSBcclxuICAgICAgICAvL3dpZHRoIHZhbHVlIHNldCBieSB0aGlzIHBsdWdpbi4gVGhvc2UgdmFsdWVzIGFyZSByZW1vdmVkXHJcblx0XHRcclxuXHR9O1xyXG5cdFxyXG4gICAgXHJcblx0LyoqXHJcblx0ICogRnVuY3Rpb24gdG8gYWxsb3cgdGhlIHBlcnNpc3RlbmNlIG9mIGNvbHVtbnMgZGltZW5zaW9ucyBhZnRlciBhIGJyb3dzZXIgcG9zdGJhY2suIEl0IGlzIGJhc2VkIGluXHJcblx0ICogdGhlIEhUTUw1IHNlc3Npb25TdG9yYWdlIG9iamVjdCwgd2hpY2ggY2FuIGJlIGVtdWxhdGVkIGZvciBvbGRlciBicm93c2VycyB1c2luZyBzZXNzaW9uc3RvcmFnZS5qc1xyXG5cdCAqIEBwYXJhbSB7alF1ZXJ5IHJlZn0gdCAtIHRhYmxlIG9iamVjdFxyXG5cdCAqIEBwYXJhbSB7alF1ZXJ5IHJlZn0gdGggLSByZWZlcmVuY2UgdG8gdGhlIGZpcnN0IHJvdyBlbGVtZW50cyAob25seSBzZXQgaW4gZGVzZXJpYWxpemF0aW9uKVxyXG5cdCAqL1xyXG5cdHZhciBtZW1lbnRvID0gZnVuY3Rpb24odCwgdGgpeyBcclxuXHRcdHZhciB3LG09MCxpPTAsYXV4ID1bXSx0dztcclxuXHRcdGlmKHRoKXtcdFx0XHRcdFx0XHRcdFx0XHRcdC8vaW4gZGVzZXJpYWxpemF0aW9uIG1vZGUgKGFmdGVyIGEgcG9zdGJhY2spXHJcblx0XHRcdHQuY2cucmVtb3ZlQXR0cihcIndpZHRoXCIpO1xyXG5cdFx0XHRpZih0Lm9wdC5mbHVzaCl7IFNbdC5pZF0gPVwiXCI7IHJldHVybjt9IFx0Ly9pZiBmbHVzaCBpcyBhY3RpdmF0ZWQsIHN0b3JlZCBkYXRhIGlzIHJlbW92ZWRcclxuXHRcdFx0dyA9IFNbdC5pZF0uc3BsaXQoXCI7XCIpO1x0XHRcdFx0XHQvL2NvbHVtbiB3aWR0aHMgaXMgb2J0YWluZWRcclxuXHRcdFx0dHcgPSB3W3QubG4rMV07XHJcbiAgICAgICAgICAgIGlmKCF0LmYgJiYgdHcpe1x0XHRcdFx0XHRcdFx0Ly9pZiBub3QgZml4ZWQgYW5kIHRhYmxlIHdpZHRoIGRhdGEgYXZhaWxhYmxlIGl0cyBzaXplIGlzIHJlc3RvcmVkXHJcbiAgICAgICAgICAgICAgICB0LndpZHRoKHR3Kj0xKTtcclxuICAgICAgICAgICAgICAgIGlmKHQub3B0Lm92ZXJmbG93KSB7XHRcdFx0XHQvL2lmIG92ZXJmb2x3IGZsYWcgaXMgc2V0LCByZXN0b3JlIHRhYmxlIHdpZHRoIGFsc28gYXMgdGFibGUgbWluLXdpZHRoXHJcbiAgICAgICAgICAgICAgICAgICAgdC5jc3MoJ21pbi13aWR0aCcsIHR3ICsgUFgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHQudyA9IHR3O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblx0XHRcdGZvcig7aTx0LmxuO2krKyl7XHRcdFx0XHRcdFx0Ly9mb3IgZWFjaCBjb2x1bW5cclxuXHRcdFx0XHRhdXgucHVzaCgxMDAqd1tpXS93W3QubG5dK1wiJVwiKTsgXHQvL3dpZHRoIGlzIHN0b3JlZCBpbiBhbiBhcnJheSBzaW5jZSBpdCB3aWxsIGJlIHJlcXVpcmVkIGFnYWluIGEgY291cGxlIG9mIGxpbmVzIGFoZWFkXHJcblx0XHRcdFx0dGguZXEoaSkuY3NzKFwid2lkdGhcIiwgYXV4W2ldICk7IFx0Ly9lYWNoIGNvbHVtbiB3aWR0aCBpbiAlIGlzIHJlc3RvcmVkXHJcblx0XHRcdH1cdFx0XHRcclxuXHRcdFx0Zm9yKGk9MDtpPHQubG47aSsrKVxyXG5cdFx0XHRcdHQuY2cuZXEoaSkuY3NzKFwid2lkdGhcIiwgYXV4W2ldKTtcdC8vdGhpcyBjb2RlIGlzIHJlcXVpcmVkIGluIG9yZGVyIHRvIGNyZWF0ZSBhbiBpbmxpbmUgQ1NTIHJ1bGUgd2l0aCBoaWdoZXIgcHJlY2VkZW5jZSB0aGFuIGFuIGV4aXN0aW5nIENTUyBjbGFzcyBpbiB0aGUgXCJjb2xcIiBlbGVtZW50c1xyXG5cdFx0fWVsc2V7XHRcdFx0XHRcdFx0XHQvL2luIHNlcmlhbGl6YXRpb24gbW9kZSAoYWZ0ZXIgcmVzaXppbmcgYSBjb2x1bW4pXHJcblx0XHRcdFNbdC5pZF0gPVwiXCI7XHRcdFx0XHQvL2NsZWFuIHVwIHByZXZpb3VzIGRhdGFcclxuXHRcdFx0Zm9yKDtpIDwgdC5jLmxlbmd0aDsgaSsrKXtcdC8vaXRlcmF0ZSB0aHJvdWdoIGNvbHVtbnNcclxuXHRcdFx0XHR3ID0gdC5jW2ldLndpZHRoKCk7XHRcdC8vd2lkdGggaXMgb2J0YWluZWRcclxuXHRcdFx0XHRTW3QuaWRdICs9IHcrXCI7XCI7XHRcdC8vd2lkdGggaXMgYXBwZW5kZWQgdG8gdGhlIHNlc3Npb25TdG9yYWdlIG9iamVjdCB1c2luZyBJRCBhcyBrZXlcclxuXHRcdFx0XHRtKz13O1x0XHRcdFx0XHQvL2NhcnJpYWdlIGlzIHVwZGF0ZWQgdG8gb2J0YWluIHRoZSBmdWxsIHNpemUgdXNlZCBieSBjb2x1bW5zXHJcblx0XHRcdH1cclxuXHRcdFx0U1t0LmlkXSs9bTtcdFx0XHRcdFx0XHRcdC8vdGhlIGxhc3QgaXRlbSBvZiB0aGUgc2VyaWFsaXplZCBzdHJpbmcgaXMgdGhlIHRhYmxlJ3MgYWN0aXZlIGFyZWEgKHdpZHRoKSwgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vdG8gYmUgYWJsZSB0byBvYnRhaW4gJSB3aWR0aCB2YWx1ZSBvZiBlYWNoIGNvbHVtbnMgd2hpbGUgZGVzZXJpYWxpemluZ1xyXG5cdFx0XHRpZighdC5mKSBTW3QuaWRdICs9IFwiO1wiK3Qud2lkdGgoKTsgXHQvL2lmIG5vdCBmaXhlZCwgdGFibGUgd2lkdGggaXMgc3RvcmVkXHJcblx0XHR9XHRcclxuXHR9O1xyXG5cdFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZ1bmN0aW9uIHRoYXQgcGxhY2VzIGVhY2ggZ3JpcCBpbiB0aGUgY29ycmVjdCBwb3NpdGlvbiBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgdGFibGUgbGF5b3V0XHQgXHJcblx0ICogQHBhcmFtIHtqUXVlcnkgcmVmfSB0IC0gdGFibGUgb2JqZWN0XHJcblx0ICovXHJcblx0dmFyIHN5bmNHcmlwcyA9IGZ1bmN0aW9uICh0KXtcdFxyXG5cdFx0dC5nYy53aWR0aCh0LncpO1x0XHRcdC8vdGhlIGdyaXAncyBjb250YWluZXIgd2lkdGggaXMgdXBkYXRlZFx0XHRcdFx0XHJcblx0XHRmb3IodmFyIGk9MDsgaTx0LmxuOyBpKyspe1x0Ly9mb3IgZWFjaCBjb2x1bW5cclxuXHRcdFx0dmFyIGMgPSB0LmNbaV07IFx0XHRcdFxyXG5cdFx0XHR0LmdbaV0uY3NzKHtcdFx0XHQvL2hlaWdodCBhbmQgcG9zaXRpb24gb2YgdGhlIGdyaXAgaXMgdXBkYXRlZCBhY2NvcmRpbmcgdG8gdGhlIHRhYmxlIGxheW91dFxyXG5cdFx0XHRcdGxlZnQ6IGMub2Zmc2V0KCkubGVmdCAtIHQub2Zmc2V0KCkubGVmdCArIGMub3V0ZXJXaWR0aChmYWxzZSkgKyB0LmNzIC8gMiArIFBYLFxyXG5cdFx0XHRcdGhlaWdodDogdC5vcHQuaGVhZGVyT25seT8gdC5jWzBdLm91dGVySGVpZ2h0KGZhbHNlKSA6IHQub3V0ZXJIZWlnaHQoZmFsc2UpXHRcdFx0XHRcclxuXHRcdFx0fSk7XHRcdFx0XHJcblx0XHR9IFx0XHJcblx0fTtcclxuXHRcclxuXHRcclxuXHRcclxuXHQvKipcclxuXHQqIFRoaXMgZnVuY3Rpb24gdXBkYXRlcyBjb2x1bW4ncyB3aWR0aCBhY2NvcmRpbmcgdG8gdGhlIGhvcml6b250YWwgcG9zaXRpb24gaW5jcmVtZW50IG9mIHRoZSBncmlwIGJlaW5nXHJcblx0KiBkcmFnZ2VkLiBUaGUgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB3aGlsZSBkcmFnZ2luZyBpZiBsaXZlRHJhZ2dpbmcgaXMgZW5hYmxlZCBhbmQgYWxzbyBmcm9tIHRoZSBvbkdyaXBEcmFnT3ZlclxyXG5cdCogZXZlbnQgaGFuZGxlciB0byBzeW5jaHJvbml6ZSBncmlwJ3MgcG9zaXRpb24gd2l0aCB0aGVpciByZWxhdGVkIGNvbHVtbnMuXHJcblx0KiBAcGFyYW0ge2pRdWVyeSByZWZ9IHQgLSB0YWJsZSBvYmplY3RcclxuXHQqIEBwYXJhbSB7bnVtYmVyfSBpIC0gaW5kZXggb2YgdGhlIGdyaXAgYmVpbmcgZHJhZ2dlZFxyXG5cdCogQHBhcmFtIHtib29sfSBpc092ZXIgLSB0byBpZGVudGlmeSB3aGVuIHRoZSBmdW5jdGlvbiBpcyBiZWluZyBjYWxsZWQgZnJvbSB0aGUgb25HcmlwRHJhZ092ZXIgZXZlbnRcdFxyXG5cdCovXHJcblx0dmFyIHN5bmNDb2xzID0gZnVuY3Rpb24odCxpLGlzT3Zlcil7XHJcblx0XHR2YXIgaW5jID0gZHJhZy54LWRyYWcubCwgYyA9IHQuY1tpXSwgYzIgPSB0LmNbaSsxXTsgXHRcdFx0XHJcblx0XHR2YXIgdyA9IGMudyArIGluYztcdHZhciB3Mj0gYzIudy0gaW5jO1x0Ly90aGVpciBuZXcgd2lkdGggaXMgb2J0YWluZWRcdFx0XHRcdFx0XHJcblx0XHRjLndpZHRoKCB3ICsgUFgpO1x0XHRcdFxyXG5cdFx0dC5jZy5lcShpKS53aWR0aCggdyArIFBYKTsgXHJcbiAgICAgICAgaWYodC5mKXsgLy9pZiBmaXhlZCBtb2RlXHJcbiAgICAgICAgICAgIGMyLndpZHRoKHcyICsgUFgpO1xyXG4gICAgICAgICAgICB0LmNnLmVxKGkrMSkud2lkdGgoIHcyICsgUFgpO1xyXG4gICAgICAgIH1lbHNlIGlmKHQub3B0Lm92ZXJmbG93KSB7XHRcdFx0XHQvL2lmIG92ZXJmbG93IGlzIHNldCwgaW5jcmltZW50IG1pbi13aWR0aCB0byBmb3JjZSBvdmVyZmxvd1xyXG4gICAgICAgICAgICB0LmNzcygnbWluLXdpZHRoJywgdC53ICsgaW5jKTtcclxuICAgICAgICB9XHJcblx0XHRpZihpc092ZXIpe1xyXG4gICAgICAgICAgICBjLnc9dzsgXHJcbiAgICAgICAgICAgIGMyLnc9IHQuZiA/IHcyIDogYzIudztcclxuICAgICAgICB9XHJcblx0fTtcclxuXHJcblx0XHJcblx0LyoqXHJcblx0KiBUaGlzIGZ1bmN0aW9uIHVwZGF0ZXMgYWxsIGNvbHVtbnMgd2lkdGggYWNjb3JkaW5nIHRvIGl0cyByZWFsIHdpZHRoLiBJdCBtdXN0IGJlIHRha2VuIGludG8gYWNjb3VudCB0aGF0IHRoZSBcclxuXHQqIHN1bSBvZiBhbGwgY29sdW1ucyBjYW4gZXhjZWVkIHRoZSB0YWJsZSB3aWR0aCBpbiBzb21lIGNhc2VzIChpZiBmaXhlZCBpcyBzZXQgdG8gZmFsc2UgYW5kIHRhYmxlIGhhcyBzb21lIGtpbmQgXHJcblx0KiBvZiBtYXgtd2lkdGgpLlxyXG5cdCogQHBhcmFtIHtqUXVlcnkgcmVmfSB0IC0gdGFibGUgb2JqZWN0XHRcclxuXHQqL1xyXG5cdHZhciBhcHBseUJvdW5kcyA9IGZ1bmN0aW9uKHQpe1xyXG4gICAgICAgIHZhciB3ID0gJC5tYXAodC5jLCBmdW5jdGlvbihjKXtcdFx0XHQvL29idGFpbiByZWFsIHdpZHRoc1xyXG4gICAgICAgICAgICByZXR1cm4gYy53aWR0aCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHQud2lkdGgodC53ID0gdC53aWR0aCgpKS5yZW1vdmVDbGFzcyhGTEVYKTtcdC8vcHJldmVudCB0YWJsZSB3aWR0aCBjaGFuZ2VzXHJcbiAgICAgICAgJC5lYWNoKHQuYywgZnVuY3Rpb24oaSxjKXtcclxuICAgICAgICAgICAgYy53aWR0aCh3W2ldKS53ID0gd1tpXTtcdFx0XHRcdC8vc2V0IGNvbHVtbiB3aWR0aHMgYXBwbHlpbmcgYm91bmRzICh0YWJsZSdzIG1heC13aWR0aClcclxuICAgICAgICB9KTtcclxuXHRcdHQuYWRkQ2xhc3MoRkxFWCk7XHRcdFx0XHRcdFx0Ly9hbGxvdyB0YWJsZSB3aWR0aCBjaGFuZ2VzXHJcblx0fTtcclxuXHRcclxuXHRcclxuXHQvKipcclxuXHQgKiBFdmVudCBoYW5kbGVyIHVzZWQgd2hpbGUgZHJhZ2dpbmcgYSBncmlwLiBJdCBjaGVja3MgaWYgdGhlIG5leHQgZ3JpcCdzIHBvc2l0aW9uIGlzIHZhbGlkIGFuZCB1cGRhdGVzIGl0LiBcclxuXHQgKiBAcGFyYW0ge2V2ZW50fSBlIC0gbW91c2Vtb3ZlIGV2ZW50IGJpbmRlZCB0byB0aGUgd2luZG93IG9iamVjdFxyXG5cdCAqL1xyXG5cdHZhciBvbkdyaXBEcmFnID0gZnVuY3Rpb24oZSl7XHRcclxuXHRcdGlmKCFkcmFnKSByZXR1cm47IFxyXG4gICAgICAgIHZhciB0ID0gZHJhZy50O1x0XHQvL3RhYmxlIG9iamVjdCByZWZlcmVuY2UgXHJcbiAgICAgICAgdmFyIG9lID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXM7XHJcbiAgICAgICAgdmFyIG94ID0gb2UgPyBvZVswXS5wYWdlWCA6IGUucGFnZVg7ICAgIC8vb3JpZ2luYWwgcG9zaXRpb24gKHRvdWNoIG9yIG1vdXNlKVxyXG4gICAgICAgIHZhciB4ID0gIG94IC0gZHJhZy5veCArIGRyYWcubDtcdCAgICAgICAgLy9uZXh0IHBvc2l0aW9uIGFjY29yZGluZyB0byBob3Jpem9udGFsIG1vdXNlIHBvc2l0aW9uIGluY3JlbWVudFxyXG5cdFx0dmFyIG13ID0gdC5vcHQubWluV2lkdGgsIGkgPSBkcmFnLmkgO1x0Ly9jZWxsJ3MgbWluIHdpZHRoXHJcblx0XHR2YXIgbCA9IHQuY3MqMS41ICsgbXcgKyB0LmI7XHJcbiAgICAgICAgdmFyIGxhc3QgPSBpID09IHQubG4tMTsgICAgICAgICAgICAgICAgIFx0XHRcdC8vY2hlY2sgaWYgaXQgaXMgdGhlIGxhc3QgY29sdW1uJ3MgZ3JpcCAodXN1YWxseSBoaWRkZW4pXHJcbiAgICAgICAgdmFyIG1pbiA9IGk/IHQuZ1tpLTFdLnBvc2l0aW9uKCkubGVmdCt0LmNzK213OiBsO1x0Ly9taW4gcG9zaXRpb24gYWNjb3JkaW5nIHRvIHRoZSBjb250aWd1b3VzIGNlbGxzXHJcblx0XHR2YXIgbWF4ID0gdC5mID8gXHQvL2ZpeGVkIG1vZGU/XHJcblx0XHRcdGkgPT0gdC5sbi0xPyBcclxuXHRcdFx0XHR0LnctbDogXHJcblx0XHRcdFx0dC5nW2krMV0ucG9zaXRpb24oKS5sZWZ0LXQuY3MtbXc6XHJcblx0XHRcdEluZmluaXR5OyBcdFx0XHRcdFx0XHRcdFx0Ly9tYXggcG9zaXRpb24gYWNjb3JkaW5nIHRvIHRoZSBjb250aWd1b3VzIGNlbGxzIFxyXG5cdFx0eCA9IE0ubWF4KG1pbiwgTS5taW4obWF4LCB4KSk7XHRcdFx0XHQvL2FwcGx5IGJvdW5kaW5nXHRcdFxyXG5cdFx0ZHJhZy54ID0geDtcdCBkcmFnLmNzcyhcImxlZnRcIiwgIHggKyBQWCk7IFx0Ly9hcHBseSBwb3NpdGlvbiBpbmNyZW1lbnRcdFxyXG4gICAgICAgIGlmKGxhc3Qpe1x0XHRcdFx0XHRcdFx0XHRcdC8vaWYgaXQgaXMgdGhlIGxhc3QgZ3JpcFxyXG4gICAgICAgICAgICB2YXIgYyA9IHQuY1tkcmFnLmldO1x0XHRcdFx0XHQvL3dpZHRoIG9mIHRoZSBsYXN0IGNvbHVtbiBpcyBvYnRhaW5lZFxyXG5cdFx0XHRkcmFnLncgPSBjLncgKyB4LSBkcmFnLmw7ICAgICAgICAgXHJcbiAgICAgICAgfSAgICAgICAgICAgICAgXHJcblx0XHRpZih0Lm9wdC5saXZlRHJhZyl7IFx0XHRcdC8vaWYgbGl2ZURyYWcgaXMgZW5hYmxlZFxyXG5cdFx0XHRpZihsYXN0KXtcclxuXHRcdFx0ICAgIGMud2lkdGgoZHJhZy53KTtcclxuICAgICAgICAgICAgICAgIGlmKCF0LmYgJiYgdC5vcHQub3ZlcmZsb3cpe1x0XHRcdC8vaWYgb3ZlcmZsb3cgaXMgc2V0LCBpbmNyaW1lbnQgbWluLXdpZHRoIHRvIGZvcmNlIG92ZXJmbG93XHJcbiAgICAgICAgICAgICAgICAgICB0LmNzcygnbWluLXdpZHRoJywgdC53ICsgeCAtIGRyYWcubCk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdC53ID0gdC53aWR0aCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRzeW5jQ29scyh0LGkpOyBcdFx0XHQvL2NvbHVtbnMgYXJlIHN5bmNocm9uaXplZFxyXG5cdFx0XHR9XHJcblx0XHRcdHN5bmNHcmlwcyh0KTtcclxuXHRcdFx0dmFyIGNiID0gdC5vcHQub25EcmFnO1x0XHRcdFx0XHRcdFx0Ly9jaGVjayBpZiB0aGVyZSBpcyBhbiBvbkRyYWcgY2FsbGJhY2tcclxuXHRcdFx0aWYgKGNiKSB7IGUuY3VycmVudFRhcmdldCA9IHRbMF07IGNiKGUpOyB9XHRcdC8vaWYgYW55LCBpdCBpcyBmaXJlZFx0XHRcdFxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGZhbHNlOyBcdC8vcHJldmVudCB0ZXh0IHNlbGVjdGlvbiB3aGlsZSBkcmFnZ2luZ1x0XHRcdFx0XHJcblx0fTtcclxuXHRcclxuXHJcblx0LyoqXHJcblx0ICogRXZlbnQgaGFuZGxlciBmaXJlZCB3aGVuIHRoZSBkcmFnZ2luZyBpcyBvdmVyLCB1cGRhdGluZyB0YWJsZSBsYXlvdXRcclxuICAgICAqIEBwYXJhbSB7ZXZlbnR9IGUgLSBncmlwJ3MgZHJhZyBvdmVyIGV2ZW50XHJcblx0ICovXHJcblx0dmFyIG9uR3JpcERyYWdPdmVyID0gZnVuY3Rpb24oZSl7XHRcclxuXHRcdFxyXG5cdFx0ZC51bmJpbmQoJ3RvdWNoZW5kLicrU0lHTkFUVVJFKycgbW91c2V1cC4nK1NJR05BVFVSRSkudW5iaW5kKCd0b3VjaG1vdmUuJytTSUdOQVRVUkUrJyBtb3VzZW1vdmUuJytTSUdOQVRVUkUpO1xyXG5cdFx0JChcImhlYWQgOmxhc3QtY2hpbGRcIikucmVtb3ZlKCk7IFx0XHRcdFx0Ly9yZW1vdmUgdGhlIGRyYWdnaW5nIGN1cnNvciBzdHlsZVx0XHJcblx0XHRpZighZHJhZykgcmV0dXJuO1xyXG5cdFx0ZHJhZy5yZW1vdmVDbGFzcyhkcmFnLnQub3B0LmRyYWdnaW5nQ2xhc3MpO1x0XHQvL3JlbW92ZSB0aGUgZ3JpcCdzIGRyYWdnaW5nIGNzcy1jbGFzc1xyXG4gICAgICAgIGlmICghKGRyYWcueCAtIGRyYWcubCA9PSAwKSkge1xyXG4gICAgICAgICAgICB2YXIgdCA9IGRyYWcudDtcclxuICAgICAgICAgICAgdmFyIGNiID0gdC5vcHQub25SZXNpemU7IFx0ICAgIC8vZ2V0IHNvbWUgdmFsdWVzXHRcclxuICAgICAgICAgICAgdmFyIGkgPSBkcmFnLmk7ICAgICAgICAgICAgICAgICAvL2NvbHVtbiBpbmRleFxyXG4gICAgICAgICAgICB2YXIgbGFzdCA9IGkgPT0gdC5sbi0xOyAgICAgICAgIC8vY2hlY2sgaWYgaXQgaXMgdGhlIGxhc3QgY29sdW1uJ3MgZ3JpcCAodXN1YWxseSBoaWRkZW4pXHJcbiAgICAgICAgICAgIHZhciBjID0gdC5nW2ldLmM7ICAgICAgICAgICAgICAgLy90aGUgY29sdW1uIGJlaW5nIGRyYWdnZWRcclxuICAgICAgICAgICAgaWYobGFzdCl7XHJcbiAgICAgICAgICAgICAgICBjLndpZHRoKGRyYWcudyk7XHJcbiAgICAgICAgICAgICAgICBjLncgPSBkcmFnLnc7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgc3luY0NvbHModCwgaSwgdHJ1ZSk7XHQvL3RoZSBjb2x1bW5zIGFyZSB1cGRhdGVkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoIXQuZikgYXBwbHlCb3VuZHModCk7XHQvL2lmIG5vdCBmaXhlZCBtb2RlLCB0aGVuIGFwcGx5IGJvdW5kcyB0byBvYnRhaW4gcmVhbCB3aWR0aCB2YWx1ZXNcclxuICAgICAgICAgICAgc3luY0dyaXBzKHQpO1x0XHRcdFx0Ly90aGUgZ3JpcHMgYXJlIHVwZGF0ZWRcclxuICAgICAgICAgICAgaWYgKGNiKSB7IGUuY3VycmVudFRhcmdldCA9IHRbMF07IGNiKGUpOyB9XHQvL2lmIHRoZXJlIGlzIGEgY2FsbGJhY2sgZnVuY3Rpb24sIGl0IGlzIGZpcmVkXHJcbiAgICAgICAgICAgIGlmKHQucCAmJiBTKSBtZW1lbnRvKHQpOyBcdC8vaWYgcG9zdGJhY2tTYWZlIGlzIGVuYWJsZWQgYW5kIHRoZXJlIGlzIHNlc3Npb25TdG9yYWdlIHN1cHBvcnQsIHRoZSBuZXcgbGF5b3V0IGlzIHNlcmlhbGl6ZWQgYW5kIHN0b3JlZFxyXG4gICAgICAgIH1cclxuXHRcdGRyYWcgPSBudWxsOyAgIC8vc2luY2UgdGhlIGdyaXAncyBkcmFnZ2luZyBpcyBvdmVyXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0fTtcdFxyXG5cdFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEV2ZW50IGhhbmRsZXIgZmlyZWQgd2hlbiB0aGUgZ3JpcCdzIGRyYWdnaW5nIGlzIGFib3V0IHRvIHN0YXJ0LiBJdHMgbWFpbiBnb2FsIGlzIHRvIHNldCB1cCBldmVudHMgXHJcblx0ICogYW5kIHN0b3JlIHNvbWUgdmFsdWVzIHVzZWQgd2hpbGUgZHJhZ2dpbmcuXHJcbiAgICAgKiBAcGFyYW0ge2V2ZW50fSBlIC0gZ3JpcCdzIG1vdXNlZG93biBldmVudFxyXG5cdCAqL1xyXG5cdHZhciBvbkdyaXBNb3VzZURvd24gPSBmdW5jdGlvbihlKXtcclxuXHRcdHZhciBvID0gJCh0aGlzKS5kYXRhKFNJR05BVFVSRSk7XHRcdFx0Ly9yZXRyaWV2ZSBncmlwJ3MgZGF0YVxyXG5cdFx0dmFyIHQgPSB0YWJsZXNbby50XSwgIGcgPSB0Lmdbby5pXTtcdFx0XHQvL3Nob3J0Y3V0cyBmb3IgdGhlIHRhYmxlIGFuZCBncmlwIG9iamVjdHNcclxuICAgICAgICB2YXIgb2UgPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlczsgICAgICAgICAgIC8vdG91Y2ggb3IgbW91c2UgZXZlbnQ/XHJcbiAgICAgICAgZy5veCA9IG9lPyBvZVswXS5wYWdlWDogZS5wYWdlWDsgICAgICAgICAgICAvL3RoZSBpbml0aWFsIHBvc2l0aW9uIGlzIGtlcHRcclxuXHRcdGcubCA9IGcucG9zaXRpb24oKS5sZWZ0O1xyXG4gICAgICAgIGcueCA9IGcubDtcclxuICAgICAgICBcclxuXHRcdGQuYmluZCgndG91Y2htb3ZlLicrU0lHTkFUVVJFKycgbW91c2Vtb3ZlLicrU0lHTkFUVVJFLCBvbkdyaXBEcmFnICkuYmluZCgndG91Y2hlbmQuJytTSUdOQVRVUkUrJyBtb3VzZXVwLicrU0lHTkFUVVJFLCBvbkdyaXBEcmFnT3Zlcik7XHQvL21vdXNlbW92ZSBhbmQgbW91c2V1cCBldmVudHMgYXJlIGJvdW5kXHJcblx0XHRoLmFwcGVuZChcIjxzdHlsZSB0eXBlPSd0ZXh0L2Nzcyc+KntjdXJzb3I6XCIrIHQub3B0LmRyYWdDdXJzb3IgK1wiIWltcG9ydGFudH08L3N0eWxlPlwiKTsgXHQvL2NoYW5nZSB0aGUgbW91c2UgY3Vyc29yXHJcblx0XHRnLmFkZENsYXNzKHQub3B0LmRyYWdnaW5nQ2xhc3MpOyBcdC8vYWRkIHRoZSBkcmFnZ2luZyBjbGFzcyAodG8gYWxsb3cgc29tZSB2aXN1YWwgZmVlZGJhY2spXHRcdFx0XHRcclxuXHRcdGRyYWcgPSBnO1x0XHRcdFx0XHRcdFx0Ly90aGUgY3VycmVudCBncmlwIGlzIHN0b3JlZCBhcyB0aGUgY3VycmVudCBkcmFnZ2luZyBvYmplY3RcclxuXHRcdGlmKHQuY1tvLmldLmwpIGZvcih2YXIgaT0wLGM7IGk8dC5sbjsgaSsrKXsgYz10LmNbaV07IGMubCA9IGZhbHNlOyBjLnc9IGMud2lkdGgoKTsgfSBcdC8vaWYgdGhlIGNvbHVtIGlzIGxvY2tlZCAoYWZ0ZXIgYnJvd3NlciByZXNpemUpLCB0aGVuIGMudyBtdXN0IGJlIHVwZGF0ZWRcdFx0XHJcblx0XHRyZXR1cm4gZmFsc2U7IFx0Ly9wcmV2ZW50IHRleHQgc2VsZWN0aW9uXHJcblx0fTtcclxuICAgIFxyXG4gICAgXHJcblx0LyoqXHJcblx0ICogRXZlbnQgaGFuZGxlciBmaXJlZCB3aGVuIHRoZSBicm93c2VyIGlzIHJlc2l6ZWQuIFRoZSBtYWluIHB1cnBvc2Ugb2YgdGhpcyBmdW5jdGlvbiBpcyB0byB1cGRhdGVcclxuXHQgKiB0YWJsZSBsYXlvdXQgYWNjb3JkaW5nIHRvIHRoZSBicm93c2VyJ3Mgc2l6ZSBzeW5jaHJvbml6aW5nIHJlbGF0ZWQgZ3JpcHMgXHJcblx0ICovXHJcblx0dmFyIG9uUmVzaXplID0gZnVuY3Rpb24oKXtcclxuXHRcdGZvcih2YXIgdCBpbiB0YWJsZXMpe1xyXG4gICAgICAgICAgICBpZiggdGFibGVzLmhhc093blByb3BlcnR5KCB0ICkgKSB7XHJcbiAgICAgICAgICAgICAgICB0ID0gdGFibGVzW3RdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGksIG13PTA7XHJcbiAgICAgICAgICAgICAgICB0LnJlbW92ZUNsYXNzKFNJR05BVFVSRSk7ICAgLy9maXJlZm94IGRvZXNuJ3QgbGlrZSBsYXlvdXQtZml4ZWQgaW4gc29tZSBjYXNlc1xyXG4gICAgICAgICAgICAgICAgaWYgKHQuZikgeyAgICAgICAgICAgICAgICAgIC8vaW4gZml4ZWQgbW9kZVxyXG4gICAgICAgICAgICAgICAgICAgIHQudyA9IHQud2lkdGgoKTsgICAgICAgIC8vaXRzIG5ldyB3aWR0aCBpcyBrZXB0XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGk9MDsgaTx0LmxuOyBpKyspIG13Kz0gdC5jW2ldLnc7XHRcdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vY2VsbCByZW5kZXJpbmcgaXMgbm90IGFzIHRyaXZpYWwgYXMgaXQgbWlnaHQgc2VlbSwgYW5kIGl0IGlzIHNsaWdodGx5IGRpZmZlcmVudCBmb3JcclxuICAgICAgICAgICAgICAgICAgICAvL2VhY2ggYnJvd3Nlci4gSW4gdGhlIGJlZ2lubmluZyBpIGhhZCBhIGJpZyBzd2l0Y2ggZm9yIGVhY2ggYnJvd3NlciwgYnV0IHNpbmNlIHRoZSBjb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgLy93YXMgZXh0cmVtZWx5IHVnbHkgbm93IEkgdXNlIGEgZGlmZmVyZW50IGFwcHJvYWNoIHdpdGggc2V2ZXJhbCByZS1mbG93cy4gVGhpcyB3b3JrcyBcclxuICAgICAgICAgICAgICAgICAgICAvL3ByZXR0eSB3ZWxsIGJ1dCBpdCdzIGEgYml0IHNsb3dlci4gRm9yIG5vdywgbGV0cyBrZWVwIHRoaW5ncyBzaW1wbGUuLi4gICBcclxuICAgICAgICAgICAgICAgICAgICBmb3IoaT0wOyBpPHQubG47IGkrKykgdC5jW2ldLmNzcyhcIndpZHRoXCIsIE0ucm91bmQoMTAwMCp0LmNbaV0udy9tdykvMTAgKyBcIiVcIikubD10cnVlOyBcclxuICAgICAgICAgICAgICAgICAgICAvL2MubCBsb2NrcyB0aGUgY29sdW1uLCB0ZWxsaW5nIHVzIHRoYXQgaXRzIGMudyBpcyBvdXRkYXRlZFx0XHRcdFx0XHRcdFx0XHRcdFxyXG4gICAgICAgICAgICAgICAgfWVsc2V7ICAgICAvL2luIG5vbiBmaXhlZC1zaXplZCB0YWJsZXNcclxuICAgICAgICAgICAgICAgICAgICBhcHBseUJvdW5kcyh0KTsgICAgICAgICAvL2FwcGx5IHRoZSBuZXcgYm91bmRzIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHQubW9kZSA9PSAnZmxleCcgJiYgdC5wICYmIFMpeyAgIC8vaWYgcG9zdGJhY2tTYWZlIGlzIGVuYWJsZWQgYW5kIHRoZXJlIGlzIHNlc3Npb25TdG9yYWdlIHN1cHBvcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWVudG8odCk7ICAgICAgICAgICAgICAgICAgICAgLy90aGUgbmV3IGxheW91dCBpcyBzZXJpYWxpemVkIGFuZCBzdG9yZWQgZm9yICdmbGV4JyB0YWJsZXNcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzeW5jR3JpcHModC5hZGRDbGFzcyhTSUdOQVRVUkUpKTtcclxuICAgICAgICAgICAgfVxyXG5cdFx0fSBcclxuXHRcdFxyXG5cdH07XHRcdFxyXG5cclxuXHJcblx0Ly9iaW5kIHJlc2l6ZSBldmVudCwgdG8gdXBkYXRlIGdyaXBzIHBvc2l0aW9uIFxyXG5cdCQod2luZG93KS5iaW5kKCdyZXNpemUuJytTSUdOQVRVUkUsIG9uUmVzaXplKTsgXHJcblxyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgcGx1Z2luIGlzIGFkZGVkIHRvIHRoZSBqUXVlcnkgbGlicmFyeVxyXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gIGFuIG9iamVjdCB0aGF0IGhvbGRzIHNvbWUgYmFzaWMgY3VzdG9taXphdGlvbiB2YWx1ZXMgXHJcblx0ICovXHJcbiAgICAkLmZuLmV4dGVuZCh7ICBcclxuICAgICAgICBjb2xSZXNpemFibGU6IGZ1bmN0aW9uKG9wdGlvbnMpIHsgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XHJcblx0XHRcdFxyXG5cdFx0XHRcdC8vYXR0cmlidXRlczpcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmVzaXplTW9kZTogJ2ZpdCcsICAgICAgICAgICAgICAgICAgICAvL21vZGUgY2FuIGJlICdmaXQnLCAnZmxleCcgb3IgJ292ZXJmbG93J1xyXG4gICAgICAgICAgICAgICAgZHJhZ2dpbmdDbGFzczogJ0pDTFJncmlwRHJhZycsXHQvL2Nzcy1jbGFzcyB1c2VkIHdoZW4gYSBncmlwIGlzIGJlaW5nIGRyYWdnZWQgKGZvciB2aXN1YWwgZmVlZGJhY2sgcHVycG9zZXMpXHJcblx0XHRcdFx0Z3JpcElubmVySHRtbDogJycsXHRcdFx0XHQvL2lmIGl0IGlzIHJlcXVpcmVkIHRvIHVzZSBhIGN1c3RvbSBncmlwIGl0IGNhbiBiZSBkb25lIHVzaW5nIHNvbWUgY3VzdG9tIEhUTUxcdFx0XHRcdFxyXG5cdFx0XHRcdGxpdmVEcmFnOiBmYWxzZSxcdFx0XHRcdC8vZW5hYmxlcyB0YWJsZS1sYXlvdXQgdXBkYXRpbmcgd2hpbGUgZHJhZ2dpbmdcdFxyXG5cdFx0XHRcdG1pbldpZHRoOiAxNSwgXHRcdFx0XHRcdC8vbWluaW11bSB3aWR0aCB2YWx1ZSBpbiBwaXhlbHMgYWxsb3dlZCBmb3IgYSBjb2x1bW4gXHJcblx0XHRcdFx0aGVhZGVyT25seTogZmFsc2UsXHRcdFx0XHQvL3NwZWNpZmllcyB0aGF0IHRoZSBzaXplIG9mIHRoZSB0aGUgY29sdW1uIHJlc2l6aW5nIGFuY2hvcnMgd2lsbCBiZSBib3VuZGVkIHRvIHRoZSBzaXplIG9mIHRoZSBmaXJzdCByb3cgXHJcblx0XHRcdFx0aG92ZXJDdXJzb3I6IFwiY29sLXJlc2l6ZVwiLCAgXHRcdC8vY3Vyc29yIHRvIGJlIHVzZWQgb24gZ3JpcCBob3ZlclxyXG5cdFx0XHRcdGRyYWdDdXJzb3I6IFwiY29sLXJlc2l6ZVwiLCAgXHRcdC8vY3Vyc29yIHRvIGJlIHVzZWQgd2hpbGUgZHJhZ2dpbmdcclxuXHRcdFx0XHRwb3N0YmFja1NhZmU6IGZhbHNlLCBcdFx0XHQvL3doZW4gaXQgaXMgZW5hYmxlZCwgdGFibGUgbGF5b3V0IGNhbiBwZXJzaXN0IGFmdGVyIHBvc3RiYWNrIG9yIHBhZ2UgcmVmcmVzaC4gSXQgcmVxdWlyZXMgYnJvd3NlcnMgd2l0aCBzZXNzaW9uU3RvcmFnZSBzdXBwb3J0IChpdCBjYW4gYmUgZW11bGF0ZWQgd2l0aCBzZXNzaW9uU3RvcmFnZS5qcykuIFxyXG5cdFx0XHRcdGZsdXNoOiBmYWxzZSwgXHRcdFx0XHRcdC8vd2hlbiBwb3N0YmFrU2FmZSBpcyBlbmFibGVkLCBhbmQgaXQgaXMgcmVxdWlyZWQgdG8gcHJldmVudCBsYXlvdXQgcmVzdG9yYXRpb24gYWZ0ZXIgcG9zdGJhY2ssICdmbHVzaCcgd2lsbCByZW1vdmUgaXRzIGFzc29jaWF0ZWQgbGF5b3V0IGRhdGEgXHJcblx0XHRcdFx0bWFyZ2luTGVmdDogbnVsbCxcdFx0XHRcdC8vaW4gY2FzZSB0aGUgdGFibGUgY29udGFpbnMgYW55IG1hcmdpbnMsIGNvbFJlc2l6YWJsZSBuZWVkcyB0byBrbm93IHRoZSB2YWx1ZXMgdXNlZCwgZS5nLiBcIjEwJVwiLCBcIjE1ZW1cIiwgXCI1cHhcIiAuLi5cclxuXHRcdFx0XHRtYXJnaW5SaWdodDogbnVsbCwgXHRcdFx0XHQvL2luIGNhc2UgdGhlIHRhYmxlIGNvbnRhaW5zIGFueSBtYXJnaW5zLCBjb2xSZXNpemFibGUgbmVlZHMgdG8ga25vdyB0aGUgdmFsdWVzIHVzZWQsIGUuZy4gXCIxMCVcIiwgXCIxNWVtXCIsIFwiNXB4XCIgLi4uXHJcblx0XHRcdFx0ZGlzYWJsZTogZmFsc2UsXHRcdFx0XHRcdC8vZGlzYWJsZXMgYWxsIHRoZSBlbmhhbmNlbWVudHMgcGVyZm9ybWVkIGluIGEgcHJldmlvdXNseSBjb2xSZXNpemVkIHRhYmxlXHRcclxuXHRcdFx0XHRwYXJ0aWFsUmVmcmVzaDogZmFsc2UsXHRcdFx0Ly9jYW4gYmUgdXNlZCBpbiBjb21iaW5hdGlvbiB3aXRoIHBvc3RiYWNrU2FmZSB3aGVuIHRoZSB0YWJsZSBpcyBpbnNpZGUgb2YgYW4gdXBkYXRlUGFuZWwsXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZENvbHVtbnM6IFtdLCAgICAgICAgICAgIC8vY29sdW1uIGluZGV4ZXMgdG8gYmUgZXhjbHVkZWRcclxuICAgICAgICAgICAgICAgIHJlbW92ZVBhZGRpbmc6IHRydWUsICAgICAgICAgICAvL2ZvciBzb21lIHVzZXMgKHN1Y2ggYXMgbXVsdGlwbGUgcmFuZ2Ugc2xpZGVyKSwgaXQgaXMgYWR2aXNlZCB0byBzZXQgdGhpcyBtb2RpZmllciB0byB0cnVlLCBpdCB3aWxsIHJlbW92ZSBwYWRkaW5nIGZyb20gdGhlIGhlYWRlciBjZWxscy5cclxuXHJcblx0XHRcdFx0Ly9ldmVudHM6XHJcblx0XHRcdFx0b25EcmFnOiBudWxsLCBcdFx0XHRcdFx0Ly9jYWxsYmFjayBmdW5jdGlvbiB0byBiZSBmaXJlZCBkdXJpbmcgdGhlIGNvbHVtbiByZXNpemluZyBwcm9jZXNzIGlmIGxpdmVEcmFnIGlzIGVuYWJsZWRcclxuXHRcdFx0XHRvblJlc2l6ZTogbnVsbFx0XHRcdFx0XHQvL2NhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gdGhlIGRyYWdnaW5nIHByb2Nlc3MgaXMgb3ZlclxyXG4gICAgICAgICAgICB9XHRcdFx0XHJcblx0XHRcdHZhciBvcHRpb25zID0gICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcdFx0XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL3NpbmNlIG5vdyB0aGVyZSBhcmUgMyBkaWZmZXJlbnQgd2F5cyBvZiByZXNpemluZyBjb2x1bW5zLCBJIGNoYW5nZWQgdGhlIGV4dGVybmFsIGludGVyZmFjZSB0byBtYWtlIGl0IGNsZWFyXHJcbiAgICAgICAgICAgIC8vY2FsbGluZyBpdCAncmVzaXplTW9kZScgYnV0IGFsc28gdG8gcmVtb3ZlIHRoZSBcImZpeGVkXCIgYXR0cmlidXRlIHdoaWNoIHdhcyBjb25mdXNpbmcgZm9yIG1hbnkgcGVvcGxlXHJcbiAgICAgICAgICAgIG9wdGlvbnMuZml4ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBvcHRpb25zLm92ZXJmbG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHN3aXRjaChvcHRpb25zLnJlc2l6ZU1vZGUpe1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnZmxleCc6IG9wdGlvbnMuZml4ZWQgPSBmYWxzZTsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdvdmVyZmxvdyc6IG9wdGlvbnMuZml4ZWQgPSBmYWxzZTsgb3B0aW9ucy5vdmVyZmxvdyA9IHRydWU7IGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1x0XHRcdFx0XHJcbiAgICAgICAgICAgICBcdGluaXQoIHRoaXMsIG9wdGlvbnMpOyAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pKGpRdWVyeSk7XHJcblxyXG4iLCJ2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vZGlhbG9nLmNzc1wiKTtcblxuaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG59XG5cbnZhciBvcHRpb25zID0ge31cblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYgKGNvbnRlbnQubG9jYWxzKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG59XG4iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKShmYWxzZSk7XG4vLyBJbXBvcnRzXG52YXIgZ2V0VXJsID0gcmVxdWlyZShcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanNcIik7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfX18wX19fID0gZ2V0VXJsKHJlcXVpcmUoXCIuLi9mb250cy9Sb2JvdG8tUmVndWxhci50dGZcIikpO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX19fMV9fXyA9IGdldFVybChyZXF1aXJlKFwiLi4vaW1hZ2VzL2ljb24vaWNvbl92a2V5Ym9hcmQucG5nXCIpKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9fXzJfX18gPSBnZXRVcmwocmVxdWlyZShcIi4uL2ltYWdlcy9pY29uL2ljb24tZG93bi5wbmdcIikpO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX19fM19fXyA9IGdldFVybChyZXF1aXJlKFwiLi4vaW1hZ2VzL2ljb24vaWNvbl92a2V5Ym9hcmRfYWN0aXZlLnBuZ1wiKSk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfX180X19fID0gZ2V0VXJsKHJlcXVpcmUoXCIuLi9pbWFnZXMvaWNvbi9pY29uLWNlcnQucG5nXCIpKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9fXzVfX18gPSBnZXRVcmwocmVxdWlyZShcIi4uL2ltYWdlcy9pY29uL2ljb24tcXVlc3Rpb24ucG5nXCIpKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9fXzZfX18gPSBnZXRVcmwocmVxdWlyZShcIi4uL2ltYWdlcy9pY29uL2ljb24tZmFxLnBuZ1wiKSk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfX183X19fID0gZ2V0VXJsKHJlcXVpcmUoXCIuLi9pbWFnZXMvaWNvbi9pY29uLWZpbmQtY2VydC5wbmdcIikpO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX19fOF9fXyA9IGdldFVybChyZXF1aXJlKFwiLi4vaW1hZ2VzL2ljb24vaWNvbi1jbG9zZS5wbmdcIikpO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX19fOV9fXyA9IGdldFVybChyZXF1aXJlKFwiLi4vaW1hZ2VzL2ljb24vaWNvbi1icm93c2VyLnBuZ1wiKSk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfX18xMF9fXyA9IGdldFVybChyZXF1aXJlKFwiLi4vaW1hZ2VzL2ljb24vaWNvbi1kcm9wem9uZS5wbmdcIikpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKiBjeXJpbGxpYy1leHQgKi9cXHJcXG5cXHJcXG5AZm9udC1mYWNlIHtcXHJcXG4gICAgZm9udC1mYW1pbHk6ICdSb2JvdG8nO1xcclxcbiAgICBmb250LXN0eWxlOiBub3JtYWw7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiA0MDA7XFxyXFxuICAgIHNyYzogdXJsKFwiICsgX19fQ1NTX0xPQURFUl9VUkxfX18wX19fICsgXCIpIGZvcm1hdCgndHJ1ZXR5cGUnKTtcXHJcXG4gICAgdW5pY29kZS1yYW5nZTogVSswMDAwLTAwN0Y7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIge1xcclxcbiAgICAtLWJsdWU6ICMwMDdiZmY7XFxyXFxuICAgIC0taW5kaWdvOiAjNjYxMGYyO1xcclxcbiAgICAtLXB1cnBsZTogIzZmNDJjMTtcXHJcXG4gICAgLS1waW5rOiAjZTgzZThjO1xcclxcbiAgICAtLXJlZDogI2RjMzU0NTtcXHJcXG4gICAgLS1vcmFuZ2U6ICNmZDdlMTQ7XFxyXFxuICAgIC0teWVsbG93OiAjZmZjMTA3O1xcclxcbiAgICAtLWdyZWVuOiAjMjhhNzQ1O1xcclxcbiAgICAtLXRlYWw6ICMyMGM5OTc7XFxyXFxuICAgIC0tY3lhbjogIzE3YTJiODtcXHJcXG4gICAgLS13aGl0ZTogI2ZmZjtcXHJcXG4gICAgLS1ncmF5OiAjNmM3NTdkO1xcclxcbiAgICAtLWdyYXktZGFyazogIzM0M2E0MDtcXHJcXG4gICAgLS1wcmltYXJ5OiAjMDA3YmZmO1xcclxcbiAgICAtLXNlY29uZGFyeTogIzZjNzU3ZDtcXHJcXG4gICAgLS1zdWNjZXNzOiAjMjhhNzQ1O1xcclxcbiAgICAtLWluZm86ICMxN2EyYjg7XFxyXFxuICAgIC0td2FybmluZzogI2ZmYzEwNztcXHJcXG4gICAgLS1kYW5nZXI6ICNkYzM1NDU7XFxyXFxuICAgIC0tbGlnaHQ6ICNmOGY5ZmE7XFxyXFxuICAgIC0tZGFyazogIzM0M2E0MDtcXHJcXG4gICAgLS1icmVha3BvaW50LXhzOiAwO1xcclxcbiAgICAtLWJyZWFrcG9pbnQtc206IDU3NnB4O1xcclxcbiAgICAtLWJyZWFrcG9pbnQtbWQ6IDc2OHB4O1xcclxcbiAgICAtLWJyZWFrcG9pbnQtbGc6IDk5MnB4O1xcclxcbiAgICAtLWJyZWFrcG9pbnQteGw6IDEyMDBweDtcXHJcXG4gICAgcG9zaXRpb246IGZpeGVkO1xcclxcbiAgICBsZWZ0OiAwO1xcclxcbiAgICB0b3A6IDA7XFxyXFxuICAgIHdpZHRoOiAxMDAlO1xcclxcbiAgICBoZWlnaHQ6IDEwMCU7XFxyXFxuICAgIGZvbnQtc2l6ZTogMTJweDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDE7XFxyXFxuICAgIGNvbG9yOiBibGFjaztcXHJcXG4gICAgei1pbmRleDogOTk5ODtcXHJcXG4gICAgZm9udC1mYW1pbHk6ICdSb2JvdG8nLCBzYW5zLXNlcmlmO1xcclxcbiAgICBsZXR0ZXItc3BhY2luZzogMHB4O1xcclxcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNSk7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgKixcXHJcXG4jc2VjdWtpdC13cmFwcGVyICo6OmJlZm9yZSxcXHJcXG4jc2VjdWtpdC13cmFwcGVyICo6OmFmdGVyIHtcXHJcXG4gICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xcclxcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyIGhyIHtcXHJcXG4gICAgYm94LXNpemluZzogY29udGVudC1ib3g7XFxyXFxuICAgIGhlaWdodDogMDtcXHJcXG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XFxyXFxuICAgIHZpc2liaWxpdHk6IHZpc2libGU7XFxyXFxuICAgIHdpZHRoOiBpbmhlcml0O1xcclxcbiAgICBoZWlnaHQ6IDA7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgaDEsXFxyXFxuI3NlY3VraXQtd3JhcHBlciBoMixcXHJcXG4jc2VjdWtpdC13cmFwcGVyIGgzLFxcclxcbiNzZWN1a2l0LXdyYXBwZXIgaDQsXFxyXFxuI3NlY3VraXQtd3JhcHBlciBoNSxcXHJcXG4jc2VjdWtpdC13cmFwcGVyIGg2IHtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcXHJcXG4gICAgbWFyZ2luLXRvcDogMDtcXHJcXG4gICAgbWFyZ2luLWJvdHRvbTogMC44M2VtO1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyIHAge1xcclxcbiAgICBtYXJnaW4tdG9wOiAwO1xcclxcbiAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyIGE6aG92ZXIge1xcclxcbiAgICBjb2xvcjogIzAwNTZiMyAhaW1wb3J0YW50O1xcclxcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgYTpub3QoW2hyZWZdKTpub3QoW3RhYmluZGV4XSkge1xcclxcbiAgICBjb2xvcjogaW5oZXJpdDtcXHJcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyIGE6bm90KFtocmVmXSk6bm90KFt0YWJpbmRleF0pOmhvdmVyLFxcclxcbmE6bm90KFtocmVmXSk6bm90KFt0YWJpbmRleF0pOmZvY3VzIHtcXHJcXG4gICAgY29sb3I6IGluaGVyaXQ7XFxyXFxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlciBhOm5vdChbaHJlZl0pOm5vdChbdGFiaW5kZXhdKTpmb2N1cyB7XFxyXFxuICAgIG91dGxpbmU6IDA7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgdGFibGUge1xcclxcbiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyIHRoIHtcXHJcXG4gICAgdGV4dC1hbGlnbjogaW5oZXJpdC1jZW50ZXI7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgbGFiZWwge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlciBidXR0b246Zm9jdXMge1xcclxcbiAgICBvdXRsaW5lOiAxcHggZG90dGVkO1xcclxcbiAgICBvdXRsaW5lOiA1cHggYXV0byAtd2Via2l0LWZvY3VzLXJpbmctY29sb3I7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgaW5wdXQsXFxyXFxuI3NlY3VraXQtd3JhcHBlciBidXR0b24sXFxyXFxuI3NlY3VraXQtd3JhcHBlciBzZWxlY3QsXFxyXFxuI3NlY3VraXQtd3JhcHBlciBvcHRncm91cCxcXHJcXG4jc2VjdWtpdC13cmFwcGVyIHRleHRhcmVhIHtcXHJcXG4gICAgbWFyZ2luOiAwO1xcclxcbiAgICBmb250LWZhbWlseTogaW5oZXJpdDtcXHJcXG4gICAgZm9udC1zaXplOiBpbmhlcml0O1xcclxcbiAgICBsaW5lLWhlaWdodDogaW5oZXJpdDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlciBidXR0b24sXFxyXFxuI3NlY3VraXQtd3JhcHBlciBpbnB1dCB7XFxyXFxuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyIGJ1dHRvbixcXHJcXG4jc2VjdWtpdC13cmFwcGVyIHNlbGVjdCB7XFxyXFxuICAgIHRleHQtdHJhbnNmb3JtOiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyIHNlbGVjdCB7XFxyXFxuICAgIHdvcmQtd3JhcDogbm9ybWFsO1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyIGJ1dHRvbixcXHJcXG5bdHlwZT1cXFwiYnV0dG9uXFxcIl0sXFxyXFxuW3R5cGU9XFxcInJlc2V0XFxcIl0sXFxyXFxuW3R5cGU9XFxcInN1Ym1pdFxcXCJdIHtcXHJcXG4gICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBidXR0b247XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgYnV0dG9uOm5vdCg6ZGlzYWJsZWQpLFxcclxcblt0eXBlPVxcXCJidXR0b25cXFwiXTpub3QoOmRpc2FibGVkKSxcXHJcXG5bdHlwZT1cXFwicmVzZXRcXFwiXTpub3QoOmRpc2FibGVkKSxcXHJcXG5bdHlwZT1cXFwic3VibWl0XFxcIl06bm90KDpkaXNhYmxlZCkge1xcclxcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgYnV0dG9uOjotbW96LWZvY3VzLWlubmVyLFxcclxcblt0eXBlPVxcXCJidXR0b25cXFwiXTo6LW1vei1mb2N1cy1pbm5lcixcXHJcXG5bdHlwZT1cXFwicmVzZXRcXFwiXTo6LW1vei1mb2N1cy1pbm5lcixcXHJcXG5bdHlwZT1cXFwic3VibWl0XFxcIl06Oi1tb3otZm9jdXMtaW5uZXIge1xcclxcbiAgICBwYWRkaW5nOiAwO1xcclxcbiAgICBib3JkZXItc3R5bGU6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyB7XFxyXFxuICAgIHBvc2l0aW9uOiBmaXhlZDtcXHJcXG4gICAgdG9wOiA0MCU7XFxyXFxuICAgIGxlZnQ6IDUwJTtcXHJcXG4gICAgei1pbmRleDogOTk5OTtcXHJcXG4gICAgZGlzcGxheTogLW1zLWZsZXhib3g7XFxyXFxuICAgIGRpc3BsYXk6IGZsZXg7XFxyXFxuICAgIC1tcy1mbGV4LXdyYXA6IHdyYXA7XFxyXFxuICAgIGZsZXgtd3JhcDogd3JhcDtcXHJcXG4gICAgbWFyZ2luLXRvcDogLTI4MHB4O1xcclxcbiAgICBtYXJnaW4tcmlnaHQ6IC0xNXB4O1xcclxcbiAgICBtYXJnaW4tbGVmdDogLTIzMHB4O1xcclxcbn1cXHJcXG5cXHJcXG5cXHJcXG4vKiBTZWxlY3QgQ2VydGlmaWNhdGUgKi9cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLnNlbGVjdC1jZXJ0aWZpY2F0ZS13cmFwcGVyIHtcXHJcXG4gICAgd2lkdGg6IDQ2MHB4O1xcclxcbiAgICBoZWlnaHQ6IDU2MHB4O1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjdGN0Y4O1xcclxcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XFxyXFxuICAgIGJveC1zaGFkb3c6IDAgMCAxcHggIzExMTExMTtcXHJcXG59XFxyXFxuXFxyXFxuLnNlY3VraXQtZGlhbG9nIC5zZWxlY3QtY2VydGlmaWNhdGUtd3JhcHBlciAuc2VsZWN0LWNlcnRpZmljYXRlLWhlYWRlciB7XFxyXFxuICAgIGhlaWdodDogNTBweDtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzI2NmFiNztcXHJcXG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNHB4O1xcclxcbiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLnNlbGVjdC1jZXJ0aWZpY2F0ZS13cmFwcGVyIC5zZWxlY3QtY2VydGlmaWNhdGUtaGVhZGVyIGgxIHtcXHJcXG4gICAgcGFkZGluZy10b3A6IDE3cHg7XFxyXFxuICAgIHBhZGRpbmctbGVmdDogNDBweDtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IDUwMCAhaW1wb3J0YW50O1xcclxcbiAgICBtYXJnaW4tdG9wOiAwO1xcclxcbiAgICBmb250LXNpemU6IDE2cHg7XFxyXFxuICAgIGNvbG9yOiB3aGl0ZTtcXHJcXG59XFxyXFxuXFxyXFxuLnNlY3VraXQtZGlhbG9nIC5zZWxlY3QtY2VydGlmaWNhdGUtd3JhcHBlciAuYmFubmVyLXdyYXBwZXIge1xcclxcbiAgICBoZWlnaHQ6IDEwMHB4O1xcclxcbiAgICBtYXJnaW4tYm90dG9tOiAzNnB4O1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzMzMzO1xcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLnNlbGVjdC1jZXJ0aWZpY2F0ZS13cmFwcGVyIC5jb250ZW50LXdyYXBwZXIge1xcclxcbiAgICBwYWRkaW5nOiAwIDQwcHg7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuc2VsZWN0LWNlcnRpZmljYXRlLXdyYXBwZXIgLmNvbnRlbnQtd3JhcHBlciAua2ljYS1idXR0b24ge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXHJcXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzQwNkJCMjtcXHJcXG4gICAgcGFkZGluZzogN3B4IDlweCA3cHggM3B4O1xcclxcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XFxyXFxuICAgIGZsb2F0OiByaWdodDtcXHJcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBibGluaztcXHJcXG59XFxyXFxuXFxyXFxuLnNlY3VraXQtZGlhbG9nIC5zZWxlY3QtY2VydGlmaWNhdGUtd3JhcHBlciAuY29udGVudC13cmFwcGVyIC5raWNhLWJ1dHRvbiBpIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcclxcbiAgICBtYXJnaW46IDAgNnB4O1xcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLnNlbGVjdC1jZXJ0aWZpY2F0ZS13cmFwcGVyIC5jb250ZW50LXdyYXBwZXIgLmtpY2EtYnV0dG9uIHNwYW4ge1xcclxcbiAgICBsaW5lLWhlaWdodDogMjBweDtcXHJcXG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXHJcXG4gICAgbGV0dGVyLXNwYWNpbmc6IC0wLjI1cHg7XFxyXFxuICAgIGNvbG9yOiAjMjIyMjIyO1xcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLnNlbGVjdC1jZXJ0aWZpY2F0ZS13cmFwcGVyIC5jb250ZW50LXdyYXBwZXIgaDIge1xcclxcbiAgICBmb250LXNpemU6IDE0cHg7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcclxcbiAgICBsZXR0ZXItc3BhY2luZzogLTAuMjVweDtcXHJcXG4gICAgY29sb3I6ICMzMzMzMzM7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuc2VsZWN0LWNlcnRpZmljYXRlLXdyYXBwZXIgLmNvbnRlbnQtd3JhcHBlciAuY2VydC1saXN0LWxhYmVsIHtcXHJcXG4gICAgcGFkZGluZy10b3A6IDI4cHg7XFxyXFxuICAgIGxldHRlci1zcGFjaW5nOiAtMC40cHg7XFxyXFxuICAgIG1hcmdpbi10b3A6IDExLjYyMHB4O1xcclxcbiAgICBtYXJnaW4tYm90dG9tOiAxMS42MjBweDtcXHJcXG59XFxyXFxuXFxyXFxuLnNlY3VraXQtZGlhbG9nIC5zZWxlY3QtY2VydGlmaWNhdGUtd3JhcHBlciAuY29udGVudC13cmFwcGVyIC5jZXJ0LXBhc3N3b3JkLWxhYmVsIHtcXHJcXG4gICAgbWFyZ2luLXRvcDogNjhweCAhaW1wb3J0YW50O1xcclxcbiAgICBsZXR0ZXItc3BhY2luZzogLTAuMjVweDtcXHJcXG59XFxyXFxuXFxyXFxuLnNlY3VraXQtZGlhbG9nIC5zZWxlY3QtY2VydGlmaWNhdGUtd3JhcHBlciAuY29udGVudC13cmFwcGVyIC5jZXJ0LWxpc3Qge1xcclxcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjNDA2QkIyO1xcclxcbiAgICBib3JkZXItcmFkaXVzOiAycHg7XFxyXFxuICAgIGhlaWdodDogMTAwcHg7XFxyXFxuICAgIG92ZXJmbG93LXk6IGF1dG87XFxyXFxuICAgIGJhY2tncm91bmQ6ICNmZmY7XFxyXFxuICAgIHdpZHRoOiAxMDAlO1xcclxcbiAgICBtYXJnaW4tYm90dG9tOiAxMXB4O1xcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLnNlbGVjdC1jZXJ0aWZpY2F0ZS13cmFwcGVyIC5jb250ZW50LXdyYXBwZXIgLmNlcnQtbGlzdCB0YWJsZSB7XFxyXFxuICAgIHRhYmxlLWxheW91dDogZml4ZWQ7XFxyXFxuICAgIHdpZHRoOiAxMDAlO1xcclxcbiAgICBib3JkZXItd2lkdGg6IDA7XFxyXFxuICAgIGJvcmRlci1zcGFjaW5nOiAwO1xcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLnNlbGVjdC1jZXJ0aWZpY2F0ZS13cmFwcGVyIC5jb250ZW50LXdyYXBwZXIgLmNlcnQtbGlzdCB0YWJsZSB0aCB7XFxyXFxuICAgIGJhY2tncm91bmQ6ICNmZmY7XFxyXFxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjNDA2QkIyO1xcclxcbiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICM0MDZCQjI7XFxyXFxuICAgIGhlaWdodDogMjRweDtcXHJcXG4gICAgcGFkZGluZzogMCA1cHg7XFxyXFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuLnNlY3VraXQtZGlhbG9nIC5zZWxlY3QtY2VydGlmaWNhdGUtd3JhcHBlciAuY29udGVudC13cmFwcGVyIC5jZXJ0LWxpc3QgdGFibGUgdGggc3BhbiB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMTJweDtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbiAgICBtYXJnaW46IDA7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuc2VsZWN0LWNlcnRpZmljYXRlLXdyYXBwZXIgLmNvbnRlbnQtd3JhcHBlciAuY2VydC1saXN0IHRhYmxlIHRoOmZpcnN0LWNoaWxkIHtcXHJcXG4gICAgYm9yZGVyLWxlZnQ6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuc2VsZWN0LWNlcnRpZmljYXRlLXdyYXBwZXIgLmNvbnRlbnQtd3JhcHBlciAuY2VydC1saXN0IHRhYmxlIHRkIHtcXHJcXG4gICAgYmFja2dyb3VuZDogI2ZmZjtcXHJcXG4gICAgaGVpZ2h0OiAyNHB4O1xcclxcbiAgICBwYWRkaW5nOiAwIDVweDtcXHJcXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcclxcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxyXFxuICAgIG92ZXJmbG93OiBoaWRkZW47XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuc2VsZWN0LWNlcnRpZmljYXRlLXdyYXBwZXIgLmNvbnRlbnQtd3JhcHBlciAuY2VydC1saXN0IHRhYmxlIHRkIHNwYW4ge1xcclxcbiAgICBmb250LXNpemU6IDEycHg7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XFxyXFxuICAgIG1hcmdpbjogMDtcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxuICAgIHBhZGRpbmctYm90dG9tOiAxcHg7XFxyXFxuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxyXFxuICAgIC1vLXRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xcclxcbiAgICAtbXMtdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XFxyXFxuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xcclxcbiAgICB3b3JkLXdyYXA6IG5vcm1hbDtcXHJcXG59XFxyXFxuXFxyXFxuLnNlY3VraXQtZGlhbG9nIC5zZWxlY3QtY2VydGlmaWNhdGUtd3JhcHBlciAuY29udGVudC13cmFwcGVyIC5jZXJ0LWxpc3QgdGFibGUgdGQgaSB7XFxyXFxuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuc2VsZWN0LWNlcnRpZmljYXRlLXdyYXBwZXIgLmNvbnRlbnQtd3JhcHBlciAuY2VydC1saXN0IHRhYmxlIHRyW2NsYXNzPVxcXCJhY3RpdmVcXFwiXSB0ZCB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICM0MDZCQjI7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuc2VsZWN0LWNlcnRpZmljYXRlLXdyYXBwZXIgLmNvbnRlbnQtd3JhcHBlciAuY2VydC1saXN0IHRhYmxlIHRyW2NsYXNzPVxcXCJhY3RpdmVcXFwiXSB0ZCBzcGFuIHtcXHJcXG4gICAgY29sb3I6IHdoaXRlO1xcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLnNlbGVjdC1jZXJ0aWZpY2F0ZS13cmFwcGVyIC5jb250ZW50LXdyYXBwZXIgLmlucHV0LXBhc3N3b3JkLWZvcm0gLmNlcnQtcWxhbGZxanNnaCB7XFxyXFxuICAgIHdpZHRoOiAxMDAlO1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXHJcXG4gICAgcGFkZGluZy1ib3R0b206IDRweDtcXHJcXG4gICAgcGFkZGluZy1sZWZ0OiA3cHg7XFxyXFxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNiMGIwYjA7XFxyXFxuICAgIGJvcmRlci1jb2xvcjogIzQwNkJCMjtcXHJcXG4gICAgcGFkZGluZzogMCA1cHg7XFxyXFxuICAgIGhlaWdodDogMzBweDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDEuMjtcXHJcXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLnNlbGVjdC1jZXJ0aWZpY2F0ZS13cmFwcGVyIC5jb250ZW50LXdyYXBwZXIgLmlucHV0LXBhc3N3b3JkLWZvcm0gLmNlcnQtcWxhbGZxanNnaDpkaXNhYmxlZCB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlOWVjZWY7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuc2VsZWN0LWNlcnRpZmljYXRlLXdyYXBwZXIgLmNvbnRlbnQtd3JhcHBlciAuaW5wdXQtcGFzc3dvcmQtZm9ybSAuY2VydC1xbGFsZnFqc2doOmRpc2FibGVkOjpwbGFjZWhvbGRlciB7XFxyXFxuICAgIGNvbG9yOiBkaW1ncmF5O1xcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLnNlbGVjdC1jZXJ0aWZpY2F0ZS13cmFwcGVyIC5jb250ZW50LXdyYXBwZXIgLmlucHV0LXBhc3N3b3JkLWZvcm0gLmNlcnQtcWxhbGZxanNnaDo6cGxhY2Vob2xkZXIge1xcclxcbiAgICBjb2xvcjogbGlnaHRncmV5O1xcclxcbiAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuc2VsZWN0LWNlcnRpZmljYXRlLXdyYXBwZXIgLmJ1dHRvbi13cmFwcGVyIHtcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbiAgICBwYWRkaW5nLXRvcDogNXB4O1xcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLnNlbGVjdC1jZXJ0aWZpY2F0ZS13cmFwcGVyIGJ1dHRvbiB7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcXHJcXG4gICAgYm9yZGVyOiBub25lO1xcclxcbiAgICBoZWlnaHQ6IDI4cHg7XFxyXFxuICAgIGNvbG9yOiAjZmZmO1xcclxcbiAgICB3aWR0aDogODNweCAhaW1wb3J0YW50O1xcclxcbiAgICBtYXJnaW46IDEwcHggNi41cHggNXB4IDEwcHggIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuLnNlY3VraXQtZGlhbG9nIC5zZWxlY3QtY2VydGlmaWNhdGUtd3JhcHBlciAuY29uZmlybS1idXR0b24ge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjY2YWI3ICFpbXBvcnRhbnQ7XFxyXFxuICAgIG1hcmdpbi1yaWdodDogNXB4ICFpbXBvcnRhbnQ7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuc2VsZWN0LWNlcnRpZmljYXRlLXdyYXBwZXIgLmNhbmNlbC1idXR0b24ge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjdGN0Y4ICFpbXBvcnRhbnQ7XFxyXFxuICAgIGJvcmRlcjogc29saWQgMXB4ICMyNjZhYjcgIWltcG9ydGFudDtcXHJcXG4gICAgY29sb3I6ICMwMDAgIWltcG9ydGFudDtcXHJcXG4gICAgbWFyZ2luLWxlZnQ6IDVweCAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG5cXHJcXG4vKiBFbmQgU2VsZWN0IENlcnRpZmljYXRlICovXFxyXFxuXFxyXFxuXFxyXFxuLyogQnJvd3NlciBDZXJ0aWZpY2F0ZSBHdWlkZSAqL1xcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIHtcXHJcXG4gICAgaGVpZ2h0OiA1NjBweDtcXHJcXG4gICAgd2lkdGg6IDMzN3B4O1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXHJcXG4gICAgYm94LXNoYWRvdzogMCAwIDAuNDVweCAjNDQ0MDQwO1xcclxcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIC5icm93c2VyLWd1aWRlLWhlYWRlciB7XFxyXFxuICAgIGhlaWdodDogMTM1cHg7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyNjZhYjc7XFxyXFxuICAgIHBhZGRpbmc6IDAgMzBweDtcXHJcXG59XFxyXFxuXFxyXFxuLnNlY3VraXQtZGlhbG9nIC5icm93c2VyLWd1aWRlLXdyYXBwZXIgLmJyb3dzZXItZ3VpZGUtaGVhZGVyIC5jbG9zZSB7XFxyXFxuICAgIGRpc3BsYXk6IC13ZWJraXQtYm94O1xcclxcbiAgICBkaXNwbGF5OiAtbXMtZmxleGJveDtcXHJcXG4gICAgZGlzcGxheTogZmxleDtcXHJcXG4gICAgLW1zLWZsZXgtd3JhcDogd3JhcDtcXHJcXG4gICAgZmxleC13cmFwOiB3cmFwO1xcclxcbiAgICBmbG9hdDogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuLnNlY3VraXQtZGlhbG9nIC5icm93c2VyLWd1aWRlLXdyYXBwZXIgLmJyb3dzZXItZ3VpZGUtaGVhZGVyIC5jbG9zZSBhIHtcXHJcXG4gICAgbWFyZ2luOiAxNHB4IDAgN3B4IGF1dG87XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIC5icm93c2VyLWd1aWRlLWhlYWRlciBoMSB7XFxyXFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG4gICAgbGV0dGVyLXNwYWNpbmc6IC0xcHg7XFxyXFxuICAgIGZvbnQtc2l6ZTogMTlweDtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IDQwMCAhaW1wb3J0YW50O1xcclxcbiAgICB3aWR0aDogMTAwJTtcXHJcXG4gICAgY29sb3I6ICNGMkZGRUQ7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDE4cHggIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuLnNlY3VraXQtZGlhbG9nIC5icm93c2VyLWd1aWRlLXdyYXBwZXIgLmJyb3dzZXItZ3VpZGUtaGVhZGVyIC50ZXh0IHtcXHJcXG4gICAgZGlzcGxheTogLXdlYmtpdC1ib3g7XFxyXFxuICAgIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xcclxcbiAgICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgICAtbXMtZmxleC13cmFwOiB3cmFwO1xcclxcbiAgICBmbGV4LXdyYXA6IHdyYXA7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIC5icm93c2VyLWd1aWRlLWhlYWRlciAudGV4dCBoMiB7XFxyXFxuICAgIG1hcmdpbjogMDtcXHJcXG4gICAgdGV4dC1hbGlnbjogbGVmdDtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IDQwMCAhaW1wb3J0YW50O1xcclxcbiAgICBmb250LXNpemU6IDEycHg7XFxyXFxuICAgIG1hcmdpbi10b3A6IDJweCAhaW1wb3J0YW50O1xcclxcbiAgICB3aWR0aDogMjEycHg7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxNXB4O1xcclxcbiAgICBjb2xvcjogd2hpdGU7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIC5icm93c2VyLWd1aWRlLWNvbnRlbnRzIHtcXHJcXG4gICAgcGFkZGluZzogMCAzMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLmJyb3dzZXItZ3VpZGUtd3JhcHBlciAuYnJvd3Nlci1ndWlkZS1jb250ZW50cyBociB7XFxyXFxuICAgIG1hcmdpbjogMjVweCAtMjVweCAxNXB4IC0yNXB4O1xcclxcbiAgICBib3JkZXI6IDA7XFxyXFxuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMSk7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIC5icm93c2VyLWd1aWRlLWNvbnRlbnRzIGgyIHtcXHJcXG4gICAgdGV4dC1hbGlnbjogbGVmdDtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxyXFxuICAgIGZvbnQtc2l6ZTogMTNweDtcXHJcXG4gICAgbGV0dGVyLXNwYWNpbmc6IC0wLjI1cHg7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxOXB4O1xcclxcbiAgICB3aWR0aDogMTAwJTtcXHJcXG4gICAgY29sb3I6ICMzMzMzMzM7XFxyXFxuICAgIGRpc3BsYXk6IGJsb2NrO1xcclxcbiAgICBtYXJnaW46IDExcHggMCAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLmJyb3dzZXItZ3VpZGUtd3JhcHBlciAuYnJvd3Nlci1ndWlkZS1jb250ZW50cyAuYnJvd3Nlci1ndWlkZS1zdGVwcy13cmFwcGVyIHtcXHJcXG4gICAgcGFkZGluZzogMDtcXHJcXG59XFxyXFxuXFxyXFxuLnNlY3VraXQtZGlhbG9nIC5icm93c2VyLWd1aWRlLXdyYXBwZXIgLmJyb3dzZXItZ3VpZGUtY29udGVudHMgLmJyb3dzZXItZ3VpZGUtc3RlcHMtd3JhcHBlciAuc3RlcC13cmFwcGVyIHtcXHJcXG4gICAgZGlzcGxheTogLXdlYmtpdC1ib3g7XFxyXFxuICAgIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xcclxcbiAgICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgICAtbXMtZmxleC13cmFwOiB3cmFwO1xcclxcbiAgICBmbGV4LXdyYXA6IHdyYXA7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDJweFxcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLmJyb3dzZXItZ3VpZGUtd3JhcHBlciAuYnJvd3Nlci1ndWlkZS1jb250ZW50cyAuYnJvd3Nlci1ndWlkZS1zdGVwcy13cmFwcGVyIC5zdGVwLXdyYXBwZXIgLnN0ZXAtbnVtYmVyIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBib3JkZXItcmFkaXVzOiAwLjM1cmVtO1xcclxcbiAgICBmb250LXdlaWdodDogNzAwO1xcclxcbiAgICBsaW5lLWhlaWdodDogMTtcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XFxyXFxuICAgIC13ZWJraXQtdHJhbnNpdGlvbjogY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJhY2tncm91bmQtY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJvcmRlci1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgLXdlYmtpdC1ib3gtc2hhZG93IDAuMTVzIGVhc2UtaW4tb3V0O1xcclxcbiAgICB0cmFuc2l0aW9uOiBjb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYmFja2dyb3VuZC1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYm9yZGVyLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCAtd2Via2l0LWJveC1zaGFkb3cgMC4xNXMgZWFzZS1pbi1vdXQ7XFxyXFxuICAgIHRyYW5zaXRpb246IGNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBiYWNrZ3JvdW5kLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBib3JkZXItY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJveC1zaGFkb3cgMC4xNXMgZWFzZS1pbi1vdXQ7XFxyXFxuICAgIHRyYW5zaXRpb246IGNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBiYWNrZ3JvdW5kLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBib3JkZXItY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJveC1zaGFkb3cgMC4xNXMgZWFzZS1pbi1vdXQsIC13ZWJraXQtYm94LXNoYWRvdyAwLjE1cyBlYXNlLWluLW91dDtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzQwNkJCMjtcXHJcXG4gICAgY29sb3I6IHdoaXRlO1xcclxcbiAgICBmb250LXNpemU6IDdweDtcXHJcXG4gICAgd2lkdGg6IDEycHg7XFxyXFxuICAgIGhlaWdodDogMTJweDtcXHJcXG4gICAgbWFyZ2luOiAzcHggMTNweCAwIDA7XFxyXFxuICAgIHBhZGRpbmctdG9wOiAxLjdweDtcXHJcXG59XFxyXFxuXFxyXFxuLnNlY3VraXQtZGlhbG9nIC5icm93c2VyLWd1aWRlLXdyYXBwZXIgLmJyb3dzZXItZ3VpZGUtY29udGVudHMgLmJyb3dzZXItZ3VpZGUtc3RlcHMtd3JhcHBlciAuc3RlcC13cmFwcGVyIC5zdGVwLXRleHQge1xcclxcbiAgICBmb250LXNpemU6IDExcHg7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxN3B4O1xcclxcbiAgICB3aWR0aDogMjUycHg7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIC5icm93c2VyLWd1aWRlLWNvbnRlbnRzIC5icm93c2VyLWd1aWRlLXN0ZXBzLXdyYXBwZXIgLnN0ZXAtd3JhcHBlciAuc3RlcC10ZXh0LnN1YiB7XFxyXFxuICAgIG1hcmdpbjogNnB4IDAgMCAyNnB4O1xcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLmJyb3dzZXItZ3VpZGUtd3JhcHBlciAuYnJvd3Nlci1ndWlkZS1jb250ZW50cyAuYnJvd3Nlci1ndWlkZS1zdGVwcy13cmFwcGVyIC5zdGVwLXdyYXBwZXIgLnN0ZXAtdGV4dC53LTEwMCB7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiAxMDA7XFxyXFxuICAgIHdpZHRoOiAxMDAlO1xcclxcbn1cXHJcXG5cXHJcXG4uc2VjdWtpdC1kaWFsb2cgLmJyb3dzZXItZ3VpZGUtd3JhcHBlciAuYnJvd3Nlci1ndWlkZS1jb250ZW50cyAuZGV0YWlsLWd1aWRlLXdyYXBwZXIge1xcclxcbiAgICBtYXJnaW4tdG9wOiA5cHg7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIC5icm93c2VyLWd1aWRlLWNvbnRlbnRzIC5kZXRhaWwtZ3VpZGUtd3JhcHBlciBhIHtcXHJcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBibGluaztcXHJcXG59XFxyXFxuXFxyXFxuLnNlY3VraXQtZGlhbG9nIC5icm93c2VyLWd1aWRlLXdyYXBwZXIgLmJyb3dzZXItZ3VpZGUtY29udGVudHMgLmRldGFpbC1ndWlkZS13cmFwcGVyIC5vcGVuLWRldGFpbC1ndWlkZS13cmFwcGVyIC5iYWRnZSB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogMC4zNXJlbTtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDE7XFxyXFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcXHJcXG4gICAgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lO1xcclxcbiAgICAtd2Via2l0LXRyYW5zaXRpb246IGNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBiYWNrZ3JvdW5kLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBib3JkZXItY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIC13ZWJraXQtYm94LXNoYWRvdyAwLjE1cyBlYXNlLWluLW91dDtcXHJcXG4gICAgdHJhbnNpdGlvbjogY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJhY2tncm91bmQtY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJvcmRlci1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgLXdlYmtpdC1ib3gtc2hhZG93IDAuMTVzIGVhc2UtaW4tb3V0O1xcclxcbiAgICB0cmFuc2l0aW9uOiBjb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYmFja2dyb3VuZC1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYm9yZGVyLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBib3gtc2hhZG93IDAuMTVzIGVhc2UtaW4tb3V0O1xcclxcbiAgICB0cmFuc2l0aW9uOiBjb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYmFja2dyb3VuZC1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYm9yZGVyLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBib3gtc2hhZG93IDAuMTVzIGVhc2UtaW4tb3V0LCAtd2Via2l0LWJveC1zaGFkb3cgMC4xNXMgZWFzZS1pbi1vdXQ7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICNiY2JlYzA7XFxyXFxuICAgIGNvbG9yOiB3aGl0ZTtcXHJcXG4gICAgZm9udC1zaXplOiA4cHg7XFxyXFxuICAgIHdpZHRoOiAxMnB4O1xcclxcbiAgICBoZWlnaHQ6IDEycHg7XFxyXFxuICAgIG1hcmdpbjogM3B4IDEzcHggMCAwO1xcclxcbiAgICBwYWRkaW5nLXRvcDogMS43cHg7XFxyXFxuICAgIHBhZGRpbmctbGVmdDogMS4xcHg7XFxyXFxufVxcclxcblxcclxcbi5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIC5icm93c2VyLWd1aWRlLWNvbnRlbnRzIC5kZXRhaWwtZ3VpZGUtd3JhcHBlciAub3Blbi1kZXRhaWwtZ3VpZGUtd3JhcHBlciAudGV4dCB7XFxyXFxuICAgIGNvbG9yOiAjNDA2QkIyO1xcclxcbiAgICBmb250LXNpemU6IDExcHg7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XFxyXFxufVxcclxcblxcclxcbi53ZWJucGtpLXdyYXBwZXIgLnBmeC1wYXNzd29yZC13cmFwcGVyIHtcXHJcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgICBsZWZ0OiA1MCU7XFxyXFxuICAgIHRvcDogNTAlO1xcclxcbiAgICBtYXJnaW4tbGVmdDogLTEzOHB4O1xcclxcbiAgICBtYXJnaW4tdG9wOiAtMjM4cHg7XFxyXFxuICAgIHotaW5kZXg6IDEyMDAxO1xcclxcbiAgICB3aWR0aDogMjY3cHg7XFxyXFxuICAgIGhlaWdodDogMjM1cHg7XFxyXFxuICAgIHBhZGRpbmctbGVmdDogMjBweDtcXHJcXG4gICAgcGFkZGluZy1yaWdodDogMjBweDtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxyXFxuICAgIG9wYWNpdHk6IDE7XFxyXFxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNkM2QzZDM7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcXHJcXG4gICAgYm94LXNoYWRvdzogMCAxcHggNXB4IHJnYmEoMTIsIDExLCAxMSwgMC4yNSk7XFxyXFxufVxcclxcblxcclxcbi53ZWJucGtpLXdyYXBwZXIgLnBmeC1wYXNzd29yZC13cmFwcGVyIC5wZngtcGFzc3dvcmQtaGVhZGVyIHtcXHJcXG4gICAgbWFyZ2luLXRvcDogMjVweDtcXHJcXG4gICAgbWFyZ2luLWJvdHRvbTogMTVweDtcXHJcXG59XFxyXFxuXFxyXFxuLndlYm5wa2ktd3JhcHBlciAucGZ4LXBhc3N3b3JkLXdyYXBwZXIgLnBmeC1wYXNzd29yZC1oZWFkZXIgc3BhbiB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxuICAgIGZvbnQtc2l6ZTogMThweDtcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbiAgICBmb250LXdlaWdodDogYm9sZDtcXHJcXG59XFxyXFxuXFxyXFxuLndlYm5wa2ktd3JhcHBlciAucGZ4LXBhc3N3b3JkLXdyYXBwZXIgLnBmeC1wYXNzd29yZC1ib2R5IHtcXHJcXG4gICAgYmFja2dyb3VuZDogI2YzZjZmYTtcXHJcXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2UyZTJlMjtcXHJcXG4gICAgcGFkZGluZzogMTJweCAxMnB4O1xcclxcbn1cXHJcXG5cXHJcXG4ud2VibnBraS13cmFwcGVyIC5wZngtcGFzc3dvcmQtd3JhcHBlciAucGZ4LXBhc3N3b3JkLWJvZHkgc3BhbiB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxuICAgIGZvbnQtc2l6ZTogMTNweDtcXHJcXG4gICAgbGV0dGVyLXNwYWNpbmc6IC0wLjI1cHg7XFxyXFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuLndlYm5wa2ktd3JhcHBlciAucGZ4LXBhc3N3b3JkLXdyYXBwZXIgLnBmeC1wYXNzd29yZC1ib2R5IC5wZngtcGFzc3dvcmQtaW5wdXQge1xcclxcbiAgICBtYXJnaW4tdG9wOiAxNnB4O1xcclxcbiAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xcclxcbn1cXHJcXG5cXHJcXG4ud2VibnBraS13cmFwcGVyIC5wZngtcGFzc3dvcmQtd3JhcHBlciAucGZ4LXBhc3N3b3JkLWJvZHkgLnBmeC1wYXNzd29yZC1pbnB1dCAucGZ4LXFsYWxmcWpzZ2gge1xcclxcbiAgICB3aWR0aDogMTAwJTtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxyXFxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNiMGIwYjA7XFxyXFxuICAgIGJvcmRlci1jb2xvcjogIzQwNkJCMjtcXHJcXG4gICAgcGFkZGluZzogMCA1cHg7XFxyXFxuICAgIGhlaWdodDogMzBweDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDEuMjtcXHJcXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xcclxcbn1cXHJcXG5cXHJcXG4ud2VibnBraS13cmFwcGVyIC5wZngtcGFzc3dvcmQtd3JhcHBlciAucGZ4LXBhc3N3b3JkLWZvb3RlciB7XFxyXFxuICAgIG1hcmdpbi10b3A6IDhweDtcXHJcXG4gICAgbWFyZ2luLWJvdHRvbTogOHB4O1xcclxcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXJcXHJcXG59XFxyXFxuXFxyXFxuLndlYm5wa2ktd3JhcHBlciAucGZ4LXBhc3N3b3JkLXdyYXBwZXIgLnBmeC1wYXNzd29yZC1mb290ZXIgYnV0dG9uIHtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xcclxcbiAgICBib3JkZXI6IG5vbmU7XFxyXFxuICAgIGhlaWdodDogMjhweDtcXHJcXG4gICAgY29sb3I6ICNmZmY7XFxyXFxuICAgIHdpZHRoOiA4M3B4ICFpbXBvcnRhbnQ7XFxyXFxuICAgIG1hcmdpbjogMTBweDtcXHJcXG4gICAgbWFyZ2luLWJvdHRvbTogNXB4O1xcclxcbiAgICBtYXJnaW4tcmlnaHQ6IDYuNXB4ICFpbXBvcnRhbnQ7XFxyXFxufVxcclxcblxcclxcbi53ZWJucGtpLXdyYXBwZXIgLnBmeC1wYXNzd29yZC13cmFwcGVyIC5wZngtcGFzc3dvcmQtZm9vdGVyIC5jb25maXJtLWJ1dHRvbiB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyNjZhYjcgIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuLndlYm5wa2ktd3JhcHBlciAucGZ4LXBhc3N3b3JkLXdyYXBwZXIgLnBmeC1wYXNzd29yZC1mb290ZXIgLmNhbmNlbC1idXR0b24ge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjdGN0Y4ICFpbXBvcnRhbnQ7XFxyXFxuICAgIGJvcmRlcjogc29saWQgMXB4ICMyNjZhYjcgIWltcG9ydGFudDtcXHJcXG4gICAgY29sb3I6ICMwMDAgIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuLndlYm5wa2ktd3JhcHBlciAuZGltIHtcXHJcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgICB0b3A6IDA7XFxyXFxuICAgIGxlZnQ6IDA7XFxyXFxuICAgIHdpZHRoOiAxMDAlO1xcclxcbiAgICBoZWlnaHQ6IDEwMCU7XFxyXFxuICAgIHotaW5kZXg6IDEyMDAwO1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcXHJcXG4gICAgb3BhY2l0eTogLjY7XFxyXFxuICAgIGZpbHRlcjogYWxwaGEob3BhY2l0eT01MCk7XFxyXFxufVxcclxcblxcclxcblxcclxcbi8qIGZpbmQgY2VydGlmaWNhdGUgKi9cXHJcXG5cXHJcXG4uZmluZC1wZngtd3JhcHBlciAuZGltIHtcXHJcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgICB0b3A6IDA7XFxyXFxuICAgIGxlZnQ6IDA7XFxyXFxuICAgIHdpZHRoOiAxMDAlO1xcclxcbiAgICBoZWlnaHQ6IDEwMCU7XFxyXFxuICAgIHotaW5kZXg6IDEwMDAwO1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcXHJcXG4gICAgb3BhY2l0eTogLjU7XFxyXFxuICAgIGZpbHRlcjogYWxwaGEob3BhY2l0eT01MCk7XFxyXFxufVxcclxcblxcclxcbi5maW5kLXBmeC13cmFwcGVyIC5maW5kLXBmeC1jb250YWluZXIge1xcclxcbiAgICB3aWR0aDogMzk0cHg7XFxyXFxuICAgIGhlaWdodDogNDAwcHg7XFxyXFxuICAgIGJhY2tncm91bmQ6ICNGN0Y3Rjg7XFxyXFxuICAgIHotaW5kZXg6IDEwMDAxO1xcclxcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICAgIHRvcDogNTAlO1xcclxcbiAgICBsZWZ0OiA1MCU7XFxyXFxuICAgIG1hcmdpbi1sZWZ0OiAtMTk3cHg7XFxyXFxuICAgIG1hcmdpbi10b3A6IC0yNTRweDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uZmluZC1wZngtd3JhcHBlciAuZmluZC1wZngtaGVhZGVyIHtcXHJcXG4gICAgaGVpZ2h0OiA0NnB4O1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjY2YWI3O1xcclxcbiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA0cHg7XFxyXFxuICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiA0cHg7XFxyXFxufVxcclxcblxcclxcbi5maW5kLXBmeC13cmFwcGVyIC5maW5kLXBmeC1oZWFkZXIgc3BhbiB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxyXFxuICAgIGZvbnQtc2l6ZTogMTRweDtcXHJcXG4gICAgcGFkZGluZy10b3A6IDE3cHg7XFxyXFxuICAgIHBhZGRpbmctbGVmdDogNDNweDtcXHJcXG4gICAgY29sb3I6IHdoaXRlO1xcclxcbn1cXHJcXG5cXHJcXG4uZmluZC1wZngtd3JhcHBlciAuY29udmVydC1wZngtd3JhcHBlciB7XFxyXFxuICAgIHBhZGRpbmc6IDI1cHggMjVweCAxMnB4IDI1cHg7XFxyXFxuICAgIG1hcmdpbjogMjhweCAyOHB4IDE2cHggMjhweDtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogaW5oZXJpdDtcXHJcXG4gICAgYm9yZGVyOiBzb2xpZDtcXHJcXG4gICAgYm9yZGVyLXdpZHRoOiAxcHg7XFxyXFxuICAgIGJvcmRlci1jb2xvcjogIzI2NkFCNztcXHJcXG59XFxyXFxuXFxyXFxuLmZpbmQtcGZ4LXdyYXBwZXIgLmNvbnZlcnQtcGZ4LXdyYXBwZXIgLmNvbnZlcnQtcGZ4LWhlYWRlciB7XFxyXFxuICAgIG1hcmdpbjogMCA1cHggMTVweCAwcHg7XFxyXFxuICAgIHBhZGRpbmctbGVmdDogMTFweDtcXHJcXG59XFxyXFxuXFxyXFxuLmZpbmQtcGZ4LXdyYXBwZXIgLmNvbnZlcnQtcGZ4LXdyYXBwZXIgLmNvbnZlcnQtcGZ4LWhlYWRlciBzcGFuIHtcXHJcXG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXHJcXG4gICAgZm9udC1zaXplOiAxM3B4O1xcclxcbiAgICBtYXJnaW4tbGVmdDogMTRweDtcXHJcXG59XFxyXFxuXFxyXFxuLmZpbmQtcGZ4LXdyYXBwZXIgLmNvbnZlcnQtcGZ4LXdyYXBwZXIgLmNvbnZlcnQtcGZ4LWRvd25sb2FkIHtcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbiAgICBtYXJnaW4tYm90dG9tOiAyMnB4O1xcclxcbn1cXHJcXG5cXHJcXG4uZmluZC1wZngtd3JhcHBlciAuY29udmVydC1wZngtd3JhcHBlciAuY29udmVydC1wZngtZG93bmxvYWQgYSB7XFxyXFxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI0YwRjNGOTtcXHJcXG4gICAgd2lkdGg6IDIxOHB4O1xcclxcbiAgICBoZWlnaHQ6IDMycHg7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgcGFkZGluZy10b3A6IDlweDtcXHJcXG59XFxyXFxuXFxyXFxuLmZpbmQtcGZ4LXdyYXBwZXIgLmNvbnZlcnQtcGZ4LXdyYXBwZXIgLmNvbnZlcnQtcGZ4LWRvd25sb2FkIHNwYW4ge1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcclxcbiAgICBmb250LXdlaWdodDogYm9sZDtcXHJcXG4gICAgY29sb3I6ICMyNjZhYjc7XFxyXFxuICAgIG1hcmdpbi1sZWZ0OiA3cHg7XFxyXFxufVxcclxcblxcclxcbi5maW5kLXBmeC13cmFwcGVyIC5jb252ZXJ0LXBmeC13cmFwcGVyIC5jb252ZXJ0LXBmeC1zdGVwLXdyYXBwZXIge1xcclxcbiAgICBwYWRkaW5nOiAwIDdweDtcXHJcXG4gICAgZGlzcGxheTogLXdlYmtpdC1ib3g7XFxyXFxuICAgIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xcclxcbiAgICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgICAtbXMtZmxleC13cmFwOiB3cmFwO1xcclxcbiAgICBmbGV4LXdyYXA6IHdyYXA7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDE1cHhcXHJcXG59XFxyXFxuXFxyXFxuLmZpbmQtcGZ4LXdyYXBwZXIgLmNvbnZlcnQtcGZ4LXdyYXBwZXIgLmNvbnZlcnQtcGZ4LXN0ZXAtd3JhcHBlciAuc3RlcC10ZXh0IHtcXHJcXG4gICAgd2lkdGg6IDI0MnB4O1xcclxcbiAgICBmb250LXNpemU6IDExcHg7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxM3B4O1xcclxcbiAgICBsZXR0ZXItc3BhY2luZzogLTAuN3B4O1xcclxcbn1cXHJcXG5cXHJcXG4uZmluZC1wZngtd3JhcHBlciAuY29udmVydC1wZngtd3JhcHBlciAuY29udmVydC1wZngtc3RlcC13cmFwcGVyIC5zdGVwLXRleHQgc3BhbiB7XFxyXFxuICAgIGNvbG9yOiAjMjY2YWI3O1xcclxcbn1cXHJcXG5cXHJcXG4uZmluZC1wZngtd3JhcHBlciAuY29udmVydC1wZngtd3JhcHBlciAuc3RlcC1udW1iZXIge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDAuMzVyZW07XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiA3MDA7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxO1xcclxcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxyXFxuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxyXFxuICAgIHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTtcXHJcXG4gICAgLXdlYmtpdC10cmFuc2l0aW9uOiBjb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYmFja2dyb3VuZC1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYm9yZGVyLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCAtd2Via2l0LWJveC1zaGFkb3cgMC4xNXMgZWFzZS1pbi1vdXQ7XFxyXFxuICAgIHRyYW5zaXRpb246IGNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBiYWNrZ3JvdW5kLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBib3JkZXItY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIC13ZWJraXQtYm94LXNoYWRvdyAwLjE1cyBlYXNlLWluLW91dDtcXHJcXG4gICAgdHJhbnNpdGlvbjogY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJhY2tncm91bmQtY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJvcmRlci1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYm94LXNoYWRvdyAwLjE1cyBlYXNlLWluLW91dDtcXHJcXG4gICAgdHJhbnNpdGlvbjogY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJhY2tncm91bmQtY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJvcmRlci1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYm94LXNoYWRvdyAwLjE1cyBlYXNlLWluLW91dCwgLXdlYmtpdC1ib3gtc2hhZG93IDAuMTVzIGVhc2UtaW4tb3V0O1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDA2QkIyO1xcclxcbiAgICBjb2xvcjogd2hpdGU7XFxyXFxuICAgIGZvbnQtc2l6ZTogN3B4O1xcclxcbiAgICB3aWR0aDogMTJweDtcXHJcXG4gICAgaGVpZ2h0OiAxMnB4O1xcclxcbiAgICBtYXJnaW46IDAgMTJweCAwIDA7XFxyXFxuICAgIHBhZGRpbmctdG9wOiAxLjdweDtcXHJcXG59XFxyXFxuXFxyXFxuLmZpbmQtcGZ4LXdyYXBwZXIgLmZpbmQtcGZ4LWZvb3RlciB7XFxyXFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuLmZpbmQtcGZ4LXdyYXBwZXIgLmZpbmQtcGZ4LWZvb3RlciBidXR0b24ge1xcclxcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XFxyXFxuICAgIGJvcmRlcjogbm9uZTtcXHJcXG4gICAgaGVpZ2h0OiAyNnB4O1xcclxcbiAgICBjb2xvcjogI2ZmZjtcXHJcXG4gICAgd2lkdGg6IDkzcHggIWltcG9ydGFudDtcXHJcXG4gICAgbWFyZ2luOiAwIDVweCAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG4uZmluZC1wZngtd3JhcHBlciAuZmluZC1wZngtZm9vdGVyIC5jb25maXJtLWJ1dHRvbiB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyNjZhYjcgIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuLmZpbmQtcGZ4LXdyYXBwZXIgLmZpbmQtcGZ4LWZvb3RlciAuY2FuY2VsLWJ1dHRvbiB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICNGN0Y3RjggIWltcG9ydGFudDtcXHJcXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggIzI2NmFiNyAhaW1wb3J0YW50O1xcclxcbiAgICBjb2xvcjogIzAwMCAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG5cXHJcXG4vKiBDdXN0b21pc2UgQ1NTICovXFxyXFxuXFxyXFxuLmtpY2EtZC1ub25lIHtcXHJcXG4gICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyIC5icm93c2VyLWRldGFpbC1ndWlkZSB7XFxyXFxuICAgIHdpZHRoOiAxMDAlO1xcclxcbiAgICBoZWlnaHQ6IDY1MHB4O1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyIC5pY29uLXZrZXlib2FyZCB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcXHJcXG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXHJcXG4gICAgbWFyZ2luLWxlZnQ6IC0zNnB4O1xcclxcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIgKyBfX19DU1NfTE9BREVSX1VSTF9fXzFfX18gKyBcIik7XFxyXFxuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XFxyXFxuICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XFxyXFxuICAgIHdpZHRoOiAyOXB4O1xcclxcbiAgICBoZWlnaHQ6IDE4cHg7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgLmljb24tZG93biB7XFxyXFxuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcIiArIF9fX0NTU19MT0FERVJfVVJMX19fMl9fXyArIFwiKTtcXHJcXG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcXHJcXG4gICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcclxcbiAgICB3aWR0aDogMTVweDtcXHJcXG4gICAgaGVpZ2h0OiAxNXB4O1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyIC5pY29uLXZrZXlib2FyZC5hY3RpdmUge1xcclxcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIgKyBfX19DU1NfTE9BREVSX1VSTF9fXzNfX18gKyBcIik7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgLmljb24tY2VydCB7XFxyXFxuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcIiArIF9fX0NTU19MT0FERVJfVVJMX19fNF9fXyArIFwiKTtcXHJcXG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXIgZXBlYXQ7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgZmxvYXQ6IGxlZnQ7XFxyXFxuICAgIG1hcmdpbi1sZWZ0OiA3cHg7XFxyXFxuICAgIHdpZHRoOiAxNnB4O1xcclxcbiAgICBoZWlnaHQ6IDEzcHg7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgLmljb24tcXVlc3Rpb24ge1xcclxcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIgKyBfX19DU1NfTE9BREVSX1VSTF9fXzVfX18gKyBcIik7XFxyXFxuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgd2lkdGg6IDE3cHg7XFxyXFxuICAgIGhlaWdodDogMTdweDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlciAuaWNvbi1mYXEge1xcclxcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIgKyBfX19DU1NfTE9BREVSX1VSTF9fXzZfX18gKyBcIik7XFxyXFxuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XFxyXFxuICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXHJcXG4gICAgd2lkdGg6IDE4cHg7XFxyXFxuICAgIGhlaWdodDogMThweDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlciAuaWNvbi1maW5kLWNlcnQge1xcclxcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIgKyBfX19DU1NfTE9BREVSX1VSTF9fXzdfX18gKyBcIik7XFxyXFxuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XFxyXFxuICAgIHdpZHRoOiAyNHB4O1xcclxcbiAgICBoZWlnaHQ6IDE4cHg7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgLmljb24tY2xvc2Uge1xcclxcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIgKyBfX19DU1NfTE9BREVSX1VSTF9fXzhfX18gKyBcIik7XFxyXFxuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XFxyXFxuICAgIHdpZHRoOiAxNXB4O1xcclxcbiAgICBoZWlnaHQ6IDE1cHg7XFxyXFxuICAgIGZsb2F0OiByaWdodDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlciAuaWNvbi1icm93c2VyIHtcXHJcXG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiICsgX19fQ1NTX0xPQURFUl9VUkxfX185X19fICsgXCIpO1xcclxcbiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcclxcbiAgICBoZWlnaHQ6IDM1cHg7XFxyXFxuICAgIHdpZHRoOiAzNXB4O1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIG1hcmdpbi1yaWdodDogMTZweDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlciAuYmctbGlnaHQtYmx1ZSB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICNGMEY1RkYgIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlciAub3Blbi1ndWlkZSB7XFxyXFxuICAgIG1hcmdpbi1sZWZ0OiAtNDAwcHg7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgLmRyb3B6b25lLXdyYXBwZXIge1xcclxcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICAgIG1hcmdpbi10b3A6IDI1cHg7XFxyXFxuICAgIHdpZHRoOiAzODBweDtcXHJcXG4gICAgaGVpZ2h0OiA3NHB4O1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyIC5kcm9wem9uZS13cmFwcGVyIC5kcm9wem9uZS1pY29uIHtcXHJcXG4gICAgd2lkdGg6IDgwcHg7XFxyXFxuICAgIGhlaWdodDogNjJweDtcXHJcXG4gICAgZmxvYXQ6IGxlZnQ7XFxyXFxuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcIiArIF9fX0NTU19MT0FERVJfVVJMX19fMTBfX18gKyBcIik7XFxyXFxuICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XFxyXFxuICAgIG1hcmdpbi1sZWZ0OiAxNXB4O1xcclxcbiAgICBtYXJnaW4tcmlnaHQ6IDEycHg7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgLmRyb3B6b25lLXdyYXBwZXIgLmRyb3B6b25lLWNvbW1lbnQge1xcclxcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcXHJcXG4gICAgd2lkdGg6IDMwMHB4O1xcclxcbiAgICBoZWlnaHQ6IDEwMCU7XFxyXFxuICAgIHBhZGRpbmctdG9wOiA1cHg7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgLmRyb3B6b25lLXdyYXBwZXIgLmRyb3B6b25lLWNvbW1lbnQgc3BhbiB7XFxyXFxuICAgIGRpc3BsYXk6IGJsb2NrO1xcclxcbiAgICBtYXJnaW46IDdweCAwO1xcclxcbiAgICBmb250LXNpemU6IDExcHg7XFxyXFxuICAgIGNvbG9yOiAjOTE5MTkxO1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyIC5kZXRhaWwtZ3VpZGUge1xcclxcbiAgICBwb3NpdGlvbjogZml4ZWQ7XFxyXFxuICAgIHotaW5kZXg6IDEwMDAzO1xcclxcbiAgICBsZWZ0OiAwO1xcclxcbiAgICB0b3A6IDA7XFxyXFxuICAgIGRpc3BsYXk6IGluaXRpYWw7XFxyXFxuICAgIHdpZHRoOiAxMDAlO1xcclxcbiAgICBoZWlnaHQ6IDEwMCU7XFxyXFxuICAgIG92ZXJmbG93OiBhdXRvO1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMCwgMCwgMCk7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40KTtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlciAuZGV0YWlsLWd1aWRlLWNvbnRlbnQge1xcclxcbiAgICBkaXNwbGF5OiBibG9jaztcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogbm9uZTtcXHJcXG4gICAgYm9yZGVyOiBub25lO1xcclxcbiAgICB3aWR0aDogNzk3cHg7XFxyXFxuICAgIGhlaWdodDogMTAwdmg7XFxyXFxuICAgIHBvc2l0aW9uOiBmaXhlZDtcXHJcXG4gICAgdG9wOiA0NSU7XFxyXFxuICAgIGxlZnQ6IDUwJTtcXHJcXG4gICAgbWFyZ2luLWxlZnQ6IC00MDBweDtcXHJcXG4gICAgbWFyZ2luLXRvcDogLTQwMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyIC5jbG9zZS1kZXRhaWwtZ3VpZGUge1xcclxcbiAgICBjb2xvcjogI2ZmZjtcXHJcXG4gICAgZmxvYXQ6IHJpZ2h0O1xcclxcbiAgICBmb250LXNpemU6IDUwcHg7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcclxcbiAgICBtYXJnaW4tcmlnaHQ6IC01cHg7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXIgLmNsb3NlLWRldGFpbC1ndWlkZTpob3ZlcixcXHJcXG4jc2VjdWtpdC13cmFwcGVyIC5jbG9zZS1kZXRhaWwtZ3VpZGU6Zm9jdXMge1xcclxcbiAgICBjb2xvcjogYmxhY2s7XFxyXFxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXHJcXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcclxcbn1cXHJcXG5cXHJcXG4udmstY29udGFpbmVyIHtcXHJcXG4gICAgcGFkZGluZzogMC43cmVtIDAuNXJlbSAwLjVyZW0gMC41cmVtICFpbXBvcnRhbnQ7XFxyXFxufVxcclxcblxcclxcbi52ay1idXR0b24ge1xcclxcbiAgICBoZWlnaHQ6IDJyZW0gIWltcG9ydGFudDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDJyZW0gIWltcG9ydGFudDtcXHJcXG4gICAgbWluLXdpZHRoOiAycmVtICFpbXBvcnRhbnQ7XFxyXFxuICAgIG1hcmdpbjogMC4xcmVtIWltcG9ydGFudDtcXHJcXG4gICAgYmFja2dyb3VuZDogIzQ0NCAhaW1wb3J0YW50O1xcclxcbiAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuLnZrLWJ1dHRvbi1lbnRlciB7XFxyXFxuICAgIGJhY2tncm91bmQ6ICMyNjZhYjcgIWltcG9ydGFudDtcXHJcXG4gICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XFxyXFxufVxcclxcblxcclxcbi52ay1idXR0b24tc2hpZnQtZG93biB7XFxyXFxuICAgIGJhY2tncm91bmQ6IGRhcmtncmF5ICFpbXBvcnRhbnQ7XFxyXFxuICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG4udmstYnV0dG9uIHNwYW4ge1xcclxcbiAgICBmb250LXNpemU6IDFyZW0gIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuXFxyXFxuLyogRlIgKi9cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyW2xhbmc9XFxcImZyXFxcIl0gLnNlY3VraXQtZGlhbG9nIC5zZWxlY3QtY2VydGlmaWNhdGUtd3JhcHBlciB7XFxyXFxuICAgIGhlaWdodDogNTk0cHg7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXJbbGFuZz1cXFwiZnJcXFwiXSAuc2VjdWtpdC1kaWFsb2cgLnNlbGVjdC1jZXJ0aWZpY2F0ZS13cmFwcGVyIC5jb250ZW50LXdyYXBwZXIgLmNlcnQtbGlzdC1sYWJlbCB7XFxyXFxuICAgIHBhZGRpbmctdG9wOiA1NnB4O1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyW2xhbmc9XFxcImZyXFxcIl0gLnNlY3VraXQtZGlhbG9nIC5zZWxlY3QtY2VydGlmaWNhdGUtd3JhcHBlciAuY29udGVudC13cmFwcGVyIC5jZXJ0LXBhc3N3b3JkLWxhYmVsIHtcXHJcXG4gICAgbWFyZ2luLXRvcDogNzFweCAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyW2xhbmc9XFxcImZyXFxcIl0gLnNlY3VraXQtZGlhbG9nIC5zZWxlY3QtY2VydGlmaWNhdGUtd3JhcHBlciAuY29udGVudC13cmFwcGVyIC5jZXJ0LWxpc3QgdGFibGUgdGgge1xcclxcbiAgICBwYWRkaW5nOiAwIDRweDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlcltsYW5nPVxcXCJmclxcXCJdIC5zZWN1a2l0LWRpYWxvZyAuc2VsZWN0LWNlcnRpZmljYXRlLXdyYXBwZXIgLmNvbnRlbnQtd3JhcHBlciAuY2VydC1saXN0IHRhYmxlIHRoIHNwYW4ge1xcclxcbiAgICBmb250LXNpemU6IDExcHg7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXJbbGFuZz1cXFwiZnJcXFwiXSAuc2VjdWtpdC1kaWFsb2cgLnNlbGVjdC1jZXJ0aWZpY2F0ZS13cmFwcGVyIC5jb250ZW50LXdyYXBwZXIgLmlucHV0LXBhc3N3b3JkLWZvcm0gLmNlcnQtcWxhbGZxanNnaCB7XFxyXFxuICAgIHBhZGRpbmc6IDAgMCAwIDdweDtcXHJcXG4gICAgZm9udC1zaXplOiAxMXB4O1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyW2xhbmc9XFxcImZyXFxcIl0gLnNlY3VraXQtZGlhbG9nIC5zZWxlY3QtY2VydGlmaWNhdGUtd3JhcHBlciBidXR0b24ge1xcclxcbiAgICBtYXJnaW46IDEwcHggNC41cHggNXB4IDhweCAhaW1wb3J0YW50XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXJbbGFuZz1cXFwiZnJcXFwiXSAuc2VjdWtpdC1kaWFsb2cgLmJyb3dzZXItZ3VpZGUtd3JhcHBlciB7XFxyXFxuICAgIGhlaWdodDogNTk0cHg7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXJbbGFuZz1cXFwiZnJcXFwiXSAuc2VjdWtpdC1kaWFsb2cgLmJyb3dzZXItZ3VpZGUtd3JhcHBlciAuYnJvd3Nlci1ndWlkZS1oZWFkZXIge1xcclxcbiAgICBoZWlnaHQ6IDEzMHB4O1xcclxcbiAgICBwYWRkaW5nOiAwIDI1cHg7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXJbbGFuZz1cXFwiZnJcXFwiXSAuc2VjdWtpdC1kaWFsb2cgLmJyb3dzZXItZ3VpZGUtd3JhcHBlciAuYnJvd3Nlci1ndWlkZS1oZWFkZXIgaDEge1xcclxcbiAgICBmb250LXNpemU6IDE2cHg7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDE2cHggIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlcltsYW5nPVxcXCJmclxcXCJdIC5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIC5icm93c2VyLWd1aWRlLWhlYWRlciAudGV4dCBoMiB7XFxyXFxuICAgIG1hcmdpbi10b3A6IDAgIWltcG9ydGFudDtcXHJcXG4gICAgd2lkdGg6IDIzNnB4O1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyW2xhbmc9XFxcImZyXFxcIl0gLnNlY3VraXQtZGlhbG9nIC5icm93c2VyLWd1aWRlLXdyYXBwZXIgLmJyb3dzZXItZ3VpZGUtY29udGVudHMge1xcclxcbiAgICBwYWRkaW5nOiAwIDI1cHg7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXJbbGFuZz1cXFwiZnJcXFwiXSAuc2VjdWtpdC1kaWFsb2cgLmJyb3dzZXItZ3VpZGUtd3JhcHBlciAuYnJvd3Nlci1ndWlkZS1jb250ZW50cyBociB7XFxyXFxuICAgIG1hcmdpbjogNXB4IC0yNXB4IDVweCAtMjVweDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlcltsYW5nPVxcXCJmclxcXCJdIC5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIC5icm93c2VyLWd1aWRlLWNvbnRlbnRzIGgyIHtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDE2cHg7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXJbbGFuZz1cXFwiZnJcXFwiXSAuc2VjdWtpdC1kaWFsb2cgLmJyb3dzZXItZ3VpZGUtd3JhcHBlciAuYnJvd3Nlci1ndWlkZS1jb250ZW50cyAuYnJvd3Nlci1ndWlkZS1zdGVwcy13cmFwcGVyIHtcXHJcXG4gICAgcGFkZGluZzogMDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlcltsYW5nPVxcXCJmclxcXCJdIC5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIC5icm93c2VyLWd1aWRlLWNvbnRlbnRzIC5icm93c2VyLWd1aWRlLXN0ZXBzLXdyYXBwZXIgLnN0ZXAtd3JhcHBlciAuc3RlcC10ZXh0IHtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDE0cHg7XFxyXFxuICAgIHdpZHRoOiAyNjJweDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlcltsYW5nPVxcXCJmclxcXCJdIC5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIC5icm93c2VyLWd1aWRlLWNvbnRlbnRzIC5kZXRhaWwtZ3VpZGUtd3JhcHBlciB7XFxyXFxuICAgIG1hcmdpbi10b3A6IDE0cHg7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXJbbGFuZz1cXFwiZnJcXFwiXSAuc2VjdWtpdC1kaWFsb2cgLmJyb3dzZXItZ3VpZGUtd3JhcHBlciAuYnJvd3Nlci1ndWlkZS1jb250ZW50cyAuZGV0YWlsLWd1aWRlLXdyYXBwZXIgYSB7XFxyXFxuICAgIGRpc3BsYXk6IC13ZWJraXQtYm94O1xcclxcbiAgICBkaXNwbGF5OiAtbXMtZmxleGJveDtcXHJcXG4gICAgZGlzcGxheTogZmxleDtcXHJcXG4gICAgLW1zLWZsZXgtd3JhcDogd3JhcDtcXHJcXG4gICAgZmxleC13cmFwOiB3cmFwO1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyW2xhbmc9XFxcImZyXFxcIl0gLnNlY3VraXQtZGlhbG9nIC5icm93c2VyLWd1aWRlLXdyYXBwZXIgLmJyb3dzZXItZ3VpZGUtY29udGVudHMgLmRldGFpbC1ndWlkZS13cmFwcGVyIC5vcGVuLWRldGFpbC1ndWlkZS13cmFwcGVyIC50ZXh0IHtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcXHJcXG4gICAgd2lkdGg6IDI2MnB4O1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIGZvbnQtc2l6ZTogMTFweDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlcltsYW5nPVxcXCJmclxcXCJdIC53ZWJucGtpLXdyYXBwZXIgLnBmeC1wYXNzd29yZC13cmFwcGVyIC5wZngtcGFzc3dvcmQtaGVhZGVyIHNwYW4ge1xcclxcbiAgICBmb250LXdlaWdodDogNTAwO1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyW2xhbmc9XFxcImZyXFxcIl0gLmJyb3dzZXItZGV0YWlsLWd1aWRlIHtcXHJcXG4gICAgaGVpZ2h0OiA3OTdweDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlcltsYW5nPVxcXCJmclxcXCJdIC5pY29uLWJyb3dzZXIge1xcclxcbiAgICBtYXJnaW4tdG9wOiA0cHg7XFxyXFxufVxcclxcblxcclxcblxcclxcbi8qIGtvICovXFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlcltsYW5nPVxcXCJrb1xcXCJdIC5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIC5icm93c2VyLWd1aWRlLWNvbnRlbnRzIC5icm93c2VyLWd1aWRlLXN0ZXBzLXdyYXBwZXIgLnN0ZXAtd3JhcHBlciB7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDdweDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlcltsYW5nPVxcXCJrb1xcXCJdIGgxLFxcclxcbiNzZWN1a2l0LXdyYXBwZXJbbGFuZz1cXFwia29cXFwiXSBoMixcXHJcXG4jc2VjdWtpdC13cmFwcGVyW2xhbmc9XFxcImtvXFxcIl0gaDMsXFxyXFxuI3NlY3VraXQtd3JhcHBlcltsYW5nPVxcXCJrb1xcXCJdIGg0LFxcclxcbiNzZWN1a2l0LXdyYXBwZXJbbGFuZz1cXFwia29cXFwiXSBoNSxcXHJcXG4jc2VjdWtpdC13cmFwcGVyW2xhbmc9XFxcImtvXFxcIl0gaDYge1xcclxcbiAgICBmb250LXdlaWdodDogYm9sZDtcXHJcXG4gICAgbWFyZ2luLXRvcDogMDtcXHJcXG4gICAgbWFyZ2luLWJvdHRvbTogMC44M2VtO1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyW2xhbmc9XFxcImtvXFxcIl0gLnNlY3VraXQtZGlhbG9nIC5zZWxlY3QtY2VydGlmaWNhdGUtd3JhcHBlciAuc2VsZWN0LWNlcnRpZmljYXRlLWhlYWRlciBoMSB7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkICFpbXBvcnRhbnQ7XFxyXFxufVxcclxcblxcclxcbiNzZWN1a2l0LXdyYXBwZXJbbGFuZz1cXFwia29cXFwiXSAuc2VjdWtpdC1kaWFsb2cgLmJyb3dzZXItZ3VpZGUtd3JhcHBlciAuYnJvd3Nlci1ndWlkZS1oZWFkZXIgaDEge1xcclxcbiAgICBjbGVhcjogYm90aDtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQgIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlcltsYW5nPVxcXCJrb1xcXCJdIC53ZWJucGtpLXdyYXBwZXIgLnBmeC1wYXNzd29yZC13cmFwcGVyIHtcXHJcXG4gICAgbWFyZ2luLWxlZnQ6IC0xNTBweDtcXHJcXG4gICAgd2lkdGg6IDMwMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyW2xhbmc9XFxcImtvXFxcIl0gLndlYm5wa2ktd3JhcHBlciAucGZ4LXBhc3N3b3JkLXdyYXBwZXIgLnBmeC1wYXNzd29yZC1ib2R5IHtcXHJcXG4gICAgbWFyZ2luLWJvdHRvbTogMjVweDtcXHJcXG59XFxyXFxuXFxyXFxuI3NlY3VraXQtd3JhcHBlcltsYW5nPVxcXCJrb1xcXCJdIC5zZWN1a2l0LWRpYWxvZyAuYnJvd3Nlci1ndWlkZS13cmFwcGVyIC5icm93c2VyLWd1aWRlLWhlYWRlciAudGV4dCBoMiB7XFxyXFxuICAgIHdpZHRoOiAyMjZweCAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyW2xhbmc9XFxcImtvXFxcIl0gLnNlY3VraXQtZGlhbG9nIC5icm93c2VyLWd1aWRlLXdyYXBwZXIgLmJyb3dzZXItZ3VpZGUtY29udGVudHMgaHIge1xcclxcbiAgICBtYXJnaW46IDEzcHggLTI1cHggNXB4IC0yNXB4O1xcclxcbn1cXHJcXG5cXHJcXG4jc2VjdWtpdC13cmFwcGVyW2xhbmc9XFxcImtvXFxcIl0gLnNlY3VraXQtZGlhbG9nIC5icm93c2VyLWd1aWRlLXdyYXBwZXIgLmJyb3dzZXItZ3VpZGUtY29udGVudHMgLmJyb3dzZXItZ3VpZGUtc3RlcHMtd3JhcHBlciAuc3RlcC13cmFwcGVyIHsgICAgXFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDEwcHhcXHJcXG59XFxyXFxuXFxyXFxuLnN3YWwyLWNvbnRhaW5lciB7XFxyXFxuICAgIHotaW5kZXg6IDEwMDAwICFpbXBvcnRhbnQ7XFxyXFxufVxcclxcblxcclxcbi5zd2FsMi10aXRsZSB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMS4yMjVlbSAhaW1wb3J0YW50O1xcclxcbiAgICBtYXJnaW46IDAgMCAxZW0gIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuLnN3YWwyLWNvbnRlbnQge1xcclxcbiAgICBmb250LXNpemU6IDAuODc1ZW0gIWltcG9ydGFudDtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IDYwMCAhaW1wb3J0YW50O1xcclxcbiAgICBsZXR0ZXItc3BhY2luZzogMC4wMTI1ZW0gIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuLnN3YWwyLXBvcHVwIHtcXHJcXG4gICAgd2lkdGg6IDI2ZW0gIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuXCIsIFwiXCJdKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1cmwsIG5lZWRRdW90ZXMpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVyc2NvcmUtZGFuZ2xlLCBuby1wYXJhbS1yZWFzc2lnblxuICB1cmwgPSB1cmwuX19lc01vZHVsZSA/IHVybC5kZWZhdWx0IDogdXJsO1xuXG4gIGlmICh0eXBlb2YgdXJsICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB1cmw7XG4gIH0gLy8gSWYgdXJsIGlzIGFscmVhZHkgd3JhcHBlZCBpbiBxdW90ZXMsIHJlbW92ZSB0aGVtXG5cblxuICBpZiAoL15bJ1wiXS4qWydcIl0kLy50ZXN0KHVybCkpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICB1cmwgPSB1cmwuc2xpY2UoMSwgLTEpO1xuICB9IC8vIFNob3VsZCB1cmwgYmUgd3JhcHBlZD9cbiAgLy8gU2VlIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3MtdmFsdWVzLTMvI3VybHNcblxuXG4gIGlmICgvW1wiJygpIFxcdFxcbl0vLnRlc3QodXJsKSB8fCBuZWVkUXVvdGVzKSB7XG4gICAgcmV0dXJuIFwiXFxcIlwiLmNvbmNhdCh1cmwucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpLnJlcGxhY2UoL1xcbi9nLCAnXFxcXG4nKSwgXCJcXFwiXCIpO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiMTFlYWJjYTIyNTEzMjVjZmM1NTg5YzljNmZiNTdiNDYudHRmXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiY2JlZGQ1MGZjYzEzZjkyNDA1ZDQ1MGFmMzg1ZDdjNWIucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiOWYzMzE0NDQyNjg3M2IxZGIwZDM1MmIxYWRiMDQ0ZDIucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYWEyYWFjYzlhODQwYmI5Mzg4NjYyYTU4Zjc5NDI3OGQucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiMzkyMDYxYTI5ODkzOGNiMDhhNGMxNTg1ZjFkNGJjMzYucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiNzM5Y2ExOTA2MmIzYWUwYTk1ZGM0OGJhNzYyZTNmNzIucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYzY5Y2Q4Mzc1YTJkYWU3ZmM4NjQxZTQyZjExNWMwMzAucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYTUyNGNhM2MwMzQyYTE4OGExYWQzMzk2ODMwNzBmZWEucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiNGJhNGI3MTZkNDNmNTkzM2RjZTc5NTAyYTQyM2IxYWEucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiNDkzMzZiOTcxYTViZjQyMjUzMTJiMTc2ZmIxMTc2NjQucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiNTc1ZjQwZmVlMGY2MzdmZjBjZGJhOWEzZmQ2ODNlZDgucG5nXCI7IiwidmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2tleWJvYXJkLWJhc2ljLmNzc1wiKTtcblxuaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG59XG5cbnZhciBvcHRpb25zID0ge31cblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYgKGNvbnRlbnQubG9jYWxzKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG59XG4iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKShmYWxzZSk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi8qICoqKiBrZXlib2FyZCBsaWdodCB0aGVtZSAqKipcXHJcXG4gIGZvciB3aGVuIGpRdWVyeSBVSSB0aGVtZXMgYXJlIG5vdCBiZWluZyB1c2VkXFxyXFxuICBTZWUgaHR0cHM6Ly9qc2ZpZGRsZS5uZXQvTW90dGllL2pzaDAzNzdrL1xcclxcbiAqL1xcclxcbi51aS1rZXlib2FyZCB7XFxyXFxuICAgIGJhY2tncm91bmQ6ICNGRkY7XFxyXFxuICAgIGJvcmRlcjogMXB4IHNvbGlkICMyOTI5Mjk7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XFxyXFxuICAgIGJveC1zaGFkb3c6IDJweCAycHggMnB4IGdyYXk7XFxyXFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG4gICAgZm9udC1zaXplOjE4cHg7XFxyXFxuICAgIHBhZGRpbmc6IC4zZW07XFxyXFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gICAgbGVmdDogMDtcXHJcXG4gICAgdG9wOiAwO1xcclxcbiAgICB6LWluZGV4OiA4NjAwMDtcXHJcXG4gICAgLyogc2VlIGlzc3VlICM0ODQgKi9cXHJcXG4gICAgLW1zLXRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uO1xcclxcbiAgICB0b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbjtcXHJcXG59XFxyXFxuXFxyXFxuLnVpLWtleWJvYXJkMiB7XFxyXFxuXFx0LyogYWRqdXN0IG92ZXJhbGwga2V5Ym9hcmQgc2l6ZSB1c2luZyBcXFwiZm9udC1zaXplXFxcIiAqL1xcclxcblxcdGZvbnQtc2l6ZTogMTRweDtcXHJcXG5cXHR0ZXh0LWFsaWduOiBjZW50ZXI7XFxyXFxuXFx0YmFja2dyb3VuZDogI2ZlZmVmZTtcXHJcXG5cXHRib3JkZXI6IDFweCBzb2xpZCAjYWFhO1xcclxcblxcdHBhZGRpbmc6IDRweDtcXHJcXG5cXHJcXG5cXHQvKiBpbmNsdWRlIHRoZSBmb2xsb3dpbmcgc2V0dGluZyB0byBwbGFjZSB0aGVcXHJcXG5cXHRrZXlib2FyZCBhdCB0aGUgYm90dG9tIG9mIHRoZSBicm93c2VyIHdpbmRvdyAqL1xcclxcblxcdHdpZHRoOiAxMDAlO1xcclxcblxcdGhlaWdodDogYXV0bztcXHJcXG5cXHRsZWZ0OiAwcHg7XFxyXFxuXFx0dG9wOiBhdXRvO1xcclxcblxcdGJvdHRvbTogMHB4O1xcclxcblxcdHBvc2l0aW9uOiBmaXhlZDtcXHJcXG5cXHR3aGl0ZS1zcGFjZTogbm93cmFwO1xcclxcblxcdG92ZXJmbG93LXg6IGF1dG87XFxyXFxuXFx0Lyogc2VlIGlzc3VlICM0ODQgKi9cXHJcXG5cXHQtbXMtdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XFxyXFxuXFx0dG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XFxyXFxufVxcclxcbi51aS1rZXlib2FyZC1oYXMtZm9jdXMge1xcclxcblxcdHotaW5kZXg6IDg2MDAxO1xcclxcbn1cXHJcXG4udWkta2V5Ym9hcmQtYnV0dG9uIHtcXHJcXG5cXHRib3JkZXI6IDFweCBzb2xpZCAjYWFhO1xcclxcblxcdHBhZGRpbmc6IDAgMC41ZW07XFxyXFxuXFx0bWFyZ2luOiAxcHg7XFxyXFxuXFx0bWluLXdpZHRoOiAzZW07XFxyXFxuXFx0aGVpZ2h0OiAzZW07XFxyXFxuXFx0bGluZS1oZWlnaHQ6IDNlbTtcXHJcXG5cXHR2ZXJ0aWNhbC1hbGlnbjogdG9wO1xcclxcblxcdGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmO1xcclxcblxcdGNvbG9yOiAjMzMzO1xcclxcblxcdHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG5cXHRib3JkZXItcmFkaXVzOiA1cHg7XFxyXFxuXFx0LXdlYmtpdC1ib3gtc2hhZG93OiAxcHggMXB4IDNweCAwIHJnYmEoMCwgMCwgMCwgMC41KTtcXHJcXG5cXHRib3gtc2hhZG93OiAxcHggMXB4IDNweCAwIHJnYmEoMCwgMCwgMCwgMC41KTtcXHJcXG5cXHRiYWNrZ3JvdW5kOiB3aGl0ZTtcXHJcXG5cXHRiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCgtOTBkZWcsIHdoaXRlIDAlLCAjZTNlM2UzIDEwMCUpO1xcclxcblxcdGJhY2tncm91bmQtaW1hZ2U6ICAgICAgICAgbGluZWFyLWdyYWRpZW50KC05MGRlZywgd2hpdGUgMCUsICNlM2UzZTMgMTAwJSk7XFxyXFxuXFx0Y3Vyc29yOiBwb2ludGVyO1xcclxcblxcdG92ZXJmbG93OiBoaWRkZW47XFxyXFxuXFx0LW1vei11c2VyLWZvY3VzOiBpZ25vcmU7XFxyXFxufVxcclxcbi51aS1rZXlib2FyZC1idXR0b246bm90KFtkaXNhYmxlZF0pOmhvdmVyIHtcXHJcXG5cXHRiYWNrZ3JvdW5kOiAjZWVlO1xcclxcblxcdGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KC05MGRlZywgI2YyZjJmMiAwJSwgI2QzZDNkMyAxMDAlKTtcXHJcXG5cXHRiYWNrZ3JvdW5kLWltYWdlOiAgICAgICAgIGxpbmVhci1ncmFkaWVudCgtOTBkZWcsICNmMmYyZjIgMCUsICNkM2QzZDMgMTAwJSk7XFxyXFxufVxcclxcbi51aS1rZXlib2FyZC1idXR0b246bm90KFtkaXNhYmxlZF0pOmFjdGl2ZSB7XFxyXFxuXFx0YmFja2dyb3VuZDogI2RkZDtcXHJcXG5cXHRiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCgtOTBkZWcsICNlNWU1ZTUgMCUsICNkM2QzZDMgMTAwJSk7XFxyXFxuXFx0YmFja2dyb3VuZC1pbWFnZTogICAgICAgICBsaW5lYXItZ3JhZGllbnQoLTkwZGVnLCAjZTVlNWU1IDAlLCAjZDNkM2QzIDEwMCUpO1xcclxcbn1cXHJcXG4udWkta2V5Ym9hcmQtYnV0dG9uIHNwYW4ge1xcclxcblxcdGRpc3BsYXk6IGJsb2NrO1xcclxcblxcdHdpZHRoOiAxMDAlO1xcclxcblxcdGZvbnQtc2l6ZTogMS4yZW07XFxyXFxuXFx0dGV4dC1hbGlnbjogY2VudGVyO1xcclxcbn1cXHJcXG4vKiBtYWtlIGFjdGlvbiBrZXlzIGV4dHJhLXdpZGUgKi9cXHJcXG4udWkta2V5Ym9hcmQtYWN0aW9ua2V5Om5vdCgudWkta2V5Ym9hcmQtZGVjKTpub3QoLnVpLWtleWJvYXJkLWNvbWJvKSB7XFxyXFxuXFx0bWluLXdpZHRoOiA2ZW07XFxyXFxufVxcclxcbi51aS1rZXlib2FyZC1zcGFjZSB7XFxyXFxuXFx0d2lkdGg6IDE1ZW07XFxyXFxufVxcclxcbi51aS1rZXlib2FyZC1hY3Rpb25rZXk6bm90KC51aS1rZXlib2FyZC1kZWMpOm5vdCgudWkta2V5Ym9hcmQtY29tYm8pIHNwYW4ge1xcclxcblxcdHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG5cXHR0b3A6IDBweDtcXHJcXG5cXHRsZWZ0OiAwcHg7XFxyXFxufVxcclxcbi51aS1rZXlib2FyZC1wbGFjZWhvbGRlciB7XFxyXFxuXFx0Y29sb3I6ICM4ODg7XFxyXFxufVxcclxcbi8qIGRpc2FibGVkIG9yIHJlYWRvbmx5IGlucHV0cywgb3IgdXNlIGlucHV0W2Rpc2FibGVkPSdkaXNhYmxlZCddIHsgY29sb3I6ICNmMDA7IH0gKi9cXHJcXG4udWkta2V5Ym9hcmQtbm9rZXlib2FyZCB7XFxyXFxuXFx0Y29sb3I6ICM4ODg7XFxyXFxuXFx0Ym9yZGVyLWNvbG9yOiAjODg4O1xcclxcbn1cXHJcXG4udWkta2V5Ym9hcmQtc3BhY2VyIHtcXHJcXG5cXHRkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuXFx0d2lkdGg6IDFweDtcXHJcXG5cXHRoZWlnaHQ6IDA7XFxyXFxuXFx0Y3Vyc29yOiBkZWZhdWx0O1xcclxcbn1cXHJcXG4udWkta2V5Ym9hcmQtTkJTUCBzcGFuLCAudWkta2V5Ym9hcmQtWldTUCBzcGFuLCAudWkta2V5Ym9hcmQtWldOSiBzcGFuLCAudWkta2V5Ym9hcmQtWldKIHNwYW4sXFxyXFxuLnVpLWtleWJvYXJkLUxSTSBzcGFuLCAudWkta2V5Ym9hcmQtUkxNIHNwYW4ge1xcclxcblxcdGZvbnQtc2l6ZTogMC41ZW07XFxyXFxuXFx0bGluZS1oZWlnaHQ6IDEuNWVtO1xcclxcblxcdHdoaXRlLXNwYWNlOiBub3JtYWw7XFxyXFxufVxcclxcblxcclxcbi8qIGNvbWJvIGtleSBzdHlsaW5nIC0gdG9nZ2xlcyBkaWFjcml0aWNzIG9uL29mZiAqL1xcclxcbi51aS1rZXlib2FyZC1idXR0b24udWkta2V5Ym9hcmQtY29tYm8udWktc3RhdGUtZGVmYXVsdCB7XFxyXFxuXFx0LXdlYmtpdC1ib3gtc2hhZG93OiAxcHggMXB4IDNweCAwIHJnYmEoMjEzLCAxMzMsIDE4LCAwLjUpO1xcclxcblxcdCAgICAgICAgYm94LXNoYWRvdzogMXB4IDFweCAzcHggMCByZ2JhKDIxMywgMTMzLCAxOCwgMC41KTtcXHJcXG5cXHRib3JkZXItY29sb3I6ICNkNTg1MTI7XFxyXFxufVxcclxcbi51aS1rZXlib2FyZC1idXR0b24udWkta2V5Ym9hcmQtY29tYm8udWktc3RhdGUtYWN0aXZlIHtcXHJcXG5cXHQtd2Via2l0LWJveC1zaGFkb3c6IDFweCAxcHggM3B4IDAgcmdiYSgzOCwgMTU0LCAxODgsIDAuNSk7XFxyXFxuXFx0ICAgICAgICBib3gtc2hhZG93OiAxcHggMXB4IDNweCAwIHJnYmEoMzgsIDE1NCwgMTg4LCAwLjUpO1xcclxcblxcdGJvcmRlci1jb2xvcjogIzI2OWFiYztcXHJcXG59XFxyXFxuLyogKGluKXZhbGlkIGlucHV0cyAqL1xcclxcbmJ1dHRvbi51aS1rZXlib2FyZC1hY2NlcHQudWkta2V5Ym9hcmQtdmFsaWQtaW5wdXQge1xcclxcblxcdC13ZWJraXQtYm94LXNoYWRvdzogMXB4IDFweCAzcHggMCByZ2JhKDU3LCAxMzIsIDU3LCAwLjUpO1xcclxcblxcdCAgICAgICAgYm94LXNoYWRvdzogMXB4IDFweCAzcHggMCByZ2JhKDU3LCAxMzIsIDU3LCAwLjUpO1xcclxcblxcdGJvcmRlci1jb2xvcjogIzM5ODQzOTtcXHJcXG59XFxyXFxuYnV0dG9uLnVpLWtleWJvYXJkLWFjY2VwdC51aS1rZXlib2FyZC12YWxpZC1pbnB1dDpub3QoW2Rpc2FibGVkXSk6aG92ZXIge1xcclxcblxcdGJvcmRlci1jb2xvcjogIzRjYWU0YztcXHJcXG59XFxyXFxuYnV0dG9uLnVpLWtleWJvYXJkLWFjY2VwdC51aS1rZXlib2FyZC1pbnZhbGlkLWlucHV0IHtcXHJcXG5cXHQtd2Via2l0LWJveC1zaGFkb3c6IDFweCAxcHggM3B4IDAgcmdiYSgxNzIsIDQxLCAzNywgMC41KTtcXHJcXG5cXHQgICAgICAgIGJveC1zaGFkb3c6IDFweCAxcHggM3B4IDAgcmdiYSgxNzIsIDQxLCAzNywgMC41KTtcXHJcXG5cXHRib3JkZXItY29sb3I6ICNhYzI5MjU7XFxyXFxufVxcclxcbmJ1dHRvbi51aS1rZXlib2FyZC1hY2NlcHQudWkta2V5Ym9hcmQtaW52YWxpZC1pbnB1dDpub3QoW2Rpc2FibGVkXSk6aG92ZXIge1xcclxcblxcdGJvcmRlci1jb2xvcjogI2Q0M2YzYTtcXHJcXG59XFxyXFxuLyogdW5sb2NrZWQgaWNvbiAoa2V5Ym9hcmQgZW5hYmxlZCkgKi9cXHJcXG5idXR0b24udWkta2V5Ym9hcmQtdG9nZ2xlIHNwYW4ge1xcclxcblxcdHdpZHRoOiAuOWVtO1xcclxcblxcdGhlaWdodDogLjllbTtcXHJcXG5cXHRkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuXFx0YmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcXHJcXG5cXHRiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyO1xcclxcblxcdGJhY2tncm91bmQtc2l6ZTogY29udGFpbjtcXHJcXG5cXHQvKiBsaWdodCB0aGVtZSB1bmxvY2tlZCBpY29uIC0gZmlsbDogIzExMSAqL1xcclxcblxcdGJhY2tncm91bmQtaW1hZ2U6IHVybCgnZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l4TUNJZ2FHVnBaMmgwUFNJeE1DSWdabWxzYkQwaUl6RXhNU0krUEhCaGRHZ2daRDBpVFRndU55dzBMalJJTnk0MVNEVXVNSFl0TVM0NVl6QXRNUzQwTFRFdU1TMHlMalV0TWk0MUxUSXVOV010TVM0MExEQXRNaTQxTERFdU1TMHlMalVzTWk0MWRqRXVPV2d4TGpJZ2RpMHhMamxqTUMwd0xqY3NNQzQyTFRFdU1pd3hMakl0TVM0eWN6RXVNaXd3TGpZc01TNHlMREV1TW5ZeExqbGpMVEF1Tnl3d0xURXVNaXd3TGpZdE1TNHlMREV1TWxZNExqZ2dZekFzTUM0M0xEQXVOaXd4TGpJc01TNHlMREV1TW1nMUxqQkRPUzQwTERFd0xERXdMRGt1TkN3eE1DdzRMamhXTlM0MlF6RXdMRFV1TUN3NUxqUXNOQzQwTERndU9DdzBMalI2SUUwMkxqWXNOeTQwZGpFdU1DQmpNQ3d3TGpJdE1DNHhMREF1TXkwd0xqTXNNQzR6VXpZdU1DdzRMallzTmk0d0xEZ3VORlkzTGpSakxUQXVNaTB3TGpFdE1DNHpMVEF1TXkwd0xqTXRNQzQxWXpBdE1DNHpMREF1TXkwd0xqWXNNQzQyTFRBdU5pQlROaTQ1TERZdU5pdzJMamtzTmk0NVF6WXVPU3czTGpFc05pNDRMRGN1TXl3MkxqWXNOeTQwZWlJdlBqd3ZjM1puUGc9PScpO1xcclxcbn1cXHJcXG4vKiBsb2NrZWQgaWNvbiAoa2V5Ym9hcmQgZGlzYWJsZWQpICovXFxyXFxuYnV0dG9uLnVpLWtleWJvYXJkLXRvZ2dsZS51aS1rZXlib2FyZC1kaXNhYmxlZCBzcGFuIHtcXHJcXG5cXHQvKiBsaWdodCB0aGVtZSBsb2NrZWQgaWNvbiAtIGZpbGw6ICMxMTEgKi9cXHJcXG5cXHRiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJeE1DSWdhR1ZwWjJoMFBTSXhNQ0lnWm1sc2JEMGlJekV4TVNJK1BIQmhkR2dnWkQwaVRUY3VOQ0EwTGpSV01pNDFZekF0TVM0MExURXVNUzB5TGpVdE1pNDFMVEl1TldNdE1TNDBJREF0TWk0MUlERXVNUzB5TGpVZ01pNDFkakV1T1NCakxUQXVOeUF3TFRFdU1pQXdMalV0TVM0eUlERXVNbll6TGpGRE1TNHpJRGt1TkNBeExqZ2dNVEFnTWk0MUlERXdhRFF1T1dNd0xqY2dNQ0F4TGpJdE1DNDJJREV1TWkweExqSldOUzQySUVNNExqY2dOQzQ1SURndU1TQTBMalFnTnk0MElEUXVOSG9nVFRVdU15QTNMalIyTVM0d1l6QWdNQzR5TFRBdU1TQXdMak10TUM0eklEQXVNMk10TUM0eUlEQXRNQzR6TFRBdU1TMHdMak10TUM0elZqY3VOQ0JqTFRBdU1pMHdMakV0TUM0ekxUQXVNeTB3TGpNdE1DNDFZekF0TUM0eklEQXVNeTB3TGpZZ01DNDJMVEF1Tm1Nd0xqTWdNQ0F3TGpZZ01DNHpJREF1TmlBd0xqWWdRelV1TmlBM0xqRWdOUzQxSURjdU15QTFMak1nTnk0MGVpQk5OaTR5SURRdU5FZ3pMamRXTWk0MVl6QXRNQzQzSURBdU5TMHhMaklnTVM0eUxURXVNbU13TGpjZ01DQXhMaklnTUM0MklERXVNaUF4TGpJZ1ZqUXVOSG9pTHo0OEwzTjJaejQ9Jyk7XFxyXFxufVxcclxcbi51aS1rZXlib2FyZC51aS1rZXlib2FyZC1kaXNhYmxlZCBidXR0b246bm90KC51aS1rZXlib2FyZC10b2dnbGUpLCAudWkta2V5Ym9hcmQudWkta2V5Ym9hcmQtZGlzYWJsZWQgaW5wdXQge1xcclxcblxcdG9wYWNpdHk6IDAuNTtcXHJcXG59XFxyXFxuXFxyXFxuLyoqKiBBbHQtS2V5cyBQb3B1cCBleHRlbnNpb24gKioqL1xcclxcbi8qIGNsaWNrYWJsZSBvdmVybGF5IG9uIHRvcCBvZiBrZXlib2FyZCB0byBoaWRlIHRoZSBwb3B1cCAqL1xcclxcbi51aS1rZXlib2FyZC1vdmVybGF5IHtcXHJcXG5cXHRwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuXFx0dG9wOiAwO1xcclxcblxcdGxlZnQ6IDA7XFxyXFxuXFx0Ym90dG9tOiAwO1xcclxcblxcdHJpZ2h0OiAwO1xcclxcblxcdGJhY2tncm91bmQ6IHJnYmEoMjM4LCAyMzgsIDIzOCwgMC41KTtcXHJcXG59XFxyXFxuLyogdGhlIGFjdHVhbCBwb3B1cCBzdHlsaW5nLCBjbGFzcyBuYW1lcyBmcm9tIHRoZSBjc3MuY29udGFpbmVyIG9wdGlvbiBhcmUgYWxzbyBhZGRlZCAqL1xcclxcbi51aS1rZXlib2FyZC1wb3B1cCB7XFxyXFxuXFx0ZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcblxcdC8qIGRlZmF1bHQgYnV0dG9ucyBhcmUgMmVtIHdpZGUgKyAuMWVtIG1hcmdpbiBvbiBlaXRoZXIgc2lkZSAoc2V0IGluIC51aS1rZXlib2FyZC1idXR0b24gZGVmaW5pdGlvbik7XFxyXFxuXFx0c28gdXNlIG11bHRpcGxlcyBvZiAyLjJlbVxcdGZvciBhIG1heC13aWR0aCBpZiB5b3UgZG9uJ3Qgd2FudCBhbnkgZXh0cmEgd2hpdGUgc3BhY2Ugb24gdGhlIHNpZGVzLFxcclxcblxcdGUuZy4gNSBidXR0b25zICogMi4yZW0gPSAxMWVtLCA2IGJ1dHRvbnMgKiAyLjJlbSA9IDEzLjJlbSwgZXRjICovXFxyXFxuXFx0bWF4LXdpZHRoOiAyMmVtO1xcclxcblxcdC8qIDEwIGJ1dHRvbnMgKi9cXHJcXG59XFxyXFxuLnVpLWtleWJvYXJkLnVpLWtleWJvYXJkLXBvcHVwLW9wZW4gLnVpLWtleWJvYXJkLWtleXNldCAudWkta2V5Ym9hcmQtYnV0dG9uIHtcXHJcXG5cXHQvKiBEaXNhYmxlIGtleXMgdW5kZXIgb3ZlcmxheSB3aGlsZSBwb3B1cCBpcyBvcGVuIC0gc2VlICM2NTQgKi9cXHJcXG5cXHRwb2ludGVyLWV2ZW50czogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuLyoqKiBDYXJldCBleHRlbnNpb24gZGVmaW5pdGlvbiAqKiovXFxyXFxuLyogbWFyZ2luLXRvcCA9PiBpcyBhZGRlZCB0byB0aGUgY2FyZXQgaGVpZ2h0ICh0b3AgJiBib3R0b20pICovXFxyXFxuLnVpLWtleWJvYXJkLWNhcmV0IHtcXHJcXG5cXHRiYWNrZ3JvdW5kOiAjYzAwO1xcclxcblxcdHdpZHRoOiAxcHg7XFxyXFxuXFx0bWFyZ2luLXRvcDogM3B4O1xcclxcbn1cXHJcXG5cXHJcXG4vKioqIEV4dGVuZGVyIGtleWJvYXJkIGV4dGVuc2lvbiAqKiovXFxyXFxuZGl2LnVpLWtleWJvYXJkLWV4dGVuZGVyIHtcXHJcXG5cXHRtYXJnaW4tbGVmdDogNXB4O1xcclxcblxcdG1hcmdpbi1yaWdodDogMTBweDtcXHJcXG59XFxyXFxuYnV0dG9uLnVpLWtleWJvYXJkLWV4dGVuZGVyIHNwYW4ge1xcclxcblxcdHdpZHRoOiAuOWVtO1xcclxcblxcdGhlaWdodDogLjllbTtcXHJcXG5cXHRkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuXFx0bWFyZ2luLWJvdHRvbTogM3B4O1xcclxcblxcdGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XFxyXFxuXFx0YmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcjtcXHJcXG5cXHRiYWNrZ3JvdW5kLXNpemU6IGNvbnRhaW47XFxyXFxuXFx0LyogbGlnaHQgdGhlbWUgZXh0ZW5kZXIgaWNvbiAtIGZpbGw6ICMxMTEgKi9cXHJcXG5cXHRiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJeE5pSWdhR1ZwWjJoMFBTSXhOaUlnYzNSNWJHVTlJbVpwYkd3Nkl6RXhNU0krUEdjK1BIQmhkR2dnYzNSNWJHVTlJbVpwYkd3NmJtOXVaVHR6ZEhKdmEyVTZJekV4TVNJZ1pEMGlUU0F3TGpVc05DNDFJREUxTGpVc05DNDFJREUxTGpVc01UVXVOU0F3TGpVc01UVXVOU0JhSWo0OEwzQmhkR2crUEhKbFkzUWdkMmxrZEdnOUlqSWlJR2hsYVdkb2REMGlNaUlnZUQwaU1pSWdlVDBpTmlJK1BDOXlaV04wUGp4eVpXTjBJSGRwWkhSb1BTSXlJaUJvWldsbmFIUTlJaklpSUhnOUlqVWlJSGs5SWpZaVBqd3ZjbVZqZEQ0OGNtVmpkQ0IzYVdSMGFEMGlNaUlnYUdWcFoyaDBQU0l5SWlCNFBTSTRJaUI1UFNJMklqNDhMM0psWTNRK1BIQmhkR2dnWkQwaWJTQXhNU3cySURNc01DQXdMRFVnTFRJc01DQXdMQzB6SUMweExEQWdlaUkrUEM5d1lYUm9Qanh5WldOMElIZHBaSFJvUFNJeUlpQm9aV2xuYUhROUlqSWlJSGc5SWpFeUlpQjVQU0l4TWlJK1BDOXlaV04wUGp4eVpXTjBJSGRwWkhSb1BTSTJJaUJvWldsbmFIUTlJaklpSUhnOUlqVWlJSGs5SWpFeUlqNDhMM0psWTNRK1BISmxZM1FnZDJsa2RHZzlJaklpSUdobGFXZG9kRDBpTWlJZ2VEMGlPU0lnZVQwaU9TSStQQzl5WldOMFBqeHlaV04wSUhkcFpIUm9QU0l5SWlCb1pXbG5hSFE5SWpJaUlIZzlJallpSUhrOUlqa2lQand2Y21WamRENDhjbVZqZENCM2FXUjBhRDBpTWlJZ2FHVnBaMmgwUFNJeUlpQjRQU0l5SWlCNVBTSXhNaUkrUEM5eVpXTjBQanh5WldOMElIZHBaSFJvUFNJeklpQm9aV2xuYUhROUlqSWlJSGc5SWpJaUlIazlJamtpUGp3dmNtVmpkRDQ4TDJjK1BDOXpkbWMrJyk7XFxyXFxufVxcclxcblwiLCBcIlwiXSk7XG4iLCJmdW5jdGlvbiBib3hlcygpIHtcclxuICAgIHZhciBvYmplY3QgPSB7fTtcclxuXHJcbiAgICBvYmplY3QubWFpbiA9ICc8ZGl2IGNsYXNzPVwic2VjdWtpdC1kaWFsb2dcIiBpZD1cInNlY3VraXQtZGlhbG9nXCI+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJzZWxlY3QtY2VydGlmaWNhdGUtd3JhcHBlclwiPicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwic2VsZWN0LWNlcnRpZmljYXRlLWhlYWRlclwiPicgK1xyXG4gICAgICAgICc8aDE+JyArIEtJQ0FfQ09SUFVTLlNFTEVDVF9DRVJUX0hFQURFUiArICc8L2gxPicgK1xyXG4gICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAnPGRpdiBjbGFzcz1cImJhbm5lci13cmFwcGVyXCI+JyArXHJcbiAgICAgICAgJzxpbWcgc3JjPVwiJyArIHdlYm5wa2lfY29uZmlnLnBhdGggKyAnL2Fzc2V0cy9iYW5uZXIvZGVmYXVsdF9iYW5uZXIucG5nXCIgYWx0PVwiQSBXb3JsZCBvZiBUcnVzdCBLSUNBXCI+JyArXHJcbiAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiY29udGVudC13cmFwcGVyXCI+JyArXHJcbiAgICAgICAgJzxhIGNsYXNzPVwia2ljYS1idXR0b25cIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgb25jbGljaz1cIktJQ0FfRElBTE9HLm9wZW5HdWlkZSgpXCI+JyArXHJcbiAgICAgICAgJzxpIGNsYXNzPVwiaWNvbi1xdWVzdGlvblwiPjwvaT4nICtcclxuICAgICAgICAnPHNwYW4+JyArIEtJQ0FfQ09SUFVTLkJVVFRPTl9PUEVOX0dVSURFICsgJzwvc3Bhbj4nICtcclxuICAgICAgICAnPC9hPicgK1xyXG4gICAgICAgICc8aDIgY2xhc3M9XCJjZXJ0LWxpc3QtbGFiZWxcIj4nICsgS0lDQV9DT1JQVVMuQ0VSVF9UQUJMRV9MQUJFTCArICc8L2gyPicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiY2VydC1saXN0XCIgb25kcmFnb3Zlcj1cIktJQ0FfRElBTE9HLm9uRHJhZ092ZXJDZXJ0KGV2ZW50KVwiIG9uZHJhZ2xlYXZlPVwiS0lDQV9ESUFMT0cub25EcmFnTGVhdmVDZXJ0KGV2ZW50KVwiIG9uZHJvcD1cIktJQ0FfRElBTE9HLm9uRHJvcENlcnQoZXZlbnQpXCI+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJkcm9wem9uZS13cmFwcGVyIGtpY2EtZC1ub25lXCIgaWQ9XCJkcm9wem9uZS13cmFwcGVyXCI+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJkcm9wem9uZS1pY29uXCI+PC9kaXY+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJkcm9wem9uZS1jb21tZW50XCI+JyArXHJcbiAgICAgICAgJzxzcGFuIGNsYXNzPVwiXCJkcm9wem9uZS1jb21tZW50LXRleHQ+JyArIEtJQ0FfQ09SUFVTLkRST1BaT05FX1RFWFRfMSArICc8L3NwYW4+JyArXHJcbiAgICAgICAgJzxzcGFuIGNsYXNzPVwiXCJkcm9wem9uZS1jb21tZW50LXRleHQ+JyArIEtJQ0FfQ09SUFVTLkRST1BaT05FX1RFWFRfMiArICc8L3NwYW4+JyArXHJcbiAgICAgICAgJzxzcGFuIGNsYXNzPVwiXCJkcm9wem9uZS1jb21tZW50LXRleHQ+JyArIEtJQ0FfQ09SUFVTLkRST1BaT05FX1RFWFRfMyArICc8L3NwYW4+JyArXHJcbiAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAnPHRhYmxlIGlkPVwiY2VydC1saXN0LXRhYmxlXCI+JyArXHJcbiAgICAgICAgJzx0aGVhZD4nICtcclxuICAgICAgICAnPHRyPicgK1xyXG4gICAgICAgICc8dGggc2NvcGU9XCJjb2xcIj4nICtcclxuICAgICAgICAnPHNwYW4+JyArIEtJQ0FfQ09SUFVTLkNFUlRfVEFCTEVfVEhFQUQxICsgJzwvc3Bhbj4nICtcclxuICAgICAgICAnPC90aD4nICtcclxuICAgICAgICAnPHRoIHNjb3BlPVwiY29sXCI+JyArXHJcbiAgICAgICAgJzxzcGFuPicgKyBLSUNBX0NPUlBVUy5DRVJUX1RBQkxFX1RIRUFEMiArICc8L3NwYW4+JyArXHJcbiAgICAgICAgJzwvdGg+JyArXHJcbiAgICAgICAgJzx0aCBzY29wZT1cImNvbFwiPicgK1xyXG4gICAgICAgICc8c3Bhbj4nICsgS0lDQV9DT1JQVVMuQ0VSVF9UQUJMRV9USEVBRDMgKyAnPC9zcGFuPicgK1xyXG4gICAgICAgICc8L3RoPicgK1xyXG4gICAgICAgICc8dGggc2NvcGU9XCJjb2xcIj4nICtcclxuICAgICAgICAnPHNwYW4+JyArIEtJQ0FfQ09SUFVTLkNFUlRfVEFCTEVfVEhFQUQ0ICsgJzwvc3Bhbj4nICtcclxuICAgICAgICAnPC90aD4nICtcclxuICAgICAgICAnPC90cj4nICtcclxuICAgICAgICAnPC90aGVhZD4nICtcclxuICAgICAgICAnPHRib2R5IGlkPVwiY2VydC1saXN0XCI+JyArXHJcbiAgICAgICAgJzwvdGJvZHk+JyArXHJcbiAgICAgICAgJzwvdGFibGU+JyArXHJcbiAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICc8YSBjbGFzcz1cImtpY2EtYnV0dG9uIGJnLWxpZ2h0LWJsdWVcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgb25jbGljaz1cIktJQ0FfRElBTE9HLm9wZW5GaW5kQ2VydCgpO1wiPicgK1xyXG4gICAgICAgICc8aSBjbGFzcz1cImljb24tZmluZC1jZXJ0XCI+PC9pPicgK1xyXG4gICAgICAgICc8c3Bhbj4nICsgS0lDQV9DT1JQVVMuQlVUVE9OX0ZJTkRfQ0VSVElGSUNBVEUgKyAnPC9zcGFuPicgK1xyXG4gICAgICAgICc8L2E+JyArXHJcbiAgICAgICAgJzxoMiBjbGFzcz1cImNlcnQtcGFzc3dvcmQtbGFiZWxcIj4nICsgS0lDQV9DT1JQVVMuQ0VSVF9QV0RfTEFCRUwgKyAnPC9oMj4nICtcclxuICAgICAgICAnPGZvcm0gY2xhc3M9XCJpbnB1dC1wYXNzd29yZC1mb3JtXCIgbmFtZT1cImZvcm1QYXNzd29yZEUyRU1heDhcIiBvbmtleWRvd249XCJyZXR1cm4gZXZlbnQua2V5ICE9IFxcJ0VudGVyXFwnO1wiIGF1dG9jb21wbGV0ZT1cIm9mZlwiPicgK1xyXG4gICAgICAgICc8aW5wdXQgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj4nICtcclxuICAgICAgICAnPGlucHV0IHR5cGU9XCJwYXNzd29yZFwiIHN0eWxlPVwiZGlzcGxheTpub25lXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+JyArXHJcbiAgICAgICAgJzxpbnB1dCBjbGFzcz1cImNlcnQtcWxhbGZxanNnaFwiIHR5cGU9XCJwYXNzd29yZFwiIGlkPVwicWxhbGZxanNnaFwiIG5hbWU9XCJQYXNzd29yZEUyRU1heDhcIiBwbGFjZWhvbGRlcj1cIicgKyBLSUNBX0NPUlBVUy5DRVJUX1BXRF9QTEFDRUhPTERFUiArICdcIiBhdXRvY29tcGxldGU9XCJvZmZcIj4nICtcclxuICAgICAgICAnPGEgY2xhc3M9XCJpY29uLXZrZXlib2FyZFwiIGlkPVwidmtleWJvYXJkLXRvZ2dsZVwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgb25jbGljaz1cIktJQ0FfRElBTE9HLnRvZ2dsZVZpcnR1YWxLZXlib2FyZCgpXCI+PC9hPicgK1xyXG4gICAgICAgICc8L2Zvcm0+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJidXR0b24td3JhcHBlclwiPicgK1xyXG4gICAgICAgICc8YnV0dG9uIGNsYXNzPVwiY29uZmlybS1idXR0b25cIiBpZCA9XCJzZWxlY3QtY2VydGlmaWNhdGUtY29uZmlybVwiPicgKyBLSUNBX0NPUlBVUy5CVVRUT05fQ09ORklSTSArICc8L2J1dHRvbj4nICtcclxuICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cImNhbmNlbC1idXR0b25cIiBvbmNsaWNrPVwiS0lDQV9ESUFMT0cuY2xvc2VTZWxlY3RDZXJ0aWZpY2F0ZURpYWxvZygpXCI+JyArIEtJQ0FfQ09SUFVTLkJVVFRPTl9DQU5DRUwgKyAnPC9idXR0b24+JyArXHJcbiAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJicm93c2VyLWd1aWRlLXdyYXBwZXIga2ljYS1kLW5vbmVcIiBpZD1cImJyb3dzZXItZ3VpZGUtd3JhcHBlclwiPicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiYnJvd3Nlci1ndWlkZS1oZWFkZXJcIj4nICtcclxuICAgICAgICAnPGRpdiBjbGFzcz1cImNsb3NlXCI+JyArXHJcbiAgICAgICAgJzxhIGNsYXNzPVwiaHRtbDUtZ3VpZGUtY2xvc2VcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgb25jbGljaz1cIktJQ0FfRElBTE9HLmNsb3NlR3VpZGUoKVwiPicgK1xyXG4gICAgICAgICc8aSBjbGFzcz1cImljb24tY2xvc2VcIj48L2k+JyArXHJcbiAgICAgICAgJzwvYT4nICtcclxuICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgJzxoMT4nICsgS0lDQV9DT1JQVVMuQlJPV1NFUl9HVUlERV9USVRMRSArICc8L2gxPicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwidGV4dFwiPicgK1xyXG4gICAgICAgICc8aSBjbGFzcz1cImljb24tYnJvd3NlclwiPjwvaT4nICtcclxuICAgICAgICAnPGgyPicgKyBLSUNBX0NPUlBVUy5CUk9XU0VSX0dVSURFX1NVQl9USVRMRSArICc8L2gyPicgK1xyXG4gICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJicm93c2VyLWd1aWRlLWNvbnRlbnRzXCI+JyArXHJcbiAgICAgICAgJzxoMj4nICsgS0lDQV9DT1JQVVMuQlJPV1NFUl9HVUlERV9TVE9SRV9DRVJUX0xBQkVMICsgJzwvaDI+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJicm93c2VyLWd1aWRlLXN0ZXBzLXdyYXBwZXJcIj4nICtcclxuICAgICAgICAnPGRpdiBjbGFzcz1cInN0ZXAtd3JhcHBlclwiPicgK1xyXG4gICAgICAgICc8c3BhbiBjbGFzcz1cInN0ZXAtbnVtYmVyXCI+MTwvc3Bhbj4nICtcclxuICAgICAgICAnPHNwYW4gY2xhc3M9XCJzdGVwLXRleHRcIj4nICsgS0lDQV9DT1JQVVMuQlJPV1NFUl9HVUlERV9TVE9SRV9DRVJUX1NURVAxICsgJzwvc3Bhbj4nICtcclxuICAgICAgICAnPHNwYW4gY2xhc3M9XCJzdGVwLXRleHQgc3ViXCI+JyArIEtJQ0FfQ09SUFVTLkJST1dTRVJfR1VJREVfU1RPUkVfQ0VSVF9TVEVQMV8xICsgJzwvc3Bhbj4nICtcclxuICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJzdGVwLXdyYXBwZXJcIj4nICtcclxuICAgICAgICAnPHNwYW4gY2xhc3M9XCJzdGVwLW51bWJlclwiPjI8L3NwYW4+JyArXHJcbiAgICAgICAgJzxzcGFuIGNsYXNzPVwic3RlcC10ZXh0XCI+JyArIEtJQ0FfQ09SUFVTLkJST1dTRVJfR1VJREVfU1RPUkVfQ0VSVF9TVEVQMiArICc8L3NwYW4+JyArXHJcbiAgICAgICAgJzxzcGFuIGNsYXNzPVwic3RlcC10ZXh0IHN1YlwiPicgKyBLSUNBX0NPUlBVUy5CUk9XU0VSX0dVSURFX1NUT1JFX0NFUlRfU1RFUDJfMSArICc8L3NwYW4+JyArXHJcbiAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwic3RlcC13cmFwcGVyXCI+JyArXHJcbiAgICAgICAgJzxzcGFuIGNsYXNzPVwic3RlcC10ZXh0IHctMTAwXCI+JyArIEtJQ0FfQ09SUFVTLkJST1dTRVJfR1VJREVfU1RPUkVfQ0VSVF9TVEVQMyArICc8L3NwYW4+JyArXHJcbiAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAnPGhyPicgK1xyXG4gICAgICAgICc8aDI+JyArIEtJQ0FfQ09SUFVTLkJST1dTRVJfR1VJREVfREVMRVRFX0NFUlRfTEFCRUwgKyAnPC9oMj4nICtcclxuICAgICAgICAnPGRpdiBjbGFzcz1cImJyb3dzZXItZ3VpZGUtc3RlcHMtd3JhcHBlclwiPicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwic3RlcC13cmFwcGVyXCI+JyArXHJcbiAgICAgICAgJzxzcGFuIGNsYXNzPVwic3RlcC1udW1iZXJcIj4xPC9zcGFuPicgK1xyXG4gICAgICAgICc8c3BhbiBjbGFzcz1cInN0ZXAtdGV4dFwiPicgKyBLSUNBX0NPUlBVUy5CUk9XU0VSX0dVSURFX0RFTEVURV9DRVJUX1NURVAxICsgJzwvc3Bhbj4nICtcclxuICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJzdGVwLXdyYXBwZXJcIj4nICtcclxuICAgICAgICAnPHNwYW4gY2xhc3M9XCJzdGVwLW51bWJlclwiPjI8L3NwYW4+JyArIFxyXG4gICAgICAgICc8c3BhbiBjbGFzcz1cInN0ZXAtdGV4dFwiPicgKyBLSUNBX0NPUlBVUy5CUk9XU0VSX0dVSURFX0RFTEVURV9DRVJUX1NURVAyICsgJzwvc3Bhbj4nICtcclxuICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJzdGVwLXdyYXBwZXJcIj4nICtcclxuICAgICAgICAnPHNwYW4gY2xhc3M9XCJzdGVwLW51bWJlclwiPjM8L3NwYW4+JyArXHJcbiAgICAgICAgJzxzcGFuIGNsYXNzPVwic3RlcC10ZXh0XCI+JyArIEtJQ0FfQ09SUFVTLkJST1dTRVJfR1VJREVfREVMRVRFX0NFUlRfU1RFUDMgKyAnPC9zcGFuPicgK1xyXG4gICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgJzxocj4nICsgXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJkZXRhaWwtZ3VpZGUtd3JhcHBlclwiPicgK1xyXG4gICAgICAgICc8YSBjbGFzcz1cIm9wZW4tZGV0YWlsLWd1aWRlLXdyYXBwZXJcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgb25jbGljaz1cIktJQ0FfRElBTE9HLm9wZW5EZXRhaWxHdWlkZSgpXCI+JyArXHJcbiAgICAgICAgJzxzcGFuIGNsYXNzPVwiYmFkZ2VcIj4hPC9zcGFuPicgK1xyXG4gICAgICAgICc8c3BhbiBjbGFzcz1cInRleHRcIj4nICsgS0lDQV9DT1JQVVMuQlJPV1NFUl9ERVRBSUxfTU9SRV9CVVRUT04gKyAnPC9zcGFuPicgK1xyXG4gICAgICAgICc8L2E+JyArXHJcbiAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgJzwvZGl2Pic7XHJcblxyXG4gICAgb2JqZWN0LnBkZlZpZXdlciA9ICc8ZGl2IGNsYXNzPVwiZGV0YWlsLWd1aWRlIGtpY2EtZC1ub25lXCIgaWQ9XCJkZXRhaWwtZ3VpZGVcIj4nICtcclxuICAgICAgICAnPGRpdiBjbGFzcz1cImRldGFpbC1ndWlkZS1jb250ZW50XCI+JyArXHJcbiAgICAgICAgJzxzcGFuIGNsYXNzPVwiY2xvc2UtZGV0YWlsLWd1aWRlXCIgb25jbGljaz1cIktJQ0FfRElBTE9HLmNsb3NlRGV0YWlsR3VpZGUoKVwiPiZ0aW1lczs8L3NwYW4+JyArXHJcbiAgICAgICAgJzxlbWJlZCBzcmM9XCInICsgd2VibnBraV9jb25maWcucGF0aCArICdhc3NldHMvZ3VpZGUvYnJvd3Nlcl9jZXJ0aWZpY2F0ZV9ndWlkZS5wZGZcIiB0eXBlPVwiYXBwbGljYXRpb24vcGRmXCIgY2xhc3M9XCJicm93c2VyLWRldGFpbC1ndWlkZVwiPicgK1xyXG4gICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAnPC9kaXY+JztcclxuXHJcbiAgICBvYmplY3QuaW1wb3J0UEZYID0gJzxkaXYgY2xhc3M9XCJ3ZWJucGtpLXdyYXBwZXIga2ljYS1kLW5vbmVcIiBpZD1cIndlYm5wa2ktd3JhcHBlclwiPicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiZGltXCI+PC9kaXY+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJwZngtcGFzc3dvcmQtd3JhcHBlclwiPicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwicGZ4LXBhc3N3b3JkLWhlYWRlclwiPicgK1xyXG4gICAgICAgICc8c3Bhbj4nICsgS0lDQV9DT1JQVVMuSU1QT1JUX0NFUlRfVElUTEUgKyAnPC9zcGFuPicgK1xyXG4gICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAnPGRpdiBjbGFzcz1cInBmeC1wYXNzd29yZC1ib2R5XCI+JyArXHJcbiAgICAgICAgJzxzcGFuPicgKyBLSUNBX0NPUlBVUy5JTVBPUlRfQ0VSVF9QQVNTV09SRF9MQUJFTCArICc8L3NwYW4+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJwZngtcGFzc3dvcmQtaW5wdXRcIj4nICtcclxuICAgICAgICAnPGZvcm0gbmFtZT1cImZvcm0tcGZ4LXFsYWxmcWpzZ2hcIiBvbnN1Ym1pdD1cIiQoXFwnI3BmeC1xbGFsZnFqc2doLWNvbmZpcm1cXCcpLnRyaWdnZXIoXFwnY2xpY2tcXCcpOyByZXR1cm4gZmFsc2U7XCIgb25rZXlkb3duPVwicmV0dXJuIGV2ZW50LmtleSAhPSBcXCdFbnRlclxcJ1wiOz4nICtcclxuICAgICAgICAnPGlucHV0IGlkPVwiaW5wdXQtcGZ4LXFsYWxmcWpzZ2hcIiBuYW1lPVwicGZ4LXFsYWxmcWpzZ2hcIiBjbGFzcz1cInBmeC1xbGFsZnFqc2doXCIgdHlwZT1cInBhc3N3b3JkXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCI+JyArXHJcbiAgICAgICAgJzxhIGNsYXNzPVwiaWNvbi12a2V5Ym9hcmRcIiBpZD1cInBmeC12a2V5Ym9hcmQtdG9nZ2xlXCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBvbmNsaWNrPVwiS0lDQV9ESUFMT0cudG9nZ2xlUEZYVmlydHVhbEtleWJvYXJkKClcIj48L2E+JyArXHJcbiAgICAgICAgJzwvZm9ybT4nICtcclxuICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgJzxzcGFuPicgKyBLSUNBX0NPUlBVUy5JTVBPUlRfQ0VSVF9URVhUICsgJzwvc3Bhbj4nICtcclxuICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJwZngtcGFzc3dvcmQtZm9vdGVyXCI+JyArXHJcbiAgICAgICAgJzxidXR0b24gY2xhc3M9XCJjb25maXJtLWJ1dHRvblwiIGlkPVwicGZ4LXFsYWxmcWpzZ2gtY29uZmlybVwiPicgKyBLSUNBX0NPUlBVUy5CVVRUT05fQ09ORklSTSArICc8L2J1dHRvbj4nICtcclxuICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cImNhbmNlbC1idXR0b25cIiBpZD1cInBmeC1xbGFsZnFqc2doLWNhbmNlbFwiPicgKyBLSUNBX0NPUlBVUy5CVVRUT05fQ0FOQ0VMICsgJzwvYnV0dG9uPicgK1xyXG4gICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgJzxpbnB1dCBpZD1cImlucHV0Q2VydHNcIiB0eXBlPVwiZmlsZVwiIHN0eWxlPVwiZGlzcGxheTpub25lXCIgYWNjZXB0PVwiLnAxMiwgLnBmeFwiIG9uY2hhbmdlPVwiS0lDQV9ESUFMT0cub25TZWxlY3RDZXJ0KHRoaXMpO1wiLz4nICtcclxuICAgICAgICAnPC9kaXY+JztcclxuXHJcbiAgICBvYmplY3QuZmluZFBGWCA9ICc8ZGl2IGNsYXNzPVwiZmluZC1wZngtd3JhcHBlciBraWNhLWQtbm9uZVwiIGlkPVwiZmluZC1wZngtd3JhcHBlclwiPicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiZGltXCI+PC9kaXY+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJmaW5kLXBmeC1jb250YWluZXJcIj4nICtcclxuICAgICAgICAnPGRpdiBjbGFzcz1cImZpbmQtcGZ4LWhlYWRlclwiPicgK1xyXG4gICAgICAgICc8c3Bhbj4nICsgS0lDQV9DT1JQVVMuSU1QT1JUX1BGWF9USVRMRSArICc8L3NwYW4+JyArXHJcbiAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiY29udmVydC1wZngtd3JhcHBlclwiPicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiY29udmVydC1wZngtaGVhZGVyXCI+JyArXHJcbiAgICAgICAgJzxpIGNsYXNzPVwiaWNvbi1mYXFcIj48L2k+PHNwYW4+JyArIEtJQ0FfQ09SUFVTLklNUE9SVF9QRlhfQ09OVkVSVF9QRlhfTEFCRUwgKyAnPC9zcGFuPicgK1xyXG4gICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAnPGRpdiBjbGFzcz1cImNvbnZlcnQtcGZ4LWRvd25sb2FkXCI+JyArXHJcbiAgICAgICAgJzxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgb25jbGljaz1cIktJQ0FfRElBTE9HLmRvd25sb2FkQ29udmVydENlcnQoKTtcIj48aSBjbGFzcz1cImljb24tZG93blwiPjwvaT48c3Bhbj4nICsgS0lDQV9DT1JQVVMuSU1QT1JUX1BGWF9DT05WRVJUX1BGWF9ET1dOTE9BRCArICc8L3NwYW4+PC9hPicgK1xyXG4gICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAnPGRpdiBjbGFzcz1cImNvbnZlcnQtcGZ4LXN0ZXAtd3JhcHBlclwiPicgK1xyXG4gICAgICAgICc8c3BhbiBjbGFzcz1cInN0ZXAtbnVtYmVyXCI+MTwvc3Bhbj4nICtcclxuICAgICAgICAnPHNwYW4gY2xhc3M9XCJzdGVwLXRleHRcIj48c3Bhbj4nICsgS0lDQV9DT1JQVVMuSU1QT1JUX1BGWF9DT05WRVJUX1BGWF9ET1dOTE9BRCArICc8L3NwYW4+JyArIEtJQ0FfQ09SUFVTLklNUE9SVF9QRlhfQ09OVkVSVF9QRlhfU1RFUDEgKyAnPC9zcGFuPicgK1xyXG4gICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAnPGRpdiBjbGFzcz1cImNvbnZlcnQtcGZ4LXN0ZXAtd3JhcHBlclwiPicgK1xyXG4gICAgICAgICc8c3BhbiBjbGFzcz1cInN0ZXAtbnVtYmVyXCI+Mjwvc3Bhbj4nICtcclxuICAgICAgICAnPHNwYW4gY2xhc3M9XCJzdGVwLXRleHRcIj4nICsgS0lDQV9DT1JQVVMuSU1QT1JUX1BGWF9DT05WRVJUX1BGWF9TVEVQMiArICc8L3NwYW4+JyArXHJcbiAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiY29udmVydC1wZngtc3RlcC13cmFwcGVyXCI+JyArXHJcbiAgICAgICAgJzxzcGFuIGNsYXNzPVwic3RlcC1udW1iZXJcIj4zPC9zcGFuPicgK1xyXG4gICAgICAgICc8c3BhbiBjbGFzcz1cInN0ZXAtdGV4dFwiPicgKyBLSUNBX0NPUlBVUy5JTVBPUlRfUEZYX0NPTlZFUlRfUEZYX1NURVAzICsgJzwvc3Bhbj4nICtcclxuICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiZmluZC1wZngtZm9vdGVyXCI+JyArXHJcbiAgICAgICAgJzxidXR0b24gY2xhc3M9XCJjb25maXJtLWJ1dHRvblwiIGlkPVwiZmluZC1wZngtYnV0dG9uXCIgb25jbGljaz1cIktJQ0FfRElBTE9HLnNlYXJjaENlcnQoKTtcIj4nICsgS0lDQV9DT1JQVVMuSU1QT1JUX1BGWF9GSU5EX0JVVFRPTiArICc8L2J1dHRvbj4nICtcclxuICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cImNhbmNlbC1idXR0b25cIiBpZD1cImZpbmQtcGZ4LWNhbmNlbFwiIG9uY2xpY2s9XCJLSUNBX0RJQUxPRy5jbG9zZUZpbmRDZXJ0KCk7XCI+JyArIEtJQ0FfQ09SUFVTLkJVVFRPTl9DQU5DRUwgKyAnPC9idXR0b24+JyArXHJcbiAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAnPC9kaXY+JztcclxuXHJcbiAgICByZXR1cm4gb2JqZWN0O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGJveGVzOiBib3hlc1xyXG59IiwiLyohXG4qIHN3ZWV0YWxlcnQyIHY5LjUuM1xuKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4qL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0dHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuXHQoZ2xvYmFsLlN3ZWV0YWxlcnQyID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHtcbiAgICBfdHlwZW9mID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmo7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBfdHlwZW9mID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBfdHlwZW9mKG9iaik7XG59XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cblxuZnVuY3Rpb24gX2V4dGVuZHMoKSB7XG4gIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcblxuICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7XG4gIH1cblxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTtcbn1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO1xuICB9O1xuICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pO1xufVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgICBvLl9fcHJvdG9fXyA9IHA7XG4gICAgcmV0dXJuIG87XG4gIH07XG5cbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTtcbn1cblxuZnVuY3Rpb24gaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7XG4gIGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7XG4gIGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7XG5cbiAgdHJ5IHtcbiAgICBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFJlZmxlY3QuY29uc3RydWN0KERhdGUsIFtdLCBmdW5jdGlvbiAoKSB7fSkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICBpZiAoaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkpIHtcbiAgICBfY29uc3RydWN0ID0gUmVmbGVjdC5jb25zdHJ1Y3Q7XG4gIH0gZWxzZSB7XG4gICAgX2NvbnN0cnVjdCA9IGZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICAgICAgdmFyIGEgPSBbbnVsbF07XG4gICAgICBhLnB1c2guYXBwbHkoYSwgYXJncyk7XG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSBGdW5jdGlvbi5iaW5kLmFwcGx5KFBhcmVudCwgYSk7XG4gICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgQ29uc3RydWN0b3IoKTtcbiAgICAgIGlmIChDbGFzcykgX3NldFByb3RvdHlwZU9mKGluc3RhbmNlLCBDbGFzcy5wcm90b3R5cGUpO1xuICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gX2NvbnN0cnVjdC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHtcbiAgaWYgKHNlbGYgPT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcbiAgfVxuXG4gIHJldHVybiBzZWxmO1xufVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG4gIGlmIChjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkge1xuICAgIHJldHVybiBjYWxsO1xuICB9XG5cbiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7XG59XG5cbmZ1bmN0aW9uIF9zdXBlclByb3BCYXNlKG9iamVjdCwgcHJvcGVydHkpIHtcbiAgd2hpbGUgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpIHtcbiAgICBvYmplY3QgPSBfZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTtcbiAgICBpZiAob2JqZWN0ID09PSBudWxsKSBicmVhaztcbiAgfVxuXG4gIHJldHVybiBvYmplY3Q7XG59XG5cbmZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHtcbiAgaWYgKHR5cGVvZiBSZWZsZWN0ICE9PSBcInVuZGVmaW5lZFwiICYmIFJlZmxlY3QuZ2V0KSB7XG4gICAgX2dldCA9IFJlZmxlY3QuZ2V0O1xuICB9IGVsc2Uge1xuICAgIF9nZXQgPSBmdW5jdGlvbiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyKSB7XG4gICAgICB2YXIgYmFzZSA9IF9zdXBlclByb3BCYXNlKHRhcmdldCwgcHJvcGVydHkpO1xuXG4gICAgICBpZiAoIWJhc2UpIHJldHVybjtcbiAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiYXNlLCBwcm9wZXJ0eSk7XG5cbiAgICAgIGlmIChkZXNjLmdldCkge1xuICAgICAgICByZXR1cm4gZGVzYy5nZXQuY2FsbChyZWNlaXZlcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkZXNjLnZhbHVlO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gX2dldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlciB8fCB0YXJnZXQpO1xufVxuXG52YXIgY29uc29sZVByZWZpeCA9ICdTd2VldEFsZXJ0MjonO1xuLyoqXG4gKiBGaWx0ZXIgdGhlIHVuaXF1ZSB2YWx1ZXMgaW50byBhIG5ldyBhcnJheVxuICogQHBhcmFtIGFyclxuICovXG5cbnZhciB1bmlxdWVBcnJheSA9IGZ1bmN0aW9uIHVuaXF1ZUFycmF5KGFycikge1xuICB2YXIgcmVzdWx0ID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocmVzdWx0LmluZGV4T2YoYXJyW2ldKSA9PT0gLTEpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGFycltpXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4vKipcbiAqIENhcGl0YWxpemUgdGhlIGZpcnN0IGxldHRlciBvZiBhIHN0cmluZ1xuICogQHBhcmFtIHN0clxuICovXG5cbnZhciBjYXBpdGFsaXplRmlyc3RMZXR0ZXIgPSBmdW5jdGlvbiBjYXBpdGFsaXplRmlyc3RMZXR0ZXIoc3RyKSB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBhcnJheSBvYiBvYmplY3QgdmFsdWVzIChPYmplY3QudmFsdWVzIGlzbid0IHN1cHBvcnRlZCBpbiBJRTExKVxuICogQHBhcmFtIG9ialxuICovXG5cbnZhciBvYmplY3RWYWx1ZXMgPSBmdW5jdGlvbiBvYmplY3RWYWx1ZXMob2JqKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIG9ialtrZXldO1xuICB9KTtcbn07XG4vKipcbiAqIENvbnZlcnQgTm9kZUxpc3QgdG8gQXJyYXlcbiAqIEBwYXJhbSBub2RlTGlzdFxuICovXG5cbnZhciB0b0FycmF5ID0gZnVuY3Rpb24gdG9BcnJheShub2RlTGlzdCkge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobm9kZUxpc3QpO1xufTtcbi8qKlxuICogU3RhbmRhcmRpc2UgY29uc29sZSB3YXJuaW5nc1xuICogQHBhcmFtIG1lc3NhZ2VcbiAqL1xuXG52YXIgd2FybiA9IGZ1bmN0aW9uIHdhcm4obWVzc2FnZSkge1xuICBjb25zb2xlLndhcm4oXCJcIi5jb25jYXQoY29uc29sZVByZWZpeCwgXCIgXCIpLmNvbmNhdChtZXNzYWdlKSk7XG59O1xuLyoqXG4gKiBTdGFuZGFyZGlzZSBjb25zb2xlIGVycm9yc1xuICogQHBhcmFtIG1lc3NhZ2VcbiAqL1xuXG52YXIgZXJyb3IgPSBmdW5jdGlvbiBlcnJvcihtZXNzYWdlKSB7XG4gIGNvbnNvbGUuZXJyb3IoXCJcIi5jb25jYXQoY29uc29sZVByZWZpeCwgXCIgXCIpLmNvbmNhdChtZXNzYWdlKSk7XG59O1xuLyoqXG4gKiBQcml2YXRlIGdsb2JhbCBzdGF0ZSBmb3IgYHdhcm5PbmNlYFxuICogQHR5cGUge0FycmF5fVxuICogQHByaXZhdGVcbiAqL1xuXG52YXIgcHJldmlvdXNXYXJuT25jZU1lc3NhZ2VzID0gW107XG4vKipcbiAqIFNob3cgYSBjb25zb2xlIHdhcm5pbmcsIGJ1dCBvbmx5IGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gc2hvd25cbiAqIEBwYXJhbSBtZXNzYWdlXG4gKi9cblxudmFyIHdhcm5PbmNlID0gZnVuY3Rpb24gd2Fybk9uY2UobWVzc2FnZSkge1xuICBpZiAoIShwcmV2aW91c1dhcm5PbmNlTWVzc2FnZXMuaW5kZXhPZihtZXNzYWdlKSAhPT0gLTEpKSB7XG4gICAgcHJldmlvdXNXYXJuT25jZU1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgd2FybihtZXNzYWdlKTtcbiAgfVxufTtcbi8qKlxuICogU2hvdyBhIG9uZS10aW1lIGNvbnNvbGUgd2FybmluZyBhYm91dCBkZXByZWNhdGVkIHBhcmFtcy9tZXRob2RzXG4gKi9cblxudmFyIHdhcm5BYm91dERlcHJlYXRpb24gPSBmdW5jdGlvbiB3YXJuQWJvdXREZXByZWF0aW9uKGRlcHJlY2F0ZWRQYXJhbSwgdXNlSW5zdGVhZCkge1xuICB3YXJuT25jZShcIlxcXCJcIi5jb25jYXQoZGVwcmVjYXRlZFBhcmFtLCBcIlxcXCIgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuIFBsZWFzZSB1c2UgXFxcIlwiKS5jb25jYXQodXNlSW5zdGVhZCwgXCJcXFwiIGluc3RlYWQuXCIpKTtcbn07XG4vKipcbiAqIElmIGBhcmdgIGlzIGEgZnVuY3Rpb24sIGNhbGwgaXQgKHdpdGggbm8gYXJndW1lbnRzIG9yIGNvbnRleHQpIGFuZCByZXR1cm4gdGhlIHJlc3VsdC5cbiAqIE90aGVyd2lzZSwganVzdCBwYXNzIHRoZSB2YWx1ZSB0aHJvdWdoXG4gKiBAcGFyYW0gYXJnXG4gKi9cblxudmFyIGNhbGxJZkZ1bmN0aW9uID0gZnVuY3Rpb24gY2FsbElmRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nID8gYXJnKCkgOiBhcmc7XG59O1xudmFyIGlzUHJvbWlzZSA9IGZ1bmN0aW9uIGlzUHJvbWlzZShhcmcpIHtcbiAgcmV0dXJuIGFyZyAmJiBQcm9taXNlLnJlc29sdmUoYXJnKSA9PT0gYXJnO1xufTtcblxudmFyIERpc21pc3NSZWFzb24gPSBPYmplY3QuZnJlZXplKHtcbiAgY2FuY2VsOiAnY2FuY2VsJyxcbiAgYmFja2Ryb3A6ICdiYWNrZHJvcCcsXG4gIGNsb3NlOiAnY2xvc2UnLFxuICBlc2M6ICdlc2MnLFxuICB0aW1lcjogJ3RpbWVyJ1xufSk7XG5cbnZhciBpc0pxdWVyeUVsZW1lbnQgPSBmdW5jdGlvbiBpc0pxdWVyeUVsZW1lbnQoZWxlbSkge1xuICByZXR1cm4gX3R5cGVvZihlbGVtKSA9PT0gJ29iamVjdCcgJiYgZWxlbS5qcXVlcnk7XG59O1xuXG52YXIgaXNFbGVtZW50ID0gZnVuY3Rpb24gaXNFbGVtZW50KGVsZW0pIHtcbiAgcmV0dXJuIGVsZW0gaW5zdGFuY2VvZiBFbGVtZW50IHx8IGlzSnF1ZXJ5RWxlbWVudChlbGVtKTtcbn07XG5cbnZhciBhcmdzVG9QYXJhbXMgPSBmdW5jdGlvbiBhcmdzVG9QYXJhbXMoYXJncykge1xuICB2YXIgcGFyYW1zID0ge307XG5cbiAgaWYgKF90eXBlb2YoYXJnc1swXSkgPT09ICdvYmplY3QnICYmICFpc0VsZW1lbnQoYXJnc1swXSkpIHtcbiAgICBfZXh0ZW5kcyhwYXJhbXMsIGFyZ3NbMF0pO1xuICB9IGVsc2Uge1xuICAgIFsndGl0bGUnLCAnaHRtbCcsICdpY29uJ10uZm9yRWFjaChmdW5jdGlvbiAobmFtZSwgaW5kZXgpIHtcbiAgICAgIHZhciBhcmcgPSBhcmdzW2luZGV4XTtcblxuICAgICAgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8IGlzRWxlbWVudChhcmcpKSB7XG4gICAgICAgIHBhcmFtc1tuYW1lXSA9IGFyZztcbiAgICAgIH0gZWxzZSBpZiAoYXJnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZXJyb3IoXCJVbmV4cGVjdGVkIHR5cGUgb2YgXCIuY29uY2F0KG5hbWUsIFwiISBFeHBlY3RlZCBcXFwic3RyaW5nXFxcIiBvciBcXFwiRWxlbWVudFxcXCIsIGdvdCBcIikuY29uY2F0KF90eXBlb2YoYXJnKSkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHBhcmFtcztcbn07XG5cbnZhciBzd2FsUHJlZml4ID0gJ3N3YWwyLSc7XG52YXIgcHJlZml4ID0gZnVuY3Rpb24gcHJlZml4KGl0ZW1zKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcblxuICBmb3IgKHZhciBpIGluIGl0ZW1zKSB7XG4gICAgcmVzdWx0W2l0ZW1zW2ldXSA9IHN3YWxQcmVmaXggKyBpdGVtc1tpXTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xudmFyIHN3YWxDbGFzc2VzID0gcHJlZml4KFsnY29udGFpbmVyJywgJ3Nob3duJywgJ2hlaWdodC1hdXRvJywgJ2lvc2ZpeCcsICdwb3B1cCcsICdtb2RhbCcsICduby1iYWNrZHJvcCcsICd0b2FzdCcsICd0b2FzdC1zaG93bicsICd0b2FzdC1jb2x1bW4nLCAnc2hvdycsICdoaWRlJywgJ2Nsb3NlJywgJ3RpdGxlJywgJ2hlYWRlcicsICdjb250ZW50JywgJ2h0bWwtY29udGFpbmVyJywgJ2FjdGlvbnMnLCAnY29uZmlybScsICdjYW5jZWwnLCAnZm9vdGVyJywgJ2ljb24nLCAnaWNvbi1jb250ZW50JywgJ2ltYWdlJywgJ2lucHV0JywgJ2ZpbGUnLCAncmFuZ2UnLCAnc2VsZWN0JywgJ3JhZGlvJywgJ2NoZWNrYm94JywgJ2xhYmVsJywgJ3RleHRhcmVhJywgJ2lucHV0ZXJyb3InLCAndmFsaWRhdGlvbi1tZXNzYWdlJywgJ3Byb2dyZXNzLXN0ZXBzJywgJ2FjdGl2ZS1wcm9ncmVzcy1zdGVwJywgJ3Byb2dyZXNzLXN0ZXAnLCAncHJvZ3Jlc3Mtc3RlcC1saW5lJywgJ2xvYWRpbmcnLCAnc3R5bGVkJywgJ3RvcCcsICd0b3Atc3RhcnQnLCAndG9wLWVuZCcsICd0b3AtbGVmdCcsICd0b3AtcmlnaHQnLCAnY2VudGVyJywgJ2NlbnRlci1zdGFydCcsICdjZW50ZXItZW5kJywgJ2NlbnRlci1sZWZ0JywgJ2NlbnRlci1yaWdodCcsICdib3R0b20nLCAnYm90dG9tLXN0YXJ0JywgJ2JvdHRvbS1lbmQnLCAnYm90dG9tLWxlZnQnLCAnYm90dG9tLXJpZ2h0JywgJ2dyb3ctcm93JywgJ2dyb3ctY29sdW1uJywgJ2dyb3ctZnVsbHNjcmVlbicsICdydGwnLCAndGltZXItcHJvZ3Jlc3MtYmFyJywgJ3Njcm9sbGJhci1tZWFzdXJlJywgJ2ljb24tc3VjY2VzcycsICdpY29uLXdhcm5pbmcnLCAnaWNvbi1pbmZvJywgJ2ljb24tcXVlc3Rpb24nLCAnaWNvbi1lcnJvciddKTtcbnZhciBpY29uVHlwZXMgPSBwcmVmaXgoWydzdWNjZXNzJywgJ3dhcm5pbmcnLCAnaW5mbycsICdxdWVzdGlvbicsICdlcnJvciddKTtcblxudmFyIGdldENvbnRhaW5lciA9IGZ1bmN0aW9uIGdldENvbnRhaW5lcigpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIi5cIi5jb25jYXQoc3dhbENsYXNzZXMuY29udGFpbmVyKSk7XG59O1xudmFyIGVsZW1lbnRCeVNlbGVjdG9yID0gZnVuY3Rpb24gZWxlbWVudEJ5U2VsZWN0b3Ioc2VsZWN0b3JTdHJpbmcpIHtcbiAgdmFyIGNvbnRhaW5lciA9IGdldENvbnRhaW5lcigpO1xuICByZXR1cm4gY29udGFpbmVyID8gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JTdHJpbmcpIDogbnVsbDtcbn07XG5cbnZhciBlbGVtZW50QnlDbGFzcyA9IGZ1bmN0aW9uIGVsZW1lbnRCeUNsYXNzKGNsYXNzTmFtZSkge1xuICByZXR1cm4gZWxlbWVudEJ5U2VsZWN0b3IoXCIuXCIuY29uY2F0KGNsYXNzTmFtZSkpO1xufTtcblxudmFyIGdldFBvcHVwID0gZnVuY3Rpb24gZ2V0UG9wdXAoKSB7XG4gIHJldHVybiBlbGVtZW50QnlDbGFzcyhzd2FsQ2xhc3Nlcy5wb3B1cCk7XG59O1xudmFyIGdldEljb25zID0gZnVuY3Rpb24gZ2V0SWNvbnMoKSB7XG4gIHZhciBwb3B1cCA9IGdldFBvcHVwKCk7XG4gIHJldHVybiB0b0FycmF5KHBvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIuY29uY2F0KHN3YWxDbGFzc2VzLmljb24pKSk7XG59O1xudmFyIGdldEljb24gPSBmdW5jdGlvbiBnZXRJY29uKCkge1xuICB2YXIgdmlzaWJsZUljb24gPSBnZXRJY29ucygpLmZpbHRlcihmdW5jdGlvbiAoaWNvbikge1xuICAgIHJldHVybiBpc1Zpc2libGUoaWNvbik7XG4gIH0pO1xuICByZXR1cm4gdmlzaWJsZUljb24ubGVuZ3RoID8gdmlzaWJsZUljb25bMF0gOiBudWxsO1xufTtcbnZhciBnZXRUaXRsZSA9IGZ1bmN0aW9uIGdldFRpdGxlKCkge1xuICByZXR1cm4gZWxlbWVudEJ5Q2xhc3Moc3dhbENsYXNzZXMudGl0bGUpO1xufTtcbnZhciBnZXRDb250ZW50ID0gZnVuY3Rpb24gZ2V0Q29udGVudCgpIHtcbiAgcmV0dXJuIGVsZW1lbnRCeUNsYXNzKHN3YWxDbGFzc2VzLmNvbnRlbnQpO1xufTtcbnZhciBnZXRIdG1sQ29udGFpbmVyID0gZnVuY3Rpb24gZ2V0SHRtbENvbnRhaW5lcigpIHtcbiAgcmV0dXJuIGVsZW1lbnRCeUNsYXNzKHN3YWxDbGFzc2VzWydodG1sLWNvbnRhaW5lciddKTtcbn07XG52YXIgZ2V0SW1hZ2UgPSBmdW5jdGlvbiBnZXRJbWFnZSgpIHtcbiAgcmV0dXJuIGVsZW1lbnRCeUNsYXNzKHN3YWxDbGFzc2VzLmltYWdlKTtcbn07XG52YXIgZ2V0UHJvZ3Jlc3NTdGVwcyA9IGZ1bmN0aW9uIGdldFByb2dyZXNzU3RlcHMoKSB7XG4gIHJldHVybiBlbGVtZW50QnlDbGFzcyhzd2FsQ2xhc3Nlc1sncHJvZ3Jlc3Mtc3RlcHMnXSk7XG59O1xudmFyIGdldFZhbGlkYXRpb25NZXNzYWdlID0gZnVuY3Rpb24gZ2V0VmFsaWRhdGlvbk1lc3NhZ2UoKSB7XG4gIHJldHVybiBlbGVtZW50QnlDbGFzcyhzd2FsQ2xhc3Nlc1sndmFsaWRhdGlvbi1tZXNzYWdlJ10pO1xufTtcbnZhciBnZXRDb25maXJtQnV0dG9uID0gZnVuY3Rpb24gZ2V0Q29uZmlybUJ1dHRvbigpIHtcbiAgcmV0dXJuIGVsZW1lbnRCeVNlbGVjdG9yKFwiLlwiLmNvbmNhdChzd2FsQ2xhc3Nlcy5hY3Rpb25zLCBcIiAuXCIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5jb25maXJtKSk7XG59O1xudmFyIGdldENhbmNlbEJ1dHRvbiA9IGZ1bmN0aW9uIGdldENhbmNlbEJ1dHRvbigpIHtcbiAgcmV0dXJuIGVsZW1lbnRCeVNlbGVjdG9yKFwiLlwiLmNvbmNhdChzd2FsQ2xhc3Nlcy5hY3Rpb25zLCBcIiAuXCIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5jYW5jZWwpKTtcbn07XG52YXIgZ2V0QWN0aW9ucyA9IGZ1bmN0aW9uIGdldEFjdGlvbnMoKSB7XG4gIHJldHVybiBlbGVtZW50QnlDbGFzcyhzd2FsQ2xhc3Nlcy5hY3Rpb25zKTtcbn07XG52YXIgZ2V0SGVhZGVyID0gZnVuY3Rpb24gZ2V0SGVhZGVyKCkge1xuICByZXR1cm4gZWxlbWVudEJ5Q2xhc3Moc3dhbENsYXNzZXMuaGVhZGVyKTtcbn07XG52YXIgZ2V0Rm9vdGVyID0gZnVuY3Rpb24gZ2V0Rm9vdGVyKCkge1xuICByZXR1cm4gZWxlbWVudEJ5Q2xhc3Moc3dhbENsYXNzZXMuZm9vdGVyKTtcbn07XG52YXIgZ2V0VGltZXJQcm9ncmVzc0JhciA9IGZ1bmN0aW9uIGdldFRpbWVyUHJvZ3Jlc3NCYXIoKSB7XG4gIHJldHVybiBlbGVtZW50QnlDbGFzcyhzd2FsQ2xhc3Nlc1sndGltZXItcHJvZ3Jlc3MtYmFyJ10pO1xufTtcbnZhciBnZXRDbG9zZUJ1dHRvbiA9IGZ1bmN0aW9uIGdldENsb3NlQnV0dG9uKCkge1xuICByZXR1cm4gZWxlbWVudEJ5Q2xhc3Moc3dhbENsYXNzZXMuY2xvc2UpO1xufTsgLy8gaHR0cHM6Ly9naXRodWIuY29tL2prdXAvZm9jdXNhYmxlL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG5cbnZhciBmb2N1c2FibGUgPSBcIlxcbiAgYVtocmVmXSxcXG4gIGFyZWFbaHJlZl0sXFxuICBpbnB1dDpub3QoW2Rpc2FibGVkXSksXFxuICBzZWxlY3Q6bm90KFtkaXNhYmxlZF0pLFxcbiAgdGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pLFxcbiAgYnV0dG9uOm5vdChbZGlzYWJsZWRdKSxcXG4gIGlmcmFtZSxcXG4gIG9iamVjdCxcXG4gIGVtYmVkLFxcbiAgW3RhYmluZGV4PVxcXCIwXFxcIl0sXFxuICBbY29udGVudGVkaXRhYmxlXSxcXG4gIGF1ZGlvW2NvbnRyb2xzXSxcXG4gIHZpZGVvW2NvbnRyb2xzXSxcXG4gIHN1bW1hcnlcXG5cIjtcbnZhciBnZXRGb2N1c2FibGVFbGVtZW50cyA9IGZ1bmN0aW9uIGdldEZvY3VzYWJsZUVsZW1lbnRzKCkge1xuICB2YXIgZm9jdXNhYmxlRWxlbWVudHNXaXRoVGFiaW5kZXggPSB0b0FycmF5KGdldFBvcHVwKCkucXVlcnlTZWxlY3RvckFsbCgnW3RhYmluZGV4XTpub3QoW3RhYmluZGV4PVwiLTFcIl0pOm5vdChbdGFiaW5kZXg9XCIwXCJdKScpKSAvLyBzb3J0IGFjY29yZGluZyB0byB0YWJpbmRleFxuICAuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgIGEgPSBwYXJzZUludChhLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKSk7XG4gICAgYiA9IHBhcnNlSW50KGIuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpKTtcblxuICAgIGlmIChhID4gYikge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIGlmIChhIDwgYikge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9KTtcbiAgdmFyIG90aGVyRm9jdXNhYmxlRWxlbWVudHMgPSB0b0FycmF5KGdldFBvcHVwKCkucXVlcnlTZWxlY3RvckFsbChmb2N1c2FibGUpKS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7XG4gICAgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKSAhPT0gJy0xJztcbiAgfSk7XG4gIHJldHVybiB1bmlxdWVBcnJheShmb2N1c2FibGVFbGVtZW50c1dpdGhUYWJpbmRleC5jb25jYXQob3RoZXJGb2N1c2FibGVFbGVtZW50cykpLmZpbHRlcihmdW5jdGlvbiAoZWwpIHtcbiAgICByZXR1cm4gaXNWaXNpYmxlKGVsKTtcbiAgfSk7XG59O1xudmFyIGlzTW9kYWwgPSBmdW5jdGlvbiBpc01vZGFsKCkge1xuICByZXR1cm4gIWlzVG9hc3QoKSAmJiAhZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoc3dhbENsYXNzZXNbJ25vLWJhY2tkcm9wJ10pO1xufTtcbnZhciBpc1RvYXN0ID0gZnVuY3Rpb24gaXNUb2FzdCgpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKHN3YWxDbGFzc2VzWyd0b2FzdC1zaG93biddKTtcbn07XG52YXIgaXNMb2FkaW5nID0gZnVuY3Rpb24gaXNMb2FkaW5nKCkge1xuICByZXR1cm4gZ2V0UG9wdXAoKS5oYXNBdHRyaWJ1dGUoJ2RhdGEtbG9hZGluZycpO1xufTtcblxudmFyIHN0YXRlcyA9IHtcbiAgcHJldmlvdXNCb2R5UGFkZGluZzogbnVsbFxufTtcbnZhciBoYXNDbGFzcyA9IGZ1bmN0aW9uIGhhc0NsYXNzKGVsZW0sIGNsYXNzTmFtZSkge1xuICBpZiAoIWNsYXNzTmFtZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBjbGFzc0xpc3QgPSBjbGFzc05hbWUuc3BsaXQoL1xccysvKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGNsYXNzTGlzdC5sZW5ndGg7IGkrKykge1xuICAgIGlmICghZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NMaXN0W2ldKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxudmFyIHJlbW92ZUN1c3RvbUNsYXNzZXMgPSBmdW5jdGlvbiByZW1vdmVDdXN0b21DbGFzc2VzKGVsZW0sIHBhcmFtcykge1xuICB0b0FycmF5KGVsZW0uY2xhc3NMaXN0KS5mb3JFYWNoKGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICBpZiAoIShvYmplY3RWYWx1ZXMoc3dhbENsYXNzZXMpLmluZGV4T2YoY2xhc3NOYW1lKSAhPT0gLTEpICYmICEob2JqZWN0VmFsdWVzKGljb25UeXBlcykuaW5kZXhPZihjbGFzc05hbWUpICE9PSAtMSkgJiYgIShvYmplY3RWYWx1ZXMocGFyYW1zLnNob3dDbGFzcykuaW5kZXhPZihjbGFzc05hbWUpICE9PSAtMSkpIHtcbiAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICAgIH1cbiAgfSk7XG59O1xuXG52YXIgYXBwbHlDdXN0b21DbGFzcyA9IGZ1bmN0aW9uIGFwcGx5Q3VzdG9tQ2xhc3MoZWxlbSwgcGFyYW1zLCBjbGFzc05hbWUpIHtcbiAgcmVtb3ZlQ3VzdG9tQ2xhc3NlcyhlbGVtLCBwYXJhbXMpO1xuXG4gIGlmIChwYXJhbXMuY3VzdG9tQ2xhc3MgJiYgcGFyYW1zLmN1c3RvbUNsYXNzW2NsYXNzTmFtZV0pIHtcbiAgICBpZiAodHlwZW9mIHBhcmFtcy5jdXN0b21DbGFzc1tjbGFzc05hbWVdICE9PSAnc3RyaW5nJyAmJiAhcGFyYW1zLmN1c3RvbUNsYXNzW2NsYXNzTmFtZV0uZm9yRWFjaCkge1xuICAgICAgcmV0dXJuIHdhcm4oXCJJbnZhbGlkIHR5cGUgb2YgY3VzdG9tQ2xhc3MuXCIuY29uY2F0KGNsYXNzTmFtZSwgXCIhIEV4cGVjdGVkIHN0cmluZyBvciBpdGVyYWJsZSBvYmplY3QsIGdvdCBcXFwiXCIpLmNvbmNhdChfdHlwZW9mKHBhcmFtcy5jdXN0b21DbGFzc1tjbGFzc05hbWVdKSwgXCJcXFwiXCIpKTtcbiAgICB9XG5cbiAgICBhZGRDbGFzcyhlbGVtLCBwYXJhbXMuY3VzdG9tQ2xhc3NbY2xhc3NOYW1lXSk7XG4gIH1cbn07XG5mdW5jdGlvbiBnZXRJbnB1dChjb250ZW50LCBpbnB1dFR5cGUpIHtcbiAgaWYgKCFpbnB1dFR5cGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHN3aXRjaCAoaW5wdXRUeXBlKSB7XG4gICAgY2FzZSAnc2VsZWN0JzpcbiAgICBjYXNlICd0ZXh0YXJlYSc6XG4gICAgY2FzZSAnZmlsZSc6XG4gICAgICByZXR1cm4gZ2V0Q2hpbGRCeUNsYXNzKGNvbnRlbnQsIHN3YWxDbGFzc2VzW2lucHV0VHlwZV0pO1xuXG4gICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgcmV0dXJuIGNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5cIi5jb25jYXQoc3dhbENsYXNzZXMuY2hlY2tib3gsIFwiIGlucHV0XCIpKTtcblxuICAgIGNhc2UgJ3JhZGlvJzpcbiAgICAgIHJldHVybiBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuXCIuY29uY2F0KHN3YWxDbGFzc2VzLnJhZGlvLCBcIiBpbnB1dDpjaGVja2VkXCIpKSB8fCBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuXCIuY29uY2F0KHN3YWxDbGFzc2VzLnJhZGlvLCBcIiBpbnB1dDpmaXJzdC1jaGlsZFwiKSk7XG5cbiAgICBjYXNlICdyYW5nZSc6XG4gICAgICByZXR1cm4gY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLlwiLmNvbmNhdChzd2FsQ2xhc3Nlcy5yYW5nZSwgXCIgaW5wdXRcIikpO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBnZXRDaGlsZEJ5Q2xhc3MoY29udGVudCwgc3dhbENsYXNzZXMuaW5wdXQpO1xuICB9XG59XG52YXIgZm9jdXNJbnB1dCA9IGZ1bmN0aW9uIGZvY3VzSW5wdXQoaW5wdXQpIHtcbiAgaW5wdXQuZm9jdXMoKTsgLy8gcGxhY2UgY3Vyc29yIGF0IGVuZCBvZiB0ZXh0IGluIHRleHQgaW5wdXRcblxuICBpZiAoaW5wdXQudHlwZSAhPT0gJ2ZpbGUnKSB7XG4gICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjM0NTkxNVxuICAgIHZhciB2YWwgPSBpbnB1dC52YWx1ZTtcbiAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICAgIGlucHV0LnZhbHVlID0gdmFsO1xuICB9XG59O1xudmFyIHRvZ2dsZUNsYXNzID0gZnVuY3Rpb24gdG9nZ2xlQ2xhc3ModGFyZ2V0LCBjbGFzc0xpc3QsIGNvbmRpdGlvbikge1xuICBpZiAoIXRhcmdldCB8fCAhY2xhc3NMaXN0KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBjbGFzc0xpc3QgPT09ICdzdHJpbmcnKSB7XG4gICAgY2xhc3NMaXN0ID0gY2xhc3NMaXN0LnNwbGl0KC9cXHMrLykuZmlsdGVyKEJvb2xlYW4pO1xuICB9XG5cbiAgY2xhc3NMaXN0LmZvckVhY2goZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAgIGlmICh0YXJnZXQuZm9yRWFjaCkge1xuICAgICAgdGFyZ2V0LmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgY29uZGl0aW9uID8gZWxlbS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSkgOiBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25kaXRpb24gPyB0YXJnZXQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpIDogdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICB9XG4gIH0pO1xufTtcbnZhciBhZGRDbGFzcyA9IGZ1bmN0aW9uIGFkZENsYXNzKHRhcmdldCwgY2xhc3NMaXN0KSB7XG4gIHRvZ2dsZUNsYXNzKHRhcmdldCwgY2xhc3NMaXN0LCB0cnVlKTtcbn07XG52YXIgcmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiByZW1vdmVDbGFzcyh0YXJnZXQsIGNsYXNzTGlzdCkge1xuICB0b2dnbGVDbGFzcyh0YXJnZXQsIGNsYXNzTGlzdCwgZmFsc2UpO1xufTtcbnZhciBnZXRDaGlsZEJ5Q2xhc3MgPSBmdW5jdGlvbiBnZXRDaGlsZEJ5Q2xhc3MoZWxlbSwgY2xhc3NOYW1lKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbS5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGhhc0NsYXNzKGVsZW0uY2hpbGROb2Rlc1tpXSwgY2xhc3NOYW1lKSkge1xuICAgICAgcmV0dXJuIGVsZW0uY2hpbGROb2Rlc1tpXTtcbiAgICB9XG4gIH1cbn07XG52YXIgYXBwbHlOdW1lcmljYWxTdHlsZSA9IGZ1bmN0aW9uIGFwcGx5TnVtZXJpY2FsU3R5bGUoZWxlbSwgcHJvcGVydHksIHZhbHVlKSB7XG4gIGlmICh2YWx1ZSB8fCBwYXJzZUludCh2YWx1ZSkgPT09IDApIHtcbiAgICBlbGVtLnN0eWxlW3Byb3BlcnR5XSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgPyBcIlwiLmNvbmNhdCh2YWx1ZSwgXCJweFwiKSA6IHZhbHVlO1xuICB9IGVsc2Uge1xuICAgIGVsZW0uc3R5bGUucmVtb3ZlUHJvcGVydHkocHJvcGVydHkpO1xuICB9XG59O1xudmFyIHNob3cgPSBmdW5jdGlvbiBzaG93KGVsZW0pIHtcbiAgdmFyIGRpc3BsYXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdmbGV4JztcbiAgZWxlbS5zdHlsZS5vcGFjaXR5ID0gJyc7XG4gIGVsZW0uc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG59O1xudmFyIGhpZGUgPSBmdW5jdGlvbiBoaWRlKGVsZW0pIHtcbiAgZWxlbS5zdHlsZS5vcGFjaXR5ID0gJyc7XG4gIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbn07XG52YXIgdG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKGVsZW0sIGNvbmRpdGlvbiwgZGlzcGxheSkge1xuICBjb25kaXRpb24gPyBzaG93KGVsZW0sIGRpc3BsYXkpIDogaGlkZShlbGVtKTtcbn07IC8vIGJvcnJvd2VkIGZyb20ganF1ZXJ5ICQoZWxlbSkuaXMoJzp2aXNpYmxlJykgaW1wbGVtZW50YXRpb25cblxudmFyIGlzVmlzaWJsZSA9IGZ1bmN0aW9uIGlzVmlzaWJsZShlbGVtKSB7XG4gIHJldHVybiAhIShlbGVtICYmIChlbGVtLm9mZnNldFdpZHRoIHx8IGVsZW0ub2Zmc2V0SGVpZ2h0IHx8IGVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpKTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXG52YXIgaXNTY3JvbGxhYmxlID0gZnVuY3Rpb24gaXNTY3JvbGxhYmxlKGVsZW0pIHtcbiAgcmV0dXJuICEhKGVsZW0uc2Nyb2xsSGVpZ2h0ID4gZWxlbS5jbGllbnRIZWlnaHQpO1xufTsgLy8gYm9ycm93ZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDYzNTIxMTlcblxudmFyIGhhc0Nzc0FuaW1hdGlvbiA9IGZ1bmN0aW9uIGhhc0Nzc0FuaW1hdGlvbihlbGVtKSB7XG4gIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW0pO1xuICB2YXIgYW5pbUR1cmF0aW9uID0gcGFyc2VGbG9hdChzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdhbmltYXRpb24tZHVyYXRpb24nKSB8fCAnMCcpO1xuICB2YXIgdHJhbnNEdXJhdGlvbiA9IHBhcnNlRmxvYXQoc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgndHJhbnNpdGlvbi1kdXJhdGlvbicpIHx8ICcwJyk7XG4gIHJldHVybiBhbmltRHVyYXRpb24gPiAwIHx8IHRyYW5zRHVyYXRpb24gPiAwO1xufTtcbnZhciBjb250YWlucyA9IGZ1bmN0aW9uIGNvbnRhaW5zKGhheXN0YWNrLCBuZWVkbGUpIHtcbiAgaWYgKHR5cGVvZiBoYXlzdGFjay5jb250YWlucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBoYXlzdGFjay5jb250YWlucyhuZWVkbGUpO1xuICB9XG59O1xudmFyIGFuaW1hdGVUaW1lclByb2dyZXNzQmFyID0gZnVuY3Rpb24gYW5pbWF0ZVRpbWVyUHJvZ3Jlc3NCYXIodGltZXIpIHtcbiAgdmFyIHJlc2V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcbiAgdmFyIHRpbWVyUHJvZ3Jlc3NCYXIgPSBnZXRUaW1lclByb2dyZXNzQmFyKCk7XG5cbiAgaWYgKGlzVmlzaWJsZSh0aW1lclByb2dyZXNzQmFyKSkge1xuICAgIGlmIChyZXNldCkge1xuICAgICAgdGltZXJQcm9ncmVzc0Jhci5zdHlsZS50cmFuc2l0aW9uID0gJ25vbmUnO1xuICAgICAgdGltZXJQcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICB9XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHRpbWVyUHJvZ3Jlc3NCYXIuc3R5bGUudHJhbnNpdGlvbiA9IFwid2lkdGggXCIuY29uY2F0KHRpbWVyIC8gMTAwMCwgXCJzIGxpbmVhclwiKTtcbiAgICAgIHRpbWVyUHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSAnMCUnO1xuICAgIH0sIDEwKTtcbiAgfVxufTtcbnZhciBzdG9wVGltZXJQcm9ncmVzc0JhciA9IGZ1bmN0aW9uIHN0b3BUaW1lclByb2dyZXNzQmFyKCkge1xuICB2YXIgdGltZXJQcm9ncmVzc0JhciA9IGdldFRpbWVyUHJvZ3Jlc3NCYXIoKTtcbiAgdmFyIHRpbWVyUHJvZ3Jlc3NCYXJXaWR0aCA9IHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRpbWVyUHJvZ3Jlc3NCYXIpLndpZHRoKTtcbiAgdGltZXJQcm9ncmVzc0Jhci5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNpdGlvbicpO1xuICB0aW1lclByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICB2YXIgdGltZXJQcm9ncmVzc0JhckZ1bGxXaWR0aCA9IHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRpbWVyUHJvZ3Jlc3NCYXIpLndpZHRoKTtcbiAgdmFyIHRpbWVyUHJvZ3Jlc3NCYXJQZXJjZW50ID0gcGFyc2VJbnQodGltZXJQcm9ncmVzc0JhcldpZHRoIC8gdGltZXJQcm9ncmVzc0JhckZ1bGxXaWR0aCAqIDEwMCk7XG4gIHRpbWVyUHJvZ3Jlc3NCYXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24nKTtcbiAgdGltZXJQcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9IFwiXCIuY29uY2F0KHRpbWVyUHJvZ3Jlc3NCYXJQZXJjZW50LCBcIiVcIik7XG59O1xuXG4vLyBEZXRlY3QgTm9kZSBlbnZcbnZhciBpc05vZGVFbnYgPSBmdW5jdGlvbiBpc05vZGVFbnYoKSB7XG4gIHJldHVybiB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnO1xufTtcblxudmFyIHN3ZWV0SFRNTCA9IFwiXFxuIDxkaXYgYXJpYS1sYWJlbGxlZGJ5PVxcXCJcIi5jb25jYXQoc3dhbENsYXNzZXMudGl0bGUsIFwiXFxcIiBhcmlhLWRlc2NyaWJlZGJ5PVxcXCJcIikuY29uY2F0KHN3YWxDbGFzc2VzLmNvbnRlbnQsIFwiXFxcIiBjbGFzcz1cXFwiXCIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5wb3B1cCwgXCJcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+XFxuICAgPGRpdiBjbGFzcz1cXFwiXCIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5oZWFkZXIsIFwiXFxcIj5cXG4gICAgIDx1bCBjbGFzcz1cXFwiXCIpLmNvbmNhdChzd2FsQ2xhc3Nlc1sncHJvZ3Jlc3Mtc3RlcHMnXSwgXCJcXFwiPjwvdWw+XFxuICAgICA8ZGl2IGNsYXNzPVxcXCJcIikuY29uY2F0KHN3YWxDbGFzc2VzLmljb24sIFwiIFwiKS5jb25jYXQoaWNvblR5cGVzLmVycm9yLCBcIlxcXCI+PC9kaXY+XFxuICAgICA8ZGl2IGNsYXNzPVxcXCJcIikuY29uY2F0KHN3YWxDbGFzc2VzLmljb24sIFwiIFwiKS5jb25jYXQoaWNvblR5cGVzLnF1ZXN0aW9uLCBcIlxcXCI+PC9kaXY+XFxuICAgICA8ZGl2IGNsYXNzPVxcXCJcIikuY29uY2F0KHN3YWxDbGFzc2VzLmljb24sIFwiIFwiKS5jb25jYXQoaWNvblR5cGVzLndhcm5pbmcsIFwiXFxcIj48L2Rpdj5cXG4gICAgIDxkaXYgY2xhc3M9XFxcIlwiKS5jb25jYXQoc3dhbENsYXNzZXMuaWNvbiwgXCIgXCIpLmNvbmNhdChpY29uVHlwZXMuaW5mbywgXCJcXFwiPjwvZGl2PlxcbiAgICAgPGRpdiBjbGFzcz1cXFwiXCIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5pY29uLCBcIiBcIikuY29uY2F0KGljb25UeXBlcy5zdWNjZXNzLCBcIlxcXCI+PC9kaXY+XFxuICAgICA8aW1nIGNsYXNzPVxcXCJcIikuY29uY2F0KHN3YWxDbGFzc2VzLmltYWdlLCBcIlxcXCIgLz5cXG4gICAgIDxoMiBjbGFzcz1cXFwiXCIpLmNvbmNhdChzd2FsQ2xhc3Nlcy50aXRsZSwgXCJcXFwiIGlkPVxcXCJcIikuY29uY2F0KHN3YWxDbGFzc2VzLnRpdGxlLCBcIlxcXCI+PC9oMj5cXG4gICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiXCIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5jbG9zZSwgXCJcXFwiPjwvYnV0dG9uPlxcbiAgIDwvZGl2PlxcbiAgIDxkaXYgY2xhc3M9XFxcIlwiKS5jb25jYXQoc3dhbENsYXNzZXMuY29udGVudCwgXCJcXFwiPlxcbiAgICAgPGRpdiBpZD1cXFwiXCIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5jb250ZW50LCBcIlxcXCIgY2xhc3M9XFxcIlwiKS5jb25jYXQoc3dhbENsYXNzZXNbJ2h0bWwtY29udGFpbmVyJ10sIFwiXFxcIj48L2Rpdj5cXG4gICAgIDxpbnB1dCBjbGFzcz1cXFwiXCIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5pbnB1dCwgXCJcXFwiIC8+XFxuICAgICA8aW5wdXQgdHlwZT1cXFwiZmlsZVxcXCIgY2xhc3M9XFxcIlwiKS5jb25jYXQoc3dhbENsYXNzZXMuZmlsZSwgXCJcXFwiIC8+XFxuICAgICA8ZGl2IGNsYXNzPVxcXCJcIikuY29uY2F0KHN3YWxDbGFzc2VzLnJhbmdlLCBcIlxcXCI+XFxuICAgICAgIDxpbnB1dCB0eXBlPVxcXCJyYW5nZVxcXCIgLz5cXG4gICAgICAgPG91dHB1dD48L291dHB1dD5cXG4gICAgIDwvZGl2PlxcbiAgICAgPHNlbGVjdCBjbGFzcz1cXFwiXCIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5zZWxlY3QsIFwiXFxcIj48L3NlbGVjdD5cXG4gICAgIDxkaXYgY2xhc3M9XFxcIlwiKS5jb25jYXQoc3dhbENsYXNzZXMucmFkaW8sIFwiXFxcIj48L2Rpdj5cXG4gICAgIDxsYWJlbCBmb3I9XFxcIlwiKS5jb25jYXQoc3dhbENsYXNzZXMuY2hlY2tib3gsIFwiXFxcIiBjbGFzcz1cXFwiXCIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5jaGVja2JveCwgXCJcXFwiPlxcbiAgICAgICA8aW5wdXQgdHlwZT1cXFwiY2hlY2tib3hcXFwiIC8+XFxuICAgICAgIDxzcGFuIGNsYXNzPVxcXCJcIikuY29uY2F0KHN3YWxDbGFzc2VzLmxhYmVsLCBcIlxcXCI+PC9zcGFuPlxcbiAgICAgPC9sYWJlbD5cXG4gICAgIDx0ZXh0YXJlYSBjbGFzcz1cXFwiXCIpLmNvbmNhdChzd2FsQ2xhc3Nlcy50ZXh0YXJlYSwgXCJcXFwiPjwvdGV4dGFyZWE+XFxuICAgICA8ZGl2IGNsYXNzPVxcXCJcIikuY29uY2F0KHN3YWxDbGFzc2VzWyd2YWxpZGF0aW9uLW1lc3NhZ2UnXSwgXCJcXFwiIGlkPVxcXCJcIikuY29uY2F0KHN3YWxDbGFzc2VzWyd2YWxpZGF0aW9uLW1lc3NhZ2UnXSwgXCJcXFwiPjwvZGl2PlxcbiAgIDwvZGl2PlxcbiAgIDxkaXYgY2xhc3M9XFxcIlwiKS5jb25jYXQoc3dhbENsYXNzZXMuYWN0aW9ucywgXCJcXFwiPlxcbiAgICAgPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJcIikuY29uY2F0KHN3YWxDbGFzc2VzLmNvbmZpcm0sIFwiXFxcIj5PSzwvYnV0dG9uPlxcbiAgICAgPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJcIikuY29uY2F0KHN3YWxDbGFzc2VzLmNhbmNlbCwgXCJcXFwiPkNhbmNlbDwvYnV0dG9uPlxcbiAgIDwvZGl2PlxcbiAgIDxkaXYgY2xhc3M9XFxcIlwiKS5jb25jYXQoc3dhbENsYXNzZXMuZm9vdGVyLCBcIlxcXCI+PC9kaXY+XFxuICAgPGRpdiBjbGFzcz1cXFwiXCIpLmNvbmNhdChzd2FsQ2xhc3Nlc1sndGltZXItcHJvZ3Jlc3MtYmFyJ10sIFwiXFxcIj48L2Rpdj5cXG4gPC9kaXY+XFxuXCIpLnJlcGxhY2UoLyhefFxcbilcXHMqL2csICcnKTtcblxudmFyIHJlc2V0T2xkQ29udGFpbmVyID0gZnVuY3Rpb24gcmVzZXRPbGRDb250YWluZXIoKSB7XG4gIHZhciBvbGRDb250YWluZXIgPSBnZXRDb250YWluZXIoKTtcblxuICBpZiAoIW9sZENvbnRhaW5lcikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIG9sZENvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9sZENvbnRhaW5lcik7XG4gIHJlbW92ZUNsYXNzKFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGRvY3VtZW50LmJvZHldLCBbc3dhbENsYXNzZXNbJ25vLWJhY2tkcm9wJ10sIHN3YWxDbGFzc2VzWyd0b2FzdC1zaG93biddLCBzd2FsQ2xhc3Nlc1snaGFzLWNvbHVtbiddXSk7XG59O1xuXG52YXIgb2xkSW5wdXRWYWw7IC8vIElFMTEgd29ya2Fyb3VuZCwgc2VlICMxMTA5IGZvciBkZXRhaWxzXG5cbnZhciByZXNldFZhbGlkYXRpb25NZXNzYWdlID0gZnVuY3Rpb24gcmVzZXRWYWxpZGF0aW9uTWVzc2FnZShlKSB7XG4gIGlmIChTd2FsLmlzVmlzaWJsZSgpICYmIG9sZElucHV0VmFsICE9PSBlLnRhcmdldC52YWx1ZSkge1xuICAgIFN3YWwucmVzZXRWYWxpZGF0aW9uTWVzc2FnZSgpO1xuICB9XG5cbiAgb2xkSW5wdXRWYWwgPSBlLnRhcmdldC52YWx1ZTtcbn07XG5cbnZhciBhZGRJbnB1dENoYW5nZUxpc3RlbmVycyA9IGZ1bmN0aW9uIGFkZElucHV0Q2hhbmdlTGlzdGVuZXJzKCkge1xuICB2YXIgY29udGVudCA9IGdldENvbnRlbnQoKTtcbiAgdmFyIGlucHV0ID0gZ2V0Q2hpbGRCeUNsYXNzKGNvbnRlbnQsIHN3YWxDbGFzc2VzLmlucHV0KTtcbiAgdmFyIGZpbGUgPSBnZXRDaGlsZEJ5Q2xhc3MoY29udGVudCwgc3dhbENsYXNzZXMuZmlsZSk7XG4gIHZhciByYW5nZSA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5cIi5jb25jYXQoc3dhbENsYXNzZXMucmFuZ2UsIFwiIGlucHV0XCIpKTtcbiAgdmFyIHJhbmdlT3V0cHV0ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLlwiLmNvbmNhdChzd2FsQ2xhc3Nlcy5yYW5nZSwgXCIgb3V0cHV0XCIpKTtcbiAgdmFyIHNlbGVjdCA9IGdldENoaWxkQnlDbGFzcyhjb250ZW50LCBzd2FsQ2xhc3Nlcy5zZWxlY3QpO1xuICB2YXIgY2hlY2tib3ggPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuXCIuY29uY2F0KHN3YWxDbGFzc2VzLmNoZWNrYm94LCBcIiBpbnB1dFwiKSk7XG4gIHZhciB0ZXh0YXJlYSA9IGdldENoaWxkQnlDbGFzcyhjb250ZW50LCBzd2FsQ2xhc3Nlcy50ZXh0YXJlYSk7XG4gIGlucHV0Lm9uaW5wdXQgPSByZXNldFZhbGlkYXRpb25NZXNzYWdlO1xuICBmaWxlLm9uY2hhbmdlID0gcmVzZXRWYWxpZGF0aW9uTWVzc2FnZTtcbiAgc2VsZWN0Lm9uY2hhbmdlID0gcmVzZXRWYWxpZGF0aW9uTWVzc2FnZTtcbiAgY2hlY2tib3gub25jaGFuZ2UgPSByZXNldFZhbGlkYXRpb25NZXNzYWdlO1xuICB0ZXh0YXJlYS5vbmlucHV0ID0gcmVzZXRWYWxpZGF0aW9uTWVzc2FnZTtcblxuICByYW5nZS5vbmlucHV0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICByZXNldFZhbGlkYXRpb25NZXNzYWdlKGUpO1xuICAgIHJhbmdlT3V0cHV0LnZhbHVlID0gcmFuZ2UudmFsdWU7XG4gIH07XG5cbiAgcmFuZ2Uub25jaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgIHJlc2V0VmFsaWRhdGlvbk1lc3NhZ2UoZSk7XG4gICAgcmFuZ2UubmV4dFNpYmxpbmcudmFsdWUgPSByYW5nZS52YWx1ZTtcbiAgfTtcbn07XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQodGFyZ2V0KSB7XG4gIHJldHVybiB0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldDtcbn07XG5cbnZhciBzZXR1cEFjY2Vzc2liaWxpdHkgPSBmdW5jdGlvbiBzZXR1cEFjY2Vzc2liaWxpdHkocGFyYW1zKSB7XG4gIHZhciBwb3B1cCA9IGdldFBvcHVwKCk7XG4gIHBvcHVwLnNldEF0dHJpYnV0ZSgncm9sZScsIHBhcmFtcy50b2FzdCA/ICdhbGVydCcgOiAnZGlhbG9nJyk7XG4gIHBvcHVwLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgcGFyYW1zLnRvYXN0ID8gJ3BvbGl0ZScgOiAnYXNzZXJ0aXZlJyk7XG5cbiAgaWYgKCFwYXJhbXMudG9hc3QpIHtcbiAgICBwb3B1cC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbW9kYWwnLCAndHJ1ZScpO1xuICB9XG59O1xuXG52YXIgc2V0dXBSVEwgPSBmdW5jdGlvbiBzZXR1cFJUTCh0YXJnZXRFbGVtZW50KSB7XG4gIGlmICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXRFbGVtZW50KS5kaXJlY3Rpb24gPT09ICdydGwnKSB7XG4gICAgYWRkQ2xhc3MoZ2V0Q29udGFpbmVyKCksIHN3YWxDbGFzc2VzLnJ0bCk7XG4gIH1cbn07XG4vKlxuICogQWRkIG1vZGFsICsgYmFja2Ryb3AgdG8gRE9NXG4gKi9cblxuXG52YXIgaW5pdCA9IGZ1bmN0aW9uIGluaXQocGFyYW1zKSB7XG4gIC8vIENsZWFuIHVwIHRoZSBvbGQgcG9wdXAgY29udGFpbmVyIGlmIGl0IGV4aXN0c1xuICByZXNldE9sZENvbnRhaW5lcigpO1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblxuICBpZiAoaXNOb2RlRW52KCkpIHtcbiAgICBlcnJvcignU3dlZXRBbGVydDIgcmVxdWlyZXMgZG9jdW1lbnQgdG8gaW5pdGlhbGl6ZScpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29udGFpbmVyLmNsYXNzTmFtZSA9IHN3YWxDbGFzc2VzLmNvbnRhaW5lcjtcbiAgY29udGFpbmVyLmlubmVySFRNTCA9IHN3ZWV0SFRNTDtcbiAgdmFyIHRhcmdldEVsZW1lbnQgPSBnZXRUYXJnZXQocGFyYW1zLnRhcmdldCk7XG4gIHRhcmdldEVsZW1lbnQuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgc2V0dXBBY2Nlc3NpYmlsaXR5KHBhcmFtcyk7XG4gIHNldHVwUlRMKHRhcmdldEVsZW1lbnQpO1xuICBhZGRJbnB1dENoYW5nZUxpc3RlbmVycygpO1xufTtcblxudmFyIHBhcnNlSHRtbFRvQ29udGFpbmVyID0gZnVuY3Rpb24gcGFyc2VIdG1sVG9Db250YWluZXIocGFyYW0sIHRhcmdldCkge1xuICAvLyBET00gZWxlbWVudFxuICBpZiAocGFyYW0gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChwYXJhbSk7IC8vIEpRdWVyeSBlbGVtZW50KHMpXG4gIH0gZWxzZSBpZiAoX3R5cGVvZihwYXJhbSkgPT09ICdvYmplY3QnKSB7XG4gICAgaGFuZGxlSnF1ZXJ5RWxlbSh0YXJnZXQsIHBhcmFtKTsgLy8gUGxhaW4gc3RyaW5nXG4gIH0gZWxzZSBpZiAocGFyYW0pIHtcbiAgICB0YXJnZXQuaW5uZXJIVE1MID0gcGFyYW07XG4gIH1cbn07XG5cbnZhciBoYW5kbGVKcXVlcnlFbGVtID0gZnVuY3Rpb24gaGFuZGxlSnF1ZXJ5RWxlbSh0YXJnZXQsIGVsZW0pIHtcbiAgdGFyZ2V0LmlubmVySFRNTCA9ICcnO1xuXG4gIGlmICgwIGluIGVsZW0pIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSBpbiBlbGVtOyBpKyspIHtcbiAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbGVtW2ldLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbGVtLmNsb25lTm9kZSh0cnVlKSk7XG4gIH1cbn07XG5cbnZhciBhbmltYXRpb25FbmRFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gUHJldmVudCBydW4gaW4gTm9kZSBlbnZcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzTm9kZUVudigpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIHRlc3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB2YXIgdHJhbnNFbmRFdmVudE5hbWVzID0ge1xuICAgIFdlYmtpdEFuaW1hdGlvbjogJ3dlYmtpdEFuaW1hdGlvbkVuZCcsXG4gICAgT0FuaW1hdGlvbjogJ29BbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCcsXG4gICAgYW5pbWF0aW9uOiAnYW5pbWF0aW9uZW5kJ1xuICB9O1xuXG4gIGZvciAodmFyIGkgaW4gdHJhbnNFbmRFdmVudE5hbWVzKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0cmFuc0VuZEV2ZW50TmFtZXMsIGkpICYmIHR5cGVvZiB0ZXN0RWwuc3R5bGVbaV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gdHJhbnNFbmRFdmVudE5hbWVzW2ldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn0oKTtcblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL2pzL3NyYy9tb2RhbC5qc1xuXG52YXIgbWVhc3VyZVNjcm9sbGJhciA9IGZ1bmN0aW9uIG1lYXN1cmVTY3JvbGxiYXIoKSB7XG4gIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9IHN3YWxDbGFzc2VzWydzY3JvbGxiYXItbWVhc3VyZSddO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcm9sbERpdik7XG4gIHZhciBzY3JvbGxiYXJXaWR0aCA9IHNjcm9sbERpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO1xuICByZXR1cm4gc2Nyb2xsYmFyV2lkdGg7XG59O1xuXG52YXIgcmVuZGVyQWN0aW9ucyA9IGZ1bmN0aW9uIHJlbmRlckFjdGlvbnMoaW5zdGFuY2UsIHBhcmFtcykge1xuICB2YXIgYWN0aW9ucyA9IGdldEFjdGlvbnMoKTtcbiAgdmFyIGNvbmZpcm1CdXR0b24gPSBnZXRDb25maXJtQnV0dG9uKCk7XG4gIHZhciBjYW5jZWxCdXR0b24gPSBnZXRDYW5jZWxCdXR0b24oKTsgLy8gQWN0aW9ucyAoYnV0dG9ucykgd3JhcHBlclxuXG4gIGlmICghcGFyYW1zLnNob3dDb25maXJtQnV0dG9uICYmICFwYXJhbXMuc2hvd0NhbmNlbEJ1dHRvbikge1xuICAgIGhpZGUoYWN0aW9ucyk7XG4gIH0gLy8gQ3VzdG9tIGNsYXNzXG5cblxuICBhcHBseUN1c3RvbUNsYXNzKGFjdGlvbnMsIHBhcmFtcywgJ2FjdGlvbnMnKTsgLy8gUmVuZGVyIGNvbmZpcm0gYnV0dG9uXG5cbiAgcmVuZGVyQnV0dG9uKGNvbmZpcm1CdXR0b24sICdjb25maXJtJywgcGFyYW1zKTsgLy8gcmVuZGVyIENhbmNlbCBCdXR0b25cblxuICByZW5kZXJCdXR0b24oY2FuY2VsQnV0dG9uLCAnY2FuY2VsJywgcGFyYW1zKTtcblxuICBpZiAocGFyYW1zLmJ1dHRvbnNTdHlsaW5nKSB7XG4gICAgaGFuZGxlQnV0dG9uc1N0eWxpbmcoY29uZmlybUJ1dHRvbiwgY2FuY2VsQnV0dG9uLCBwYXJhbXMpO1xuICB9IGVsc2Uge1xuICAgIHJlbW92ZUNsYXNzKFtjb25maXJtQnV0dG9uLCBjYW5jZWxCdXR0b25dLCBzd2FsQ2xhc3Nlcy5zdHlsZWQpO1xuICAgIGNvbmZpcm1CdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29uZmlybUJ1dHRvbi5zdHlsZS5ib3JkZXJMZWZ0Q29sb3IgPSBjb25maXJtQnV0dG9uLnN0eWxlLmJvcmRlclJpZ2h0Q29sb3IgPSAnJztcbiAgICBjYW5jZWxCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY2FuY2VsQnV0dG9uLnN0eWxlLmJvcmRlckxlZnRDb2xvciA9IGNhbmNlbEJ1dHRvbi5zdHlsZS5ib3JkZXJSaWdodENvbG9yID0gJyc7XG4gIH1cblxuICBpZiAocGFyYW1zLnJldmVyc2VCdXR0b25zKSB7XG4gICAgY29uZmlybUJ1dHRvbi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjYW5jZWxCdXR0b24sIGNvbmZpcm1CdXR0b24pO1xuICB9XG59O1xuXG5mdW5jdGlvbiBoYW5kbGVCdXR0b25zU3R5bGluZyhjb25maXJtQnV0dG9uLCBjYW5jZWxCdXR0b24sIHBhcmFtcykge1xuICBhZGRDbGFzcyhbY29uZmlybUJ1dHRvbiwgY2FuY2VsQnV0dG9uXSwgc3dhbENsYXNzZXMuc3R5bGVkKTsgLy8gQnV0dG9ucyBiYWNrZ3JvdW5kIGNvbG9yc1xuXG4gIGlmIChwYXJhbXMuY29uZmlybUJ1dHRvbkNvbG9yKSB7XG4gICAgY29uZmlybUJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwYXJhbXMuY29uZmlybUJ1dHRvbkNvbG9yO1xuICB9XG5cbiAgaWYgKHBhcmFtcy5jYW5jZWxCdXR0b25Db2xvcikge1xuICAgIGNhbmNlbEJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwYXJhbXMuY2FuY2VsQnV0dG9uQ29sb3I7XG4gIH0gLy8gTG9hZGluZyBzdGF0ZVxuXG5cbiAgdmFyIGNvbmZpcm1CdXR0b25CYWNrZ3JvdW5kQ29sb3IgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjb25maXJtQnV0dG9uKS5nZXRQcm9wZXJ0eVZhbHVlKCdiYWNrZ3JvdW5kLWNvbG9yJyk7XG4gIGNvbmZpcm1CdXR0b24uc3R5bGUuYm9yZGVyTGVmdENvbG9yID0gY29uZmlybUJ1dHRvbkJhY2tncm91bmRDb2xvcjtcbiAgY29uZmlybUJ1dHRvbi5zdHlsZS5ib3JkZXJSaWdodENvbG9yID0gY29uZmlybUJ1dHRvbkJhY2tncm91bmRDb2xvcjtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQnV0dG9uKGJ1dHRvbiwgYnV0dG9uVHlwZSwgcGFyYW1zKSB7XG4gIHRvZ2dsZShidXR0b24sIHBhcmFtc1tcInNob3dcIi5jb25jYXQoY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKGJ1dHRvblR5cGUpLCBcIkJ1dHRvblwiKV0sICdpbmxpbmUtYmxvY2snKTtcbiAgYnV0dG9uLmlubmVySFRNTCA9IHBhcmFtc1tcIlwiLmNvbmNhdChidXR0b25UeXBlLCBcIkJ1dHRvblRleHRcIildOyAvLyBTZXQgY2FwdGlvbiB0ZXh0XG5cbiAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHBhcmFtc1tcIlwiLmNvbmNhdChidXR0b25UeXBlLCBcIkJ1dHRvbkFyaWFMYWJlbFwiKV0pOyAvLyBBUklBIGxhYmVsXG4gIC8vIEFkZCBidXR0b25zIGN1c3RvbSBjbGFzc2VzXG5cbiAgYnV0dG9uLmNsYXNzTmFtZSA9IHN3YWxDbGFzc2VzW2J1dHRvblR5cGVdO1xuICBhcHBseUN1c3RvbUNsYXNzKGJ1dHRvbiwgcGFyYW1zLCBcIlwiLmNvbmNhdChidXR0b25UeXBlLCBcIkJ1dHRvblwiKSk7XG4gIGFkZENsYXNzKGJ1dHRvbiwgcGFyYW1zW1wiXCIuY29uY2F0KGJ1dHRvblR5cGUsIFwiQnV0dG9uQ2xhc3NcIildKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQmFja2Ryb3BQYXJhbShjb250YWluZXIsIGJhY2tkcm9wKSB7XG4gIGlmICh0eXBlb2YgYmFja2Ryb3AgPT09ICdzdHJpbmcnKSB7XG4gICAgY29udGFpbmVyLnN0eWxlLmJhY2tncm91bmQgPSBiYWNrZHJvcDtcbiAgfSBlbHNlIGlmICghYmFja2Ryb3ApIHtcbiAgICBhZGRDbGFzcyhbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBkb2N1bWVudC5ib2R5XSwgc3dhbENsYXNzZXNbJ25vLWJhY2tkcm9wJ10pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVBvc2l0aW9uUGFyYW0oY29udGFpbmVyLCBwb3NpdGlvbikge1xuICBpZiAocG9zaXRpb24gaW4gc3dhbENsYXNzZXMpIHtcbiAgICBhZGRDbGFzcyhjb250YWluZXIsIHN3YWxDbGFzc2VzW3Bvc2l0aW9uXSk7XG4gIH0gZWxzZSB7XG4gICAgd2FybignVGhlIFwicG9zaXRpb25cIiBwYXJhbWV0ZXIgaXMgbm90IHZhbGlkLCBkZWZhdWx0aW5nIHRvIFwiY2VudGVyXCInKTtcbiAgICBhZGRDbGFzcyhjb250YWluZXIsIHN3YWxDbGFzc2VzLmNlbnRlcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlR3Jvd1BhcmFtKGNvbnRhaW5lciwgZ3Jvdykge1xuICBpZiAoZ3JvdyAmJiB0eXBlb2YgZ3JvdyA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgZ3Jvd0NsYXNzID0gXCJncm93LVwiLmNvbmNhdChncm93KTtcblxuICAgIGlmIChncm93Q2xhc3MgaW4gc3dhbENsYXNzZXMpIHtcbiAgICAgIGFkZENsYXNzKGNvbnRhaW5lciwgc3dhbENsYXNzZXNbZ3Jvd0NsYXNzXSk7XG4gICAgfVxuICB9XG59XG5cbnZhciByZW5kZXJDb250YWluZXIgPSBmdW5jdGlvbiByZW5kZXJDb250YWluZXIoaW5zdGFuY2UsIHBhcmFtcykge1xuICB2YXIgY29udGFpbmVyID0gZ2V0Q29udGFpbmVyKCk7XG5cbiAgaWYgKCFjb250YWluZXIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBoYW5kbGVCYWNrZHJvcFBhcmFtKGNvbnRhaW5lciwgcGFyYW1zLmJhY2tkcm9wKTtcblxuICBpZiAoIXBhcmFtcy5iYWNrZHJvcCAmJiBwYXJhbXMuYWxsb3dPdXRzaWRlQ2xpY2spIHtcbiAgICB3YXJuKCdcImFsbG93T3V0c2lkZUNsaWNrXCIgcGFyYW1ldGVyIHJlcXVpcmVzIGBiYWNrZHJvcGAgcGFyYW1ldGVyIHRvIGJlIHNldCB0byBgdHJ1ZWAnKTtcbiAgfVxuXG4gIGhhbmRsZVBvc2l0aW9uUGFyYW0oY29udGFpbmVyLCBwYXJhbXMucG9zaXRpb24pO1xuICBoYW5kbGVHcm93UGFyYW0oY29udGFpbmVyLCBwYXJhbXMuZ3Jvdyk7IC8vIEN1c3RvbSBjbGFzc1xuXG4gIGFwcGx5Q3VzdG9tQ2xhc3MoY29udGFpbmVyLCBwYXJhbXMsICdjb250YWluZXInKTsgLy8gU2V0IHF1ZXVlIHN0ZXAgYXR0cmlidXRlIGZvciBnZXRRdWV1ZVN0ZXAoKSBtZXRob2RcblxuICB2YXIgcXVldWVTdGVwID0gZG9jdW1lbnQuYm9keS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dhbDItcXVldWUtc3RlcCcpO1xuXG4gIGlmIChxdWV1ZVN0ZXApIHtcbiAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdkYXRhLXF1ZXVlLXN0ZXAnLCBxdWV1ZVN0ZXApO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXN3YWwyLXF1ZXVlLXN0ZXAnKTtcbiAgfVxufTtcblxuLyoqXG4gKiBUaGlzIG1vZHVsZSBjb250YWludHMgYFdlYWtNYXBgcyBmb3IgZWFjaCBlZmZlY3RpdmVseS1cInByaXZhdGUgIHByb3BlcnR5XCIgdGhhdCBhIGBTd2FsYCBoYXMuXG4gKiBGb3IgZXhhbXBsZSwgdG8gc2V0IHRoZSBwcml2YXRlIHByb3BlcnR5IFwiZm9vXCIgb2YgYHRoaXNgIHRvIFwiYmFyXCIsIHlvdSBjYW4gYHByaXZhdGVQcm9wcy5mb28uc2V0KHRoaXMsICdiYXInKWBcbiAqIFRoaXMgaXMgdGhlIGFwcHJvYWNoIHRoYXQgQmFiZWwgd2lsbCBwcm9iYWJseSB0YWtlIHRvIGltcGxlbWVudCBwcml2YXRlIG1ldGhvZHMvZmllbGRzXG4gKiAgIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXByaXZhdGUtbWV0aG9kc1xuICogICBodHRwczovL2dpdGh1Yi5jb20vYmFiZWwvYmFiZWwvcHVsbC83NTU1XG4gKiBPbmNlIHdlIGhhdmUgdGhlIGNoYW5nZXMgZnJvbSB0aGF0IFBSIGluIEJhYmVsLCBhbmQgb3VyIGNvcmUgY2xhc3MgZml0cyByZWFzb25hYmxlIGluICpvbmUgbW9kdWxlKlxuICogICB0aGVuIHdlIGNhbiB1c2UgdGhhdCBsYW5ndWFnZSBmZWF0dXJlLlxuICovXG52YXIgcHJpdmF0ZVByb3BzID0ge1xuICBwcm9taXNlOiBuZXcgV2Vha01hcCgpLFxuICBpbm5lclBhcmFtczogbmV3IFdlYWtNYXAoKSxcbiAgZG9tQ2FjaGU6IG5ldyBXZWFrTWFwKClcbn07XG5cbnZhciBpbnB1dFR5cGVzID0gWydpbnB1dCcsICdmaWxlJywgJ3JhbmdlJywgJ3NlbGVjdCcsICdyYWRpbycsICdjaGVja2JveCcsICd0ZXh0YXJlYSddO1xudmFyIHJlbmRlcklucHV0ID0gZnVuY3Rpb24gcmVuZGVySW5wdXQoaW5zdGFuY2UsIHBhcmFtcykge1xuICB2YXIgY29udGVudCA9IGdldENvbnRlbnQoKTtcbiAgdmFyIGlubmVyUGFyYW1zID0gcHJpdmF0ZVByb3BzLmlubmVyUGFyYW1zLmdldChpbnN0YW5jZSk7XG4gIHZhciByZXJlbmRlciA9ICFpbm5lclBhcmFtcyB8fCBwYXJhbXMuaW5wdXQgIT09IGlubmVyUGFyYW1zLmlucHV0O1xuICBpbnB1dFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKGlucHV0VHlwZSkge1xuICAgIHZhciBpbnB1dENsYXNzID0gc3dhbENsYXNzZXNbaW5wdXRUeXBlXTtcbiAgICB2YXIgaW5wdXRDb250YWluZXIgPSBnZXRDaGlsZEJ5Q2xhc3MoY29udGVudCwgaW5wdXRDbGFzcyk7IC8vIHNldCBhdHRyaWJ1dGVzXG5cbiAgICBzZXRBdHRyaWJ1dGVzKGlucHV0VHlwZSwgcGFyYW1zLmlucHV0QXR0cmlidXRlcyk7IC8vIHNldCBjbGFzc1xuXG4gICAgaW5wdXRDb250YWluZXIuY2xhc3NOYW1lID0gaW5wdXRDbGFzcztcblxuICAgIGlmIChyZXJlbmRlcikge1xuICAgICAgaGlkZShpbnB1dENvbnRhaW5lcik7XG4gICAgfVxuICB9KTtcblxuICBpZiAocGFyYW1zLmlucHV0KSB7XG4gICAgaWYgKHJlcmVuZGVyKSB7XG4gICAgICBzaG93SW5wdXQocGFyYW1zKTtcbiAgICB9IC8vIHNldCBjdXN0b20gY2xhc3NcblxuXG4gICAgc2V0Q3VzdG9tQ2xhc3MocGFyYW1zKTtcbiAgfVxufTtcblxudmFyIHNob3dJbnB1dCA9IGZ1bmN0aW9uIHNob3dJbnB1dChwYXJhbXMpIHtcbiAgaWYgKCFyZW5kZXJJbnB1dFR5cGVbcGFyYW1zLmlucHV0XSkge1xuICAgIHJldHVybiBlcnJvcihcIlVuZXhwZWN0ZWQgdHlwZSBvZiBpbnB1dCEgRXhwZWN0ZWQgXFxcInRleHRcXFwiLCBcXFwiZW1haWxcXFwiLCBcXFwicGFzc3dvcmRcXFwiLCBcXFwibnVtYmVyXFxcIiwgXFxcInRlbFxcXCIsIFxcXCJzZWxlY3RcXFwiLCBcXFwicmFkaW9cXFwiLCBcXFwiY2hlY2tib3hcXFwiLCBcXFwidGV4dGFyZWFcXFwiLCBcXFwiZmlsZVxcXCIgb3IgXFxcInVybFxcXCIsIGdvdCBcXFwiXCIuY29uY2F0KHBhcmFtcy5pbnB1dCwgXCJcXFwiXCIpKTtcbiAgfVxuXG4gIHZhciBpbnB1dENvbnRhaW5lciA9IGdldElucHV0Q29udGFpbmVyKHBhcmFtcy5pbnB1dCk7XG4gIHZhciBpbnB1dCA9IHJlbmRlcklucHV0VHlwZVtwYXJhbXMuaW5wdXRdKGlucHV0Q29udGFpbmVyLCBwYXJhbXMpO1xuICBzaG93KGlucHV0KTsgLy8gaW5wdXQgYXV0b2ZvY3VzXG5cbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgZm9jdXNJbnB1dChpbnB1dCk7XG4gIH0pO1xufTtcblxudmFyIHJlbW92ZUF0dHJpYnV0ZXMgPSBmdW5jdGlvbiByZW1vdmVBdHRyaWJ1dGVzKGlucHV0KSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXQuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBhdHRyTmFtZSA9IGlucHV0LmF0dHJpYnV0ZXNbaV0ubmFtZTtcblxuICAgIGlmICghKFsndHlwZScsICd2YWx1ZScsICdzdHlsZSddLmluZGV4T2YoYXR0ck5hbWUpICE9PSAtMSkpIHtcbiAgICAgIGlucHV0LnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgc2V0QXR0cmlidXRlcyA9IGZ1bmN0aW9uIHNldEF0dHJpYnV0ZXMoaW5wdXRUeXBlLCBpbnB1dEF0dHJpYnV0ZXMpIHtcbiAgdmFyIGlucHV0ID0gZ2V0SW5wdXQoZ2V0Q29udGVudCgpLCBpbnB1dFR5cGUpO1xuXG4gIGlmICghaW5wdXQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICByZW1vdmVBdHRyaWJ1dGVzKGlucHV0KTtcblxuICBmb3IgKHZhciBhdHRyIGluIGlucHV0QXR0cmlidXRlcykge1xuICAgIC8vIERvIG5vdCBzZXQgYSBwbGFjZWhvbGRlciBmb3IgPGlucHV0IHR5cGU9XCJyYW5nZVwiPlxuICAgIC8vIGl0J2xsIGNyYXNoIEVkZ2UsICMxMjk4XG4gICAgaWYgKGlucHV0VHlwZSA9PT0gJ3JhbmdlJyAmJiBhdHRyID09PSAncGxhY2Vob2xkZXInKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoYXR0ciwgaW5wdXRBdHRyaWJ1dGVzW2F0dHJdKTtcbiAgfVxufTtcblxudmFyIHNldEN1c3RvbUNsYXNzID0gZnVuY3Rpb24gc2V0Q3VzdG9tQ2xhc3MocGFyYW1zKSB7XG4gIHZhciBpbnB1dENvbnRhaW5lciA9IGdldElucHV0Q29udGFpbmVyKHBhcmFtcy5pbnB1dCk7XG5cbiAgaWYgKHBhcmFtcy5jdXN0b21DbGFzcykge1xuICAgIGFkZENsYXNzKGlucHV0Q29udGFpbmVyLCBwYXJhbXMuY3VzdG9tQ2xhc3MuaW5wdXQpO1xuICB9XG59O1xuXG52YXIgc2V0SW5wdXRQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIHNldElucHV0UGxhY2Vob2xkZXIoaW5wdXQsIHBhcmFtcykge1xuICBpZiAoIWlucHV0LnBsYWNlaG9sZGVyIHx8IHBhcmFtcy5pbnB1dFBsYWNlaG9sZGVyKSB7XG4gICAgaW5wdXQucGxhY2Vob2xkZXIgPSBwYXJhbXMuaW5wdXRQbGFjZWhvbGRlcjtcbiAgfVxufTtcblxudmFyIGdldElucHV0Q29udGFpbmVyID0gZnVuY3Rpb24gZ2V0SW5wdXRDb250YWluZXIoaW5wdXRUeXBlKSB7XG4gIHZhciBpbnB1dENsYXNzID0gc3dhbENsYXNzZXNbaW5wdXRUeXBlXSA/IHN3YWxDbGFzc2VzW2lucHV0VHlwZV0gOiBzd2FsQ2xhc3Nlcy5pbnB1dDtcbiAgcmV0dXJuIGdldENoaWxkQnlDbGFzcyhnZXRDb250ZW50KCksIGlucHV0Q2xhc3MpO1xufTtcblxudmFyIHJlbmRlcklucHV0VHlwZSA9IHt9O1xuXG5yZW5kZXJJbnB1dFR5cGUudGV4dCA9IHJlbmRlcklucHV0VHlwZS5lbWFpbCA9IHJlbmRlcklucHV0VHlwZS5wYXNzd29yZCA9IHJlbmRlcklucHV0VHlwZS5udW1iZXIgPSByZW5kZXJJbnB1dFR5cGUudGVsID0gcmVuZGVySW5wdXRUeXBlLnVybCA9IGZ1bmN0aW9uIChpbnB1dCwgcGFyYW1zKSB7XG4gIGlmICh0eXBlb2YgcGFyYW1zLmlucHV0VmFsdWUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBwYXJhbXMuaW5wdXRWYWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICBpbnB1dC52YWx1ZSA9IHBhcmFtcy5pbnB1dFZhbHVlO1xuICB9IGVsc2UgaWYgKCFpc1Byb21pc2UocGFyYW1zLmlucHV0VmFsdWUpKSB7XG4gICAgd2FybihcIlVuZXhwZWN0ZWQgdHlwZSBvZiBpbnB1dFZhbHVlISBFeHBlY3RlZCBcXFwic3RyaW5nXFxcIiwgXFxcIm51bWJlclxcXCIgb3IgXFxcIlByb21pc2VcXFwiLCBnb3QgXFxcIlwiLmNvbmNhdChfdHlwZW9mKHBhcmFtcy5pbnB1dFZhbHVlKSwgXCJcXFwiXCIpKTtcbiAgfVxuXG4gIHNldElucHV0UGxhY2Vob2xkZXIoaW5wdXQsIHBhcmFtcyk7XG4gIGlucHV0LnR5cGUgPSBwYXJhbXMuaW5wdXQ7XG4gIHJldHVybiBpbnB1dDtcbn07XG5cbnJlbmRlcklucHV0VHlwZS5maWxlID0gZnVuY3Rpb24gKGlucHV0LCBwYXJhbXMpIHtcbiAgc2V0SW5wdXRQbGFjZWhvbGRlcihpbnB1dCwgcGFyYW1zKTtcbiAgcmV0dXJuIGlucHV0O1xufTtcblxucmVuZGVySW5wdXRUeXBlLnJhbmdlID0gZnVuY3Rpb24gKHJhbmdlLCBwYXJhbXMpIHtcbiAgdmFyIHJhbmdlSW5wdXQgPSByYW5nZS5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xuICB2YXIgcmFuZ2VPdXRwdXQgPSByYW5nZS5xdWVyeVNlbGVjdG9yKCdvdXRwdXQnKTtcbiAgcmFuZ2VJbnB1dC52YWx1ZSA9IHBhcmFtcy5pbnB1dFZhbHVlO1xuICByYW5nZUlucHV0LnR5cGUgPSBwYXJhbXMuaW5wdXQ7XG4gIHJhbmdlT3V0cHV0LnZhbHVlID0gcGFyYW1zLmlucHV0VmFsdWU7XG4gIHJldHVybiByYW5nZTtcbn07XG5cbnJlbmRlcklucHV0VHlwZS5zZWxlY3QgPSBmdW5jdGlvbiAoc2VsZWN0LCBwYXJhbXMpIHtcbiAgc2VsZWN0LmlubmVySFRNTCA9ICcnO1xuXG4gIGlmIChwYXJhbXMuaW5wdXRQbGFjZWhvbGRlcikge1xuICAgIHZhciBwbGFjZWhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgIHBsYWNlaG9sZGVyLmlubmVySFRNTCA9IHBhcmFtcy5pbnB1dFBsYWNlaG9sZGVyO1xuICAgIHBsYWNlaG9sZGVyLnZhbHVlID0gJyc7XG4gICAgcGxhY2Vob2xkZXIuZGlzYWJsZWQgPSB0cnVlO1xuICAgIHBsYWNlaG9sZGVyLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICBzZWxlY3QuYXBwZW5kQ2hpbGQocGxhY2Vob2xkZXIpO1xuICB9XG5cbiAgcmV0dXJuIHNlbGVjdDtcbn07XG5cbnJlbmRlcklucHV0VHlwZS5yYWRpbyA9IGZ1bmN0aW9uIChyYWRpbykge1xuICByYWRpby5pbm5lckhUTUwgPSAnJztcbiAgcmV0dXJuIHJhZGlvO1xufTtcblxucmVuZGVySW5wdXRUeXBlLmNoZWNrYm94ID0gZnVuY3Rpb24gKGNoZWNrYm94Q29udGFpbmVyLCBwYXJhbXMpIHtcbiAgdmFyIGNoZWNrYm94ID0gZ2V0SW5wdXQoZ2V0Q29udGVudCgpLCAnY2hlY2tib3gnKTtcbiAgY2hlY2tib3gudmFsdWUgPSAxO1xuICBjaGVja2JveC5pZCA9IHN3YWxDbGFzc2VzLmNoZWNrYm94O1xuICBjaGVja2JveC5jaGVja2VkID0gQm9vbGVhbihwYXJhbXMuaW5wdXRWYWx1ZSk7XG4gIHZhciBsYWJlbCA9IGNoZWNrYm94Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKTtcbiAgbGFiZWwuaW5uZXJIVE1MID0gcGFyYW1zLmlucHV0UGxhY2Vob2xkZXI7XG4gIHJldHVybiBjaGVja2JveENvbnRhaW5lcjtcbn07XG5cbnJlbmRlcklucHV0VHlwZS50ZXh0YXJlYSA9IGZ1bmN0aW9uICh0ZXh0YXJlYSwgcGFyYW1zKSB7XG4gIHRleHRhcmVhLnZhbHVlID0gcGFyYW1zLmlucHV0VmFsdWU7XG4gIHNldElucHV0UGxhY2Vob2xkZXIodGV4dGFyZWEsIHBhcmFtcyk7XG5cbiAgaWYgKCdNdXRhdGlvbk9ic2VydmVyJyBpbiB3aW5kb3cpIHtcbiAgICAvLyAjMTY5OVxuICAgIHZhciBpbml0aWFsUG9wdXBXaWR0aCA9IHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGdldFBvcHVwKCkpLndpZHRoKTtcbiAgICB2YXIgcG9wdXBQYWRkaW5nID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZ2V0UG9wdXAoKSkucGFkZGluZ0xlZnQpICsgcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZ2V0UG9wdXAoKSkucGFkZGluZ1JpZ2h0KTtcblxuICAgIHZhciBvdXRwdXRzaXplID0gZnVuY3Rpb24gb3V0cHV0c2l6ZSgpIHtcbiAgICAgIHZhciBjb250ZW50V2lkdGggPSB0ZXh0YXJlYS5vZmZzZXRXaWR0aCArIHBvcHVwUGFkZGluZztcblxuICAgICAgaWYgKGNvbnRlbnRXaWR0aCA+IGluaXRpYWxQb3B1cFdpZHRoKSB7XG4gICAgICAgIGdldFBvcHVwKCkuc3R5bGUud2lkdGggPSBcIlwiLmNvbmNhdChjb250ZW50V2lkdGgsIFwicHhcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZXRQb3B1cCgpLnN0eWxlLndpZHRoID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbmV3IE11dGF0aW9uT2JzZXJ2ZXIob3V0cHV0c2l6ZSkub2JzZXJ2ZSh0ZXh0YXJlYSwge1xuICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgIGF0dHJpYnV0ZUZpbHRlcjogWydzdHlsZSddXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gdGV4dGFyZWE7XG59O1xuXG52YXIgcmVuZGVyQ29udGVudCA9IGZ1bmN0aW9uIHJlbmRlckNvbnRlbnQoaW5zdGFuY2UsIHBhcmFtcykge1xuICB2YXIgY29udGVudCA9IGdldENvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKFwiI1wiLmNvbmNhdChzd2FsQ2xhc3Nlcy5jb250ZW50KSk7IC8vIENvbnRlbnQgYXMgSFRNTFxuXG4gIGlmIChwYXJhbXMuaHRtbCkge1xuICAgIHBhcnNlSHRtbFRvQ29udGFpbmVyKHBhcmFtcy5odG1sLCBjb250ZW50KTtcbiAgICBzaG93KGNvbnRlbnQsICdibG9jaycpOyAvLyBDb250ZW50IGFzIHBsYWluIHRleHRcbiAgfSBlbHNlIGlmIChwYXJhbXMudGV4dCkge1xuICAgIGNvbnRlbnQudGV4dENvbnRlbnQgPSBwYXJhbXMudGV4dDtcbiAgICBzaG93KGNvbnRlbnQsICdibG9jaycpOyAvLyBObyBjb250ZW50XG4gIH0gZWxzZSB7XG4gICAgaGlkZShjb250ZW50KTtcbiAgfVxuXG4gIHJlbmRlcklucHV0KGluc3RhbmNlLCBwYXJhbXMpOyAvLyBDdXN0b20gY2xhc3NcblxuICBhcHBseUN1c3RvbUNsYXNzKGdldENvbnRlbnQoKSwgcGFyYW1zLCAnY29udGVudCcpO1xufTtcblxudmFyIHJlbmRlckZvb3RlciA9IGZ1bmN0aW9uIHJlbmRlckZvb3RlcihpbnN0YW5jZSwgcGFyYW1zKSB7XG4gIHZhciBmb290ZXIgPSBnZXRGb290ZXIoKTtcbiAgdG9nZ2xlKGZvb3RlciwgcGFyYW1zLmZvb3Rlcik7XG5cbiAgaWYgKHBhcmFtcy5mb290ZXIpIHtcbiAgICBwYXJzZUh0bWxUb0NvbnRhaW5lcihwYXJhbXMuZm9vdGVyLCBmb290ZXIpO1xuICB9IC8vIEN1c3RvbSBjbGFzc1xuXG5cbiAgYXBwbHlDdXN0b21DbGFzcyhmb290ZXIsIHBhcmFtcywgJ2Zvb3RlcicpO1xufTtcblxudmFyIHJlbmRlckNsb3NlQnV0dG9uID0gZnVuY3Rpb24gcmVuZGVyQ2xvc2VCdXR0b24oaW5zdGFuY2UsIHBhcmFtcykge1xuICB2YXIgY2xvc2VCdXR0b24gPSBnZXRDbG9zZUJ1dHRvbigpO1xuICBjbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSBwYXJhbXMuY2xvc2VCdXR0b25IdG1sOyAvLyBDdXN0b20gY2xhc3NcblxuICBhcHBseUN1c3RvbUNsYXNzKGNsb3NlQnV0dG9uLCBwYXJhbXMsICdjbG9zZUJ1dHRvbicpO1xuICB0b2dnbGUoY2xvc2VCdXR0b24sIHBhcmFtcy5zaG93Q2xvc2VCdXR0b24pO1xuICBjbG9zZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBwYXJhbXMuY2xvc2VCdXR0b25BcmlhTGFiZWwpO1xufTtcblxudmFyIHJlbmRlckljb24gPSBmdW5jdGlvbiByZW5kZXJJY29uKGluc3RhbmNlLCBwYXJhbXMpIHtcbiAgdmFyIGlubmVyUGFyYW1zID0gcHJpdmF0ZVByb3BzLmlubmVyUGFyYW1zLmdldChpbnN0YW5jZSk7IC8vIGlmIHRoZSBnaXZlIGljb24gYWxyZWFkeSByZW5kZXJlZCwgYXBwbHkgdGhlIGN1c3RvbSBjbGFzcyB3aXRob3V0IHJlLXJlbmRlcmluZyB0aGUgaWNvblxuXG4gIGlmIChpbm5lclBhcmFtcyAmJiBwYXJhbXMuaWNvbiA9PT0gaW5uZXJQYXJhbXMuaWNvbiAmJiBnZXRJY29uKCkpIHtcbiAgICBhcHBseUN1c3RvbUNsYXNzKGdldEljb24oKSwgcGFyYW1zLCAnaWNvbicpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGhpZGVBbGxJY29ucygpO1xuXG4gIGlmICghcGFyYW1zLmljb24pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoT2JqZWN0LmtleXMoaWNvblR5cGVzKS5pbmRleE9mKHBhcmFtcy5pY29uKSAhPT0gLTEpIHtcbiAgICB2YXIgaWNvbiA9IGVsZW1lbnRCeVNlbGVjdG9yKFwiLlwiLmNvbmNhdChzd2FsQ2xhc3Nlcy5pY29uLCBcIi5cIikuY29uY2F0KGljb25UeXBlc1twYXJhbXMuaWNvbl0pKTtcbiAgICBzaG93KGljb24pOyAvLyBDdXN0b20gb3IgZGVmYXVsdCBjb250ZW50XG5cbiAgICBzZXRDb250ZW50KGljb24sIHBhcmFtcyk7XG4gICAgYWRqdXN0U3VjY2Vzc0ljb25CYWNrZ291bmRDb2xvcigpOyAvLyBDdXN0b20gY2xhc3NcblxuICAgIGFwcGx5Q3VzdG9tQ2xhc3MoaWNvbiwgcGFyYW1zLCAnaWNvbicpOyAvLyBBbmltYXRlIGljb25cblxuICAgIGFkZENsYXNzKGljb24sIHBhcmFtcy5zaG93Q2xhc3MuaWNvbik7XG4gIH0gZWxzZSB7XG4gICAgZXJyb3IoXCJVbmtub3duIGljb24hIEV4cGVjdGVkIFxcXCJzdWNjZXNzXFxcIiwgXFxcImVycm9yXFxcIiwgXFxcIndhcm5pbmdcXFwiLCBcXFwiaW5mb1xcXCIgb3IgXFxcInF1ZXN0aW9uXFxcIiwgZ290IFxcXCJcIi5jb25jYXQocGFyYW1zLmljb24sIFwiXFxcIlwiKSk7XG4gIH1cbn07XG5cbnZhciBoaWRlQWxsSWNvbnMgPSBmdW5jdGlvbiBoaWRlQWxsSWNvbnMoKSB7XG4gIHZhciBpY29ucyA9IGdldEljb25zKCk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBpY29ucy5sZW5ndGg7IGkrKykge1xuICAgIGhpZGUoaWNvbnNbaV0pO1xuICB9XG59OyAvLyBBZGp1c3Qgc3VjY2VzcyBpY29uIGJhY2tncm91bmQgY29sb3IgdG8gbWF0Y2ggdGhlIHBvcHVwIGJhY2tncm91bmQgY29sb3JcblxuXG52YXIgYWRqdXN0U3VjY2Vzc0ljb25CYWNrZ291bmRDb2xvciA9IGZ1bmN0aW9uIGFkanVzdFN1Y2Nlc3NJY29uQmFja2dvdW5kQ29sb3IoKSB7XG4gIHZhciBwb3B1cCA9IGdldFBvcHVwKCk7XG4gIHZhciBwb3B1cEJhY2tncm91bmRDb2xvciA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBvcHVwKS5nZXRQcm9wZXJ0eVZhbHVlKCdiYWNrZ3JvdW5kLWNvbG9yJyk7XG4gIHZhciBzdWNjZXNzSWNvblBhcnRzID0gcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmVdLCAuc3dhbDItc3VjY2Vzcy1maXgnKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN1Y2Nlc3NJY29uUGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBzdWNjZXNzSWNvblBhcnRzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHBvcHVwQmFja2dyb3VuZENvbG9yO1xuICB9XG59O1xuXG52YXIgc2V0Q29udGVudCA9IGZ1bmN0aW9uIHNldENvbnRlbnQoaWNvbiwgcGFyYW1zKSB7XG4gIGljb24uaW5uZXJIVE1MID0gJyc7XG5cbiAgaWYgKHBhcmFtcy5pY29uSHRtbCkge1xuICAgIGljb24uaW5uZXJIVE1MID0gaWNvbkNvbnRlbnQocGFyYW1zLmljb25IdG1sKTtcbiAgfSBlbHNlIGlmIChwYXJhbXMuaWNvbiA9PT0gJ3N1Y2Nlc3MnKSB7XG4gICAgaWNvbi5pbm5lckhUTUwgPSBcIlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcInN3YWwyLXN1Y2Nlc3MtY2lyY3VsYXItbGluZS1sZWZ0XFxcIj48L2Rpdj5cXG4gICAgICA8c3BhbiBjbGFzcz1cXFwic3dhbDItc3VjY2Vzcy1saW5lLXRpcFxcXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cXFwic3dhbDItc3VjY2Vzcy1saW5lLWxvbmdcXFwiPjwvc3Bhbj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJzd2FsMi1zdWNjZXNzLXJpbmdcXFwiPjwvZGl2PiA8ZGl2IGNsYXNzPVxcXCJzd2FsMi1zdWNjZXNzLWZpeFxcXCI+PC9kaXY+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwic3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lLXJpZ2h0XFxcIj48L2Rpdj5cXG4gICAgXCI7XG4gIH0gZWxzZSBpZiAocGFyYW1zLmljb24gPT09ICdlcnJvcicpIHtcbiAgICBpY29uLmlubmVySFRNTCA9IFwiXFxuICAgICAgPHNwYW4gY2xhc3M9XFxcInN3YWwyLXgtbWFya1xcXCI+XFxuICAgICAgICA8c3BhbiBjbGFzcz1cXFwic3dhbDIteC1tYXJrLWxpbmUtbGVmdFxcXCI+PC9zcGFuPlxcbiAgICAgICAgPHNwYW4gY2xhc3M9XFxcInN3YWwyLXgtbWFyay1saW5lLXJpZ2h0XFxcIj48L3NwYW4+XFxuICAgICAgPC9zcGFuPlxcbiAgICBcIjtcbiAgfSBlbHNlIHtcbiAgICB2YXIgZGVmYXVsdEljb25IdG1sID0ge1xuICAgICAgcXVlc3Rpb246ICc/JyxcbiAgICAgIHdhcm5pbmc6ICchJyxcbiAgICAgIGluZm86ICdpJ1xuICAgIH07XG4gICAgaWNvbi5pbm5lckhUTUwgPSBpY29uQ29udGVudChkZWZhdWx0SWNvbkh0bWxbcGFyYW1zLmljb25dKTtcbiAgfVxufTtcblxudmFyIGljb25Db250ZW50ID0gZnVuY3Rpb24gaWNvbkNvbnRlbnQoY29udGVudCkge1xuICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJcIi5jb25jYXQoc3dhbENsYXNzZXNbJ2ljb24tY29udGVudCddLCBcIlxcXCI+XCIpLmNvbmNhdChjb250ZW50LCBcIjwvZGl2PlwiKTtcbn07XG5cbnZhciByZW5kZXJJbWFnZSA9IGZ1bmN0aW9uIHJlbmRlckltYWdlKGluc3RhbmNlLCBwYXJhbXMpIHtcbiAgdmFyIGltYWdlID0gZ2V0SW1hZ2UoKTtcblxuICBpZiAoIXBhcmFtcy5pbWFnZVVybCkge1xuICAgIHJldHVybiBoaWRlKGltYWdlKTtcbiAgfVxuXG4gIHNob3coaW1hZ2UpOyAvLyBTcmMsIGFsdFxuXG4gIGltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgcGFyYW1zLmltYWdlVXJsKTtcbiAgaW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCBwYXJhbXMuaW1hZ2VBbHQpOyAvLyBXaWR0aCwgaGVpZ2h0XG5cbiAgYXBwbHlOdW1lcmljYWxTdHlsZShpbWFnZSwgJ3dpZHRoJywgcGFyYW1zLmltYWdlV2lkdGgpO1xuICBhcHBseU51bWVyaWNhbFN0eWxlKGltYWdlLCAnaGVpZ2h0JywgcGFyYW1zLmltYWdlSGVpZ2h0KTsgLy8gQ2xhc3NcblxuICBpbWFnZS5jbGFzc05hbWUgPSBzd2FsQ2xhc3Nlcy5pbWFnZTtcbiAgYXBwbHlDdXN0b21DbGFzcyhpbWFnZSwgcGFyYW1zLCAnaW1hZ2UnKTtcbn07XG5cbnZhciBjdXJyZW50U3RlcHMgPSBbXTtcbi8qXG4gKiBHbG9iYWwgZnVuY3Rpb24gZm9yIGNoYWluaW5nIHN3ZWV0QWxlcnQgcG9wdXBzXG4gKi9cblxudmFyIHF1ZXVlID0gZnVuY3Rpb24gcXVldWUoc3RlcHMpIHtcbiAgdmFyIFN3YWwgPSB0aGlzO1xuICBjdXJyZW50U3RlcHMgPSBzdGVwcztcblxuICB2YXIgcmVzZXRBbmRSZXNvbHZlID0gZnVuY3Rpb24gcmVzZXRBbmRSZXNvbHZlKHJlc29sdmUsIHZhbHVlKSB7XG4gICAgY3VycmVudFN0ZXBzID0gW107XG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG4gIH07XG5cbiAgdmFyIHF1ZXVlUmVzdWx0ID0gW107XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgIChmdW5jdGlvbiBzdGVwKGksIGNhbGxiYWNrKSB7XG4gICAgICBpZiAoaSA8IGN1cnJlbnRTdGVwcy5sZW5ndGgpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3dhbDItcXVldWUtc3RlcCcsIGkpO1xuICAgICAgICBTd2FsLmZpcmUoY3VycmVudFN0ZXBzW2ldKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdC52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHF1ZXVlUmVzdWx0LnB1c2gocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgIHN0ZXAoaSArIDEsIGNhbGxiYWNrKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzZXRBbmRSZXNvbHZlKHJlc29sdmUsIHtcbiAgICAgICAgICAgICAgZGlzbWlzczogcmVzdWx0LmRpc21pc3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNldEFuZFJlc29sdmUocmVzb2x2ZSwge1xuICAgICAgICAgIHZhbHVlOiBxdWV1ZVJlc3VsdFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KSgwKTtcbiAgfSk7XG59O1xuLypcbiAqIEdsb2JhbCBmdW5jdGlvbiBmb3IgZ2V0dGluZyB0aGUgaW5kZXggb2YgY3VycmVudCBwb3B1cCBpbiBxdWV1ZVxuICovXG5cbnZhciBnZXRRdWV1ZVN0ZXAgPSBmdW5jdGlvbiBnZXRRdWV1ZVN0ZXAoKSB7XG4gIHJldHVybiBnZXRDb250YWluZXIoKS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcXVldWUtc3RlcCcpO1xufTtcbi8qXG4gKiBHbG9iYWwgZnVuY3Rpb24gZm9yIGluc2VydGluZyBhIHBvcHVwIHRvIHRoZSBxdWV1ZVxuICovXG5cbnZhciBpbnNlcnRRdWV1ZVN0ZXAgPSBmdW5jdGlvbiBpbnNlcnRRdWV1ZVN0ZXAoc3RlcCwgaW5kZXgpIHtcbiAgaWYgKGluZGV4ICYmIGluZGV4IDwgY3VycmVudFN0ZXBzLmxlbmd0aCkge1xuICAgIHJldHVybiBjdXJyZW50U3RlcHMuc3BsaWNlKGluZGV4LCAwLCBzdGVwKTtcbiAgfVxuXG4gIHJldHVybiBjdXJyZW50U3RlcHMucHVzaChzdGVwKTtcbn07XG4vKlxuICogR2xvYmFsIGZ1bmN0aW9uIGZvciBkZWxldGluZyBhIHBvcHVwIGZyb20gdGhlIHF1ZXVlXG4gKi9cblxudmFyIGRlbGV0ZVF1ZXVlU3RlcCA9IGZ1bmN0aW9uIGRlbGV0ZVF1ZXVlU3RlcChpbmRleCkge1xuICBpZiAodHlwZW9mIGN1cnJlbnRTdGVwc1tpbmRleF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgY3VycmVudFN0ZXBzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbn07XG5cbnZhciBjcmVhdGVTdGVwRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVN0ZXBFbGVtZW50KHN0ZXApIHtcbiAgdmFyIHN0ZXBFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gIGFkZENsYXNzKHN0ZXBFbCwgc3dhbENsYXNzZXNbJ3Byb2dyZXNzLXN0ZXAnXSk7XG4gIHN0ZXBFbC5pbm5lckhUTUwgPSBzdGVwO1xuICByZXR1cm4gc3RlcEVsO1xufTtcblxudmFyIGNyZWF0ZUxpbmVFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlTGluZUVsZW1lbnQocGFyYW1zKSB7XG4gIHZhciBsaW5lRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICBhZGRDbGFzcyhsaW5lRWwsIHN3YWxDbGFzc2VzWydwcm9ncmVzcy1zdGVwLWxpbmUnXSk7XG5cbiAgaWYgKHBhcmFtcy5wcm9ncmVzc1N0ZXBzRGlzdGFuY2UpIHtcbiAgICBsaW5lRWwuc3R5bGUud2lkdGggPSBwYXJhbXMucHJvZ3Jlc3NTdGVwc0Rpc3RhbmNlO1xuICB9XG5cbiAgcmV0dXJuIGxpbmVFbDtcbn07XG5cbnZhciByZW5kZXJQcm9ncmVzc1N0ZXBzID0gZnVuY3Rpb24gcmVuZGVyUHJvZ3Jlc3NTdGVwcyhpbnN0YW5jZSwgcGFyYW1zKSB7XG4gIHZhciBwcm9ncmVzc1N0ZXBzQ29udGFpbmVyID0gZ2V0UHJvZ3Jlc3NTdGVwcygpO1xuXG4gIGlmICghcGFyYW1zLnByb2dyZXNzU3RlcHMgfHwgcGFyYW1zLnByb2dyZXNzU3RlcHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGhpZGUocHJvZ3Jlc3NTdGVwc0NvbnRhaW5lcik7XG4gIH1cblxuICBzaG93KHByb2dyZXNzU3RlcHNDb250YWluZXIpO1xuICBwcm9ncmVzc1N0ZXBzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICB2YXIgY3VycmVudFByb2dyZXNzU3RlcCA9IHBhcnNlSW50KHBhcmFtcy5jdXJyZW50UHJvZ3Jlc3NTdGVwID09PSB1bmRlZmluZWQgPyBnZXRRdWV1ZVN0ZXAoKSA6IHBhcmFtcy5jdXJyZW50UHJvZ3Jlc3NTdGVwKTtcblxuICBpZiAoY3VycmVudFByb2dyZXNzU3RlcCA+PSBwYXJhbXMucHJvZ3Jlc3NTdGVwcy5sZW5ndGgpIHtcbiAgICB3YXJuKCdJbnZhbGlkIGN1cnJlbnRQcm9ncmVzc1N0ZXAgcGFyYW1ldGVyLCBpdCBzaG91bGQgYmUgbGVzcyB0aGFuIHByb2dyZXNzU3RlcHMubGVuZ3RoICcgKyAnKGN1cnJlbnRQcm9ncmVzc1N0ZXAgbGlrZSBKUyBhcnJheXMgc3RhcnRzIGZyb20gMCknKTtcbiAgfVxuXG4gIHBhcmFtcy5wcm9ncmVzc1N0ZXBzLmZvckVhY2goZnVuY3Rpb24gKHN0ZXAsIGluZGV4KSB7XG4gICAgdmFyIHN0ZXBFbCA9IGNyZWF0ZVN0ZXBFbGVtZW50KHN0ZXApO1xuICAgIHByb2dyZXNzU3RlcHNDb250YWluZXIuYXBwZW5kQ2hpbGQoc3RlcEVsKTtcblxuICAgIGlmIChpbmRleCA9PT0gY3VycmVudFByb2dyZXNzU3RlcCkge1xuICAgICAgYWRkQ2xhc3Moc3RlcEVsLCBzd2FsQ2xhc3Nlc1snYWN0aXZlLXByb2dyZXNzLXN0ZXAnXSk7XG4gICAgfVxuXG4gICAgaWYgKGluZGV4ICE9PSBwYXJhbXMucHJvZ3Jlc3NTdGVwcy5sZW5ndGggLSAxKSB7XG4gICAgICB2YXIgbGluZUVsID0gY3JlYXRlTGluZUVsZW1lbnQoc3RlcCk7XG4gICAgICBwcm9ncmVzc1N0ZXBzQ29udGFpbmVyLmFwcGVuZENoaWxkKGxpbmVFbCk7XG4gICAgfVxuICB9KTtcbn07XG5cbnZhciByZW5kZXJUaXRsZSA9IGZ1bmN0aW9uIHJlbmRlclRpdGxlKGluc3RhbmNlLCBwYXJhbXMpIHtcbiAgdmFyIHRpdGxlID0gZ2V0VGl0bGUoKTtcbiAgdG9nZ2xlKHRpdGxlLCBwYXJhbXMudGl0bGUgfHwgcGFyYW1zLnRpdGxlVGV4dCk7XG5cbiAgaWYgKHBhcmFtcy50aXRsZSkge1xuICAgIHBhcnNlSHRtbFRvQ29udGFpbmVyKHBhcmFtcy50aXRsZSwgdGl0bGUpO1xuICB9XG5cbiAgaWYgKHBhcmFtcy50aXRsZVRleHQpIHtcbiAgICB0aXRsZS5pbm5lclRleHQgPSBwYXJhbXMudGl0bGVUZXh0O1xuICB9IC8vIEN1c3RvbSBjbGFzc1xuXG5cbiAgYXBwbHlDdXN0b21DbGFzcyh0aXRsZSwgcGFyYW1zLCAndGl0bGUnKTtcbn07XG5cbnZhciByZW5kZXJIZWFkZXIgPSBmdW5jdGlvbiByZW5kZXJIZWFkZXIoaW5zdGFuY2UsIHBhcmFtcykge1xuICB2YXIgaGVhZGVyID0gZ2V0SGVhZGVyKCk7IC8vIEN1c3RvbSBjbGFzc1xuXG4gIGFwcGx5Q3VzdG9tQ2xhc3MoaGVhZGVyLCBwYXJhbXMsICdoZWFkZXInKTsgLy8gUHJvZ3Jlc3Mgc3RlcHNcblxuICByZW5kZXJQcm9ncmVzc1N0ZXBzKGluc3RhbmNlLCBwYXJhbXMpOyAvLyBJY29uXG5cbiAgcmVuZGVySWNvbihpbnN0YW5jZSwgcGFyYW1zKTsgLy8gSW1hZ2VcblxuICByZW5kZXJJbWFnZShpbnN0YW5jZSwgcGFyYW1zKTsgLy8gVGl0bGVcblxuICByZW5kZXJUaXRsZShpbnN0YW5jZSwgcGFyYW1zKTsgLy8gQ2xvc2UgYnV0dG9uXG5cbiAgcmVuZGVyQ2xvc2VCdXR0b24oaW5zdGFuY2UsIHBhcmFtcyk7XG59O1xuXG52YXIgcmVuZGVyUG9wdXAgPSBmdW5jdGlvbiByZW5kZXJQb3B1cChpbnN0YW5jZSwgcGFyYW1zKSB7XG4gIHZhciBwb3B1cCA9IGdldFBvcHVwKCk7IC8vIFdpZHRoXG5cbiAgYXBwbHlOdW1lcmljYWxTdHlsZShwb3B1cCwgJ3dpZHRoJywgcGFyYW1zLndpZHRoKTsgLy8gUGFkZGluZ1xuXG4gIGFwcGx5TnVtZXJpY2FsU3R5bGUocG9wdXAsICdwYWRkaW5nJywgcGFyYW1zLnBhZGRpbmcpOyAvLyBCYWNrZ3JvdW5kXG5cbiAgaWYgKHBhcmFtcy5iYWNrZ3JvdW5kKSB7XG4gICAgcG9wdXAuc3R5bGUuYmFja2dyb3VuZCA9IHBhcmFtcy5iYWNrZ3JvdW5kO1xuICB9IC8vIENsYXNzZXNcblxuXG4gIGFkZENsYXNzZXMocG9wdXAsIHBhcmFtcyk7XG59O1xuXG52YXIgYWRkQ2xhc3NlcyA9IGZ1bmN0aW9uIGFkZENsYXNzZXMocG9wdXAsIHBhcmFtcykge1xuICAvLyBEZWZhdWx0IENsYXNzICsgc2hvd0NsYXNzIHdoZW4gdXBkYXRpbmcgU3dhbC51cGRhdGUoe30pXG4gIHBvcHVwLmNsYXNzTmFtZSA9IFwiXCIuY29uY2F0KHN3YWxDbGFzc2VzLnBvcHVwLCBcIiBcIikuY29uY2F0KGlzVmlzaWJsZShwb3B1cCkgPyBwYXJhbXMuc2hvd0NsYXNzLnBvcHVwIDogJycpO1xuXG4gIGlmIChwYXJhbXMudG9hc3QpIHtcbiAgICBhZGRDbGFzcyhbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBkb2N1bWVudC5ib2R5XSwgc3dhbENsYXNzZXNbJ3RvYXN0LXNob3duJ10pO1xuICAgIGFkZENsYXNzKHBvcHVwLCBzd2FsQ2xhc3Nlcy50b2FzdCk7XG4gIH0gZWxzZSB7XG4gICAgYWRkQ2xhc3MocG9wdXAsIHN3YWxDbGFzc2VzLm1vZGFsKTtcbiAgfSAvLyBDdXN0b20gY2xhc3NcblxuXG4gIGFwcGx5Q3VzdG9tQ2xhc3MocG9wdXAsIHBhcmFtcywgJ3BvcHVwJyk7XG5cbiAgaWYgKHR5cGVvZiBwYXJhbXMuY3VzdG9tQ2xhc3MgPT09ICdzdHJpbmcnKSB7XG4gICAgYWRkQ2xhc3MocG9wdXAsIHBhcmFtcy5jdXN0b21DbGFzcyk7XG4gIH0gLy8gSWNvbiBjbGFzcyAoIzE4NDIpXG5cblxuICBpZiAocGFyYW1zLmljb24pIHtcbiAgICBhZGRDbGFzcyhwb3B1cCwgc3dhbENsYXNzZXNbXCJpY29uLVwiLmNvbmNhdChwYXJhbXMuaWNvbildKTtcbiAgfVxufTtcblxudmFyIHJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcihpbnN0YW5jZSwgcGFyYW1zKSB7XG4gIHJlbmRlclBvcHVwKGluc3RhbmNlLCBwYXJhbXMpO1xuICByZW5kZXJDb250YWluZXIoaW5zdGFuY2UsIHBhcmFtcyk7XG4gIHJlbmRlckhlYWRlcihpbnN0YW5jZSwgcGFyYW1zKTtcbiAgcmVuZGVyQ29udGVudChpbnN0YW5jZSwgcGFyYW1zKTtcbiAgcmVuZGVyQWN0aW9ucyhpbnN0YW5jZSwgcGFyYW1zKTtcbiAgcmVuZGVyRm9vdGVyKGluc3RhbmNlLCBwYXJhbXMpO1xuXG4gIGlmICh0eXBlb2YgcGFyYW1zLm9uUmVuZGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcGFyYW1zLm9uUmVuZGVyKGdldFBvcHVwKCkpO1xuICB9XG59O1xuXG4vKlxuICogR2xvYmFsIGZ1bmN0aW9uIHRvIGRldGVybWluZSBpZiBTd2VldEFsZXJ0MiBwb3B1cCBpcyBzaG93blxuICovXG5cbnZhciBpc1Zpc2libGUkMSA9IGZ1bmN0aW9uIGlzVmlzaWJsZSQkMSgpIHtcbiAgcmV0dXJuIGlzVmlzaWJsZShnZXRQb3B1cCgpKTtcbn07XG4vKlxuICogR2xvYmFsIGZ1bmN0aW9uIHRvIGNsaWNrICdDb25maXJtJyBidXR0b25cbiAqL1xuXG52YXIgY2xpY2tDb25maXJtID0gZnVuY3Rpb24gY2xpY2tDb25maXJtKCkge1xuICByZXR1cm4gZ2V0Q29uZmlybUJ1dHRvbigpICYmIGdldENvbmZpcm1CdXR0b24oKS5jbGljaygpO1xufTtcbi8qXG4gKiBHbG9iYWwgZnVuY3Rpb24gdG8gY2xpY2sgJ0NhbmNlbCcgYnV0dG9uXG4gKi9cblxudmFyIGNsaWNrQ2FuY2VsID0gZnVuY3Rpb24gY2xpY2tDYW5jZWwoKSB7XG4gIHJldHVybiBnZXRDYW5jZWxCdXR0b24oKSAmJiBnZXRDYW5jZWxCdXR0b24oKS5jbGljaygpO1xufTtcblxuZnVuY3Rpb24gZmlyZSgpIHtcbiAgdmFyIFN3YWwgPSB0aGlzO1xuXG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gX2NvbnN0cnVjdChTd2FsLCBhcmdzKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGV4dGVuZGVkIHZlcnNpb24gb2YgYFN3YWxgIGNvbnRhaW5pbmcgYHBhcmFtc2AgYXMgZGVmYXVsdHMuXG4gKiBVc2VmdWwgZm9yIHJldXNpbmcgU3dhbCBjb25maWd1cmF0aW9uLlxuICpcbiAqIEZvciBleGFtcGxlOlxuICpcbiAqIEJlZm9yZTpcbiAqIGNvbnN0IHRleHRQcm9tcHRPcHRpb25zID0geyBpbnB1dDogJ3RleHQnLCBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlIH1cbiAqIGNvbnN0IHt2YWx1ZTogZmlyc3ROYW1lfSA9IGF3YWl0IFN3YWwuZmlyZSh7IC4uLnRleHRQcm9tcHRPcHRpb25zLCB0aXRsZTogJ1doYXQgaXMgeW91ciBmaXJzdCBuYW1lPycgfSlcbiAqIGNvbnN0IHt2YWx1ZTogbGFzdE5hbWV9ID0gYXdhaXQgU3dhbC5maXJlKHsgLi4udGV4dFByb21wdE9wdGlvbnMsIHRpdGxlOiAnV2hhdCBpcyB5b3VyIGxhc3QgbmFtZT8nIH0pXG4gKlxuICogQWZ0ZXI6XG4gKiBjb25zdCBUZXh0UHJvbXB0ID0gU3dhbC5taXhpbih7IGlucHV0OiAndGV4dCcsIHNob3dDYW5jZWxCdXR0b246IHRydWUgfSlcbiAqIGNvbnN0IHt2YWx1ZTogZmlyc3ROYW1lfSA9IGF3YWl0IFRleHRQcm9tcHQoJ1doYXQgaXMgeW91ciBmaXJzdCBuYW1lPycpXG4gKiBjb25zdCB7dmFsdWU6IGxhc3ROYW1lfSA9IGF3YWl0IFRleHRQcm9tcHQoJ1doYXQgaXMgeW91ciBsYXN0IG5hbWU/JylcbiAqXG4gKiBAcGFyYW0gbWl4aW5QYXJhbXNcbiAqL1xuZnVuY3Rpb24gbWl4aW4obWl4aW5QYXJhbXMpIHtcbiAgdmFyIE1peGluU3dhbCA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF90aGlzKSB7XG4gICAgX2luaGVyaXRzKE1peGluU3dhbCwgX3RoaXMpO1xuXG4gICAgZnVuY3Rpb24gTWl4aW5Td2FsKCkge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1peGluU3dhbCk7XG5cbiAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoTWl4aW5Td2FsKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoTWl4aW5Td2FsLCBbe1xuICAgICAga2V5OiBcIl9tYWluXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX21haW4ocGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBfZ2V0KF9nZXRQcm90b3R5cGVPZihNaXhpblN3YWwucHJvdG90eXBlKSwgXCJfbWFpblwiLCB0aGlzKS5jYWxsKHRoaXMsIF9leHRlbmRzKHt9LCBtaXhpblBhcmFtcywgcGFyYW1zKSk7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIE1peGluU3dhbDtcbiAgfSh0aGlzKTtcblxuICByZXR1cm4gTWl4aW5Td2FsO1xufVxuXG4vKipcbiAqIFNob3cgc3Bpbm5lciBpbnN0ZWFkIG9mIENvbmZpcm0gYnV0dG9uXG4gKi9cblxudmFyIHNob3dMb2FkaW5nID0gZnVuY3Rpb24gc2hvd0xvYWRpbmcoKSB7XG4gIHZhciBwb3B1cCA9IGdldFBvcHVwKCk7XG5cbiAgaWYgKCFwb3B1cCkge1xuICAgIFN3YWwuZmlyZSgpO1xuICB9XG5cbiAgcG9wdXAgPSBnZXRQb3B1cCgpO1xuICB2YXIgYWN0aW9ucyA9IGdldEFjdGlvbnMoKTtcbiAgdmFyIGNvbmZpcm1CdXR0b24gPSBnZXRDb25maXJtQnV0dG9uKCk7XG4gIHNob3coYWN0aW9ucyk7XG4gIHNob3coY29uZmlybUJ1dHRvbiwgJ2lubGluZS1ibG9jaycpO1xuICBhZGRDbGFzcyhbcG9wdXAsIGFjdGlvbnNdLCBzd2FsQ2xhc3Nlcy5sb2FkaW5nKTtcbiAgY29uZmlybUJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIHBvcHVwLnNldEF0dHJpYnV0ZSgnZGF0YS1sb2FkaW5nJywgdHJ1ZSk7XG4gIHBvcHVwLnNldEF0dHJpYnV0ZSgnYXJpYS1idXN5JywgdHJ1ZSk7XG4gIHBvcHVwLmZvY3VzKCk7XG59O1xuXG52YXIgUkVTVE9SRV9GT0NVU19USU1FT1VUID0gMTAwO1xuXG52YXIgZ2xvYmFsU3RhdGUgPSB7fTtcbnZhciBmb2N1c1ByZXZpb3VzQWN0aXZlRWxlbWVudCA9IGZ1bmN0aW9uIGZvY3VzUHJldmlvdXNBY3RpdmVFbGVtZW50KCkge1xuICBpZiAoZ2xvYmFsU3RhdGUucHJldmlvdXNBY3RpdmVFbGVtZW50ICYmIGdsb2JhbFN0YXRlLnByZXZpb3VzQWN0aXZlRWxlbWVudC5mb2N1cykge1xuICAgIGdsb2JhbFN0YXRlLnByZXZpb3VzQWN0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgIGdsb2JhbFN0YXRlLnByZXZpb3VzQWN0aXZlRWxlbWVudCA9IG51bGw7XG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQuYm9keSkge1xuICAgIGRvY3VtZW50LmJvZHkuZm9jdXMoKTtcbiAgfVxufTsgLy8gUmVzdG9yZSBwcmV2aW91cyBhY3RpdmUgKGZvY3VzZWQpIGVsZW1lbnRcblxuXG52YXIgcmVzdG9yZUFjdGl2ZUVsZW1lbnQgPSBmdW5jdGlvbiByZXN0b3JlQWN0aXZlRWxlbWVudCgpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgdmFyIHggPSB3aW5kb3cuc2Nyb2xsWDtcbiAgICB2YXIgeSA9IHdpbmRvdy5zY3JvbGxZO1xuICAgIGdsb2JhbFN0YXRlLnJlc3RvcmVGb2N1c1RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvY3VzUHJldmlvdXNBY3RpdmVFbGVtZW50KCk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfSwgUkVTVE9SRV9GT0NVU19USU1FT1VUKTsgLy8gaXNzdWVzLzkwMFxuXG4gICAgaWYgKHR5cGVvZiB4ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgeSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIElFIGRvZXNuJ3QgaGF2ZSBzY3JvbGxYL3Njcm9sbFkgc3VwcG9ydFxuICAgICAgd2luZG93LnNjcm9sbFRvKHgsIHkpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vKipcbiAqIElmIGB0aW1lcmAgcGFyYW1ldGVyIGlzIHNldCwgcmV0dXJucyBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIG9mIHRpbWVyIHJlbWFpbmVkLlxuICogT3RoZXJ3aXNlLCByZXR1cm5zIHVuZGVmaW5lZC5cbiAqL1xuXG52YXIgZ2V0VGltZXJMZWZ0ID0gZnVuY3Rpb24gZ2V0VGltZXJMZWZ0KCkge1xuICByZXR1cm4gZ2xvYmFsU3RhdGUudGltZW91dCAmJiBnbG9iYWxTdGF0ZS50aW1lb3V0LmdldFRpbWVyTGVmdCgpO1xufTtcbi8qKlxuICogU3RvcCB0aW1lci4gUmV0dXJucyBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIG9mIHRpbWVyIHJlbWFpbmVkLlxuICogSWYgYHRpbWVyYCBwYXJhbWV0ZXIgaXNuJ3Qgc2V0LCByZXR1cm5zIHVuZGVmaW5lZC5cbiAqL1xuXG52YXIgc3RvcFRpbWVyID0gZnVuY3Rpb24gc3RvcFRpbWVyKCkge1xuICBpZiAoZ2xvYmFsU3RhdGUudGltZW91dCkge1xuICAgIHN0b3BUaW1lclByb2dyZXNzQmFyKCk7XG4gICAgcmV0dXJuIGdsb2JhbFN0YXRlLnRpbWVvdXQuc3RvcCgpO1xuICB9XG59O1xuLyoqXG4gKiBSZXN1bWUgdGltZXIuIFJldHVybnMgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBvZiB0aW1lciByZW1haW5lZC5cbiAqIElmIGB0aW1lcmAgcGFyYW1ldGVyIGlzbid0IHNldCwgcmV0dXJucyB1bmRlZmluZWQuXG4gKi9cblxudmFyIHJlc3VtZVRpbWVyID0gZnVuY3Rpb24gcmVzdW1lVGltZXIoKSB7XG4gIGlmIChnbG9iYWxTdGF0ZS50aW1lb3V0KSB7XG4gICAgdmFyIHJlbWFpbmluZyA9IGdsb2JhbFN0YXRlLnRpbWVvdXQuc3RhcnQoKTtcbiAgICBhbmltYXRlVGltZXJQcm9ncmVzc0JhcihyZW1haW5pbmcpO1xuICAgIHJldHVybiByZW1haW5pbmc7XG4gIH1cbn07XG4vKipcbiAqIFJlc3VtZSB0aW1lci4gUmV0dXJucyBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIG9mIHRpbWVyIHJlbWFpbmVkLlxuICogSWYgYHRpbWVyYCBwYXJhbWV0ZXIgaXNuJ3Qgc2V0LCByZXR1cm5zIHVuZGVmaW5lZC5cbiAqL1xuXG52YXIgdG9nZ2xlVGltZXIgPSBmdW5jdGlvbiB0b2dnbGVUaW1lcigpIHtcbiAgdmFyIHRpbWVyID0gZ2xvYmFsU3RhdGUudGltZW91dDtcbiAgcmV0dXJuIHRpbWVyICYmICh0aW1lci5ydW5uaW5nID8gc3RvcFRpbWVyKCkgOiByZXN1bWVUaW1lcigpKTtcbn07XG4vKipcbiAqIEluY3JlYXNlIHRpbWVyLiBSZXR1cm5zIG51bWJlciBvZiBtaWxsaXNlY29uZHMgb2YgYW4gdXBkYXRlZCB0aW1lci5cbiAqIElmIGB0aW1lcmAgcGFyYW1ldGVyIGlzbid0IHNldCwgcmV0dXJucyB1bmRlZmluZWQuXG4gKi9cblxudmFyIGluY3JlYXNlVGltZXIgPSBmdW5jdGlvbiBpbmNyZWFzZVRpbWVyKG4pIHtcbiAgaWYgKGdsb2JhbFN0YXRlLnRpbWVvdXQpIHtcbiAgICB2YXIgcmVtYWluaW5nID0gZ2xvYmFsU3RhdGUudGltZW91dC5pbmNyZWFzZShuKTtcbiAgICBhbmltYXRlVGltZXJQcm9ncmVzc0JhcihyZW1haW5pbmcsIHRydWUpO1xuICAgIHJldHVybiByZW1haW5pbmc7XG4gIH1cbn07XG4vKipcbiAqIENoZWNrIGlmIHRpbWVyIGlzIHJ1bm5pbmcuIFJldHVybnMgdHJ1ZSBpZiB0aW1lciBpcyBydW5uaW5nXG4gKiBvciBmYWxzZSBpZiB0aW1lciBpcyBwYXVzZWQgb3Igc3RvcHBlZC5cbiAqIElmIGB0aW1lcmAgcGFyYW1ldGVyIGlzbid0IHNldCwgcmV0dXJucyB1bmRlZmluZWRcbiAqL1xuXG52YXIgaXNUaW1lclJ1bm5pbmcgPSBmdW5jdGlvbiBpc1RpbWVyUnVubmluZygpIHtcbiAgcmV0dXJuIGdsb2JhbFN0YXRlLnRpbWVvdXQgJiYgZ2xvYmFsU3RhdGUudGltZW91dC5pc1J1bm5pbmcoKTtcbn07XG5cbnZhciBkZWZhdWx0UGFyYW1zID0ge1xuICB0aXRsZTogJycsXG4gIHRpdGxlVGV4dDogJycsXG4gIHRleHQ6ICcnLFxuICBodG1sOiAnJyxcbiAgZm9vdGVyOiAnJyxcbiAgaWNvbjogdW5kZWZpbmVkLFxuICBpY29uSHRtbDogdW5kZWZpbmVkLFxuICB0b2FzdDogZmFsc2UsXG4gIGFuaW1hdGlvbjogdHJ1ZSxcbiAgc2hvd0NsYXNzOiB7XG4gICAgcG9wdXA6ICdzd2FsMi1zaG93JyxcbiAgICBiYWNrZHJvcDogJ3N3YWwyLWJhY2tkcm9wLXNob3cnLFxuICAgIGljb246ICdzd2FsMi1pY29uLXNob3cnXG4gIH0sXG4gIGhpZGVDbGFzczoge1xuICAgIHBvcHVwOiAnc3dhbDItaGlkZScsXG4gICAgYmFja2Ryb3A6ICdzd2FsMi1iYWNrZHJvcC1oaWRlJyxcbiAgICBpY29uOiAnc3dhbDItaWNvbi1oaWRlJ1xuICB9LFxuICBjdXN0b21DbGFzczogdW5kZWZpbmVkLFxuICB0YXJnZXQ6ICdib2R5JyxcbiAgYmFja2Ryb3A6IHRydWUsXG4gIGhlaWdodEF1dG86IHRydWUsXG4gIGFsbG93T3V0c2lkZUNsaWNrOiB0cnVlLFxuICBhbGxvd0VzY2FwZUtleTogdHJ1ZSxcbiAgYWxsb3dFbnRlcktleTogdHJ1ZSxcbiAgc3RvcEtleWRvd25Qcm9wYWdhdGlvbjogdHJ1ZSxcbiAga2V5ZG93bkxpc3RlbmVyQ2FwdHVyZTogZmFsc2UsXG4gIHNob3dDb25maXJtQnV0dG9uOiB0cnVlLFxuICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSxcbiAgcHJlQ29uZmlybTogdW5kZWZpbmVkLFxuICBjb25maXJtQnV0dG9uVGV4dDogJ09LJyxcbiAgY29uZmlybUJ1dHRvbkFyaWFMYWJlbDogJycsXG4gIGNvbmZpcm1CdXR0b25Db2xvcjogdW5kZWZpbmVkLFxuICBjYW5jZWxCdXR0b25UZXh0OiAnQ2FuY2VsJyxcbiAgY2FuY2VsQnV0dG9uQXJpYUxhYmVsOiAnJyxcbiAgY2FuY2VsQnV0dG9uQ29sb3I6IHVuZGVmaW5lZCxcbiAgYnV0dG9uc1N0eWxpbmc6IHRydWUsXG4gIHJldmVyc2VCdXR0b25zOiBmYWxzZSxcbiAgZm9jdXNDb25maXJtOiB0cnVlLFxuICBmb2N1c0NhbmNlbDogZmFsc2UsXG4gIHNob3dDbG9zZUJ1dHRvbjogZmFsc2UsXG4gIGNsb3NlQnV0dG9uSHRtbDogJyZ0aW1lczsnLFxuICBjbG9zZUJ1dHRvbkFyaWFMYWJlbDogJ0Nsb3NlIHRoaXMgZGlhbG9nJyxcbiAgc2hvd0xvYWRlck9uQ29uZmlybTogZmFsc2UsXG4gIGltYWdlVXJsOiB1bmRlZmluZWQsXG4gIGltYWdlV2lkdGg6IHVuZGVmaW5lZCxcbiAgaW1hZ2VIZWlnaHQ6IHVuZGVmaW5lZCxcbiAgaW1hZ2VBbHQ6ICcnLFxuICB0aW1lcjogdW5kZWZpbmVkLFxuICB0aW1lclByb2dyZXNzQmFyOiBmYWxzZSxcbiAgd2lkdGg6IHVuZGVmaW5lZCxcbiAgcGFkZGluZzogdW5kZWZpbmVkLFxuICBiYWNrZ3JvdW5kOiB1bmRlZmluZWQsXG4gIGlucHV0OiB1bmRlZmluZWQsXG4gIGlucHV0UGxhY2Vob2xkZXI6ICcnLFxuICBpbnB1dFZhbHVlOiAnJyxcbiAgaW5wdXRPcHRpb25zOiB7fSxcbiAgaW5wdXRBdXRvVHJpbTogdHJ1ZSxcbiAgaW5wdXRBdHRyaWJ1dGVzOiB7fSxcbiAgaW5wdXRWYWxpZGF0b3I6IHVuZGVmaW5lZCxcbiAgdmFsaWRhdGlvbk1lc3NhZ2U6IHVuZGVmaW5lZCxcbiAgZ3JvdzogZmFsc2UsXG4gIHBvc2l0aW9uOiAnY2VudGVyJyxcbiAgcHJvZ3Jlc3NTdGVwczogW10sXG4gIGN1cnJlbnRQcm9ncmVzc1N0ZXA6IHVuZGVmaW5lZCxcbiAgcHJvZ3Jlc3NTdGVwc0Rpc3RhbmNlOiB1bmRlZmluZWQsXG4gIG9uQmVmb3JlT3BlbjogdW5kZWZpbmVkLFxuICBvbk9wZW46IHVuZGVmaW5lZCxcbiAgb25SZW5kZXI6IHVuZGVmaW5lZCxcbiAgb25DbG9zZTogdW5kZWZpbmVkLFxuICBvbkFmdGVyQ2xvc2U6IHVuZGVmaW5lZCxcbiAgc2Nyb2xsYmFyUGFkZGluZzogdHJ1ZVxufTtcbnZhciB1cGRhdGFibGVQYXJhbXMgPSBbJ3RpdGxlJywgJ3RpdGxlVGV4dCcsICd0ZXh0JywgJ2h0bWwnLCAnaWNvbicsICdjdXN0b21DbGFzcycsICdzaG93Q29uZmlybUJ1dHRvbicsICdzaG93Q2FuY2VsQnV0dG9uJywgJ2NvbmZpcm1CdXR0b25UZXh0JywgJ2NvbmZpcm1CdXR0b25BcmlhTGFiZWwnLCAnY29uZmlybUJ1dHRvbkNvbG9yJywgJ2NhbmNlbEJ1dHRvblRleHQnLCAnY2FuY2VsQnV0dG9uQXJpYUxhYmVsJywgJ2NhbmNlbEJ1dHRvbkNvbG9yJywgJ2J1dHRvbnNTdHlsaW5nJywgJ3JldmVyc2VCdXR0b25zJywgJ2ltYWdlVXJsJywgJ2ltYWdlV2lkdGgnLCAnaW1hZ2VIZWlnaHQnLCAnaW1hZ2VBbHQnLCAncHJvZ3Jlc3NTdGVwcycsICdjdXJyZW50UHJvZ3Jlc3NTdGVwJ107XG52YXIgZGVwcmVjYXRlZFBhcmFtcyA9IHtcbiAgYW5pbWF0aW9uOiAnc2hvd0NsYXNzXCIgYW5kIFwiaGlkZUNsYXNzJ1xufTtcbnZhciB0b2FzdEluY29tcGF0aWJsZVBhcmFtcyA9IFsnYWxsb3dPdXRzaWRlQ2xpY2snLCAnYWxsb3dFbnRlcktleScsICdiYWNrZHJvcCcsICdmb2N1c0NvbmZpcm0nLCAnZm9jdXNDYW5jZWwnLCAnaGVpZ2h0QXV0bycsICdrZXlkb3duTGlzdGVuZXJDYXB0dXJlJ107XG4vKipcbiAqIElzIHZhbGlkIHBhcmFtZXRlclxuICogQHBhcmFtIHtTdHJpbmd9IHBhcmFtTmFtZVxuICovXG5cbnZhciBpc1ZhbGlkUGFyYW1ldGVyID0gZnVuY3Rpb24gaXNWYWxpZFBhcmFtZXRlcihwYXJhbU5hbWUpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkZWZhdWx0UGFyYW1zLCBwYXJhbU5hbWUpO1xufTtcbi8qKlxuICogSXMgdmFsaWQgcGFyYW1ldGVyIGZvciBTd2FsLnVwZGF0ZSgpIG1ldGhvZFxuICogQHBhcmFtIHtTdHJpbmd9IHBhcmFtTmFtZVxuICovXG5cbnZhciBpc1VwZGF0YWJsZVBhcmFtZXRlciA9IGZ1bmN0aW9uIGlzVXBkYXRhYmxlUGFyYW1ldGVyKHBhcmFtTmFtZSkge1xuICByZXR1cm4gdXBkYXRhYmxlUGFyYW1zLmluZGV4T2YocGFyYW1OYW1lKSAhPT0gLTE7XG59O1xuLyoqXG4gKiBJcyBkZXByZWNhdGVkIHBhcmFtZXRlclxuICogQHBhcmFtIHtTdHJpbmd9IHBhcmFtTmFtZVxuICovXG5cbnZhciBpc0RlcHJlY2F0ZWRQYXJhbWV0ZXIgPSBmdW5jdGlvbiBpc0RlcHJlY2F0ZWRQYXJhbWV0ZXIocGFyYW1OYW1lKSB7XG4gIHJldHVybiBkZXByZWNhdGVkUGFyYW1zW3BhcmFtTmFtZV07XG59O1xuXG52YXIgY2hlY2tJZlBhcmFtSXNWYWxpZCA9IGZ1bmN0aW9uIGNoZWNrSWZQYXJhbUlzVmFsaWQocGFyYW0pIHtcbiAgaWYgKCFpc1ZhbGlkUGFyYW1ldGVyKHBhcmFtKSkge1xuICAgIHdhcm4oXCJVbmtub3duIHBhcmFtZXRlciBcXFwiXCIuY29uY2F0KHBhcmFtLCBcIlxcXCJcIikpO1xuICB9XG59O1xuXG52YXIgY2hlY2tJZlRvYXN0UGFyYW1Jc1ZhbGlkID0gZnVuY3Rpb24gY2hlY2tJZlRvYXN0UGFyYW1Jc1ZhbGlkKHBhcmFtKSB7XG4gIGlmICh0b2FzdEluY29tcGF0aWJsZVBhcmFtcy5pbmRleE9mKHBhcmFtKSAhPT0gLTEpIHtcbiAgICB3YXJuKFwiVGhlIHBhcmFtZXRlciBcXFwiXCIuY29uY2F0KHBhcmFtLCBcIlxcXCIgaXMgaW5jb21wYXRpYmxlIHdpdGggdG9hc3RzXCIpKTtcbiAgfVxufTtcblxudmFyIGNoZWNrSWZQYXJhbUlzRGVwcmVjYXRlZCA9IGZ1bmN0aW9uIGNoZWNrSWZQYXJhbUlzRGVwcmVjYXRlZChwYXJhbSkge1xuICBpZiAoaXNEZXByZWNhdGVkUGFyYW1ldGVyKHBhcmFtKSkge1xuICAgIHdhcm5BYm91dERlcHJlYXRpb24ocGFyYW0sIGlzRGVwcmVjYXRlZFBhcmFtZXRlcihwYXJhbSkpO1xuICB9XG59O1xuLyoqXG4gKiBTaG93IHJlbGV2YW50IHdhcm5pbmdzIGZvciBnaXZlbiBwYXJhbXNcbiAqXG4gKiBAcGFyYW0gcGFyYW1zXG4gKi9cblxuXG52YXIgc2hvd1dhcm5pbmdzRm9yUGFyYW1zID0gZnVuY3Rpb24gc2hvd1dhcm5pbmdzRm9yUGFyYW1zKHBhcmFtcykge1xuICBmb3IgKHZhciBwYXJhbSBpbiBwYXJhbXMpIHtcbiAgICBjaGVja0lmUGFyYW1Jc1ZhbGlkKHBhcmFtKTtcblxuICAgIGlmIChwYXJhbXMudG9hc3QpIHtcbiAgICAgIGNoZWNrSWZUb2FzdFBhcmFtSXNWYWxpZChwYXJhbSk7XG4gICAgfVxuXG4gICAgY2hlY2tJZlBhcmFtSXNEZXByZWNhdGVkKHBhcmFtKTtcbiAgfVxufTtcblxuXG5cbnZhciBzdGF0aWNNZXRob2RzID0gT2JqZWN0LmZyZWV6ZSh7XG5cdGlzVmFsaWRQYXJhbWV0ZXI6IGlzVmFsaWRQYXJhbWV0ZXIsXG5cdGlzVXBkYXRhYmxlUGFyYW1ldGVyOiBpc1VwZGF0YWJsZVBhcmFtZXRlcixcblx0aXNEZXByZWNhdGVkUGFyYW1ldGVyOiBpc0RlcHJlY2F0ZWRQYXJhbWV0ZXIsXG5cdGFyZ3NUb1BhcmFtczogYXJnc1RvUGFyYW1zLFxuXHRpc1Zpc2libGU6IGlzVmlzaWJsZSQxLFxuXHRjbGlja0NvbmZpcm06IGNsaWNrQ29uZmlybSxcblx0Y2xpY2tDYW5jZWw6IGNsaWNrQ2FuY2VsLFxuXHRnZXRDb250YWluZXI6IGdldENvbnRhaW5lcixcblx0Z2V0UG9wdXA6IGdldFBvcHVwLFxuXHRnZXRUaXRsZTogZ2V0VGl0bGUsXG5cdGdldENvbnRlbnQ6IGdldENvbnRlbnQsXG5cdGdldEh0bWxDb250YWluZXI6IGdldEh0bWxDb250YWluZXIsXG5cdGdldEltYWdlOiBnZXRJbWFnZSxcblx0Z2V0SWNvbjogZ2V0SWNvbixcblx0Z2V0SWNvbnM6IGdldEljb25zLFxuXHRnZXRDbG9zZUJ1dHRvbjogZ2V0Q2xvc2VCdXR0b24sXG5cdGdldEFjdGlvbnM6IGdldEFjdGlvbnMsXG5cdGdldENvbmZpcm1CdXR0b246IGdldENvbmZpcm1CdXR0b24sXG5cdGdldENhbmNlbEJ1dHRvbjogZ2V0Q2FuY2VsQnV0dG9uLFxuXHRnZXRIZWFkZXI6IGdldEhlYWRlcixcblx0Z2V0Rm9vdGVyOiBnZXRGb290ZXIsXG5cdGdldEZvY3VzYWJsZUVsZW1lbnRzOiBnZXRGb2N1c2FibGVFbGVtZW50cyxcblx0Z2V0VmFsaWRhdGlvbk1lc3NhZ2U6IGdldFZhbGlkYXRpb25NZXNzYWdlLFxuXHRpc0xvYWRpbmc6IGlzTG9hZGluZyxcblx0ZmlyZTogZmlyZSxcblx0bWl4aW46IG1peGluLFxuXHRxdWV1ZTogcXVldWUsXG5cdGdldFF1ZXVlU3RlcDogZ2V0UXVldWVTdGVwLFxuXHRpbnNlcnRRdWV1ZVN0ZXA6IGluc2VydFF1ZXVlU3RlcCxcblx0ZGVsZXRlUXVldWVTdGVwOiBkZWxldGVRdWV1ZVN0ZXAsXG5cdHNob3dMb2FkaW5nOiBzaG93TG9hZGluZyxcblx0ZW5hYmxlTG9hZGluZzogc2hvd0xvYWRpbmcsXG5cdGdldFRpbWVyTGVmdDogZ2V0VGltZXJMZWZ0LFxuXHRzdG9wVGltZXI6IHN0b3BUaW1lcixcblx0cmVzdW1lVGltZXI6IHJlc3VtZVRpbWVyLFxuXHR0b2dnbGVUaW1lcjogdG9nZ2xlVGltZXIsXG5cdGluY3JlYXNlVGltZXI6IGluY3JlYXNlVGltZXIsXG5cdGlzVGltZXJSdW5uaW5nOiBpc1RpbWVyUnVubmluZ1xufSk7XG5cbi8qKlxuICogRW5hYmxlcyBidXR0b25zIGFuZCBoaWRlIGxvYWRlci5cbiAqL1xuXG5mdW5jdGlvbiBoaWRlTG9hZGluZygpIHtcbiAgLy8gZG8gbm90aGluZyBpZiBwb3B1cCBpcyBjbG9zZWRcbiAgdmFyIGlubmVyUGFyYW1zID0gcHJpdmF0ZVByb3BzLmlubmVyUGFyYW1zLmdldCh0aGlzKTtcblxuICBpZiAoIWlubmVyUGFyYW1zKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGRvbUNhY2hlID0gcHJpdmF0ZVByb3BzLmRvbUNhY2hlLmdldCh0aGlzKTtcblxuICBpZiAoIWlubmVyUGFyYW1zLnNob3dDb25maXJtQnV0dG9uKSB7XG4gICAgaGlkZShkb21DYWNoZS5jb25maXJtQnV0dG9uKTtcblxuICAgIGlmICghaW5uZXJQYXJhbXMuc2hvd0NhbmNlbEJ1dHRvbikge1xuICAgICAgaGlkZShkb21DYWNoZS5hY3Rpb25zKTtcbiAgICB9XG4gIH1cblxuICByZW1vdmVDbGFzcyhbZG9tQ2FjaGUucG9wdXAsIGRvbUNhY2hlLmFjdGlvbnNdLCBzd2FsQ2xhc3Nlcy5sb2FkaW5nKTtcbiAgZG9tQ2FjaGUucG9wdXAucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWJ1c3knKTtcbiAgZG9tQ2FjaGUucG9wdXAucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWxvYWRpbmcnKTtcbiAgZG9tQ2FjaGUuY29uZmlybUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICBkb21DYWNoZS5jYW5jZWxCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0SW5wdXQkMShpbnN0YW5jZSkge1xuICB2YXIgaW5uZXJQYXJhbXMgPSBwcml2YXRlUHJvcHMuaW5uZXJQYXJhbXMuZ2V0KGluc3RhbmNlIHx8IHRoaXMpO1xuICB2YXIgZG9tQ2FjaGUgPSBwcml2YXRlUHJvcHMuZG9tQ2FjaGUuZ2V0KGluc3RhbmNlIHx8IHRoaXMpO1xuXG4gIGlmICghZG9tQ2FjaGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBnZXRJbnB1dChkb21DYWNoZS5jb250ZW50LCBpbm5lclBhcmFtcy5pbnB1dCk7XG59XG5cbnZhciBmaXhTY3JvbGxiYXIgPSBmdW5jdGlvbiBmaXhTY3JvbGxiYXIoKSB7XG4gIC8vIGZvciBxdWV1ZXMsIGRvIG5vdCBkbyB0aGlzIG1vcmUgdGhhbiBvbmNlXG4gIGlmIChzdGF0ZXMucHJldmlvdXNCb2R5UGFkZGluZyAhPT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfSAvLyBpZiB0aGUgYm9keSBoYXMgb3ZlcmZsb3dcblxuXG4gIGlmIChkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCA+IHdpbmRvdy5pbm5lckhlaWdodCkge1xuICAgIC8vIGFkZCBwYWRkaW5nIHNvIHRoZSBjb250ZW50IGRvZXNuJ3Qgc2hpZnQgYWZ0ZXIgcmVtb3ZhbCBvZiBzY3JvbGxiYXJcbiAgICBzdGF0ZXMucHJldmlvdXNCb2R5UGFkZGluZyA9IHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctcmlnaHQnKSk7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIlwiLmNvbmNhdChzdGF0ZXMucHJldmlvdXNCb2R5UGFkZGluZyArIG1lYXN1cmVTY3JvbGxiYXIoKSwgXCJweFwiKTtcbiAgfVxufTtcbnZhciB1bmRvU2Nyb2xsYmFyID0gZnVuY3Rpb24gdW5kb1Njcm9sbGJhcigpIHtcbiAgaWYgKHN0YXRlcy5wcmV2aW91c0JvZHlQYWRkaW5nICE9PSBudWxsKSB7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIlwiLmNvbmNhdChzdGF0ZXMucHJldmlvdXNCb2R5UGFkZGluZywgXCJweFwiKTtcbiAgICBzdGF0ZXMucHJldmlvdXNCb2R5UGFkZGluZyA9IG51bGw7XG4gIH1cbn07XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cbnZhciBpT1NmaXggPSBmdW5jdGlvbiBpT1NmaXgoKSB7XG4gIHZhciBpT1MgPSAvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhd2luZG93Lk1TU3RyZWFtIHx8IG5hdmlnYXRvci5wbGF0Zm9ybSA9PT0gJ01hY0ludGVsJyAmJiBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAxO1xuXG4gIGlmIChpT1MgJiYgIWhhc0NsYXNzKGRvY3VtZW50LmJvZHksIHN3YWxDbGFzc2VzLmlvc2ZpeCkpIHtcbiAgICB2YXIgb2Zmc2V0ID0gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS50b3AgPSBcIlwiLmNvbmNhdChvZmZzZXQgKiAtMSwgXCJweFwiKTtcbiAgICBhZGRDbGFzcyhkb2N1bWVudC5ib2R5LCBzd2FsQ2xhc3Nlcy5pb3NmaXgpO1xuICAgIGxvY2tCb2R5U2Nyb2xsKCk7XG4gIH1cbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXG52YXIgbG9ja0JvZHlTY3JvbGwgPSBmdW5jdGlvbiBsb2NrQm9keVNjcm9sbCgpIHtcbiAgLy8gIzEyNDZcbiAgdmFyIGNvbnRhaW5lciA9IGdldENvbnRhaW5lcigpO1xuICB2YXIgcHJldmVudFRvdWNoTW92ZTtcblxuICBjb250YWluZXIub250b3VjaHN0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICBwcmV2ZW50VG91Y2hNb3ZlID0gZS50YXJnZXQgPT09IGNvbnRhaW5lciB8fCAhaXNTY3JvbGxhYmxlKGNvbnRhaW5lcikgJiYgZS50YXJnZXQudGFnTmFtZSAhPT0gJ0lOUFVUJyAvLyAjMTYwM1xuICAgIDtcbiAgfTtcblxuICBjb250YWluZXIub250b3VjaG1vdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgIGlmIChwcmV2ZW50VG91Y2hNb3ZlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfTtcbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXG5cbnZhciB1bmRvSU9TZml4ID0gZnVuY3Rpb24gdW5kb0lPU2ZpeCgpIHtcbiAgaWYgKGhhc0NsYXNzKGRvY3VtZW50LmJvZHksIHN3YWxDbGFzc2VzLmlvc2ZpeCkpIHtcbiAgICB2YXIgb2Zmc2V0ID0gcGFyc2VJbnQoZG9jdW1lbnQuYm9keS5zdHlsZS50b3AsIDEwKTtcbiAgICByZW1vdmVDbGFzcyhkb2N1bWVudC5ib2R5LCBzd2FsQ2xhc3Nlcy5pb3NmaXgpO1xuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudG9wID0gJyc7XG4gICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSBvZmZzZXQgKiAtMTtcbiAgfVxufTtcblxudmFyIGlzSUUxMSA9IGZ1bmN0aW9uIGlzSUUxMSgpIHtcbiAgcmV0dXJuICEhd2luZG93Lk1TSW5wdXRNZXRob2RDb250ZXh0ICYmICEhZG9jdW1lbnQuZG9jdW1lbnRNb2RlO1xufTsgLy8gRml4IElFMTEgY2VudGVyaW5nIHN3ZWV0YWxlcnQyL2lzc3Vlcy85MzNcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblxuXG52YXIgZml4VmVydGljYWxQb3NpdGlvbklFID0gZnVuY3Rpb24gZml4VmVydGljYWxQb3NpdGlvbklFKCkge1xuICB2YXIgY29udGFpbmVyID0gZ2V0Q29udGFpbmVyKCk7XG4gIHZhciBwb3B1cCA9IGdldFBvcHVwKCk7XG4gIGNvbnRhaW5lci5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnYWxpZ24taXRlbXMnKTtcblxuICBpZiAocG9wdXAub2Zmc2V0VG9wIDwgMCkge1xuICAgIGNvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2ZsZXgtc3RhcnQnO1xuICB9XG59O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblxuXG52YXIgSUVmaXggPSBmdW5jdGlvbiBJRWZpeCgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIGlzSUUxMSgpKSB7XG4gICAgZml4VmVydGljYWxQb3NpdGlvbklFKCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZpeFZlcnRpY2FsUG9zaXRpb25JRSk7XG4gIH1cbn07XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXG52YXIgdW5kb0lFZml4ID0gZnVuY3Rpb24gdW5kb0lFZml4KCkge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNJRTExKCkpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZml4VmVydGljYWxQb3NpdGlvbklFKTtcbiAgfVxufTtcblxuLy8gQWRkaW5nIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIHRvIGVsZW1lbnRzIG91dHNpZGUgb2YgdGhlIGFjdGl2ZSBtb2RhbCBkaWFsb2cgZW5zdXJlcyB0aGF0XG4vLyBlbGVtZW50cyBub3Qgd2l0aGluIHRoZSBhY3RpdmUgbW9kYWwgZGlhbG9nIHdpbGwgbm90IGJlIHN1cmZhY2VkIGlmIGEgdXNlciBvcGVucyBhIHNjcmVlblxuLy8gcmVhZGVy4oCZcyBsaXN0IG9mIGVsZW1lbnRzIChoZWFkaW5ncywgZm9ybSBjb250cm9scywgbGFuZG1hcmtzLCBldGMuKSBpbiB0aGUgZG9jdW1lbnQuXG5cbnZhciBzZXRBcmlhSGlkZGVuID0gZnVuY3Rpb24gc2V0QXJpYUhpZGRlbigpIHtcbiAgdmFyIGJvZHlDaGlsZHJlbiA9IHRvQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gIGJvZHlDaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgIGlmIChlbCA9PT0gZ2V0Q29udGFpbmVyKCkgfHwgY29udGFpbnMoZWwsIGdldENvbnRhaW5lcigpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJykpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1wcmV2aW91cy1hcmlhLWhpZGRlbicsIGVsLmdldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKSk7XG4gICAgfVxuXG4gICAgZWwuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gIH0pO1xufTtcbnZhciB1bnNldEFyaWFIaWRkZW4gPSBmdW5jdGlvbiB1bnNldEFyaWFIaWRkZW4oKSB7XG4gIHZhciBib2R5Q2hpbGRyZW4gPSB0b0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICBib2R5Q2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdkYXRhLXByZXZpb3VzLWFyaWEtaGlkZGVuJykpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJldmlvdXMtYXJpYS1oaWRkZW4nKSk7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcHJldmlvdXMtYXJpYS1oaWRkZW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vKipcbiAqIFRoaXMgbW9kdWxlIGNvbnRhaW50cyBgV2Vha01hcGBzIGZvciBlYWNoIGVmZmVjdGl2ZWx5LVwicHJpdmF0ZSAgcHJvcGVydHlcIiB0aGF0IGEgYFN3YWxgIGhhcy5cbiAqIEZvciBleGFtcGxlLCB0byBzZXQgdGhlIHByaXZhdGUgcHJvcGVydHkgXCJmb29cIiBvZiBgdGhpc2AgdG8gXCJiYXJcIiwgeW91IGNhbiBgcHJpdmF0ZVByb3BzLmZvby5zZXQodGhpcywgJ2JhcicpYFxuICogVGhpcyBpcyB0aGUgYXBwcm9hY2ggdGhhdCBCYWJlbCB3aWxsIHByb2JhYmx5IHRha2UgdG8gaW1wbGVtZW50IHByaXZhdGUgbWV0aG9kcy9maWVsZHNcbiAqICAgaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtcHJpdmF0ZS1tZXRob2RzXG4gKiAgIGh0dHBzOi8vZ2l0aHViLmNvbS9iYWJlbC9iYWJlbC9wdWxsLzc1NTVcbiAqIE9uY2Ugd2UgaGF2ZSB0aGUgY2hhbmdlcyBmcm9tIHRoYXQgUFIgaW4gQmFiZWwsIGFuZCBvdXIgY29yZSBjbGFzcyBmaXRzIHJlYXNvbmFibGUgaW4gKm9uZSBtb2R1bGUqXG4gKiAgIHRoZW4gd2UgY2FuIHVzZSB0aGF0IGxhbmd1YWdlIGZlYXR1cmUuXG4gKi9cbnZhciBwcml2YXRlTWV0aG9kcyA9IHtcbiAgc3dhbFByb21pc2VSZXNvbHZlOiBuZXcgV2Vha01hcCgpXG59O1xuXG4vKlxuICogSW5zdGFuY2UgbWV0aG9kIHRvIGNsb3NlIHN3ZWV0QWxlcnRcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVQb3B1cEFuZFJlc2V0U3RhdGUoaW5zdGFuY2UsIGNvbnRhaW5lciwgaXNUb2FzdCwgb25BZnRlckNsb3NlKSB7XG4gIGlmIChpc1RvYXN0KSB7XG4gICAgdHJpZ2dlck9uQWZ0ZXJDbG9zZUFuZERpc3Bvc2UoaW5zdGFuY2UsIG9uQWZ0ZXJDbG9zZSk7XG4gIH0gZWxzZSB7XG4gICAgcmVzdG9yZUFjdGl2ZUVsZW1lbnQoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0cmlnZ2VyT25BZnRlckNsb3NlQW5kRGlzcG9zZShpbnN0YW5jZSwgb25BZnRlckNsb3NlKTtcbiAgICB9KTtcbiAgICBnbG9iYWxTdGF0ZS5rZXlkb3duVGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBnbG9iYWxTdGF0ZS5rZXlkb3duSGFuZGxlciwge1xuICAgICAgY2FwdHVyZTogZ2xvYmFsU3RhdGUua2V5ZG93bkxpc3RlbmVyQ2FwdHVyZVxuICAgIH0pO1xuICAgIGdsb2JhbFN0YXRlLmtleWRvd25IYW5kbGVyQWRkZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGlmIChjb250YWluZXIucGFyZW50Tm9kZSkge1xuICAgIGNvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNvbnRhaW5lcik7XG4gIH1cblxuICBpZiAoaXNNb2RhbCgpKSB7XG4gICAgdW5kb1Njcm9sbGJhcigpO1xuICAgIHVuZG9JT1NmaXgoKTtcbiAgICB1bmRvSUVmaXgoKTtcbiAgICB1bnNldEFyaWFIaWRkZW4oKTtcbiAgfVxuXG4gIHJlbW92ZUJvZHlDbGFzc2VzKCk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUJvZHlDbGFzc2VzKCkge1xuICByZW1vdmVDbGFzcyhbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBkb2N1bWVudC5ib2R5XSwgW3N3YWxDbGFzc2VzLnNob3duLCBzd2FsQ2xhc3Nlc1snaGVpZ2h0LWF1dG8nXSwgc3dhbENsYXNzZXNbJ25vLWJhY2tkcm9wJ10sIHN3YWxDbGFzc2VzWyd0b2FzdC1zaG93biddLCBzd2FsQ2xhc3Nlc1sndG9hc3QtY29sdW1uJ11dKTtcbn1cblxuZnVuY3Rpb24gZGlzcG9zZVN3YWwoaW5zdGFuY2UpIHtcbiAgLy8gVW5zZXQgdGhpcy5wYXJhbXMgc28gR0Mgd2lsbCBkaXNwb3NlIGl0ICgjMTU2OSlcbiAgZGVsZXRlIGluc3RhbmNlLnBhcmFtczsgLy8gVW5zZXQgZ2xvYmFsU3RhdGUgcHJvcHMgc28gR0Mgd2lsbCBkaXNwb3NlIGdsb2JhbFN0YXRlICgjMTU2OSlcblxuICBkZWxldGUgZ2xvYmFsU3RhdGUua2V5ZG93bkhhbmRsZXI7XG4gIGRlbGV0ZSBnbG9iYWxTdGF0ZS5rZXlkb3duVGFyZ2V0OyAvLyBVbnNldCBXZWFrTWFwcyBzbyBHQyB3aWxsIGJlIGFibGUgdG8gZGlzcG9zZSB0aGVtICgjMTU2OSlcblxuICB1bnNldFdlYWtNYXBzKHByaXZhdGVQcm9wcyk7XG4gIHVuc2V0V2Vha01hcHMocHJpdmF0ZU1ldGhvZHMpO1xufVxuXG5mdW5jdGlvbiBjbG9zZShyZXNvbHZlVmFsdWUpIHtcbiAgdmFyIHBvcHVwID0gZ2V0UG9wdXAoKTtcblxuICBpZiAoIXBvcHVwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGlubmVyUGFyYW1zID0gcHJpdmF0ZVByb3BzLmlubmVyUGFyYW1zLmdldCh0aGlzKTtcblxuICBpZiAoIWlubmVyUGFyYW1zIHx8IGhhc0NsYXNzKHBvcHVwLCBpbm5lclBhcmFtcy5oaWRlQ2xhc3MucG9wdXApKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHN3YWxQcm9taXNlUmVzb2x2ZSA9IHByaXZhdGVNZXRob2RzLnN3YWxQcm9taXNlUmVzb2x2ZS5nZXQodGhpcyk7XG4gIHJlbW92ZUNsYXNzKHBvcHVwLCBpbm5lclBhcmFtcy5zaG93Q2xhc3MucG9wdXApO1xuICBhZGRDbGFzcyhwb3B1cCwgaW5uZXJQYXJhbXMuaGlkZUNsYXNzLnBvcHVwKTtcbiAgdmFyIGJhY2tkcm9wID0gZ2V0Q29udGFpbmVyKCk7XG4gIHJlbW92ZUNsYXNzKGJhY2tkcm9wLCBpbm5lclBhcmFtcy5zaG93Q2xhc3MuYmFja2Ryb3ApO1xuICBhZGRDbGFzcyhiYWNrZHJvcCwgaW5uZXJQYXJhbXMuaGlkZUNsYXNzLmJhY2tkcm9wKTtcbiAgaGFuZGxlUG9wdXBBbmltYXRpb24odGhpcywgcG9wdXAsIGlubmVyUGFyYW1zKTsgLy8gUmVzb2x2ZSBTd2FsIHByb21pc2VcblxuICBzd2FsUHJvbWlzZVJlc29sdmUocmVzb2x2ZVZhbHVlIHx8IHt9KTtcbn1cblxudmFyIGhhbmRsZVBvcHVwQW5pbWF0aW9uID0gZnVuY3Rpb24gaGFuZGxlUG9wdXBBbmltYXRpb24oaW5zdGFuY2UsIHBvcHVwLCBpbm5lclBhcmFtcykge1xuICB2YXIgY29udGFpbmVyID0gZ2V0Q29udGFpbmVyKCk7IC8vIElmIGFuaW1hdGlvbiBpcyBzdXBwb3J0ZWQsIGFuaW1hdGVcblxuICB2YXIgYW5pbWF0aW9uSXNTdXBwb3J0ZWQgPSBhbmltYXRpb25FbmRFdmVudCAmJiBoYXNDc3NBbmltYXRpb24ocG9wdXApO1xuICB2YXIgb25DbG9zZSA9IGlubmVyUGFyYW1zLm9uQ2xvc2UsXG4gICAgICBvbkFmdGVyQ2xvc2UgPSBpbm5lclBhcmFtcy5vbkFmdGVyQ2xvc2U7XG5cbiAgaWYgKG9uQ2xvc2UgIT09IG51bGwgJiYgdHlwZW9mIG9uQ2xvc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvbkNsb3NlKHBvcHVwKTtcbiAgfVxuXG4gIGlmIChhbmltYXRpb25Jc1N1cHBvcnRlZCkge1xuICAgIGFuaW1hdGVQb3B1cChpbnN0YW5jZSwgcG9wdXAsIGNvbnRhaW5lciwgb25BZnRlckNsb3NlKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBPdGhlcndpc2UsIHJlbW92ZSBpbW1lZGlhdGVseVxuICAgIHJlbW92ZVBvcHVwQW5kUmVzZXRTdGF0ZShpbnN0YW5jZSwgY29udGFpbmVyLCBpc1RvYXN0KCksIG9uQWZ0ZXJDbG9zZSk7XG4gIH1cbn07XG5cbnZhciBhbmltYXRlUG9wdXAgPSBmdW5jdGlvbiBhbmltYXRlUG9wdXAoaW5zdGFuY2UsIHBvcHVwLCBjb250YWluZXIsIG9uQWZ0ZXJDbG9zZSkge1xuICBnbG9iYWxTdGF0ZS5zd2FsQ2xvc2VFdmVudEZpbmlzaGVkQ2FsbGJhY2sgPSByZW1vdmVQb3B1cEFuZFJlc2V0U3RhdGUuYmluZChudWxsLCBpbnN0YW5jZSwgY29udGFpbmVyLCBpc1RvYXN0KCksIG9uQWZ0ZXJDbG9zZSk7XG4gIHBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoYW5pbWF0aW9uRW5kRXZlbnQsIGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBwb3B1cCkge1xuICAgICAgZ2xvYmFsU3RhdGUuc3dhbENsb3NlRXZlbnRGaW5pc2hlZENhbGxiYWNrKCk7XG4gICAgICBkZWxldGUgZ2xvYmFsU3RhdGUuc3dhbENsb3NlRXZlbnRGaW5pc2hlZENhbGxiYWNrO1xuICAgIH1cbiAgfSk7XG59O1xuXG52YXIgdW5zZXRXZWFrTWFwcyA9IGZ1bmN0aW9uIHVuc2V0V2Vha01hcHMob2JqKSB7XG4gIGZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgb2JqW2ldID0gbmV3IFdlYWtNYXAoKTtcbiAgfVxufTtcblxudmFyIHRyaWdnZXJPbkFmdGVyQ2xvc2VBbmREaXNwb3NlID0gZnVuY3Rpb24gdHJpZ2dlck9uQWZ0ZXJDbG9zZUFuZERpc3Bvc2UoaW5zdGFuY2UsIG9uQWZ0ZXJDbG9zZSkge1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAob25BZnRlckNsb3NlICE9PSBudWxsICYmIHR5cGVvZiBvbkFmdGVyQ2xvc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9uQWZ0ZXJDbG9zZSgpO1xuICAgIH1cblxuICAgIGlmICghZ2V0UG9wdXAoKSkge1xuICAgICAgZGlzcG9zZVN3YWwoaW5zdGFuY2UpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBzZXRCdXR0b25zRGlzYWJsZWQoaW5zdGFuY2UsIGJ1dHRvbnMsIGRpc2FibGVkKSB7XG4gIHZhciBkb21DYWNoZSA9IHByaXZhdGVQcm9wcy5kb21DYWNoZS5nZXQoaW5zdGFuY2UpO1xuICBidXR0b25zLmZvckVhY2goZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgIGRvbUNhY2hlW2J1dHRvbl0uZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNldElucHV0RGlzYWJsZWQoaW5wdXQsIGRpc2FibGVkKSB7XG4gIGlmICghaW5wdXQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoaW5wdXQudHlwZSA9PT0gJ3JhZGlvJykge1xuICAgIHZhciByYWRpb3NDb250YWluZXIgPSBpbnB1dC5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgdmFyIHJhZGlvcyA9IHJhZGlvc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYWRpb3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJhZGlvc1tpXS5kaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpbnB1dC5kaXNhYmxlZCA9IGRpc2FibGVkO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVuYWJsZUJ1dHRvbnMoKSB7XG4gIHNldEJ1dHRvbnNEaXNhYmxlZCh0aGlzLCBbJ2NvbmZpcm1CdXR0b24nLCAnY2FuY2VsQnV0dG9uJ10sIGZhbHNlKTtcbn1cbmZ1bmN0aW9uIGRpc2FibGVCdXR0b25zKCkge1xuICBzZXRCdXR0b25zRGlzYWJsZWQodGhpcywgWydjb25maXJtQnV0dG9uJywgJ2NhbmNlbEJ1dHRvbiddLCB0cnVlKTtcbn1cbmZ1bmN0aW9uIGVuYWJsZUlucHV0KCkge1xuICByZXR1cm4gc2V0SW5wdXREaXNhYmxlZCh0aGlzLmdldElucHV0KCksIGZhbHNlKTtcbn1cbmZ1bmN0aW9uIGRpc2FibGVJbnB1dCgpIHtcbiAgcmV0dXJuIHNldElucHV0RGlzYWJsZWQodGhpcy5nZXRJbnB1dCgpLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gc2hvd1ZhbGlkYXRpb25NZXNzYWdlKGVycm9yKSB7XG4gIHZhciBkb21DYWNoZSA9IHByaXZhdGVQcm9wcy5kb21DYWNoZS5nZXQodGhpcyk7XG4gIGRvbUNhY2hlLnZhbGlkYXRpb25NZXNzYWdlLmlubmVySFRNTCA9IGVycm9yO1xuICB2YXIgcG9wdXBDb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9tQ2FjaGUucG9wdXApO1xuICBkb21DYWNoZS52YWxpZGF0aW9uTWVzc2FnZS5zdHlsZS5tYXJnaW5MZWZ0ID0gXCItXCIuY29uY2F0KHBvcHVwQ29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLWxlZnQnKSk7XG4gIGRvbUNhY2hlLnZhbGlkYXRpb25NZXNzYWdlLnN0eWxlLm1hcmdpblJpZ2h0ID0gXCItXCIuY29uY2F0KHBvcHVwQ29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLXJpZ2h0JykpO1xuICBzaG93KGRvbUNhY2hlLnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgdmFyIGlucHV0ID0gdGhpcy5nZXRJbnB1dCgpO1xuXG4gIGlmIChpbnB1dCkge1xuICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJywgdHJ1ZSk7XG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZEJ5Jywgc3dhbENsYXNzZXNbJ3ZhbGlkYXRpb24tbWVzc2FnZSddKTtcbiAgICBmb2N1c0lucHV0KGlucHV0KTtcbiAgICBhZGRDbGFzcyhpbnB1dCwgc3dhbENsYXNzZXMuaW5wdXRlcnJvcik7XG4gIH1cbn0gLy8gSGlkZSBibG9jayB3aXRoIHZhbGlkYXRpb24gbWVzc2FnZVxuXG5mdW5jdGlvbiByZXNldFZhbGlkYXRpb25NZXNzYWdlJDEoKSB7XG4gIHZhciBkb21DYWNoZSA9IHByaXZhdGVQcm9wcy5kb21DYWNoZS5nZXQodGhpcyk7XG5cbiAgaWYgKGRvbUNhY2hlLnZhbGlkYXRpb25NZXNzYWdlKSB7XG4gICAgaGlkZShkb21DYWNoZS52YWxpZGF0aW9uTWVzc2FnZSk7XG4gIH1cblxuICB2YXIgaW5wdXQgPSB0aGlzLmdldElucHV0KCk7XG5cbiAgaWYgKGlucHV0KSB7XG4gICAgaW5wdXQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWludmFsaWQnKTtcbiAgICBpbnB1dC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkQnknKTtcbiAgICByZW1vdmVDbGFzcyhpbnB1dCwgc3dhbENsYXNzZXMuaW5wdXRlcnJvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0UHJvZ3Jlc3NTdGVwcyQxKCkge1xuICB2YXIgZG9tQ2FjaGUgPSBwcml2YXRlUHJvcHMuZG9tQ2FjaGUuZ2V0KHRoaXMpO1xuICByZXR1cm4gZG9tQ2FjaGUucHJvZ3Jlc3NTdGVwcztcbn1cblxudmFyIFRpbWVyID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gVGltZXIoY2FsbGJhY2ssIGRlbGF5KSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRpbWVyKTtcblxuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLnJlbWFpbmluZyA9IGRlbGF5O1xuICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgIHRoaXMuc3RhcnQoKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhUaW1lciwgW3tcbiAgICBrZXk6IFwic3RhcnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICBpZiAoIXRoaXMucnVubmluZykge1xuICAgICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0aGlzLmlkID0gc2V0VGltZW91dCh0aGlzLmNhbGxiYWNrLCB0aGlzLnJlbWFpbmluZyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnJlbWFpbmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3RvcFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgaWYgKHRoaXMucnVubmluZykge1xuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaWQpO1xuICAgICAgICB0aGlzLnJlbWFpbmluZyAtPSBuZXcgRGF0ZSgpIC0gdGhpcy5zdGFydGVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5yZW1haW5pbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluY3JlYXNlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluY3JlYXNlKG4pIHtcbiAgICAgIHZhciBydW5uaW5nID0gdGhpcy5ydW5uaW5nO1xuXG4gICAgICBpZiAocnVubmluZykge1xuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZW1haW5pbmcgKz0gbjtcblxuICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5yZW1haW5pbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFRpbWVyTGVmdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaW1lckxlZnQoKSB7XG4gICAgICBpZiAodGhpcy5ydW5uaW5nKSB7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnJlbWFpbmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNSdW5uaW5nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzUnVubmluZygpIHtcbiAgICAgIHJldHVybiB0aGlzLnJ1bm5pbmc7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFRpbWVyO1xufSgpO1xuXG52YXIgZGVmYXVsdElucHV0VmFsaWRhdG9ycyA9IHtcbiAgZW1haWw6IGZ1bmN0aW9uIGVtYWlsKHN0cmluZywgdmFsaWRhdGlvbk1lc3NhZ2UpIHtcbiAgICByZXR1cm4gL15bYS16QS1aMC05LitfLV0rQFthLXpBLVowLTkuLV0rXFwuW2EtekEtWjAtOS1dezIsMjR9JC8udGVzdChzdHJpbmcpID8gUHJvbWlzZS5yZXNvbHZlKCkgOiBQcm9taXNlLnJlc29sdmUodmFsaWRhdGlvbk1lc3NhZ2UgfHwgJ0ludmFsaWQgZW1haWwgYWRkcmVzcycpO1xuICB9LFxuICB1cmw6IGZ1bmN0aW9uIHVybChzdHJpbmcsIHZhbGlkYXRpb25NZXNzYWdlKSB7XG4gICAgLy8gdGFrZW4gZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzgwOTQzNSB3aXRoIGEgc21hbGwgY2hhbmdlIGZyb20gIzEzMDZcbiAgICByZXR1cm4gL15odHRwcz86XFwvXFwvKHd3d1xcLik/Wy1hLXpBLVowLTlAOiUuXyt+Iz1dezIsMjU2fVxcLlthLXpdezIsNjN9XFxiKFstYS16QS1aMC05QDolXysufiM/Ji89XSopJC8udGVzdChzdHJpbmcpID8gUHJvbWlzZS5yZXNvbHZlKCkgOiBQcm9taXNlLnJlc29sdmUodmFsaWRhdGlvbk1lc3NhZ2UgfHwgJ0ludmFsaWQgVVJMJyk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHNldERlZmF1bHRJbnB1dFZhbGlkYXRvcnMocGFyYW1zKSB7XG4gIC8vIFVzZSBkZWZhdWx0IGBpbnB1dFZhbGlkYXRvcmAgZm9yIHN1cHBvcnRlZCBpbnB1dCB0eXBlcyBpZiBub3QgcHJvdmlkZWRcbiAgaWYgKCFwYXJhbXMuaW5wdXRWYWxpZGF0b3IpIHtcbiAgICBPYmplY3Qua2V5cyhkZWZhdWx0SW5wdXRWYWxpZGF0b3JzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGlmIChwYXJhbXMuaW5wdXQgPT09IGtleSkge1xuICAgICAgICBwYXJhbXMuaW5wdXRWYWxpZGF0b3IgPSBkZWZhdWx0SW5wdXRWYWxpZGF0b3JzW2tleV07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVDdXN0b21UYXJnZXRFbGVtZW50KHBhcmFtcykge1xuICAvLyBEZXRlcm1pbmUgaWYgdGhlIGN1c3RvbSB0YXJnZXQgZWxlbWVudCBpcyB2YWxpZFxuICBpZiAoIXBhcmFtcy50YXJnZXQgfHwgdHlwZW9mIHBhcmFtcy50YXJnZXQgPT09ICdzdHJpbmcnICYmICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBhcmFtcy50YXJnZXQpIHx8IHR5cGVvZiBwYXJhbXMudGFyZ2V0ICE9PSAnc3RyaW5nJyAmJiAhcGFyYW1zLnRhcmdldC5hcHBlbmRDaGlsZCkge1xuICAgIHdhcm4oJ1RhcmdldCBwYXJhbWV0ZXIgaXMgbm90IHZhbGlkLCBkZWZhdWx0aW5nIHRvIFwiYm9keVwiJyk7XG4gICAgcGFyYW1zLnRhcmdldCA9ICdib2R5JztcbiAgfVxufVxuLyoqXG4gKiBTZXQgdHlwZSwgdGV4dCBhbmQgYWN0aW9ucyBvbiBwb3B1cFxuICpcbiAqIEBwYXJhbSBwYXJhbXNcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5cblxuZnVuY3Rpb24gc2V0UGFyYW1ldGVycyhwYXJhbXMpIHtcbiAgc2V0RGVmYXVsdElucHV0VmFsaWRhdG9ycyhwYXJhbXMpOyAvLyBzaG93TG9hZGVyT25Db25maXJtICYmIHByZUNvbmZpcm1cblxuICBpZiAocGFyYW1zLnNob3dMb2FkZXJPbkNvbmZpcm0gJiYgIXBhcmFtcy5wcmVDb25maXJtKSB7XG4gICAgd2Fybignc2hvd0xvYWRlck9uQ29uZmlybSBpcyBzZXQgdG8gdHJ1ZSwgYnV0IHByZUNvbmZpcm0gaXMgbm90IGRlZmluZWQuXFxuJyArICdzaG93TG9hZGVyT25Db25maXJtIHNob3VsZCBiZSB1c2VkIHRvZ2V0aGVyIHdpdGggcHJlQ29uZmlybSwgc2VlIHVzYWdlIGV4YW1wbGU6XFxuJyArICdodHRwczovL3N3ZWV0YWxlcnQyLmdpdGh1Yi5pby8jYWpheC1yZXF1ZXN0Jyk7XG4gIH0gLy8gcGFyYW1zLmFuaW1hdGlvbiB3aWxsIGJlIGFjdHVhbGx5IHVzZWQgaW4gcmVuZGVyUG9wdXAuanNcbiAgLy8gYnV0IGluIGNhc2Ugd2hlbiBwYXJhbXMuYW5pbWF0aW9uIGlzIGEgZnVuY3Rpb24sIHdlIG5lZWQgdG8gY2FsbCB0aGF0IGZ1bmN0aW9uXG4gIC8vIGJlZm9yZSBwb3B1cCAocmUpaW5pdGlhbGl6YXRpb24sIHNvIGl0J2xsIGJlIHBvc3NpYmxlIHRvIGNoZWNrIFN3YWwuaXNWaXNpYmxlKClcbiAgLy8gaW5zaWRlIHRoZSBwYXJhbXMuYW5pbWF0aW9uIGZ1bmN0aW9uXG5cblxuICBwYXJhbXMuYW5pbWF0aW9uID0gY2FsbElmRnVuY3Rpb24ocGFyYW1zLmFuaW1hdGlvbik7XG4gIHZhbGlkYXRlQ3VzdG9tVGFyZ2V0RWxlbWVudChwYXJhbXMpOyAvLyBSZXBsYWNlIG5ld2xpbmVzIHdpdGggPGJyPiBpbiB0aXRsZVxuXG4gIGlmICh0eXBlb2YgcGFyYW1zLnRpdGxlID09PSAnc3RyaW5nJykge1xuICAgIHBhcmFtcy50aXRsZSA9IHBhcmFtcy50aXRsZS5zcGxpdCgnXFxuJykuam9pbignPGJyIC8+Jyk7XG4gIH1cblxuICBpbml0KHBhcmFtcyk7XG59XG5cbmZ1bmN0aW9uIHN3YWxPcGVuQW5pbWF0aW9uRmluaXNoZWQocG9wdXAsIGNvbnRhaW5lcikge1xuICBwb3B1cC5yZW1vdmVFdmVudExpc3RlbmVyKGFuaW1hdGlvbkVuZEV2ZW50LCBzd2FsT3BlbkFuaW1hdGlvbkZpbmlzaGVkKTtcbiAgY29udGFpbmVyLnN0eWxlLm92ZXJmbG93WSA9ICdhdXRvJztcbn1cbi8qKlxuICogT3BlbiBwb3B1cCwgYWRkIG5lY2Vzc2FyeSBjbGFzc2VzIGFuZCBzdHlsZXMsIGZpeCBzY3JvbGxiYXJcbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBwYXJhbXNcbiAqL1xuXG5cbnZhciBvcGVuUG9wdXAgPSBmdW5jdGlvbiBvcGVuUG9wdXAocGFyYW1zKSB7XG4gIHZhciBjb250YWluZXIgPSBnZXRDb250YWluZXIoKTtcbiAgdmFyIHBvcHVwID0gZ2V0UG9wdXAoKTtcblxuICBpZiAodHlwZW9mIHBhcmFtcy5vbkJlZm9yZU9wZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICBwYXJhbXMub25CZWZvcmVPcGVuKHBvcHVwKTtcbiAgfVxuXG4gIGFkZENsYXNzZXMkMShjb250YWluZXIsIHBvcHVwLCBwYXJhbXMpOyAvLyBzY3JvbGxpbmcgaXMgJ2hpZGRlbicgdW50aWwgYW5pbWF0aW9uIGlzIGRvbmUsIGFmdGVyIHRoYXQgJ2F1dG8nXG5cbiAgc2V0U2Nyb2xsaW5nVmlzaWJpbGl0eShjb250YWluZXIsIHBvcHVwKTtcblxuICBpZiAoaXNNb2RhbCgpKSB7XG4gICAgZml4U2Nyb2xsQ29udGFpbmVyKGNvbnRhaW5lciwgcGFyYW1zLnNjcm9sbGJhclBhZGRpbmcpO1xuICB9XG5cbiAgaWYgKCFpc1RvYXN0KCkgJiYgIWdsb2JhbFN0YXRlLnByZXZpb3VzQWN0aXZlRWxlbWVudCkge1xuICAgIGdsb2JhbFN0YXRlLnByZXZpb3VzQWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gIH1cblxuICBpZiAodHlwZW9mIHBhcmFtcy5vbk9wZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBwYXJhbXMub25PcGVuKHBvcHVwKTtcbiAgICB9KTtcbiAgfVxufTtcblxudmFyIHNldFNjcm9sbGluZ1Zpc2liaWxpdHkgPSBmdW5jdGlvbiBzZXRTY3JvbGxpbmdWaXNpYmlsaXR5KGNvbnRhaW5lciwgcG9wdXApIHtcbiAgaWYgKGFuaW1hdGlvbkVuZEV2ZW50ICYmIGhhc0Nzc0FuaW1hdGlvbihwb3B1cCkpIHtcbiAgICBjb250YWluZXIuc3R5bGUub3ZlcmZsb3dZID0gJ2hpZGRlbic7XG4gICAgcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihhbmltYXRpb25FbmRFdmVudCwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gcG9wdXApIHtcbiAgICAgICAgc3dhbE9wZW5BbmltYXRpb25GaW5pc2hlZC5iaW5kKG51bGwsIHBvcHVwLCBjb250YWluZXIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGNvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7XG4gIH1cbn07XG5cbnZhciBmaXhTY3JvbGxDb250YWluZXIgPSBmdW5jdGlvbiBmaXhTY3JvbGxDb250YWluZXIoY29udGFpbmVyLCBzY3JvbGxiYXJQYWRkaW5nKSB7XG4gIGlPU2ZpeCgpO1xuICBJRWZpeCgpO1xuICBzZXRBcmlhSGlkZGVuKCk7XG5cbiAgaWYgKHNjcm9sbGJhclBhZGRpbmcpIHtcbiAgICBmaXhTY3JvbGxiYXIoKTtcbiAgfSAvLyBzd2VldGFsZXJ0Mi9pc3N1ZXMvMTI0N1xuXG5cbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgY29udGFpbmVyLnNjcm9sbFRvcCA9IDA7XG4gIH0pO1xufTtcblxudmFyIGFkZENsYXNzZXMkMSA9IGZ1bmN0aW9uIGFkZENsYXNzZXMoY29udGFpbmVyLCBwb3B1cCwgcGFyYW1zKSB7XG4gIGFkZENsYXNzKGNvbnRhaW5lciwgcGFyYW1zLnNob3dDbGFzcy5iYWNrZHJvcCk7XG4gIHNob3cocG9wdXApOyAvLyBBbmltYXRlIHBvcHVwIHJpZ2h0IGFmdGVyIHNob3dpbmcgaXRcblxuICBhZGRDbGFzcyhwb3B1cCwgcGFyYW1zLnNob3dDbGFzcy5wb3B1cCk7XG4gIGFkZENsYXNzKFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGRvY3VtZW50LmJvZHldLCBzd2FsQ2xhc3Nlcy5zaG93bik7XG5cbiAgaWYgKHBhcmFtcy5oZWlnaHRBdXRvICYmIHBhcmFtcy5iYWNrZHJvcCAmJiAhcGFyYW1zLnRvYXN0KSB7XG4gICAgYWRkQ2xhc3MoW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgZG9jdW1lbnQuYm9keV0sIHN3YWxDbGFzc2VzWydoZWlnaHQtYXV0byddKTtcbiAgfVxufTtcblxudmFyIGhhbmRsZUlucHV0T3B0aW9uc0FuZFZhbHVlID0gZnVuY3Rpb24gaGFuZGxlSW5wdXRPcHRpb25zQW5kVmFsdWUoaW5zdGFuY2UsIHBhcmFtcykge1xuICBpZiAocGFyYW1zLmlucHV0ID09PSAnc2VsZWN0JyB8fCBwYXJhbXMuaW5wdXQgPT09ICdyYWRpbycpIHtcbiAgICBoYW5kbGVJbnB1dE9wdGlvbnMoaW5zdGFuY2UsIHBhcmFtcyk7XG4gIH0gZWxzZSBpZiAoWyd0ZXh0JywgJ2VtYWlsJywgJ251bWJlcicsICd0ZWwnLCAndGV4dGFyZWEnXS5pbmRleE9mKHBhcmFtcy5pbnB1dCkgIT09IC0xICYmIGlzUHJvbWlzZShwYXJhbXMuaW5wdXRWYWx1ZSkpIHtcbiAgICBoYW5kbGVJbnB1dFZhbHVlKGluc3RhbmNlLCBwYXJhbXMpO1xuICB9XG59O1xudmFyIGdldElucHV0VmFsdWUgPSBmdW5jdGlvbiBnZXRJbnB1dFZhbHVlKGluc3RhbmNlLCBpbm5lclBhcmFtcykge1xuICB2YXIgaW5wdXQgPSBpbnN0YW5jZS5nZXRJbnB1dCgpO1xuXG4gIGlmICghaW5wdXQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHN3aXRjaCAoaW5uZXJQYXJhbXMuaW5wdXQpIHtcbiAgICBjYXNlICdjaGVja2JveCc6XG4gICAgICByZXR1cm4gZ2V0Q2hlY2tib3hWYWx1ZShpbnB1dCk7XG5cbiAgICBjYXNlICdyYWRpbyc6XG4gICAgICByZXR1cm4gZ2V0UmFkaW9WYWx1ZShpbnB1dCk7XG5cbiAgICBjYXNlICdmaWxlJzpcbiAgICAgIHJldHVybiBnZXRGaWxlVmFsdWUoaW5wdXQpO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBpbm5lclBhcmFtcy5pbnB1dEF1dG9UcmltID8gaW5wdXQudmFsdWUudHJpbSgpIDogaW5wdXQudmFsdWU7XG4gIH1cbn07XG5cbnZhciBnZXRDaGVja2JveFZhbHVlID0gZnVuY3Rpb24gZ2V0Q2hlY2tib3hWYWx1ZShpbnB1dCkge1xuICByZXR1cm4gaW5wdXQuY2hlY2tlZCA/IDEgOiAwO1xufTtcblxudmFyIGdldFJhZGlvVmFsdWUgPSBmdW5jdGlvbiBnZXRSYWRpb1ZhbHVlKGlucHV0KSB7XG4gIHJldHVybiBpbnB1dC5jaGVja2VkID8gaW5wdXQudmFsdWUgOiBudWxsO1xufTtcblxudmFyIGdldEZpbGVWYWx1ZSA9IGZ1bmN0aW9uIGdldEZpbGVWYWx1ZShpbnB1dCkge1xuICByZXR1cm4gaW5wdXQuZmlsZXMubGVuZ3RoID8gaW5wdXQuZ2V0QXR0cmlidXRlKCdtdWx0aXBsZScpICE9PSBudWxsID8gaW5wdXQuZmlsZXMgOiBpbnB1dC5maWxlc1swXSA6IG51bGw7XG59O1xuXG52YXIgaGFuZGxlSW5wdXRPcHRpb25zID0gZnVuY3Rpb24gaGFuZGxlSW5wdXRPcHRpb25zKGluc3RhbmNlLCBwYXJhbXMpIHtcbiAgdmFyIGNvbnRlbnQgPSBnZXRDb250ZW50KCk7XG5cbiAgdmFyIHByb2Nlc3NJbnB1dE9wdGlvbnMgPSBmdW5jdGlvbiBwcm9jZXNzSW5wdXRPcHRpb25zKGlucHV0T3B0aW9ucykge1xuICAgIHJldHVybiBwb3B1bGF0ZUlucHV0T3B0aW9uc1twYXJhbXMuaW5wdXRdKGNvbnRlbnQsIGZvcm1hdElucHV0T3B0aW9ucyhpbnB1dE9wdGlvbnMpLCBwYXJhbXMpO1xuICB9O1xuXG4gIGlmIChpc1Byb21pc2UocGFyYW1zLmlucHV0T3B0aW9ucykpIHtcbiAgICBzaG93TG9hZGluZygpO1xuICAgIHBhcmFtcy5pbnB1dE9wdGlvbnMudGhlbihmdW5jdGlvbiAoaW5wdXRPcHRpb25zKSB7XG4gICAgICBpbnN0YW5jZS5oaWRlTG9hZGluZygpO1xuICAgICAgcHJvY2Vzc0lucHV0T3B0aW9ucyhpbnB1dE9wdGlvbnMpO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKF90eXBlb2YocGFyYW1zLmlucHV0T3B0aW9ucykgPT09ICdvYmplY3QnKSB7XG4gICAgcHJvY2Vzc0lucHV0T3B0aW9ucyhwYXJhbXMuaW5wdXRPcHRpb25zKTtcbiAgfSBlbHNlIHtcbiAgICBlcnJvcihcIlVuZXhwZWN0ZWQgdHlwZSBvZiBpbnB1dE9wdGlvbnMhIEV4cGVjdGVkIG9iamVjdCwgTWFwIG9yIFByb21pc2UsIGdvdCBcIi5jb25jYXQoX3R5cGVvZihwYXJhbXMuaW5wdXRPcHRpb25zKSkpO1xuICB9XG59O1xuXG52YXIgaGFuZGxlSW5wdXRWYWx1ZSA9IGZ1bmN0aW9uIGhhbmRsZUlucHV0VmFsdWUoaW5zdGFuY2UsIHBhcmFtcykge1xuICB2YXIgaW5wdXQgPSBpbnN0YW5jZS5nZXRJbnB1dCgpO1xuICBoaWRlKGlucHV0KTtcbiAgcGFyYW1zLmlucHV0VmFsdWUudGhlbihmdW5jdGlvbiAoaW5wdXRWYWx1ZSkge1xuICAgIGlucHV0LnZhbHVlID0gcGFyYW1zLmlucHV0ID09PSAnbnVtYmVyJyA/IHBhcnNlRmxvYXQoaW5wdXRWYWx1ZSkgfHwgMCA6IFwiXCIuY29uY2F0KGlucHV0VmFsdWUpO1xuICAgIHNob3coaW5wdXQpO1xuICAgIGlucHV0LmZvY3VzKCk7XG4gICAgaW5zdGFuY2UuaGlkZUxvYWRpbmcoKTtcbiAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbiAoZXJyKSB7XG4gICAgZXJyb3IoXCJFcnJvciBpbiBpbnB1dFZhbHVlIHByb21pc2U6IFwiLmNvbmNhdChlcnIpKTtcbiAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICAgIHNob3coaW5wdXQpO1xuICAgIGlucHV0LmZvY3VzKCk7XG4gICAgaW5zdGFuY2UuaGlkZUxvYWRpbmcoKTtcbiAgfSk7XG59O1xuXG52YXIgcG9wdWxhdGVJbnB1dE9wdGlvbnMgPSB7XG4gIHNlbGVjdDogZnVuY3Rpb24gc2VsZWN0KGNvbnRlbnQsIGlucHV0T3B0aW9ucywgcGFyYW1zKSB7XG4gICAgdmFyIHNlbGVjdCA9IGdldENoaWxkQnlDbGFzcyhjb250ZW50LCBzd2FsQ2xhc3Nlcy5zZWxlY3QpO1xuICAgIGlucHV0T3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dE9wdGlvbikge1xuICAgICAgdmFyIG9wdGlvblZhbHVlID0gaW5wdXRPcHRpb25bMF07XG4gICAgICB2YXIgb3B0aW9uTGFiZWwgPSBpbnB1dE9wdGlvblsxXTtcbiAgICAgIHZhciBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgIG9wdGlvbi52YWx1ZSA9IG9wdGlvblZhbHVlO1xuICAgICAgb3B0aW9uLmlubmVySFRNTCA9IG9wdGlvbkxhYmVsO1xuXG4gICAgICBpZiAocGFyYW1zLmlucHV0VmFsdWUudG9TdHJpbmcoKSA9PT0gb3B0aW9uVmFsdWUudG9TdHJpbmcoKSkge1xuICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICB9KTtcbiAgICBzZWxlY3QuZm9jdXMoKTtcbiAgfSxcbiAgcmFkaW86IGZ1bmN0aW9uIHJhZGlvKGNvbnRlbnQsIGlucHV0T3B0aW9ucywgcGFyYW1zKSB7XG4gICAgdmFyIHJhZGlvID0gZ2V0Q2hpbGRCeUNsYXNzKGNvbnRlbnQsIHN3YWxDbGFzc2VzLnJhZGlvKTtcbiAgICBpbnB1dE9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXRPcHRpb24pIHtcbiAgICAgIHZhciByYWRpb1ZhbHVlID0gaW5wdXRPcHRpb25bMF07XG4gICAgICB2YXIgcmFkaW9MYWJlbCA9IGlucHV0T3B0aW9uWzFdO1xuICAgICAgdmFyIHJhZGlvSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgdmFyIHJhZGlvTGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgIHJhZGlvSW5wdXQudHlwZSA9ICdyYWRpbyc7XG4gICAgICByYWRpb0lucHV0Lm5hbWUgPSBzd2FsQ2xhc3Nlcy5yYWRpbztcbiAgICAgIHJhZGlvSW5wdXQudmFsdWUgPSByYWRpb1ZhbHVlO1xuXG4gICAgICBpZiAocGFyYW1zLmlucHV0VmFsdWUudG9TdHJpbmcoKSA9PT0gcmFkaW9WYWx1ZS50b1N0cmluZygpKSB7XG4gICAgICAgIHJhZGlvSW5wdXQuY2hlY2tlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIGxhYmVsLmlubmVySFRNTCA9IHJhZGlvTGFiZWw7XG4gICAgICBsYWJlbC5jbGFzc05hbWUgPSBzd2FsQ2xhc3Nlcy5sYWJlbDtcbiAgICAgIHJhZGlvTGFiZWxFbGVtZW50LmFwcGVuZENoaWxkKHJhZGlvSW5wdXQpO1xuICAgICAgcmFkaW9MYWJlbEVsZW1lbnQuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgcmFkaW8uYXBwZW5kQ2hpbGQocmFkaW9MYWJlbEVsZW1lbnQpO1xuICAgIH0pO1xuICAgIHZhciByYWRpb3MgPSByYWRpby5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpO1xuXG4gICAgaWYgKHJhZGlvcy5sZW5ndGgpIHtcbiAgICAgIHJhZGlvc1swXS5mb2N1cygpO1xuICAgIH1cbiAgfVxufTtcbi8qKlxuICogQ29udmVydHMgYGlucHV0T3B0aW9uc2AgaW50byBhbiBhcnJheSBvZiBgW3ZhbHVlLCBsYWJlbF1gc1xuICogQHBhcmFtIGlucHV0T3B0aW9uc1xuICovXG5cbnZhciBmb3JtYXRJbnB1dE9wdGlvbnMgPSBmdW5jdGlvbiBmb3JtYXRJbnB1dE9wdGlvbnMoaW5wdXRPcHRpb25zKSB7XG4gIHZhciByZXN1bHQgPSBbXTtcblxuICBpZiAodHlwZW9mIE1hcCAhPT0gJ3VuZGVmaW5lZCcgJiYgaW5wdXRPcHRpb25zIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgaW5wdXRPcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKFtrZXksIHZhbHVlXSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgT2JqZWN0LmtleXMoaW5wdXRPcHRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKFtrZXksIGlucHV0T3B0aW9uc1trZXldXSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxudmFyIGhhbmRsZUNvbmZpcm1CdXR0b25DbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNvbmZpcm1CdXR0b25DbGljayhpbnN0YW5jZSwgaW5uZXJQYXJhbXMpIHtcbiAgaW5zdGFuY2UuZGlzYWJsZUJ1dHRvbnMoKTtcblxuICBpZiAoaW5uZXJQYXJhbXMuaW5wdXQpIHtcbiAgICBoYW5kbGVDb25maXJtV2l0aElucHV0KGluc3RhbmNlLCBpbm5lclBhcmFtcyk7XG4gIH0gZWxzZSB7XG4gICAgY29uZmlybShpbnN0YW5jZSwgaW5uZXJQYXJhbXMsIHRydWUpO1xuICB9XG59O1xudmFyIGhhbmRsZUNhbmNlbEJ1dHRvbkNsaWNrID0gZnVuY3Rpb24gaGFuZGxlQ2FuY2VsQnV0dG9uQ2xpY2soaW5zdGFuY2UsIGRpc21pc3NXaXRoKSB7XG4gIGluc3RhbmNlLmRpc2FibGVCdXR0b25zKCk7XG4gIGRpc21pc3NXaXRoKERpc21pc3NSZWFzb24uY2FuY2VsKTtcbn07XG5cbnZhciBoYW5kbGVDb25maXJtV2l0aElucHV0ID0gZnVuY3Rpb24gaGFuZGxlQ29uZmlybVdpdGhJbnB1dChpbnN0YW5jZSwgaW5uZXJQYXJhbXMpIHtcbiAgdmFyIGlucHV0VmFsdWUgPSBnZXRJbnB1dFZhbHVlKGluc3RhbmNlLCBpbm5lclBhcmFtcyk7XG5cbiAgaWYgKGlubmVyUGFyYW1zLmlucHV0VmFsaWRhdG9yKSB7XG4gICAgaW5zdGFuY2UuZGlzYWJsZUlucHV0KCk7XG4gICAgdmFyIHZhbGlkYXRpb25Qcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gaW5uZXJQYXJhbXMuaW5wdXRWYWxpZGF0b3IoaW5wdXRWYWx1ZSwgaW5uZXJQYXJhbXMudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0pO1xuICAgIHZhbGlkYXRpb25Qcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbGlkYXRpb25NZXNzYWdlKSB7XG4gICAgICBpbnN0YW5jZS5lbmFibGVCdXR0b25zKCk7XG4gICAgICBpbnN0YW5jZS5lbmFibGVJbnB1dCgpO1xuXG4gICAgICBpZiAodmFsaWRhdGlvbk1lc3NhZ2UpIHtcbiAgICAgICAgaW5zdGFuY2Uuc2hvd1ZhbGlkYXRpb25NZXNzYWdlKHZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbmZpcm0oaW5zdGFuY2UsIGlubmVyUGFyYW1zLCBpbnB1dFZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIGlmICghaW5zdGFuY2UuZ2V0SW5wdXQoKS5jaGVja1ZhbGlkaXR5KCkpIHtcbiAgICBpbnN0YW5jZS5lbmFibGVCdXR0b25zKCk7XG4gICAgaW5zdGFuY2Uuc2hvd1ZhbGlkYXRpb25NZXNzYWdlKGlubmVyUGFyYW1zLnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgfSBlbHNlIHtcbiAgICBjb25maXJtKGluc3RhbmNlLCBpbm5lclBhcmFtcywgaW5wdXRWYWx1ZSk7XG4gIH1cbn07XG5cbnZhciBzdWNjZWVkV2l0aCA9IGZ1bmN0aW9uIHN1Y2NlZWRXaXRoKGluc3RhbmNlLCB2YWx1ZSkge1xuICBpbnN0YW5jZS5jbG9zZVBvcHVwKHtcbiAgICB2YWx1ZTogdmFsdWVcbiAgfSk7XG59O1xuXG52YXIgY29uZmlybSA9IGZ1bmN0aW9uIGNvbmZpcm0oaW5zdGFuY2UsIGlubmVyUGFyYW1zLCB2YWx1ZSkge1xuICBpZiAoaW5uZXJQYXJhbXMuc2hvd0xvYWRlck9uQ29uZmlybSkge1xuICAgIHNob3dMb2FkaW5nKCk7IC8vIFRPRE86IG1ha2Ugc2hvd0xvYWRpbmcgYW4gKmluc3RhbmNlKiBtZXRob2RcbiAgfVxuXG4gIGlmIChpbm5lclBhcmFtcy5wcmVDb25maXJtKSB7XG4gICAgaW5zdGFuY2UucmVzZXRWYWxpZGF0aW9uTWVzc2FnZSgpO1xuICAgIHZhciBwcmVDb25maXJtUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGlubmVyUGFyYW1zLnByZUNvbmZpcm0odmFsdWUsIGlubmVyUGFyYW1zLnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9KTtcbiAgICBwcmVDb25maXJtUHJvbWlzZS50aGVuKGZ1bmN0aW9uIChwcmVDb25maXJtVmFsdWUpIHtcbiAgICAgIGlmIChpc1Zpc2libGUoZ2V0VmFsaWRhdGlvbk1lc3NhZ2UoKSkgfHwgcHJlQ29uZmlybVZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICBpbnN0YW5jZS5oaWRlTG9hZGluZygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3VjY2VlZFdpdGgoaW5zdGFuY2UsIHR5cGVvZiBwcmVDb25maXJtVmFsdWUgPT09ICd1bmRlZmluZWQnID8gdmFsdWUgOiBwcmVDb25maXJtVmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHN1Y2NlZWRXaXRoKGluc3RhbmNlLCB2YWx1ZSk7XG4gIH1cbn07XG5cbnZhciBhZGRLZXlkb3duSGFuZGxlciA9IGZ1bmN0aW9uIGFkZEtleWRvd25IYW5kbGVyKGluc3RhbmNlLCBnbG9iYWxTdGF0ZSwgaW5uZXJQYXJhbXMsIGRpc21pc3NXaXRoKSB7XG4gIGlmIChnbG9iYWxTdGF0ZS5rZXlkb3duVGFyZ2V0ICYmIGdsb2JhbFN0YXRlLmtleWRvd25IYW5kbGVyQWRkZWQpIHtcbiAgICBnbG9iYWxTdGF0ZS5rZXlkb3duVGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBnbG9iYWxTdGF0ZS5rZXlkb3duSGFuZGxlciwge1xuICAgICAgY2FwdHVyZTogZ2xvYmFsU3RhdGUua2V5ZG93bkxpc3RlbmVyQ2FwdHVyZVxuICAgIH0pO1xuICAgIGdsb2JhbFN0YXRlLmtleWRvd25IYW5kbGVyQWRkZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGlmICghaW5uZXJQYXJhbXMudG9hc3QpIHtcbiAgICBnbG9iYWxTdGF0ZS5rZXlkb3duSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4ga2V5ZG93bkhhbmRsZXIoaW5zdGFuY2UsIGUsIGlubmVyUGFyYW1zLCBkaXNtaXNzV2l0aCk7XG4gICAgfTtcblxuICAgIGdsb2JhbFN0YXRlLmtleWRvd25UYXJnZXQgPSBpbm5lclBhcmFtcy5rZXlkb3duTGlzdGVuZXJDYXB0dXJlID8gd2luZG93IDogZ2V0UG9wdXAoKTtcbiAgICBnbG9iYWxTdGF0ZS5rZXlkb3duTGlzdGVuZXJDYXB0dXJlID0gaW5uZXJQYXJhbXMua2V5ZG93bkxpc3RlbmVyQ2FwdHVyZTtcbiAgICBnbG9iYWxTdGF0ZS5rZXlkb3duVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBnbG9iYWxTdGF0ZS5rZXlkb3duSGFuZGxlciwge1xuICAgICAgY2FwdHVyZTogZ2xvYmFsU3RhdGUua2V5ZG93bkxpc3RlbmVyQ2FwdHVyZVxuICAgIH0pO1xuICAgIGdsb2JhbFN0YXRlLmtleWRvd25IYW5kbGVyQWRkZWQgPSB0cnVlO1xuICB9XG59OyAvLyBGb2N1cyBoYW5kbGluZ1xuXG52YXIgc2V0Rm9jdXMgPSBmdW5jdGlvbiBzZXRGb2N1cyhpbm5lclBhcmFtcywgaW5kZXgsIGluY3JlbWVudCkge1xuICB2YXIgZm9jdXNhYmxlRWxlbWVudHMgPSBnZXRGb2N1c2FibGVFbGVtZW50cygpOyAvLyBzZWFyY2ggZm9yIHZpc2libGUgZWxlbWVudHMgYW5kIHNlbGVjdCB0aGUgbmV4dCBwb3NzaWJsZSBtYXRjaFxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZm9jdXNhYmxlRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBpbmRleCA9IGluZGV4ICsgaW5jcmVtZW50OyAvLyByb2xsb3ZlciB0byBmaXJzdCBpdGVtXG5cbiAgICBpZiAoaW5kZXggPT09IGZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgaW5kZXggPSAwOyAvLyBnbyB0byBsYXN0IGl0ZW1cbiAgICB9IGVsc2UgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgaW5kZXggPSBmb2N1c2FibGVFbGVtZW50cy5sZW5ndGggLSAxO1xuICAgIH1cblxuICAgIHJldHVybiBmb2N1c2FibGVFbGVtZW50c1tpbmRleF0uZm9jdXMoKTtcbiAgfSAvLyBubyB2aXNpYmxlIGZvY3VzYWJsZSBlbGVtZW50cywgZm9jdXMgdGhlIHBvcHVwXG5cblxuICBnZXRQb3B1cCgpLmZvY3VzKCk7XG59O1xudmFyIGFycm93S2V5cyA9IFsnQXJyb3dMZWZ0JywgJ0Fycm93UmlnaHQnLCAnQXJyb3dVcCcsICdBcnJvd0Rvd24nLCAnTGVmdCcsICdSaWdodCcsICdVcCcsICdEb3duJyAvLyBJRTExXG5dO1xudmFyIGVzY0tleXMgPSBbJ0VzY2FwZScsICdFc2MnIC8vIElFMTFcbl07XG5cbnZhciBrZXlkb3duSGFuZGxlciA9IGZ1bmN0aW9uIGtleWRvd25IYW5kbGVyKGluc3RhbmNlLCBlLCBpbm5lclBhcmFtcywgZGlzbWlzc1dpdGgpIHtcbiAgaWYgKGlubmVyUGFyYW1zLnN0b3BLZXlkb3duUHJvcGFnYXRpb24pIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICB9IC8vIEVOVEVSXG5cblxuICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICBoYW5kbGVFbnRlcihpbnN0YW5jZSwgZSwgaW5uZXJQYXJhbXMpOyAvLyBUQUJcbiAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ1RhYicpIHtcbiAgICBoYW5kbGVUYWIoZSwgaW5uZXJQYXJhbXMpOyAvLyBBUlJPV1MgLSBzd2l0Y2ggZm9jdXMgYmV0d2VlbiBidXR0b25zXG4gIH0gZWxzZSBpZiAoYXJyb3dLZXlzLmluZGV4T2YoZS5rZXkpICE9PSAtMSkge1xuICAgIGhhbmRsZUFycm93cygpOyAvLyBFU0NcbiAgfSBlbHNlIGlmIChlc2NLZXlzLmluZGV4T2YoZS5rZXkpICE9PSAtMSkge1xuICAgIGhhbmRsZUVzYyhlLCBpbm5lclBhcmFtcywgZGlzbWlzc1dpdGgpO1xuICB9XG59O1xuXG52YXIgaGFuZGxlRW50ZXIgPSBmdW5jdGlvbiBoYW5kbGVFbnRlcihpbnN0YW5jZSwgZSwgaW5uZXJQYXJhbXMpIHtcbiAgLy8gIzcyMCAjNzIxXG4gIGlmIChlLmlzQ29tcG9zaW5nKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGUudGFyZ2V0ICYmIGluc3RhbmNlLmdldElucHV0KCkgJiYgZS50YXJnZXQub3V0ZXJIVE1MID09PSBpbnN0YW5jZS5nZXRJbnB1dCgpLm91dGVySFRNTCkge1xuICAgIGlmIChbJ3RleHRhcmVhJywgJ2ZpbGUnXS5pbmRleE9mKGlubmVyUGFyYW1zLmlucHV0KSAhPT0gLTEpIHtcbiAgICAgIHJldHVybjsgLy8gZG8gbm90IHN1Ym1pdFxuICAgIH1cblxuICAgIGNsaWNrQ29uZmlybSgpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfVxufTtcblxudmFyIGhhbmRsZVRhYiA9IGZ1bmN0aW9uIGhhbmRsZVRhYihlLCBpbm5lclBhcmFtcykge1xuICB2YXIgdGFyZ2V0RWxlbWVudCA9IGUudGFyZ2V0O1xuICB2YXIgZm9jdXNhYmxlRWxlbWVudHMgPSBnZXRGb2N1c2FibGVFbGVtZW50cygpO1xuICB2YXIgYnRuSW5kZXggPSAtMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHRhcmdldEVsZW1lbnQgPT09IGZvY3VzYWJsZUVsZW1lbnRzW2ldKSB7XG4gICAgICBidG5JbmRleCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoIWUuc2hpZnRLZXkpIHtcbiAgICAvLyBDeWNsZSB0byB0aGUgbmV4dCBidXR0b25cbiAgICBzZXRGb2N1cyhpbm5lclBhcmFtcywgYnRuSW5kZXgsIDEpO1xuICB9IGVsc2Uge1xuICAgIC8vIEN5Y2xlIHRvIHRoZSBwcmV2IGJ1dHRvblxuICAgIHNldEZvY3VzKGlubmVyUGFyYW1zLCBidG5JbmRleCwgLTEpO1xuICB9XG5cbiAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xufTtcblxudmFyIGhhbmRsZUFycm93cyA9IGZ1bmN0aW9uIGhhbmRsZUFycm93cygpIHtcbiAgdmFyIGNvbmZpcm1CdXR0b24gPSBnZXRDb25maXJtQnV0dG9uKCk7XG4gIHZhciBjYW5jZWxCdXR0b24gPSBnZXRDYW5jZWxCdXR0b24oKTsgLy8gZm9jdXMgQ2FuY2VsIGJ1dHRvbiBpZiBDb25maXJtIGJ1dHRvbiBpcyBjdXJyZW50bHkgZm9jdXNlZFxuXG4gIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBjb25maXJtQnV0dG9uICYmIGlzVmlzaWJsZShjYW5jZWxCdXR0b24pKSB7XG4gICAgY2FuY2VsQnV0dG9uLmZvY3VzKCk7IC8vIGFuZCB2aWNlIHZlcnNhXG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gY2FuY2VsQnV0dG9uICYmIGlzVmlzaWJsZShjb25maXJtQnV0dG9uKSkge1xuICAgIGNvbmZpcm1CdXR0b24uZm9jdXMoKTtcbiAgfVxufTtcblxudmFyIGhhbmRsZUVzYyA9IGZ1bmN0aW9uIGhhbmRsZUVzYyhlLCBpbm5lclBhcmFtcywgZGlzbWlzc1dpdGgpIHtcbiAgaWYgKGNhbGxJZkZ1bmN0aW9uKGlubmVyUGFyYW1zLmFsbG93RXNjYXBlS2V5KSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBkaXNtaXNzV2l0aChEaXNtaXNzUmVhc29uLmVzYyk7XG4gIH1cbn07XG5cbnZhciBoYW5kbGVQb3B1cENsaWNrID0gZnVuY3Rpb24gaGFuZGxlUG9wdXBDbGljayhkb21DYWNoZSwgaW5uZXJQYXJhbXMsIGRpc21pc3NXaXRoKSB7XG4gIGlmIChpbm5lclBhcmFtcy50b2FzdCkge1xuICAgIGhhbmRsZVRvYXN0Q2xpY2soZG9tQ2FjaGUsIGlubmVyUGFyYW1zLCBkaXNtaXNzV2l0aCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gSWdub3JlIGNsaWNrIGV2ZW50cyB0aGF0IGhhZCBtb3VzZWRvd24gb24gdGhlIHBvcHVwIGJ1dCBtb3VzZXVwIG9uIHRoZSBjb250YWluZXJcbiAgICAvLyBUaGlzIGNhbiBoYXBwZW4gd2hlbiB0aGUgdXNlciBkcmFncyBhIHNsaWRlclxuICAgIGhhbmRsZU1vZGFsTW91c2Vkb3duKGRvbUNhY2hlKTsgLy8gSWdub3JlIGNsaWNrIGV2ZW50cyB0aGF0IGhhZCBtb3VzZWRvd24gb24gdGhlIGNvbnRhaW5lciBidXQgbW91c2V1cCBvbiB0aGUgcG9wdXBcblxuICAgIGhhbmRsZUNvbnRhaW5lck1vdXNlZG93bihkb21DYWNoZSk7XG4gICAgaGFuZGxlTW9kYWxDbGljayhkb21DYWNoZSwgaW5uZXJQYXJhbXMsIGRpc21pc3NXaXRoKTtcbiAgfVxufTtcblxudmFyIGhhbmRsZVRvYXN0Q2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVUb2FzdENsaWNrKGRvbUNhY2hlLCBpbm5lclBhcmFtcywgZGlzbWlzc1dpdGgpIHtcbiAgLy8gQ2xvc2luZyB0b2FzdCBieSBpbnRlcm5hbCBjbGlja1xuICBkb21DYWNoZS5wb3B1cC5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChpbm5lclBhcmFtcy5zaG93Q29uZmlybUJ1dHRvbiB8fCBpbm5lclBhcmFtcy5zaG93Q2FuY2VsQnV0dG9uIHx8IGlubmVyUGFyYW1zLnNob3dDbG9zZUJ1dHRvbiB8fCBpbm5lclBhcmFtcy5pbnB1dCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRpc21pc3NXaXRoKERpc21pc3NSZWFzb24uY2xvc2UpO1xuICB9O1xufTtcblxudmFyIGlnbm9yZU91dHNpZGVDbGljayA9IGZhbHNlO1xuXG52YXIgaGFuZGxlTW9kYWxNb3VzZWRvd24gPSBmdW5jdGlvbiBoYW5kbGVNb2RhbE1vdXNlZG93bihkb21DYWNoZSkge1xuICBkb21DYWNoZS5wb3B1cC5vbm1vdXNlZG93biA9IGZ1bmN0aW9uICgpIHtcbiAgICBkb21DYWNoZS5jb250YWluZXIub25tb3VzZXVwID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGRvbUNhY2hlLmNvbnRhaW5lci5vbm1vdXNldXAgPSB1bmRlZmluZWQ7IC8vIFdlIG9ubHkgY2hlY2sgaWYgdGhlIG1vdXNldXAgdGFyZ2V0IGlzIHRoZSBjb250YWluZXIgYmVjYXVzZSB1c3VhbGx5IGl0IGRvZXNuJ3RcbiAgICAgIC8vIGhhdmUgYW55IG90aGVyIGRpcmVjdCBjaGlsZHJlbiBhc2lkZSBvZiB0aGUgcG9wdXBcblxuICAgICAgaWYgKGUudGFyZ2V0ID09PSBkb21DYWNoZS5jb250YWluZXIpIHtcbiAgICAgICAgaWdub3JlT3V0c2lkZUNsaWNrID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufTtcblxudmFyIGhhbmRsZUNvbnRhaW5lck1vdXNlZG93biA9IGZ1bmN0aW9uIGhhbmRsZUNvbnRhaW5lck1vdXNlZG93bihkb21DYWNoZSkge1xuICBkb21DYWNoZS5jb250YWluZXIub25tb3VzZWRvd24gPSBmdW5jdGlvbiAoKSB7XG4gICAgZG9tQ2FjaGUucG9wdXAub25tb3VzZXVwID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGRvbUNhY2hlLnBvcHVwLm9ubW91c2V1cCA9IHVuZGVmaW5lZDsgLy8gV2UgYWxzbyBuZWVkIHRvIGNoZWNrIGlmIHRoZSBtb3VzZXVwIHRhcmdldCBpcyBhIGNoaWxkIG9mIHRoZSBwb3B1cFxuXG4gICAgICBpZiAoZS50YXJnZXQgPT09IGRvbUNhY2hlLnBvcHVwIHx8IGRvbUNhY2hlLnBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0KSkge1xuICAgICAgICBpZ25vcmVPdXRzaWRlQ2xpY2sgPSB0cnVlO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59O1xuXG52YXIgaGFuZGxlTW9kYWxDbGljayA9IGZ1bmN0aW9uIGhhbmRsZU1vZGFsQ2xpY2soZG9tQ2FjaGUsIGlubmVyUGFyYW1zLCBkaXNtaXNzV2l0aCkge1xuICBkb21DYWNoZS5jb250YWluZXIub25jbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGlnbm9yZU91dHNpZGVDbGljaykge1xuICAgICAgaWdub3JlT3V0c2lkZUNsaWNrID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGUudGFyZ2V0ID09PSBkb21DYWNoZS5jb250YWluZXIgJiYgY2FsbElmRnVuY3Rpb24oaW5uZXJQYXJhbXMuYWxsb3dPdXRzaWRlQ2xpY2spKSB7XG4gICAgICBkaXNtaXNzV2l0aChEaXNtaXNzUmVhc29uLmJhY2tkcm9wKTtcbiAgICB9XG4gIH07XG59O1xuXG5mdW5jdGlvbiBfbWFpbih1c2VyUGFyYW1zKSB7XG4gIHNob3dXYXJuaW5nc0ZvclBhcmFtcyh1c2VyUGFyYW1zKTsgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYW5vdGhlciBTd2FsIGNsb3NpbmdcblxuICBpZiAoZ2V0UG9wdXAoKSAmJiBnbG9iYWxTdGF0ZS5zd2FsQ2xvc2VFdmVudEZpbmlzaGVkQ2FsbGJhY2spIHtcbiAgICBnbG9iYWxTdGF0ZS5zd2FsQ2xvc2VFdmVudEZpbmlzaGVkQ2FsbGJhY2soKTtcbiAgICBkZWxldGUgZ2xvYmFsU3RhdGUuc3dhbENsb3NlRXZlbnRGaW5pc2hlZENhbGxiYWNrO1xuICB9IC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgc3dhbCBkaXNwb3NhbCBkZWZlciB0aW1lclxuXG5cbiAgaWYgKGdsb2JhbFN0YXRlLmRlZmVyRGlzcG9zYWxUaW1lcikge1xuICAgIGNsZWFyVGltZW91dChnbG9iYWxTdGF0ZS5kZWZlckRpc3Bvc2FsVGltZXIpO1xuICAgIGRlbGV0ZSBnbG9iYWxTdGF0ZS5kZWZlckRpc3Bvc2FsVGltZXI7XG4gIH1cblxuICB2YXIgaW5uZXJQYXJhbXMgPSBwcmVwYXJlUGFyYW1zKHVzZXJQYXJhbXMpO1xuICBzZXRQYXJhbWV0ZXJzKGlubmVyUGFyYW1zKTtcbiAgT2JqZWN0LmZyZWV6ZShpbm5lclBhcmFtcyk7IC8vIGNsZWFyIHRoZSBwcmV2aW91cyB0aW1lclxuXG4gIGlmIChnbG9iYWxTdGF0ZS50aW1lb3V0KSB7XG4gICAgZ2xvYmFsU3RhdGUudGltZW91dC5zdG9wKCk7XG4gICAgZGVsZXRlIGdsb2JhbFN0YXRlLnRpbWVvdXQ7XG4gIH0gLy8gY2xlYXIgdGhlIHJlc3RvcmUgZm9jdXMgdGltZW91dFxuXG5cbiAgY2xlYXJUaW1lb3V0KGdsb2JhbFN0YXRlLnJlc3RvcmVGb2N1c1RpbWVvdXQpO1xuICB2YXIgZG9tQ2FjaGUgPSBwb3B1bGF0ZURvbUNhY2hlKHRoaXMpO1xuICByZW5kZXIodGhpcywgaW5uZXJQYXJhbXMpO1xuICBwcml2YXRlUHJvcHMuaW5uZXJQYXJhbXMuc2V0KHRoaXMsIGlubmVyUGFyYW1zKTtcbiAgcmV0dXJuIHN3YWxQcm9taXNlKHRoaXMsIGRvbUNhY2hlLCBpbm5lclBhcmFtcyk7XG59XG5cbnZhciBwcmVwYXJlUGFyYW1zID0gZnVuY3Rpb24gcHJlcGFyZVBhcmFtcyh1c2VyUGFyYW1zKSB7XG4gIHZhciBzaG93Q2xhc3MgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdFBhcmFtcy5zaG93Q2xhc3MsIHVzZXJQYXJhbXMuc2hvd0NsYXNzKTtcblxuICB2YXIgaGlkZUNsYXNzID0gX2V4dGVuZHMoe30sIGRlZmF1bHRQYXJhbXMuaGlkZUNsYXNzLCB1c2VyUGFyYW1zLmhpZGVDbGFzcyk7XG5cbiAgdmFyIHBhcmFtcyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0UGFyYW1zLCB1c2VyUGFyYW1zKTtcblxuICBwYXJhbXMuc2hvd0NsYXNzID0gc2hvd0NsYXNzO1xuICBwYXJhbXMuaGlkZUNsYXNzID0gaGlkZUNsYXNzOyAvLyBAZGVwcmVjYXRlZFxuXG4gIGlmICh1c2VyUGFyYW1zLmFuaW1hdGlvbiA9PT0gZmFsc2UpIHtcbiAgICBwYXJhbXMuc2hvd0NsYXNzID0ge1xuICAgICAgcG9wdXA6ICcnLFxuICAgICAgYmFja2Ryb3A6ICdzd2FsMi1iYWNrZHJvcC1zaG93IHN3YWwyLW5vYW5pbWF0aW9uJ1xuICAgIH07XG4gICAgcGFyYW1zLmhpZGVDbGFzcyA9IHt9O1xuICB9XG5cbiAgcmV0dXJuIHBhcmFtcztcbn07XG5cbnZhciBzd2FsUHJvbWlzZSA9IGZ1bmN0aW9uIHN3YWxQcm9taXNlKGluc3RhbmNlLCBkb21DYWNoZSwgaW5uZXJQYXJhbXMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgLy8gZnVuY3Rpb25zIHRvIGhhbmRsZSBhbGwgY2xvc2luZ3MvZGlzbWlzc2Fsc1xuICAgIHZhciBkaXNtaXNzV2l0aCA9IGZ1bmN0aW9uIGRpc21pc3NXaXRoKGRpc21pc3MpIHtcbiAgICAgIGluc3RhbmNlLmNsb3NlUG9wdXAoe1xuICAgICAgICBkaXNtaXNzOiBkaXNtaXNzXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZU1ldGhvZHMuc3dhbFByb21pc2VSZXNvbHZlLnNldChpbnN0YW5jZSwgcmVzb2x2ZSk7XG4gICAgc2V0dXBUaW1lcihnbG9iYWxTdGF0ZSwgaW5uZXJQYXJhbXMsIGRpc21pc3NXaXRoKTtcblxuICAgIGRvbUNhY2hlLmNvbmZpcm1CdXR0b24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBoYW5kbGVDb25maXJtQnV0dG9uQ2xpY2soaW5zdGFuY2UsIGlubmVyUGFyYW1zKTtcbiAgICB9O1xuXG4gICAgZG9tQ2FjaGUuY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gaGFuZGxlQ2FuY2VsQnV0dG9uQ2xpY2soaW5zdGFuY2UsIGRpc21pc3NXaXRoKTtcbiAgICB9O1xuXG4gICAgZG9tQ2FjaGUuY2xvc2VCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBkaXNtaXNzV2l0aChEaXNtaXNzUmVhc29uLmNsb3NlKTtcbiAgICB9O1xuXG4gICAgaGFuZGxlUG9wdXBDbGljayhkb21DYWNoZSwgaW5uZXJQYXJhbXMsIGRpc21pc3NXaXRoKTtcbiAgICBhZGRLZXlkb3duSGFuZGxlcihpbnN0YW5jZSwgZ2xvYmFsU3RhdGUsIGlubmVyUGFyYW1zLCBkaXNtaXNzV2l0aCk7XG5cbiAgICBpZiAoaW5uZXJQYXJhbXMudG9hc3QgJiYgKGlubmVyUGFyYW1zLmlucHV0IHx8IGlubmVyUGFyYW1zLmZvb3RlciB8fCBpbm5lclBhcmFtcy5zaG93Q2xvc2VCdXR0b24pKSB7XG4gICAgICBhZGRDbGFzcyhkb2N1bWVudC5ib2R5LCBzd2FsQ2xhc3Nlc1sndG9hc3QtY29sdW1uJ10pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmVDbGFzcyhkb2N1bWVudC5ib2R5LCBzd2FsQ2xhc3Nlc1sndG9hc3QtY29sdW1uJ10pO1xuICAgIH1cblxuICAgIGhhbmRsZUlucHV0T3B0aW9uc0FuZFZhbHVlKGluc3RhbmNlLCBpbm5lclBhcmFtcyk7XG4gICAgb3BlblBvcHVwKGlubmVyUGFyYW1zKTtcbiAgICBpbml0Rm9jdXMoZG9tQ2FjaGUsIGlubmVyUGFyYW1zKTsgLy8gU2Nyb2xsIGNvbnRhaW5lciB0byB0b3Agb24gb3BlbiAoIzEyNDcpXG5cbiAgICBkb21DYWNoZS5jb250YWluZXIuc2Nyb2xsVG9wID0gMDtcbiAgfSk7XG59O1xuXG52YXIgcG9wdWxhdGVEb21DYWNoZSA9IGZ1bmN0aW9uIHBvcHVsYXRlRG9tQ2FjaGUoaW5zdGFuY2UpIHtcbiAgdmFyIGRvbUNhY2hlID0ge1xuICAgIHBvcHVwOiBnZXRQb3B1cCgpLFxuICAgIGNvbnRhaW5lcjogZ2V0Q29udGFpbmVyKCksXG4gICAgY29udGVudDogZ2V0Q29udGVudCgpLFxuICAgIGFjdGlvbnM6IGdldEFjdGlvbnMoKSxcbiAgICBjb25maXJtQnV0dG9uOiBnZXRDb25maXJtQnV0dG9uKCksXG4gICAgY2FuY2VsQnV0dG9uOiBnZXRDYW5jZWxCdXR0b24oKSxcbiAgICBjbG9zZUJ1dHRvbjogZ2V0Q2xvc2VCdXR0b24oKSxcbiAgICB2YWxpZGF0aW9uTWVzc2FnZTogZ2V0VmFsaWRhdGlvbk1lc3NhZ2UoKSxcbiAgICBwcm9ncmVzc1N0ZXBzOiBnZXRQcm9ncmVzc1N0ZXBzKClcbiAgfTtcbiAgcHJpdmF0ZVByb3BzLmRvbUNhY2hlLnNldChpbnN0YW5jZSwgZG9tQ2FjaGUpO1xuICByZXR1cm4gZG9tQ2FjaGU7XG59O1xuXG52YXIgc2V0dXBUaW1lciA9IGZ1bmN0aW9uIHNldHVwVGltZXIoZ2xvYmFsU3RhdGUkJDEsIGlubmVyUGFyYW1zLCBkaXNtaXNzV2l0aCkge1xuICB2YXIgdGltZXJQcm9ncmVzc0JhciA9IGdldFRpbWVyUHJvZ3Jlc3NCYXIoKTtcbiAgaGlkZSh0aW1lclByb2dyZXNzQmFyKTtcblxuICBpZiAoaW5uZXJQYXJhbXMudGltZXIpIHtcbiAgICBnbG9iYWxTdGF0ZSQkMS50aW1lb3V0ID0gbmV3IFRpbWVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRpc21pc3NXaXRoKCd0aW1lcicpO1xuICAgICAgZGVsZXRlIGdsb2JhbFN0YXRlJCQxLnRpbWVvdXQ7XG4gICAgfSwgaW5uZXJQYXJhbXMudGltZXIpO1xuXG4gICAgaWYgKGlubmVyUGFyYW1zLnRpbWVyUHJvZ3Jlc3NCYXIpIHtcbiAgICAgIHNob3codGltZXJQcm9ncmVzc0Jhcik7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYW5pbWF0ZVRpbWVyUHJvZ3Jlc3NCYXIoaW5uZXJQYXJhbXMudGltZXIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgaW5pdEZvY3VzID0gZnVuY3Rpb24gaW5pdEZvY3VzKGRvbUNhY2hlLCBpbm5lclBhcmFtcykge1xuICBpZiAoaW5uZXJQYXJhbXMudG9hc3QpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIWNhbGxJZkZ1bmN0aW9uKGlubmVyUGFyYW1zLmFsbG93RW50ZXJLZXkpKSB7XG4gICAgcmV0dXJuIGJsdXJBY3RpdmVFbGVtZW50KCk7XG4gIH1cblxuICBpZiAoaW5uZXJQYXJhbXMuZm9jdXNDYW5jZWwgJiYgaXNWaXNpYmxlKGRvbUNhY2hlLmNhbmNlbEJ1dHRvbikpIHtcbiAgICByZXR1cm4gZG9tQ2FjaGUuY2FuY2VsQnV0dG9uLmZvY3VzKCk7XG4gIH1cblxuICBpZiAoaW5uZXJQYXJhbXMuZm9jdXNDb25maXJtICYmIGlzVmlzaWJsZShkb21DYWNoZS5jb25maXJtQnV0dG9uKSkge1xuICAgIHJldHVybiBkb21DYWNoZS5jb25maXJtQnV0dG9uLmZvY3VzKCk7XG4gIH1cblxuICBzZXRGb2N1cyhpbm5lclBhcmFtcywgLTEsIDEpO1xufTtcblxudmFyIGJsdXJBY3RpdmVFbGVtZW50ID0gZnVuY3Rpb24gYmx1ckFjdGl2ZUVsZW1lbnQoKSB7XG4gIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIHR5cGVvZiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBVcGRhdGVzIHBvcHVwIHBhcmFtZXRlcnMuXG4gKi9cblxuZnVuY3Rpb24gdXBkYXRlKHBhcmFtcykge1xuICB2YXIgcG9wdXAgPSBnZXRQb3B1cCgpO1xuICB2YXIgaW5uZXJQYXJhbXMgPSBwcml2YXRlUHJvcHMuaW5uZXJQYXJhbXMuZ2V0KHRoaXMpO1xuXG4gIGlmICghcG9wdXAgfHwgaGFzQ2xhc3MocG9wdXAsIGlubmVyUGFyYW1zLmhpZGVDbGFzcy5wb3B1cCkpIHtcbiAgICByZXR1cm4gd2FybihcIllvdSdyZSB0cnlpbmcgdG8gdXBkYXRlIHRoZSBjbG9zZWQgb3IgY2xvc2luZyBwb3B1cCwgdGhhdCB3b24ndCB3b3JrLiBVc2UgdGhlIHVwZGF0ZSgpIG1ldGhvZCBpbiBwcmVDb25maXJtIHBhcmFtZXRlciBvciBzaG93IGEgbmV3IHBvcHVwLlwiKTtcbiAgfVxuXG4gIHZhciB2YWxpZFVwZGF0YWJsZVBhcmFtcyA9IHt9OyAvLyBhc3NpZ24gdmFsaWQgcGFyYW1zIGZyb20gYHBhcmFtc2AgdG8gYGRlZmF1bHRzYFxuXG4gIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaChmdW5jdGlvbiAocGFyYW0pIHtcbiAgICBpZiAoU3dhbC5pc1VwZGF0YWJsZVBhcmFtZXRlcihwYXJhbSkpIHtcbiAgICAgIHZhbGlkVXBkYXRhYmxlUGFyYW1zW3BhcmFtXSA9IHBhcmFtc1twYXJhbV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHdhcm4oXCJJbnZhbGlkIHBhcmFtZXRlciB0byB1cGRhdGU6IFxcXCJcIi5jb25jYXQocGFyYW0sIFwiXFxcIi4gVXBkYXRhYmxlIHBhcmFtcyBhcmUgbGlzdGVkIGhlcmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9zd2VldGFsZXJ0Mi9zd2VldGFsZXJ0Mi9ibG9iL21hc3Rlci9zcmMvdXRpbHMvcGFyYW1zLmpzXCIpKTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciB1cGRhdGVkUGFyYW1zID0gX2V4dGVuZHMoe30sIGlubmVyUGFyYW1zLCB2YWxpZFVwZGF0YWJsZVBhcmFtcyk7XG5cbiAgcmVuZGVyKHRoaXMsIHVwZGF0ZWRQYXJhbXMpO1xuICBwcml2YXRlUHJvcHMuaW5uZXJQYXJhbXMuc2V0KHRoaXMsIHVwZGF0ZWRQYXJhbXMpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgcGFyYW1zOiB7XG4gICAgICB2YWx1ZTogX2V4dGVuZHMoe30sIHRoaXMucGFyYW1zLCBwYXJhbXMpLFxuICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG59XG5cblxuXG52YXIgaW5zdGFuY2VNZXRob2RzID0gT2JqZWN0LmZyZWV6ZSh7XG5cdGhpZGVMb2FkaW5nOiBoaWRlTG9hZGluZyxcblx0ZGlzYWJsZUxvYWRpbmc6IGhpZGVMb2FkaW5nLFxuXHRnZXRJbnB1dDogZ2V0SW5wdXQkMSxcblx0Y2xvc2U6IGNsb3NlLFxuXHRjbG9zZVBvcHVwOiBjbG9zZSxcblx0Y2xvc2VNb2RhbDogY2xvc2UsXG5cdGNsb3NlVG9hc3Q6IGNsb3NlLFxuXHRlbmFibGVCdXR0b25zOiBlbmFibGVCdXR0b25zLFxuXHRkaXNhYmxlQnV0dG9uczogZGlzYWJsZUJ1dHRvbnMsXG5cdGVuYWJsZUlucHV0OiBlbmFibGVJbnB1dCxcblx0ZGlzYWJsZUlucHV0OiBkaXNhYmxlSW5wdXQsXG5cdHNob3dWYWxpZGF0aW9uTWVzc2FnZTogc2hvd1ZhbGlkYXRpb25NZXNzYWdlLFxuXHRyZXNldFZhbGlkYXRpb25NZXNzYWdlOiByZXNldFZhbGlkYXRpb25NZXNzYWdlJDEsXG5cdGdldFByb2dyZXNzU3RlcHM6IGdldFByb2dyZXNzU3RlcHMkMSxcblx0X21haW46IF9tYWluLFxuXHR1cGRhdGU6IHVwZGF0ZVxufSk7XG5cbnZhciBjdXJyZW50SW5zdGFuY2U7IC8vIFN3ZWV0QWxlcnQgY29uc3RydWN0b3JcblxuZnVuY3Rpb24gU3dlZXRBbGVydCgpIHtcbiAgLy8gUHJldmVudCBydW4gaW4gTm9kZSBlbnZcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuO1xuICB9IC8vIENoZWNrIGZvciB0aGUgZXhpc3RlbmNlIG9mIFByb21pc2VcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblxuXG4gIGlmICh0eXBlb2YgUHJvbWlzZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBlcnJvcignVGhpcyBwYWNrYWdlIHJlcXVpcmVzIGEgUHJvbWlzZSBsaWJyYXJ5LCBwbGVhc2UgaW5jbHVkZSBhIHNoaW0gdG8gZW5hYmxlIGl0IGluIHRoaXMgYnJvd3NlciAoU2VlOiBodHRwczovL2dpdGh1Yi5jb20vc3dlZXRhbGVydDIvc3dlZXRhbGVydDIvd2lraS9NaWdyYXRpb24tZnJvbS1Td2VldEFsZXJ0LXRvLVN3ZWV0QWxlcnQyIzEtaWUtc3VwcG9ydCknKTtcbiAgfVxuXG4gIGN1cnJlbnRJbnN0YW5jZSA9IHRoaXM7XG5cbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHZhciBvdXRlclBhcmFtcyA9IE9iamVjdC5mcmVlemUodGhpcy5jb25zdHJ1Y3Rvci5hcmdzVG9QYXJhbXMoYXJncykpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgcGFyYW1zOiB7XG4gICAgICB2YWx1ZTogb3V0ZXJQYXJhbXMsXG4gICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcblxuICB2YXIgcHJvbWlzZSA9IHRoaXMuX21haW4odGhpcy5wYXJhbXMpO1xuXG4gIHByaXZhdGVQcm9wcy5wcm9taXNlLnNldCh0aGlzLCBwcm9taXNlKTtcbn0gLy8gYGNhdGNoYCBjYW5ub3QgYmUgdGhlIG5hbWUgb2YgYSBtb2R1bGUgZXhwb3J0LCBzbyB3ZSBkZWZpbmUgb3VyIHRoZW5hYmxlIG1ldGhvZHMgaGVyZSBpbnN0ZWFkXG5cblxuU3dlZXRBbGVydC5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChvbkZ1bGZpbGxlZCkge1xuICB2YXIgcHJvbWlzZSA9IHByaXZhdGVQcm9wcy5wcm9taXNlLmdldCh0aGlzKTtcbiAgcmV0dXJuIHByb21pc2UudGhlbihvbkZ1bGZpbGxlZCk7XG59O1xuXG5Td2VldEFsZXJ0LnByb3RvdHlwZVtcImZpbmFsbHlcIl0gPSBmdW5jdGlvbiAob25GaW5hbGx5KSB7XG4gIHZhciBwcm9taXNlID0gcHJpdmF0ZVByb3BzLnByb21pc2UuZ2V0KHRoaXMpO1xuICByZXR1cm4gcHJvbWlzZVtcImZpbmFsbHlcIl0ob25GaW5hbGx5KTtcbn07IC8vIEFzc2lnbiBpbnN0YW5jZSBtZXRob2RzIGZyb20gc3JjL2luc3RhbmNlTWV0aG9kcy8qLmpzIHRvIHByb3RvdHlwZVxuXG5cbl9leHRlbmRzKFN3ZWV0QWxlcnQucHJvdG90eXBlLCBpbnN0YW5jZU1ldGhvZHMpOyAvLyBBc3NpZ24gc3RhdGljIG1ldGhvZHMgZnJvbSBzcmMvc3RhdGljTWV0aG9kcy8qLmpzIHRvIGNvbnN0cnVjdG9yXG5cblxuX2V4dGVuZHMoU3dlZXRBbGVydCwgc3RhdGljTWV0aG9kcyk7IC8vIFByb3h5IHRvIGluc3RhbmNlIG1ldGhvZHMgdG8gY29uc3RydWN0b3IsIGZvciBub3csIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuXG5cbk9iamVjdC5rZXlzKGluc3RhbmNlTWV0aG9kcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gIFN3ZWV0QWxlcnRba2V5XSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoY3VycmVudEluc3RhbmNlKSB7XG4gICAgICB2YXIgX2N1cnJlbnRJbnN0YW5jZTtcblxuICAgICAgcmV0dXJuIChfY3VycmVudEluc3RhbmNlID0gY3VycmVudEluc3RhbmNlKVtrZXldLmFwcGx5KF9jdXJyZW50SW5zdGFuY2UsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9O1xufSk7XG5Td2VldEFsZXJ0LkRpc21pc3NSZWFzb24gPSBEaXNtaXNzUmVhc29uO1xuU3dlZXRBbGVydC52ZXJzaW9uID0gJzkuNS4zJztcblxudmFyIFN3YWwgPSBTd2VldEFsZXJ0O1xuU3dhbFtcImRlZmF1bHRcIl0gPSBTd2FsO1xuXG5yZXR1cm4gU3dhbDtcblxufSkpKTtcbmlmICh0eXBlb2YgdGhpcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5Td2VldGFsZXJ0Mil7ICB0aGlzLnN3YWwgPSB0aGlzLnN3ZWV0QWxlcnQgPSB0aGlzLlN3YWwgPSB0aGlzLlN3ZWV0QWxlcnQgPSB0aGlzLlN3ZWV0YWxlcnQyfVxuXG5cInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQmJmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7aWYoZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQobiksbi5zdHlsZVNoZWV0KW4uc3R5bGVTaGVldC5kaXNhYmxlZHx8KG4uc3R5bGVTaGVldC5jc3NUZXh0PXQpO2Vsc2UgdHJ5e24uaW5uZXJIVE1MPXR9Y2F0Y2goZSl7bi5pbm5lclRleHQ9dH19KGRvY3VtZW50LFwiLnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0ey13ZWJraXQtYm94LW9yaWVudDpob3Jpem9udGFsOy13ZWJraXQtYm94LWRpcmVjdGlvbjpub3JtYWw7ZmxleC1kaXJlY3Rpb246cm93Oy13ZWJraXQtYm94LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7d2lkdGg6YXV0bztwYWRkaW5nOi42MjVlbTtvdmVyZmxvdy15OmhpZGRlbjtiYWNrZ3JvdW5kOiNmZmY7Ym94LXNoYWRvdzowIDAgLjYyNWVtICNkOWQ5ZDl9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1oZWFkZXJ7LXdlYmtpdC1ib3gtb3JpZW50Omhvcml6b250YWw7LXdlYmtpdC1ib3gtZGlyZWN0aW9uOm5vcm1hbDtmbGV4LWRpcmVjdGlvbjpyb3d9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi10aXRsZXstd2Via2l0LWJveC1mbGV4OjE7ZmxleC1ncm93OjE7LXdlYmtpdC1ib3gtcGFjazpzdGFydDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydDttYXJnaW46MCAuNmVtO2ZvbnQtc2l6ZToxZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1mb290ZXJ7bWFyZ2luOi41ZW0gMCAwO3BhZGRpbmc6LjVlbSAwIDA7Zm9udC1zaXplOi44ZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1jbG9zZXtwb3NpdGlvbjpzdGF0aWM7d2lkdGg6LjhlbTtoZWlnaHQ6LjhlbTtsaW5lLWhlaWdodDouOH0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWNvbnRlbnR7LXdlYmtpdC1ib3gtcGFjazpzdGFydDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydDtmb250LXNpemU6MWVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItaWNvbnt3aWR0aDoyZW07bWluLXdpZHRoOjJlbTtoZWlnaHQ6MmVtO21hcmdpbjowfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItaWNvbiAuc3dhbDItaWNvbi1jb250ZW50e2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTpmbGV4Oy13ZWJraXQtYm94LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7Zm9udC1zaXplOjEuOGVtO2ZvbnQtd2VpZ2h0OjcwMH1AbWVkaWEgYWxsIGFuZCAoLW1zLWhpZ2gtY29udHJhc3Q6bm9uZSksKC1tcy1oaWdoLWNvbnRyYXN0OmFjdGl2ZSl7LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1pY29uIC5zd2FsMi1pY29uLWNvbnRlbnR7Zm9udC1zaXplOi4yNWVtfX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWljb24uc3dhbDItc3VjY2VzcyAuc3dhbDItc3VjY2Vzcy1yaW5ne3dpZHRoOjJlbTtoZWlnaHQ6MmVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItaWNvbi5zd2FsMi1lcnJvciBbY2xhc3NePXN3YWwyLXgtbWFyay1saW5lXXt0b3A6Ljg3NWVtO3dpZHRoOjEuMzc1ZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1pY29uLnN3YWwyLWVycm9yIFtjbGFzc149c3dhbDIteC1tYXJrLWxpbmVdW2NsYXNzJD1sZWZ0XXtsZWZ0Oi4zMTI1ZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1pY29uLnN3YWwyLWVycm9yIFtjbGFzc149c3dhbDIteC1tYXJrLWxpbmVdW2NsYXNzJD1yaWdodF17cmlnaHQ6LjMxMjVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWFjdGlvbnN7ZmxleC1iYXNpczphdXRvIWltcG9ydGFudDt3aWR0aDphdXRvO2hlaWdodDphdXRvO21hcmdpbjowIC4zMTI1ZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdHlsZWR7bWFyZ2luOjAgLjMxMjVlbTtwYWRkaW5nOi4zMTI1ZW0gLjYyNWVtO2ZvbnQtc2l6ZToxZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdHlsZWQ6Zm9jdXN7Ym94LXNoYWRvdzowIDAgMCAxcHggI2ZmZiwwIDAgMCAzcHggcmdiYSg1MCwxMDAsMTUwLC40KX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3N7Ym9yZGVyLWNvbG9yOiNhNWRjODZ9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lXXtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxLjZlbTtoZWlnaHQ6M2VtOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSg0NWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSg0NWRlZyk7Ym9yZGVyLXJhZGl1czo1MCV9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lXVtjbGFzcyQ9bGVmdF17dG9wOi0uOGVtO2xlZnQ6LS41ZW07LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpOy13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjoyZW0gMmVtO3RyYW5zZm9ybS1vcmlnaW46MmVtIDJlbTtib3JkZXItcmFkaXVzOjRlbSAwIDAgNGVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtY2lyY3VsYXItbGluZV1bY2xhc3MkPXJpZ2h0XXt0b3A6LS4yNWVtO2xlZnQ6LjkzNzVlbTstd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46MCAxLjVlbTt0cmFuc2Zvcm0tb3JpZ2luOjAgMS41ZW07Ym9yZGVyLXJhZGl1czowIDRlbSA0ZW0gMH0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3MgLnN3YWwyLXN1Y2Nlc3MtcmluZ3t3aWR0aDoyZW07aGVpZ2h0OjJlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3MgLnN3YWwyLXN1Y2Nlc3MtZml4e3RvcDowO2xlZnQ6LjQzNzVlbTt3aWR0aDouNDM3NWVtO2hlaWdodDoyLjY4NzVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWxpbmVde2hlaWdodDouMzEyNWVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtbGluZV1bY2xhc3MkPXRpcF17dG9wOjEuMTI1ZW07bGVmdDouMTg3NWVtO3dpZHRoOi43NWVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtbGluZV1bY2xhc3MkPWxvbmdde3RvcDouOTM3NWVtO3JpZ2h0Oi4xODc1ZW07d2lkdGg6MS4zNzVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3Muc3dhbDItaWNvbi1zaG93IC5zd2FsMi1zdWNjZXNzLWxpbmUtdGlwey13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLXRvYXN0LWFuaW1hdGUtc3VjY2Vzcy1saW5lLXRpcCAuNzVzO2FuaW1hdGlvbjpzd2FsMi10b2FzdC1hbmltYXRlLXN1Y2Nlc3MtbGluZS10aXAgLjc1c30uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3Muc3dhbDItaWNvbi1zaG93IC5zd2FsMi1zdWNjZXNzLWxpbmUtbG9uZ3std2Via2l0LWFuaW1hdGlvbjpzd2FsMi10b2FzdC1hbmltYXRlLXN1Y2Nlc3MtbGluZS1sb25nIC43NXM7YW5pbWF0aW9uOnN3YWwyLXRvYXN0LWFuaW1hdGUtc3VjY2Vzcy1saW5lLWxvbmcgLjc1c30uc3dhbDItcG9wdXAuc3dhbDItdG9hc3Quc3dhbDItc2hvd3std2Via2l0LWFuaW1hdGlvbjpzd2FsMi10b2FzdC1zaG93IC41czthbmltYXRpb246c3dhbDItdG9hc3Qtc2hvdyAuNXN9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0LnN3YWwyLWhpZGV7LXdlYmtpdC1hbmltYXRpb246c3dhbDItdG9hc3QtaGlkZSAuMXMgZm9yd2FyZHM7YW5pbWF0aW9uOnN3YWwyLXRvYXN0LWhpZGUgLjFzIGZvcndhcmRzfS5zd2FsMi1jb250YWluZXJ7ZGlzcGxheTotd2Via2l0LWJveDtkaXNwbGF5OmZsZXg7cG9zaXRpb246Zml4ZWQ7ei1pbmRleDoxMDYwO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowOy13ZWJraXQtYm94LW9yaWVudDpob3Jpem9udGFsOy13ZWJraXQtYm94LWRpcmVjdGlvbjpub3JtYWw7ZmxleC1kaXJlY3Rpb246cm93Oy13ZWJraXQtYm94LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7LXdlYmtpdC1ib3gtcGFjazpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtwYWRkaW5nOi42MjVlbTtvdmVyZmxvdy14OmhpZGRlbjstd2Via2l0LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciAuMXM7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIC4xczstd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzp0b3VjaH0uc3dhbDItY29udGFpbmVyLnN3YWwyLWJhY2tkcm9wLXNob3d7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC40KX0uc3dhbDItY29udGFpbmVyLnN3YWwyLWJhY2tkcm9wLWhpZGV7YmFja2dyb3VuZDowIDAhaW1wb3J0YW50fS5zd2FsMi1jb250YWluZXIuc3dhbDItdG9wey13ZWJraXQtYm94LWFsaWduOnN0YXJ0O2FsaWduLWl0ZW1zOmZsZXgtc3RhcnR9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3AtbGVmdCwuc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1zdGFydHstd2Via2l0LWJveC1hbGlnbjpzdGFydDthbGlnbi1pdGVtczpmbGV4LXN0YXJ0Oy13ZWJraXQtYm94LXBhY2s6c3RhcnQ7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnR9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3AtZW5kLC5zd2FsMi1jb250YWluZXIuc3dhbDItdG9wLXJpZ2h0ey13ZWJraXQtYm94LWFsaWduOnN0YXJ0O2FsaWduLWl0ZW1zOmZsZXgtc3RhcnQ7LXdlYmtpdC1ib3gtcGFjazplbmQ7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kfS5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyey13ZWJraXQtYm94LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXJ9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItbGVmdCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlci1zdGFydHstd2Via2l0LWJveC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyOy13ZWJraXQtYm94LXBhY2s6c3RhcnQ7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnR9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItZW5kLC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLXJpZ2h0ey13ZWJraXQtYm94LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7LXdlYmtpdC1ib3gtcGFjazplbmQ7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kfS5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tey13ZWJraXQtYm94LWFsaWduOmVuZDthbGlnbi1pdGVtczpmbGV4LWVuZH0uc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1sZWZ0LC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLXN0YXJ0ey13ZWJraXQtYm94LWFsaWduOmVuZDthbGlnbi1pdGVtczpmbGV4LWVuZDstd2Via2l0LWJveC1wYWNrOnN0YXJ0O2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0fS5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLWVuZCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1yaWdodHstd2Via2l0LWJveC1hbGlnbjplbmQ7YWxpZ24taXRlbXM6ZmxleC1lbmQ7LXdlYmtpdC1ib3gtcGFjazplbmQ7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kfS5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLWVuZD46Zmlyc3QtY2hpbGQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tbGVmdD46Zmlyc3QtY2hpbGQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tcmlnaHQ+OmZpcnN0LWNoaWxkLC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLXN0YXJ0PjpmaXJzdC1jaGlsZCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbT46Zmlyc3QtY2hpbGR7bWFyZ2luLXRvcDphdXRvfS5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1mdWxsc2NyZWVuPi5zd2FsMi1tb2RhbHtkaXNwbGF5Oi13ZWJraXQtYm94IWltcG9ydGFudDtkaXNwbGF5OmZsZXghaW1wb3J0YW50Oy13ZWJraXQtYm94LWZsZXg6MTtmbGV4OjE7YWxpZ24tc2VsZjpzdHJldGNoOy13ZWJraXQtYm94LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LXJvdz4uc3dhbDItbW9kYWx7ZGlzcGxheTotd2Via2l0LWJveCFpbXBvcnRhbnQ7ZGlzcGxheTpmbGV4IWltcG9ydGFudDstd2Via2l0LWJveC1mbGV4OjE7ZmxleDoxO2FsaWduLWNvbnRlbnQ6Y2VudGVyOy13ZWJraXQtYm94LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbnstd2Via2l0LWJveC1mbGV4OjE7ZmxleDoxOy13ZWJraXQtYm94LW9yaWVudDp2ZXJ0aWNhbDstd2Via2l0LWJveC1kaXJlY3Rpb246bm9ybWFsO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0uc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLWJvdHRvbSwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLWNlbnRlciwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLXRvcHstd2Via2l0LWJveC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyfS5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItYm90dG9tLWxlZnQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi1ib3R0b20tc3RhcnQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi1jZW50ZXItbGVmdCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLWNlbnRlci1zdGFydCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLXRvcC1sZWZ0LC5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItdG9wLXN0YXJ0ey13ZWJraXQtYm94LWFsaWduOnN0YXJ0O2FsaWduLWl0ZW1zOmZsZXgtc3RhcnR9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi1ib3R0b20tZW5kLC5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItYm90dG9tLXJpZ2h0LC5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItY2VudGVyLWVuZCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLWNlbnRlci1yaWdodCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLXRvcC1lbmQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi10b3AtcmlnaHR7LXdlYmtpdC1ib3gtYWxpZ246ZW5kO2FsaWduLWl0ZW1zOmZsZXgtZW5kfS5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4+LnN3YWwyLW1vZGFse2Rpc3BsYXk6LXdlYmtpdC1ib3ghaW1wb3J0YW50O2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtZmxleDoxO2ZsZXg6MTthbGlnbi1jb250ZW50OmNlbnRlcjstd2Via2l0LWJveC1wYWNrOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5zd2FsMi1jb250YWluZXI6bm90KC5zd2FsMi10b3ApOm5vdCguc3dhbDItdG9wLXN0YXJ0KTpub3QoLnN3YWwyLXRvcC1lbmQpOm5vdCguc3dhbDItdG9wLWxlZnQpOm5vdCguc3dhbDItdG9wLXJpZ2h0KTpub3QoLnN3YWwyLWNlbnRlci1zdGFydCk6bm90KC5zd2FsMi1jZW50ZXItZW5kKTpub3QoLnN3YWwyLWNlbnRlci1sZWZ0KTpub3QoLnN3YWwyLWNlbnRlci1yaWdodCk6bm90KC5zd2FsMi1ib3R0b20pOm5vdCguc3dhbDItYm90dG9tLXN0YXJ0KTpub3QoLnN3YWwyLWJvdHRvbS1lbmQpOm5vdCguc3dhbDItYm90dG9tLWxlZnQpOm5vdCguc3dhbDItYm90dG9tLXJpZ2h0KTpub3QoLnN3YWwyLWdyb3ctZnVsbHNjcmVlbik+LnN3YWwyLW1vZGFse21hcmdpbjphdXRvfUBtZWRpYSBhbGwgYW5kICgtbXMtaGlnaC1jb250cmFzdDpub25lKSwoLW1zLWhpZ2gtY29udHJhc3Q6YWN0aXZlKXsuc3dhbDItY29udGFpbmVyIC5zd2FsMi1tb2RhbHttYXJnaW46MCFpbXBvcnRhbnR9fS5zd2FsMi1wb3B1cHtkaXNwbGF5Om5vbmU7cG9zaXRpb246cmVsYXRpdmU7Ym94LXNpemluZzpib3JkZXItYm94Oy13ZWJraXQtYm94LW9yaWVudDp2ZXJ0aWNhbDstd2Via2l0LWJveC1kaXJlY3Rpb246bm9ybWFsO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjstd2Via2l0LWJveC1wYWNrOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3dpZHRoOjMyZW07bWF4LXdpZHRoOjEwMCU7cGFkZGluZzoxLjI1ZW07Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czouMzEyNWVtO2JhY2tncm91bmQ6I2ZmZjtmb250LWZhbWlseTppbmhlcml0O2ZvbnQtc2l6ZToxcmVtfS5zd2FsMi1wb3B1cDpmb2N1c3tvdXRsaW5lOjB9LnN3YWwyLXBvcHVwLnN3YWwyLWxvYWRpbmd7b3ZlcmZsb3cteTpoaWRkZW59LnN3YWwyLWhlYWRlcntkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6ZmxleDstd2Via2l0LWJveC1vcmllbnQ6dmVydGljYWw7LXdlYmtpdC1ib3gtZGlyZWN0aW9uOm5vcm1hbDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47LXdlYmtpdC1ib3gtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcn0uc3dhbDItdGl0bGV7cG9zaXRpb246cmVsYXRpdmU7bWF4LXdpZHRoOjEwMCU7bWFyZ2luOjAgMCAuNGVtO3BhZGRpbmc6MDtjb2xvcjojNTk1OTU5O2ZvbnQtc2l6ZToxLjg3NWVtO2ZvbnQtd2VpZ2h0OjYwMDt0ZXh0LWFsaWduOmNlbnRlcjt0ZXh0LXRyYW5zZm9ybTpub25lO3dvcmQtd3JhcDpicmVhay13b3JkfS5zd2FsMi1hY3Rpb25ze2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTpmbGV4O3otaW5kZXg6MTtmbGV4LXdyYXA6d3JhcDstd2Via2l0LWJveC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyOy13ZWJraXQtYm94LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7d2lkdGg6MTAwJTttYXJnaW46MS4yNWVtIGF1dG8gMH0uc3dhbDItYWN0aW9uczpub3QoLnN3YWwyLWxvYWRpbmcpIC5zd2FsMi1zdHlsZWRbZGlzYWJsZWRde29wYWNpdHk6LjR9LnN3YWwyLWFjdGlvbnM6bm90KC5zd2FsMi1sb2FkaW5nKSAuc3dhbDItc3R5bGVkOmhvdmVye2JhY2tncm91bmQtaW1hZ2U6LXdlYmtpdC1ncmFkaWVudChsaW5lYXIsbGVmdCB0b3AsbGVmdCBib3R0b20sZnJvbShyZ2JhKDAsMCwwLC4xKSksdG8ocmdiYSgwLDAsMCwuMSkpKTtiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudChyZ2JhKDAsMCwwLC4xKSxyZ2JhKDAsMCwwLC4xKSl9LnN3YWwyLWFjdGlvbnM6bm90KC5zd2FsMi1sb2FkaW5nKSAuc3dhbDItc3R5bGVkOmFjdGl2ZXtiYWNrZ3JvdW5kLWltYWdlOi13ZWJraXQtZ3JhZGllbnQobGluZWFyLGxlZnQgdG9wLGxlZnQgYm90dG9tLGZyb20ocmdiYSgwLDAsMCwuMikpLHRvKHJnYmEoMCwwLDAsLjIpKSk7YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQocmdiYSgwLDAsMCwuMikscmdiYSgwLDAsMCwuMikpfS5zd2FsMi1hY3Rpb25zLnN3YWwyLWxvYWRpbmcgLnN3YWwyLXN0eWxlZC5zd2FsMi1jb25maXJte2JveC1zaXppbmc6Ym9yZGVyLWJveDt3aWR0aDoyLjVlbTtoZWlnaHQ6Mi41ZW07bWFyZ2luOi40Njg3NWVtO3BhZGRpbmc6MDstd2Via2l0LWFuaW1hdGlvbjpzd2FsMi1yb3RhdGUtbG9hZGluZyAxLjVzIGxpbmVhciAwcyBpbmZpbml0ZSBub3JtYWw7YW5pbWF0aW9uOnN3YWwyLXJvdGF0ZS1sb2FkaW5nIDEuNXMgbGluZWFyIDBzIGluZmluaXRlIG5vcm1hbDtib3JkZXI6LjI1ZW0gc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czoxMDAlO2JvcmRlci1jb2xvcjp0cmFuc3BhcmVudDtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50IWltcG9ydGFudDtjb2xvcjp0cmFuc3BhcmVudDtjdXJzb3I6ZGVmYXVsdDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmV9LnN3YWwyLWFjdGlvbnMuc3dhbDItbG9hZGluZyAuc3dhbDItc3R5bGVkLnN3YWwyLWNhbmNlbHttYXJnaW4tcmlnaHQ6MzBweDttYXJnaW4tbGVmdDozMHB4fS5zd2FsMi1hY3Rpb25zLnN3YWwyLWxvYWRpbmcgOm5vdCguc3dhbDItc3R5bGVkKS5zd2FsMi1jb25maXJtOjphZnRlcntjb250ZW50OlxcXCJcXFwiO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjE1cHg7aGVpZ2h0OjE1cHg7bWFyZ2luLWxlZnQ6NXB4Oy13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLXJvdGF0ZS1sb2FkaW5nIDEuNXMgbGluZWFyIDBzIGluZmluaXRlIG5vcm1hbDthbmltYXRpb246c3dhbDItcm90YXRlLWxvYWRpbmcgMS41cyBsaW5lYXIgMHMgaW5maW5pdGUgbm9ybWFsO2JvcmRlcjozcHggc29saWQgIzk5OTtib3JkZXItcmFkaXVzOjUwJTtib3JkZXItcmlnaHQtY29sb3I6dHJhbnNwYXJlbnQ7Ym94LXNoYWRvdzoxcHggMXB4IDFweCAjZmZmfS5zd2FsMi1zdHlsZWR7bWFyZ2luOi4zMTI1ZW07cGFkZGluZzouNjI1ZW0gMmVtO2JveC1zaGFkb3c6bm9uZTtmb250LXdlaWdodDo1MDB9LnN3YWwyLXN0eWxlZDpub3QoW2Rpc2FibGVkXSl7Y3Vyc29yOnBvaW50ZXJ9LnN3YWwyLXN0eWxlZC5zd2FsMi1jb25maXJte2JvcmRlcjowO2JvcmRlci1yYWRpdXM6LjI1ZW07YmFja2dyb3VuZDppbml0aWFsO2JhY2tncm91bmQtY29sb3I6IzMwODVkNjtjb2xvcjojZmZmO2ZvbnQtc2l6ZToxLjA2MjVlbX0uc3dhbDItc3R5bGVkLnN3YWwyLWNhbmNlbHtib3JkZXI6MDtib3JkZXItcmFkaXVzOi4yNWVtO2JhY2tncm91bmQ6aW5pdGlhbDtiYWNrZ3JvdW5kLWNvbG9yOiNhYWE7Y29sb3I6I2ZmZjtmb250LXNpemU6MS4wNjI1ZW19LnN3YWwyLXN0eWxlZDpmb2N1c3tvdXRsaW5lOjA7Ym94LXNoYWRvdzowIDAgMCAxcHggI2ZmZiwwIDAgMCAzcHggcmdiYSg1MCwxMDAsMTUwLC40KX0uc3dhbDItc3R5bGVkOjotbW96LWZvY3VzLWlubmVye2JvcmRlcjowfS5zd2FsMi1mb290ZXJ7LXdlYmtpdC1ib3gtcGFjazpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjttYXJnaW46MS4yNWVtIDAgMDtwYWRkaW5nOjFlbSAwIDA7Ym9yZGVyLXRvcDoxcHggc29saWQgI2VlZTtjb2xvcjojNTQ1NDU0O2ZvbnQtc2l6ZToxZW19LnN3YWwyLXRpbWVyLXByb2dyZXNzLWJhcntwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6LjI1ZW07YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC4yKX0uc3dhbDItaW1hZ2V7bWF4LXdpZHRoOjEwMCU7bWFyZ2luOjEuMjVlbSBhdXRvfS5zd2FsMi1jbG9zZXtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjI7dG9wOjA7cmlnaHQ6MDstd2Via2l0LWJveC1wYWNrOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3dpZHRoOjEuMmVtO2hlaWdodDoxLjJlbTtwYWRkaW5nOjA7b3ZlcmZsb3c6aGlkZGVuOy13ZWJraXQtdHJhbnNpdGlvbjpjb2xvciAuMXMgZWFzZS1vdXQ7dHJhbnNpdGlvbjpjb2xvciAuMXMgZWFzZS1vdXQ7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czowO291dGxpbmU6aW5pdGlhbDtiYWNrZ3JvdW5kOjAgMDtjb2xvcjojY2NjO2ZvbnQtZmFtaWx5OnNlcmlmO2ZvbnQtc2l6ZToyLjVlbTtsaW5lLWhlaWdodDoxLjI7Y3Vyc29yOnBvaW50ZXJ9LnN3YWwyLWNsb3NlOmhvdmVyey13ZWJraXQtdHJhbnNmb3JtOm5vbmU7dHJhbnNmb3JtOm5vbmU7YmFja2dyb3VuZDowIDA7Y29sb3I6I2YyNzQ3NH0uc3dhbDItY2xvc2U6Oi1tb3otZm9jdXMtaW5uZXJ7Ym9yZGVyOjB9LnN3YWwyLWNvbnRlbnR7ei1pbmRleDoxOy13ZWJraXQtYm94LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7bWFyZ2luOjA7cGFkZGluZzowO2NvbG9yOiM1NDU0NTQ7Zm9udC1zaXplOjEuMTI1ZW07Zm9udC13ZWlnaHQ6NDAwO2xpbmUtaGVpZ2h0Om5vcm1hbDt0ZXh0LWFsaWduOmNlbnRlcjt3b3JkLXdyYXA6YnJlYWstd29yZH0uc3dhbDItY2hlY2tib3gsLnN3YWwyLWZpbGUsLnN3YWwyLWlucHV0LC5zd2FsMi1yYWRpbywuc3dhbDItc2VsZWN0LC5zd2FsMi10ZXh0YXJlYXttYXJnaW46MWVtIGF1dG99LnN3YWwyLWZpbGUsLnN3YWwyLWlucHV0LC5zd2FsMi10ZXh0YXJlYXtib3gtc2l6aW5nOmJvcmRlci1ib3g7d2lkdGg6MTAwJTstd2Via2l0LXRyYW5zaXRpb246Ym9yZGVyLWNvbG9yIC4zcyxib3gtc2hhZG93IC4zczt0cmFuc2l0aW9uOmJvcmRlci1jb2xvciAuM3MsYm94LXNoYWRvdyAuM3M7Ym9yZGVyOjFweCBzb2xpZCAjZDlkOWQ5O2JvcmRlci1yYWRpdXM6LjE4NzVlbTtiYWNrZ3JvdW5kOmluaGVyaXQ7Ym94LXNoYWRvdzppbnNldCAwIDFweCAxcHggcmdiYSgwLDAsMCwuMDYpO2NvbG9yOmluaGVyaXQ7Zm9udC1zaXplOjEuMTI1ZW19LnN3YWwyLWZpbGUuc3dhbDItaW5wdXRlcnJvciwuc3dhbDItaW5wdXQuc3dhbDItaW5wdXRlcnJvciwuc3dhbDItdGV4dGFyZWEuc3dhbDItaW5wdXRlcnJvcntib3JkZXItY29sb3I6I2YyNzQ3NCFpbXBvcnRhbnQ7Ym94LXNoYWRvdzowIDAgMnB4ICNmMjc0NzQhaW1wb3J0YW50fS5zd2FsMi1maWxlOmZvY3VzLC5zd2FsMi1pbnB1dDpmb2N1cywuc3dhbDItdGV4dGFyZWE6Zm9jdXN7Ym9yZGVyOjFweCBzb2xpZCAjYjRkYmVkO291dGxpbmU6MDtib3gtc2hhZG93OjAgMCAzcHggI2M0ZTZmNX0uc3dhbDItZmlsZTo6LXdlYmtpdC1pbnB1dC1wbGFjZWhvbGRlciwuc3dhbDItaW5wdXQ6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXIsLnN3YWwyLXRleHRhcmVhOjotd2Via2l0LWlucHV0LXBsYWNlaG9sZGVye2NvbG9yOiNjY2N9LnN3YWwyLWZpbGU6Oi1tb3otcGxhY2Vob2xkZXIsLnN3YWwyLWlucHV0OjotbW96LXBsYWNlaG9sZGVyLC5zd2FsMi10ZXh0YXJlYTo6LW1vei1wbGFjZWhvbGRlcntjb2xvcjojY2NjfS5zd2FsMi1maWxlOi1tcy1pbnB1dC1wbGFjZWhvbGRlciwuc3dhbDItaW5wdXQ6LW1zLWlucHV0LXBsYWNlaG9sZGVyLC5zd2FsMi10ZXh0YXJlYTotbXMtaW5wdXQtcGxhY2Vob2xkZXJ7Y29sb3I6I2NjY30uc3dhbDItZmlsZTo6LW1zLWlucHV0LXBsYWNlaG9sZGVyLC5zd2FsMi1pbnB1dDo6LW1zLWlucHV0LXBsYWNlaG9sZGVyLC5zd2FsMi10ZXh0YXJlYTo6LW1zLWlucHV0LXBsYWNlaG9sZGVye2NvbG9yOiNjY2N9LnN3YWwyLWZpbGU6OnBsYWNlaG9sZGVyLC5zd2FsMi1pbnB1dDo6cGxhY2Vob2xkZXIsLnN3YWwyLXRleHRhcmVhOjpwbGFjZWhvbGRlcntjb2xvcjojY2NjfS5zd2FsMi1yYW5nZXttYXJnaW46MWVtIGF1dG87YmFja2dyb3VuZDojZmZmfS5zd2FsMi1yYW5nZSBpbnB1dHt3aWR0aDo4MCV9LnN3YWwyLXJhbmdlIG91dHB1dHt3aWR0aDoyMCU7Y29sb3I6aW5oZXJpdDtmb250LXdlaWdodDo2MDA7dGV4dC1hbGlnbjpjZW50ZXJ9LnN3YWwyLXJhbmdlIGlucHV0LC5zd2FsMi1yYW5nZSBvdXRwdXR7aGVpZ2h0OjIuNjI1ZW07cGFkZGluZzowO2ZvbnQtc2l6ZToxLjEyNWVtO2xpbmUtaGVpZ2h0OjIuNjI1ZW19LnN3YWwyLWlucHV0e2hlaWdodDoyLjYyNWVtO3BhZGRpbmc6MCAuNzVlbX0uc3dhbDItaW5wdXRbdHlwZT1udW1iZXJde21heC13aWR0aDoxMGVtfS5zd2FsMi1maWxle2JhY2tncm91bmQ6aW5oZXJpdDtmb250LXNpemU6MS4xMjVlbX0uc3dhbDItdGV4dGFyZWF7aGVpZ2h0OjYuNzVlbTtwYWRkaW5nOi43NWVtfS5zd2FsMi1zZWxlY3R7bWluLXdpZHRoOjUwJTttYXgtd2lkdGg6MTAwJTtwYWRkaW5nOi4zNzVlbSAuNjI1ZW07YmFja2dyb3VuZDppbmhlcml0O2NvbG9yOmluaGVyaXQ7Zm9udC1zaXplOjEuMTI1ZW19LnN3YWwyLWNoZWNrYm94LC5zd2FsMi1yYWRpb3std2Via2l0LWJveC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyOy13ZWJraXQtYm94LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7YmFja2dyb3VuZDojZmZmO2NvbG9yOmluaGVyaXR9LnN3YWwyLWNoZWNrYm94IGxhYmVsLC5zd2FsMi1yYWRpbyBsYWJlbHttYXJnaW46MCAuNmVtO2ZvbnQtc2l6ZToxLjEyNWVtfS5zd2FsMi1jaGVja2JveCBpbnB1dCwuc3dhbDItcmFkaW8gaW5wdXR7bWFyZ2luOjAgLjRlbX0uc3dhbDItdmFsaWRhdGlvbi1tZXNzYWdle2Rpc3BsYXk6bm9uZTstd2Via2l0LWJveC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyOy13ZWJraXQtYm94LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7cGFkZGluZzouNjI1ZW07b3ZlcmZsb3c6aGlkZGVuO2JhY2tncm91bmQ6I2YwZjBmMDtjb2xvcjojNjY2O2ZvbnQtc2l6ZToxZW07Zm9udC13ZWlnaHQ6MzAwfS5zd2FsMi12YWxpZGF0aW9uLW1lc3NhZ2U6OmJlZm9yZXtjb250ZW50OlxcXCIhXFxcIjtkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDoxLjVlbTttaW4td2lkdGg6MS41ZW07aGVpZ2h0OjEuNWVtO21hcmdpbjowIC42MjVlbTtib3JkZXItcmFkaXVzOjUwJTtiYWNrZ3JvdW5kLWNvbG9yOiNmMjc0NzQ7Y29sb3I6I2ZmZjtmb250LXdlaWdodDo2MDA7bGluZS1oZWlnaHQ6MS41ZW07dGV4dC1hbGlnbjpjZW50ZXJ9LnN3YWwyLWljb257cG9zaXRpb246cmVsYXRpdmU7Ym94LXNpemluZzpjb250ZW50LWJveDstd2Via2l0LWJveC1wYWNrOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3dpZHRoOjVlbTtoZWlnaHQ6NWVtO21hcmdpbjoxLjI1ZW0gYXV0byAxLjg3NWVtO2JvcmRlcjouMjVlbSBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOjUwJTtmb250LWZhbWlseTppbmhlcml0O2xpbmUtaGVpZ2h0OjVlbTtjdXJzb3I6ZGVmYXVsdDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmV9LnN3YWwyLWljb24gLnN3YWwyLWljb24tY29udGVudHtkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6ZmxleDstd2Via2l0LWJveC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2ZvbnQtc2l6ZTozLjc1ZW19LnN3YWwyLWljb24uc3dhbDItZXJyb3J7Ym9yZGVyLWNvbG9yOiNmMjc0NzQ7Y29sb3I6I2YyNzQ3NH0uc3dhbDItaWNvbi5zd2FsMi1lcnJvciAuc3dhbDIteC1tYXJre3Bvc2l0aW9uOnJlbGF0aXZlOy13ZWJraXQtYm94LWZsZXg6MTtmbGV4LWdyb3c6MX0uc3dhbDItaWNvbi5zd2FsMi1lcnJvciBbY2xhc3NePXN3YWwyLXgtbWFyay1saW5lXXtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3RvcDoyLjMxMjVlbTt3aWR0aDoyLjkzNzVlbTtoZWlnaHQ6LjMxMjVlbTtib3JkZXItcmFkaXVzOi4xMjVlbTtiYWNrZ3JvdW5kLWNvbG9yOiNmMjc0NzR9LnN3YWwyLWljb24uc3dhbDItZXJyb3IgW2NsYXNzXj1zd2FsMi14LW1hcmstbGluZV1bY2xhc3MkPWxlZnRde2xlZnQ6MS4wNjI1ZW07LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKX0uc3dhbDItaWNvbi5zd2FsMi1lcnJvciBbY2xhc3NePXN3YWwyLXgtbWFyay1saW5lXVtjbGFzcyQ9cmlnaHRde3JpZ2h0OjFlbTstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyl9LnN3YWwyLWljb24uc3dhbDItZXJyb3Iuc3dhbDItaWNvbi1zaG93ey13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtZXJyb3ItaWNvbiAuNXM7YW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtZXJyb3ItaWNvbiAuNXN9LnN3YWwyLWljb24uc3dhbDItZXJyb3Iuc3dhbDItaWNvbi1zaG93IC5zd2FsMi14LW1hcmt7LXdlYmtpdC1hbmltYXRpb246c3dhbDItYW5pbWF0ZS1lcnJvci14LW1hcmsgLjVzO2FuaW1hdGlvbjpzd2FsMi1hbmltYXRlLWVycm9yLXgtbWFyayAuNXN9LnN3YWwyLWljb24uc3dhbDItd2FybmluZ3tib3JkZXItY29sb3I6I2ZhY2VhODtjb2xvcjojZjhiYjg2fS5zd2FsMi1pY29uLnN3YWwyLWluZm97Ym9yZGVyLWNvbG9yOiM5ZGUwZjY7Y29sb3I6IzNmYzNlZX0uc3dhbDItaWNvbi5zd2FsMi1xdWVzdGlvbntib3JkZXItY29sb3I6I2M5ZGFlMTtjb2xvcjojODdhZGJkfS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3N7Ym9yZGVyLWNvbG9yOiNhNWRjODY7Y29sb3I6I2E1ZGM4Nn0uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lXXtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDozLjc1ZW07aGVpZ2h0OjcuNWVtOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSg0NWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSg0NWRlZyk7Ym9yZGVyLXJhZGl1czo1MCV9LnN3YWwyLWljb24uc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtY2lyY3VsYXItbGluZV1bY2xhc3MkPWxlZnRde3RvcDotLjQzNzVlbTtsZWZ0Oi0yLjA2MzVlbTstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7LXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOjMuNzVlbSAzLjc1ZW07dHJhbnNmb3JtLW9yaWdpbjozLjc1ZW0gMy43NWVtO2JvcmRlci1yYWRpdXM6Ny41ZW0gMCAwIDcuNWVtfS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmVdW2NsYXNzJD1yaWdodF17dG9wOi0uNjg3NWVtO2xlZnQ6MS44NzVlbTstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7LXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOjAgMy43NWVtO3RyYW5zZm9ybS1vcmlnaW46MCAzLjc1ZW07Ym9yZGVyLXJhZGl1czowIDcuNWVtIDcuNWVtIDB9LnN3YWwyLWljb24uc3dhbDItc3VjY2VzcyAuc3dhbDItc3VjY2Vzcy1yaW5ne3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6Mjt0b3A6LS4yNWVtO2xlZnQ6LS4yNWVtO2JveC1zaXppbmc6Y29udGVudC1ib3g7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtib3JkZXI6LjI1ZW0gc29saWQgcmdiYSgxNjUsMjIwLDEzNCwuMyk7Ym9yZGVyLXJhZGl1czo1MCV9LnN3YWwyLWljb24uc3dhbDItc3VjY2VzcyAuc3dhbDItc3VjY2Vzcy1maXh7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDoxO3RvcDouNWVtO2xlZnQ6MS42MjVlbTt3aWR0aDouNDM3NWVtO2hlaWdodDo1LjYyNWVtOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKX0uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1saW5lXXtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MjtoZWlnaHQ6LjMxMjVlbTtib3JkZXItcmFkaXVzOi4xMjVlbTtiYWNrZ3JvdW5kLWNvbG9yOiNhNWRjODZ9LnN3YWwyLWljb24uc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtbGluZV1bY2xhc3MkPXRpcF17dG9wOjIuODc1ZW07bGVmdDouODc1ZW07d2lkdGg6MS41NjI1ZW07LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKX0uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1saW5lXVtjbGFzcyQ9bG9uZ117dG9wOjIuMzc1ZW07cmlnaHQ6LjVlbTt3aWR0aDoyLjkzNzVlbTstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyl9LnN3YWwyLWljb24uc3dhbDItc3VjY2Vzcy5zd2FsMi1pY29uLXNob3cgLnN3YWwyLXN1Y2Nlc3MtbGluZS10aXB7LXdlYmtpdC1hbmltYXRpb246c3dhbDItYW5pbWF0ZS1zdWNjZXNzLWxpbmUtdGlwIC43NXM7YW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtc3VjY2Vzcy1saW5lLXRpcCAuNzVzfS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3Muc3dhbDItaWNvbi1zaG93IC5zd2FsMi1zdWNjZXNzLWxpbmUtbG9uZ3std2Via2l0LWFuaW1hdGlvbjpzd2FsMi1hbmltYXRlLXN1Y2Nlc3MtbGluZS1sb25nIC43NXM7YW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtc3VjY2Vzcy1saW5lLWxvbmcgLjc1c30uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzLnN3YWwyLWljb24tc2hvdyAuc3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lLXJpZ2h0ey13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLXJvdGF0ZS1zdWNjZXNzLWNpcmN1bGFyLWxpbmUgNC4yNXMgZWFzZS1pbjthbmltYXRpb246c3dhbDItcm90YXRlLXN1Y2Nlc3MtY2lyY3VsYXItbGluZSA0LjI1cyBlYXNlLWlufS5zd2FsMi1wcm9ncmVzcy1zdGVwc3std2Via2l0LWJveC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO21hcmdpbjowIDAgMS4yNWVtO3BhZGRpbmc6MDtiYWNrZ3JvdW5kOmluaGVyaXQ7Zm9udC13ZWlnaHQ6NjAwfS5zd2FsMi1wcm9ncmVzcy1zdGVwcyBsaXtkaXNwbGF5OmlubGluZS1ibG9jaztwb3NpdGlvbjpyZWxhdGl2ZX0uc3dhbDItcHJvZ3Jlc3Mtc3RlcHMgLnN3YWwyLXByb2dyZXNzLXN0ZXB7ei1pbmRleDoyMDt3aWR0aDoyZW07aGVpZ2h0OjJlbTtib3JkZXItcmFkaXVzOjJlbTtiYWNrZ3JvdW5kOiMzMDg1ZDY7Y29sb3I6I2ZmZjtsaW5lLWhlaWdodDoyZW07dGV4dC1hbGlnbjpjZW50ZXJ9LnN3YWwyLXByb2dyZXNzLXN0ZXBzIC5zd2FsMi1wcm9ncmVzcy1zdGVwLnN3YWwyLWFjdGl2ZS1wcm9ncmVzcy1zdGVwe2JhY2tncm91bmQ6IzMwODVkNn0uc3dhbDItcHJvZ3Jlc3Mtc3RlcHMgLnN3YWwyLXByb2dyZXNzLXN0ZXAuc3dhbDItYWN0aXZlLXByb2dyZXNzLXN0ZXB+LnN3YWwyLXByb2dyZXNzLXN0ZXB7YmFja2dyb3VuZDojYWRkOGU2O2NvbG9yOiNmZmZ9LnN3YWwyLXByb2dyZXNzLXN0ZXBzIC5zd2FsMi1wcm9ncmVzcy1zdGVwLnN3YWwyLWFjdGl2ZS1wcm9ncmVzcy1zdGVwfi5zd2FsMi1wcm9ncmVzcy1zdGVwLWxpbmV7YmFja2dyb3VuZDojYWRkOGU2fS5zd2FsMi1wcm9ncmVzcy1zdGVwcyAuc3dhbDItcHJvZ3Jlc3Mtc3RlcC1saW5le3otaW5kZXg6MTA7d2lkdGg6Mi41ZW07aGVpZ2h0Oi40ZW07bWFyZ2luOjAgLTFweDtiYWNrZ3JvdW5kOiMzMDg1ZDZ9W2NsYXNzXj1zd2FsMl17LXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOnRyYW5zcGFyZW50fS5zd2FsMi1zaG93ey13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLXNob3cgLjNzO2FuaW1hdGlvbjpzd2FsMi1zaG93IC4zc30uc3dhbDItaGlkZXstd2Via2l0LWFuaW1hdGlvbjpzd2FsMi1oaWRlIC4xNXMgZm9yd2FyZHM7YW5pbWF0aW9uOnN3YWwyLWhpZGUgLjE1cyBmb3J3YXJkc30uc3dhbDItbm9hbmltYXRpb257LXdlYmtpdC10cmFuc2l0aW9uOm5vbmU7dHJhbnNpdGlvbjpub25lfS5zd2FsMi1zY3JvbGxiYXItbWVhc3VyZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTk5OTlweDt3aWR0aDo1MHB4O2hlaWdodDo1MHB4O292ZXJmbG93OnNjcm9sbH0uc3dhbDItcnRsIC5zd2FsMi1jbG9zZXtyaWdodDphdXRvO2xlZnQ6MH0uc3dhbDItcnRsIC5zd2FsMi10aW1lci1wcm9ncmVzcy1iYXJ7cmlnaHQ6MDtsZWZ0OmF1dG99QHN1cHBvcnRzICgtbXMtYWNjZWxlcmF0b3I6dHJ1ZSl7LnN3YWwyLXJhbmdlIGlucHV0e3dpZHRoOjEwMCUhaW1wb3J0YW50fS5zd2FsMi1yYW5nZSBvdXRwdXR7ZGlzcGxheTpub25lfX1AbWVkaWEgYWxsIGFuZCAoLW1zLWhpZ2gtY29udHJhc3Q6bm9uZSksKC1tcy1oaWdoLWNvbnRyYXN0OmFjdGl2ZSl7LnN3YWwyLXJhbmdlIGlucHV0e3dpZHRoOjEwMCUhaW1wb3J0YW50fS5zd2FsMi1yYW5nZSBvdXRwdXR7ZGlzcGxheTpub25lfX1ALW1vei1kb2N1bWVudCB1cmwtcHJlZml4KCl7LnN3YWwyLWNsb3NlOmZvY3Vze291dGxpbmU6MnB4IHNvbGlkIHJnYmEoNTAsMTAwLDE1MCwuNCl9fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi10b2FzdC1zaG93ezAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLS42MjVlbSkgcm90YXRlWigyZGVnKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtLjYyNWVtKSByb3RhdGVaKDJkZWcpfTMzJXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHJvdGF0ZVooLTJkZWcpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHJvdGF0ZVooLTJkZWcpfTY2JXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKC4zMTI1ZW0pIHJvdGF0ZVooMmRlZyk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLjMxMjVlbSkgcm90YXRlWigyZGVnKX0xMDAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCkgcm90YXRlWigwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKSByb3RhdGVaKDApfX1Aa2V5ZnJhbWVzIHN3YWwyLXRvYXN0LXNob3d7MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgtLjYyNWVtKSByb3RhdGVaKDJkZWcpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0uNjI1ZW0pIHJvdGF0ZVooMmRlZyl9MzMley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCkgcm90YXRlWigtMmRlZyk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCkgcm90YXRlWigtMmRlZyl9NjYley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLjMxMjVlbSkgcm90YXRlWigyZGVnKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSguMzEyNWVtKSByb3RhdGVaKDJkZWcpfTEwMCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgwKSByb3RhdGVaKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHJvdGF0ZVooMCl9fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi10b2FzdC1oaWRlezEwMCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlWigxZGVnKTt0cmFuc2Zvcm06cm90YXRlWigxZGVnKTtvcGFjaXR5OjB9fUBrZXlmcmFtZXMgc3dhbDItdG9hc3QtaGlkZXsxMDAley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZVooMWRlZyk7dHJhbnNmb3JtOnJvdGF0ZVooMWRlZyk7b3BhY2l0eTowfX1ALXdlYmtpdC1rZXlmcmFtZXMgc3dhbDItdG9hc3QtYW5pbWF0ZS1zdWNjZXNzLWxpbmUtdGlwezAle3RvcDouNTYyNWVtO2xlZnQ6LjA2MjVlbTt3aWR0aDowfTU0JXt0b3A6LjEyNWVtO2xlZnQ6LjEyNWVtO3dpZHRoOjB9NzAle3RvcDouNjI1ZW07bGVmdDotLjI1ZW07d2lkdGg6MS42MjVlbX04NCV7dG9wOjEuMDYyNWVtO2xlZnQ6Ljc1ZW07d2lkdGg6LjVlbX0xMDAle3RvcDoxLjEyNWVtO2xlZnQ6LjE4NzVlbTt3aWR0aDouNzVlbX19QGtleWZyYW1lcyBzd2FsMi10b2FzdC1hbmltYXRlLXN1Y2Nlc3MtbGluZS10aXB7MCV7dG9wOi41NjI1ZW07bGVmdDouMDYyNWVtO3dpZHRoOjB9NTQle3RvcDouMTI1ZW07bGVmdDouMTI1ZW07d2lkdGg6MH03MCV7dG9wOi42MjVlbTtsZWZ0Oi0uMjVlbTt3aWR0aDoxLjYyNWVtfTg0JXt0b3A6MS4wNjI1ZW07bGVmdDouNzVlbTt3aWR0aDouNWVtfTEwMCV7dG9wOjEuMTI1ZW07bGVmdDouMTg3NWVtO3dpZHRoOi43NWVtfX1ALXdlYmtpdC1rZXlmcmFtZXMgc3dhbDItdG9hc3QtYW5pbWF0ZS1zdWNjZXNzLWxpbmUtbG9uZ3swJXt0b3A6MS42MjVlbTtyaWdodDoxLjM3NWVtO3dpZHRoOjB9NjUle3RvcDoxLjI1ZW07cmlnaHQ6LjkzNzVlbTt3aWR0aDowfTg0JXt0b3A6LjkzNzVlbTtyaWdodDowO3dpZHRoOjEuMTI1ZW19MTAwJXt0b3A6LjkzNzVlbTtyaWdodDouMTg3NWVtO3dpZHRoOjEuMzc1ZW19fUBrZXlmcmFtZXMgc3dhbDItdG9hc3QtYW5pbWF0ZS1zdWNjZXNzLWxpbmUtbG9uZ3swJXt0b3A6MS42MjVlbTtyaWdodDoxLjM3NWVtO3dpZHRoOjB9NjUle3RvcDoxLjI1ZW07cmlnaHQ6LjkzNzVlbTt3aWR0aDowfTg0JXt0b3A6LjkzNzVlbTtyaWdodDowO3dpZHRoOjEuMTI1ZW19MTAwJXt0b3A6LjkzNzVlbTtyaWdodDouMTg3NWVtO3dpZHRoOjEuMzc1ZW19fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi1zaG93ezAley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKC43KTt0cmFuc2Zvcm06c2NhbGUoLjcpfTQ1JXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxLjA1KTt0cmFuc2Zvcm06c2NhbGUoMS4wNSl9ODAley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKC45NSk7dHJhbnNmb3JtOnNjYWxlKC45NSl9MTAwJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSl9fUBrZXlmcmFtZXMgc3dhbDItc2hvd3swJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSguNyk7dHJhbnNmb3JtOnNjYWxlKC43KX00NSV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMS4wNSk7dHJhbnNmb3JtOnNjYWxlKDEuMDUpfTgwJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSguOTUpO3RyYW5zZm9ybTpzY2FsZSguOTUpfTEwMCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMSk7dHJhbnNmb3JtOnNjYWxlKDEpfX1ALXdlYmtpdC1rZXlmcmFtZXMgc3dhbDItaGlkZXswJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSk7b3BhY2l0eToxfTEwMCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoLjUpO3RyYW5zZm9ybTpzY2FsZSguNSk7b3BhY2l0eTowfX1Aa2V5ZnJhbWVzIHN3YWwyLWhpZGV7MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMSk7dHJhbnNmb3JtOnNjYWxlKDEpO29wYWNpdHk6MX0xMDAley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKC41KTt0cmFuc2Zvcm06c2NhbGUoLjUpO29wYWNpdHk6MH19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLWFuaW1hdGUtc3VjY2Vzcy1saW5lLXRpcHswJXt0b3A6MS4xODc1ZW07bGVmdDouMDYyNWVtO3dpZHRoOjB9NTQle3RvcDoxLjA2MjVlbTtsZWZ0Oi4xMjVlbTt3aWR0aDowfTcwJXt0b3A6Mi4xODc1ZW07bGVmdDotLjM3NWVtO3dpZHRoOjMuMTI1ZW19ODQle3RvcDozZW07bGVmdDoxLjMxMjVlbTt3aWR0aDoxLjA2MjVlbX0xMDAle3RvcDoyLjgxMjVlbTtsZWZ0Oi44NzVlbTt3aWR0aDoxLjU2MjVlbX19QGtleWZyYW1lcyBzd2FsMi1hbmltYXRlLXN1Y2Nlc3MtbGluZS10aXB7MCV7dG9wOjEuMTg3NWVtO2xlZnQ6LjA2MjVlbTt3aWR0aDowfTU0JXt0b3A6MS4wNjI1ZW07bGVmdDouMTI1ZW07d2lkdGg6MH03MCV7dG9wOjIuMTg3NWVtO2xlZnQ6LS4zNzVlbTt3aWR0aDozLjEyNWVtfTg0JXt0b3A6M2VtO2xlZnQ6MS4zMTI1ZW07d2lkdGg6MS4wNjI1ZW19MTAwJXt0b3A6Mi44MTI1ZW07bGVmdDouODc1ZW07d2lkdGg6MS41NjI1ZW19fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi1hbmltYXRlLXN1Y2Nlc3MtbGluZS1sb25nezAle3RvcDozLjM3NWVtO3JpZ2h0OjIuODc1ZW07d2lkdGg6MH02NSV7dG9wOjMuMzc1ZW07cmlnaHQ6Mi44NzVlbTt3aWR0aDowfTg0JXt0b3A6Mi4xODc1ZW07cmlnaHQ6MDt3aWR0aDozLjQzNzVlbX0xMDAle3RvcDoyLjM3NWVtO3JpZ2h0Oi41ZW07d2lkdGg6Mi45Mzc1ZW19fUBrZXlmcmFtZXMgc3dhbDItYW5pbWF0ZS1zdWNjZXNzLWxpbmUtbG9uZ3swJXt0b3A6My4zNzVlbTtyaWdodDoyLjg3NWVtO3dpZHRoOjB9NjUle3RvcDozLjM3NWVtO3JpZ2h0OjIuODc1ZW07d2lkdGg6MH04NCV7dG9wOjIuMTg3NWVtO3JpZ2h0OjA7d2lkdGg6My40Mzc1ZW19MTAwJXt0b3A6Mi4zNzVlbTtyaWdodDouNWVtO3dpZHRoOjIuOTM3NWVtfX1ALXdlYmtpdC1rZXlmcmFtZXMgc3dhbDItcm90YXRlLXN1Y2Nlc3MtY2lyY3VsYXItbGluZXswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyl9NSV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpfTEyJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQwNWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtNDA1ZGVnKX0xMDAley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgtNDA1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKC00MDVkZWcpfX1Aa2V5ZnJhbWVzIHN3YWwyLXJvdGF0ZS1zdWNjZXNzLWNpcmN1bGFyLWxpbmV7MCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpfTUley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKX0xMiV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC00MDVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoLTQwNWRlZyl9MTAwJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQwNWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtNDA1ZGVnKX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLWFuaW1hdGUtZXJyb3IteC1tYXJrezAle21hcmdpbi10b3A6MS42MjVlbTstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSguNCk7dHJhbnNmb3JtOnNjYWxlKC40KTtvcGFjaXR5OjB9NTAle21hcmdpbi10b3A6MS42MjVlbTstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSguNCk7dHJhbnNmb3JtOnNjYWxlKC40KTtvcGFjaXR5OjB9ODAle21hcmdpbi10b3A6LS4zNzVlbTstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxLjE1KTt0cmFuc2Zvcm06c2NhbGUoMS4xNSl9MTAwJXttYXJnaW4tdG9wOjA7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMSk7dHJhbnNmb3JtOnNjYWxlKDEpO29wYWNpdHk6MX19QGtleWZyYW1lcyBzd2FsMi1hbmltYXRlLWVycm9yLXgtbWFya3swJXttYXJnaW4tdG9wOjEuNjI1ZW07LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoLjQpO3RyYW5zZm9ybTpzY2FsZSguNCk7b3BhY2l0eTowfTUwJXttYXJnaW4tdG9wOjEuNjI1ZW07LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoLjQpO3RyYW5zZm9ybTpzY2FsZSguNCk7b3BhY2l0eTowfTgwJXttYXJnaW4tdG9wOi0uMzc1ZW07LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMS4xNSk7dHJhbnNmb3JtOnNjYWxlKDEuMTUpfTEwMCV7bWFyZ2luLXRvcDowOy13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpO3RyYW5zZm9ybTpzY2FsZSgxKTtvcGFjaXR5OjF9fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi1hbmltYXRlLWVycm9yLWljb257MCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlWCgxMDBkZWcpO3RyYW5zZm9ybTpyb3RhdGVYKDEwMGRlZyk7b3BhY2l0eTowfTEwMCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlWCgwKTt0cmFuc2Zvcm06cm90YXRlWCgwKTtvcGFjaXR5OjF9fUBrZXlmcmFtZXMgc3dhbDItYW5pbWF0ZS1lcnJvci1pY29uezAley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZVgoMTAwZGVnKTt0cmFuc2Zvcm06cm90YXRlWCgxMDBkZWcpO29wYWNpdHk6MH0xMDAley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZVgoMCk7dHJhbnNmb3JtOnJvdGF0ZVgoMCk7b3BhY2l0eToxfX1ALXdlYmtpdC1rZXlmcmFtZXMgc3dhbDItcm90YXRlLWxvYWRpbmd7MCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDApO3RyYW5zZm9ybTpyb3RhdGUoMCl9MTAwJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDM2MGRlZyl9fUBrZXlmcmFtZXMgc3dhbDItcm90YXRlLWxvYWRpbmd7MCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDApO3RyYW5zZm9ybTpyb3RhdGUoMCl9MTAwJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDM2MGRlZyl9fWJvZHkuc3dhbDItc2hvd246bm90KC5zd2FsMi1uby1iYWNrZHJvcCk6bm90KC5zd2FsMi10b2FzdC1zaG93bil7b3ZlcmZsb3c6aGlkZGVufWJvZHkuc3dhbDItaGVpZ2h0LWF1dG97aGVpZ2h0OmF1dG8haW1wb3J0YW50fWJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lcnt0b3A6YXV0bztyaWdodDphdXRvO2JvdHRvbTphdXRvO2xlZnQ6YXV0bzttYXgtd2lkdGg6Y2FsYygxMDAlIC0gLjYyNWVtICogMik7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudCFpbXBvcnRhbnR9Ym9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyPi5zd2FsMi1tb2RhbHtib3gtc2hhZG93OjAgMCAxMHB4IHJnYmEoMCwwLDAsLjQpfWJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3B7dG9wOjA7bGVmdDo1MCU7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKX1ib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItdG9wLWxlZnQsYm9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1zdGFydHt0b3A6MDtsZWZ0OjB9Ym9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1lbmQsYm9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1yaWdodHt0b3A6MDtyaWdodDowfWJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXJ7dG9wOjUwJTtsZWZ0OjUwJTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSl9Ym9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlci1sZWZ0LGJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItc3RhcnR7dG9wOjUwJTtsZWZ0OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKX1ib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLWVuZCxib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLXJpZ2h0e3RvcDo1MCU7cmlnaHQ6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpfWJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b217Ym90dG9tOjA7bGVmdDo1MCU7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKX1ib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLWxlZnQsYm9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1zdGFydHtib3R0b206MDtsZWZ0OjB9Ym9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1lbmQsYm9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1yaWdodHtyaWdodDowO2JvdHRvbTowfUBtZWRpYSBwcmludHtib2R5LnN3YWwyLXNob3duOm5vdCguc3dhbDItbm8tYmFja2Ryb3ApOm5vdCguc3dhbDItdG9hc3Qtc2hvd24pe292ZXJmbG93LXk6c2Nyb2xsIWltcG9ydGFudH1ib2R5LnN3YWwyLXNob3duOm5vdCguc3dhbDItbm8tYmFja2Ryb3ApOm5vdCguc3dhbDItdG9hc3Qtc2hvd24pPlthcmlhLWhpZGRlbj10cnVlXXtkaXNwbGF5Om5vbmV9Ym9keS5zd2FsMi1zaG93bjpub3QoLnN3YWwyLW5vLWJhY2tkcm9wKTpub3QoLnN3YWwyLXRvYXN0LXNob3duKSAuc3dhbDItY29udGFpbmVye3Bvc2l0aW9uOnN0YXRpYyFpbXBvcnRhbnR9fWJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lcntiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fWJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3B7dG9wOjA7cmlnaHQ6YXV0bztib3R0b206YXV0bztsZWZ0OjUwJTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpfWJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3AtZW5kLGJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3AtcmlnaHR7dG9wOjA7cmlnaHQ6MDtib3R0b206YXV0bztsZWZ0OmF1dG99Ym9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1sZWZ0LGJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3Atc3RhcnR7dG9wOjA7cmlnaHQ6YXV0bztib3R0b206YXV0bztsZWZ0OjB9Ym9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlci1sZWZ0LGJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItc3RhcnR7dG9wOjUwJTtyaWdodDphdXRvO2JvdHRvbTphdXRvO2xlZnQ6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpfWJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXJ7dG9wOjUwJTtyaWdodDphdXRvO2JvdHRvbTphdXRvO2xlZnQ6NTAlOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLC01MCUpO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKX1ib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLWVuZCxib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLXJpZ2h0e3RvcDo1MCU7cmlnaHQ6MDtib3R0b206YXV0bztsZWZ0OmF1dG87LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKX1ib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLWxlZnQsYm9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1zdGFydHt0b3A6YXV0bztyaWdodDphdXRvO2JvdHRvbTowO2xlZnQ6MH1ib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9te3RvcDphdXRvO3JpZ2h0OmF1dG87Ym90dG9tOjA7bGVmdDo1MCU7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKX1ib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLWVuZCxib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLXJpZ2h0e3RvcDphdXRvO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDphdXRvfWJvZHkuc3dhbDItdG9hc3QtY29sdW1uIC5zd2FsMi10b2FzdHstd2Via2l0LWJveC1vcmllbnQ6dmVydGljYWw7LXdlYmtpdC1ib3gtZGlyZWN0aW9uOm5vcm1hbDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47LXdlYmtpdC1ib3gtYWxpZ246c3RyZXRjaDthbGlnbi1pdGVtczpzdHJldGNofWJvZHkuc3dhbDItdG9hc3QtY29sdW1uIC5zd2FsMi10b2FzdCAuc3dhbDItYWN0aW9uc3std2Via2l0LWJveC1mbGV4OjE7ZmxleDoxO2FsaWduLXNlbGY6c3RyZXRjaDtoZWlnaHQ6Mi4yZW07bWFyZ2luLXRvcDouMzEyNWVtfWJvZHkuc3dhbDItdG9hc3QtY29sdW1uIC5zd2FsMi10b2FzdCAuc3dhbDItbG9hZGluZ3std2Via2l0LWJveC1wYWNrOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfWJvZHkuc3dhbDItdG9hc3QtY29sdW1uIC5zd2FsMi10b2FzdCAuc3dhbDItaW5wdXR7aGVpZ2h0OjJlbTttYXJnaW46LjMxMjVlbSBhdXRvO2ZvbnQtc2l6ZToxZW19Ym9keS5zd2FsMi10b2FzdC1jb2x1bW4gLnN3YWwyLXRvYXN0IC5zd2FsMi12YWxpZGF0aW9uLW1lc3NhZ2V7Zm9udC1zaXplOjFlbX1cIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCdlczYtcHJvbWlzZScpLlByb21pc2U7XG4iLCIvKiFcbiAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG4gKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXG4gKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc3RlZmFucGVubmVyL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG4gKiBAdmVyc2lvbiAgIDMuMy4xXG4gKi9cblxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgICAoZ2xvYmFsLkVTNlByb21pc2UgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG59XG5cbnZhciBfaXNBcnJheSA9IHVuZGVmaW5lZDtcbmlmICghQXJyYXkuaXNBcnJheSkge1xuICBfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcbn0gZWxzZSB7XG4gIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbn1cblxudmFyIGlzQXJyYXkgPSBfaXNBcnJheTtcblxudmFyIGxlbiA9IDA7XG52YXIgdmVydHhOZXh0ID0gdW5kZWZpbmVkO1xudmFyIGN1c3RvbVNjaGVkdWxlckZuID0gdW5kZWZpbmVkO1xuXG52YXIgYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICBxdWV1ZVtsZW5dID0gY2FsbGJhY2s7XG4gIHF1ZXVlW2xlbiArIDFdID0gYXJnO1xuICBsZW4gKz0gMjtcbiAgaWYgKGxlbiA9PT0gMikge1xuICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cbiAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cbiAgICBpZiAoY3VzdG9tU2NoZWR1bGVyRm4pIHtcbiAgICAgIGN1c3RvbVNjaGVkdWxlckZuKGZsdXNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVGbHVzaCgpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcbiAgY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xufVxuXG5mdW5jdGlvbiBzZXRBc2FwKGFzYXBGbikge1xuICBhc2FwID0gYXNhcEZuO1xufVxuXG52YXIgYnJvd3NlcldpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkO1xudmFyIGJyb3dzZXJHbG9iYWwgPSBicm93c2VyV2luZG93IHx8IHt9O1xudmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbnZhciBpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICh7fSkudG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXG4vLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxudmFyIGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJztcblxuLy8gbm9kZVxuZnVuY3Rpb24gdXNlTmV4dFRpY2soKSB7XG4gIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gIH07XG59XG5cbi8vIHZlcnR4XG5mdW5jdGlvbiB1c2VWZXJ0eFRpbWVyKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZlcnR4TmV4dChmbHVzaCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7XG4gIHZhciBpdGVyYXRpb25zID0gMDtcbiAgdmFyIG9ic2VydmVyID0gbmV3IEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGZsdXNoKTtcbiAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gIG9ic2VydmVyLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgbm9kZS5kYXRhID0gaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDI7XG4gIH07XG59XG5cbi8vIHdlYiB3b3JrZXJcbmZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuICB9O1xufVxuXG5mdW5jdGlvbiB1c2VTZXRUaW1lb3V0KCkge1xuICAvLyBTdG9yZSBzZXRUaW1lb3V0IHJlZmVyZW5jZSBzbyBlczYtcHJvbWlzZSB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcbiAgLy8gb3RoZXIgY29kZSBtb2RpZnlpbmcgc2V0VGltZW91dCAobGlrZSBzaW5vbi51c2VGYWtlVGltZXJzKCkpXG4gIHZhciBnbG9iYWxTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2xvYmFsU2V0VGltZW91dChmbHVzaCwgMSk7XG4gIH07XG59XG5cbnZhciBxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcbmZ1bmN0aW9uIGZsdXNoKCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gcXVldWVbaV07XG4gICAgdmFyIGFyZyA9IHF1ZXVlW2kgKyAxXTtcblxuICAgIGNhbGxiYWNrKGFyZyk7XG5cbiAgICBxdWV1ZVtpXSA9IHVuZGVmaW5lZDtcbiAgICBxdWV1ZVtpICsgMV0gPSB1bmRlZmluZWQ7XG4gIH1cblxuICBsZW4gPSAwO1xufVxuXG5mdW5jdGlvbiBhdHRlbXB0VmVydHgoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHIgPSByZXF1aXJlO1xuICAgIHZhciB2ZXJ0eCA9IHIoJ3ZlcnR4Jyk7XG4gICAgdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcbiAgICByZXR1cm4gdXNlVmVydHhUaW1lcigpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbiAgfVxufVxuXG52YXIgc2NoZWR1bGVGbHVzaCA9IHVuZGVmaW5lZDtcbi8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG5pZiAoaXNOb2RlKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VOZXh0VGljaygpO1xufSBlbHNlIGlmIChCcm93c2VyTXV0YXRpb25PYnNlcnZlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTXV0YXRpb25PYnNlcnZlcigpO1xufSBlbHNlIGlmIChpc1dvcmtlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTWVzc2FnZUNoYW5uZWwoKTtcbn0gZWxzZSBpZiAoYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSBhdHRlbXB0VmVydHgoKTtcbn0gZWxzZSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VTZXRUaW1lb3V0KCk7XG59XG5cbmZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7XG5cbiAgdmFyIHBhcmVudCA9IHRoaXM7XG5cbiAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XG5cbiAgaWYgKGNoaWxkW1BST01JU0VfSURdID09PSB1bmRlZmluZWQpIHtcbiAgICBtYWtlUHJvbWlzZShjaGlsZCk7XG4gIH1cblxuICB2YXIgX3N0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblxuICBpZiAoX3N0YXRlKSB7XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjYWxsYmFjayA9IF9hcmd1bWVudHNbX3N0YXRlIC0gMV07XG4gICAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUNhbGxiYWNrKF9zdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCBwYXJlbnQuX3Jlc3VsdCk7XG4gICAgICB9KTtcbiAgICB9KSgpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG4gIH1cblxuICByZXR1cm4gY2hpbGQ7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIHJlc29sdmVkIHdpdGggdGhlXG4gIHBhc3NlZCBgdmFsdWVgLiBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVzb2x2ZSgxKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoMSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZXNvbHZlXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBbnl9IHZhbHVlIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuXG4gIGB2YWx1ZWBcbiovXG5mdW5jdGlvbiByZXNvbHZlKG9iamVjdCkge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3Rvcikge1xuICAgIHJldHVybiBvYmplY3Q7XG4gIH1cblxuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcbiAgX3Jlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbnZhciBQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDE2KTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnZhciBQRU5ESU5HID0gdm9pZCAwO1xudmFyIEZVTEZJTExFRCA9IDE7XG52YXIgUkVKRUNURUQgPSAyO1xuXG52YXIgR0VUX1RIRU5fRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTtcblxuZnVuY3Rpb24gc2VsZkZ1bGZpbGxtZW50KCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XG59XG5cbmZ1bmN0aW9uIGNhbm5vdFJldHVybk93bigpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGhlbihwcm9taXNlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBHRVRfVEhFTl9FUlJPUi5lcnJvciA9IGVycm9yO1xuICAgIHJldHVybiBHRVRfVEhFTl9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlUaGVuKHRoZW4sIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcbiAgdHJ5IHtcbiAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4pIHtcbiAgYXNhcChmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHZhciBzZWFsZWQgPSBmYWxzZTtcbiAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4sIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuXG4gICAgICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSwgJ1NldHRsZTogJyArIChwcm9taXNlLl9sYWJlbCB8fCAnIHVua25vd24gcHJvbWlzZScpKTtcblxuICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgX3JlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgfVxuICB9LCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHtcbiAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgX3JlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIHtcbiAgICBzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQpIHtcbiAgaWYgKG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IgPT09IHByb21pc2UuY29uc3RydWN0b3IgJiYgdGhlbiQkID09PSB0aGVuICYmIG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gcmVzb2x2ZSkge1xuICAgIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0aGVuJCQgPT09IEdFVF9USEVOX0VSUk9SKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIEdFVF9USEVOX0VSUk9SLmVycm9yKTtcbiAgICB9IGVsc2UgaWYgKHRoZW4kJCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbih0aGVuJCQpKSB7XG4gICAgICBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgX3JlamVjdChwcm9taXNlLCBzZWxmRnVsZmlsbG1lbnQoKSk7XG4gIH0gZWxzZSBpZiAob2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlLCBnZXRUaGVuKHZhbHVlKSk7XG4gIH0gZWxzZSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XG4gIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XG4gICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuICB9XG5cbiAgcHVibGlzaChwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gZnVsZmlsbChwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcbiAgcHJvbWlzZS5fc3RhdGUgPSBGVUxGSUxMRUQ7XG5cbiAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgIGFzYXAocHVibGlzaCwgcHJvbWlzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX3JlamVjdChwcm9taXNlLCByZWFzb24pIHtcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHByb21pc2UuX3N0YXRlID0gUkVKRUNURUQ7XG4gIHByb21pc2UuX3Jlc3VsdCA9IHJlYXNvbjtcblxuICBhc2FwKHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIF9zdWJzY3JpYmVycyA9IHBhcmVudC5fc3Vic2NyaWJlcnM7XG4gIHZhciBsZW5ndGggPSBfc3Vic2NyaWJlcnMubGVuZ3RoO1xuXG4gIHBhcmVudC5fb25lcnJvciA9IG51bGw7XG5cbiAgX3N1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdID0gb25SZWplY3Rpb247XG5cbiAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwYXJlbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2gocHJvbWlzZSkge1xuICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcbiAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcblxuICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNoaWxkID0gdW5kZWZpbmVkLFxuICAgICAgY2FsbGJhY2sgPSB1bmRlZmluZWQsXG4gICAgICBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG4gICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2soZGV0YWlsKTtcbiAgICB9XG4gIH1cblxuICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xufVxuXG5mdW5jdGlvbiBFcnJvck9iamVjdCgpIHtcbiAgdGhpcy5lcnJvciA9IG51bGw7XG59XG5cbnZhciBUUllfQ0FUQ0hfRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTtcblxuZnVuY3Rpb24gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xuICB0cnkge1xuICAgIHJldHVybiBjYWxsYmFjayhkZXRhaWwpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcbiAgICByZXR1cm4gVFJZX0NBVENIX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgdmFyIGhhc0NhbGxiYWNrID0gaXNGdW5jdGlvbihjYWxsYmFjayksXG4gICAgICB2YWx1ZSA9IHVuZGVmaW5lZCxcbiAgICAgIGVycm9yID0gdW5kZWZpbmVkLFxuICAgICAgc3VjY2VlZGVkID0gdW5kZWZpbmVkLFxuICAgICAgZmFpbGVkID0gdW5kZWZpbmVkO1xuXG4gIGlmIChoYXNDYWxsYmFjaykge1xuICAgIHZhbHVlID0gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCk7XG5cbiAgICBpZiAodmFsdWUgPT09IFRSWV9DQVRDSF9FUlJPUikge1xuICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7XG4gICAgICB2YWx1ZSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIGNhbm5vdFJldHVybk93bigpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSBkZXRhaWw7XG4gICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIC8vIG5vb3BcbiAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcbiAgICAgIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGZhaWxlZCkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBGVUxGSUxMRUQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gUkVKRUNURUQpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcbiAgdHJ5IHtcbiAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSkge1xuICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBfcmVqZWN0KHByb21pc2UsIGUpO1xuICB9XG59XG5cbnZhciBpZCA9IDA7XG5mdW5jdGlvbiBuZXh0SWQoKSB7XG4gIHJldHVybiBpZCsrO1xufVxuXG5mdW5jdGlvbiBtYWtlUHJvbWlzZShwcm9taXNlKSB7XG4gIHByb21pc2VbUFJPTUlTRV9JRF0gPSBpZCsrO1xuICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xufVxuXG5mdW5jdGlvbiBFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcblxuICBpZiAoIXRoaXMucHJvbWlzZVtQUk9NSVNFX0lEXSkge1xuICAgIG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG4gIH1cblxuICBpZiAoaXNBcnJheShpbnB1dCkpIHtcbiAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xuICAgIHRoaXMubGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblxuICAgIHRoaXMuX3Jlc3VsdCA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7XG5cbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XG4gICAgICB0aGlzLl9lbnVtZXJhdGUoKTtcbiAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIF9yZWplY3QodGhpcy5wcm9taXNlLCB2YWxpZGF0aW9uRXJyb3IoKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yKCdBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXknKTtcbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgdmFyIF9pbnB1dCA9IHRoaXMuX2lucHV0O1xuXG4gIGZvciAodmFyIGkgPSAwOyB0aGlzLl9zdGF0ZSA9PT0gUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB0aGlzLl9lYWNoRW50cnkoX2lucHV0W2ldLCBpKTtcbiAgfVxufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uIChlbnRyeSwgaSkge1xuICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7XG4gIHZhciByZXNvbHZlJCQgPSBjLnJlc29sdmU7XG5cbiAgaWYgKHJlc29sdmUkJCA9PT0gcmVzb2x2ZSkge1xuICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpO1xuXG4gICAgaWYgKF90aGVuID09PSB0aGVuICYmIGVudHJ5Ll9zdGF0ZSAhPT0gUEVORElORykge1xuICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoZW4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XG4gICAgfSBlbHNlIGlmIChjID09PSBQcm9taXNlKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKG5vb3ApO1xuICAgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgX3RoZW4pO1xuICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHByb21pc2UsIGkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24gKHJlc29sdmUkJCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSQkKGVudHJ5KTtcbiAgICAgIH0pLCBpKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fd2lsbFNldHRsZUF0KHJlc29sdmUkJChlbnRyeSksIGkpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fc2V0dGxlZEF0ID0gZnVuY3Rpb24gKHN0YXRlLCBpLCB2YWx1ZSkge1xuICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcblxuICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IFBFTkRJTkcpIHtcbiAgICB0aGlzLl9yZW1haW5pbmctLTtcblxuICAgIGlmIChzdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24gKHByb21pc2UsIGkpIHtcbiAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXG4gIHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoRlVMRklMTEVELCBpLCB2YWx1ZSk7XG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KFJFSkVDVEVELCBpLCByZWFzb24pO1xuICB9KTtcbn07XG5cbi8qKlxuICBgUHJvbWlzZS5hbGxgIGFjY2VwdHMgYW4gYXJyYXkgb2YgcHJvbWlzZXMsIGFuZCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2hcbiAgaXMgZnVsZmlsbGVkIHdpdGggYW4gYXJyYXkgb2YgZnVsZmlsbG1lbnQgdmFsdWVzIGZvciB0aGUgcGFzc2VkIHByb21pc2VzLCBvclxuICByZWplY3RlZCB3aXRoIHRoZSByZWFzb24gb2YgdGhlIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIGJlIHJlamVjdGVkLiBJdCBjYXN0cyBhbGxcbiAgZWxlbWVudHMgb2YgdGhlIHBhc3NlZCBpdGVyYWJsZSB0byBwcm9taXNlcyBhcyBpdCBydW5zIHRoaXMgYWxnb3JpdGhtLlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSByZXNvbHZlKDIpO1xuICBsZXQgcHJvbWlzZTMgPSByZXNvbHZlKDMpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gVGhlIGFycmF5IGhlcmUgd291bGQgYmUgWyAxLCAyLCAzIF07XG4gIH0pO1xuICBgYGBcblxuICBJZiBhbnkgb2YgdGhlIGBwcm9taXNlc2AgZ2l2ZW4gdG8gYGFsbGAgYXJlIHJlamVjdGVkLCB0aGUgZmlyc3QgcHJvbWlzZVxuICB0aGF0IGlzIHJlamVjdGVkIHdpbGwgYmUgZ2l2ZW4gYXMgYW4gYXJndW1lbnQgdG8gdGhlIHJldHVybmVkIHByb21pc2VzJ3NcbiAgcmVqZWN0aW9uIGhhbmRsZXIuIEZvciBleGFtcGxlOlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSByZWplY3QobmV3IEVycm9yKFwiMlwiKSk7XG4gIGxldCBwcm9taXNlMyA9IHJlamVjdChuZXcgRXJyb3IoXCIzXCIpKTtcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cbiAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zIGJlY2F1c2UgdGhlcmUgYXJlIHJlamVjdGVkIHByb21pc2VzIVxuICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgIC8vIGVycm9yLm1lc3NhZ2UgPT09IFwiMlwiXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIGFsbFxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IGVudHJpZXMgYXJyYXkgb2YgcHJvbWlzZXNcbiAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcgdGhlIHByb21pc2UuXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCBgcHJvbWlzZXNgIGhhdmUgYmVlblxuICBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29tZSByZWplY3RlZC5cbiAgQHN0YXRpY1xuKi9cbmZ1bmN0aW9uIGFsbChlbnRyaWVzKSB7XG4gIHJldHVybiBuZXcgRW51bWVyYXRvcih0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xufVxuXG4vKipcbiAgYFByb21pc2UucmFjZWAgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoIGlzIHNldHRsZWQgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZVxuICBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBzZXR0bGUuXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDInKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyByZXN1bHQgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgaXQgd2FzIHJlc29sdmVkIGJlZm9yZSBwcm9taXNlMVxuICAgIC8vIHdhcyByZXNvbHZlZC5cbiAgfSk7XG4gIGBgYFxuXG4gIGBQcm9taXNlLnJhY2VgIGlzIGRldGVybWluaXN0aWMgaW4gdGhhdCBvbmx5IHRoZSBzdGF0ZSBvZiB0aGUgZmlyc3RcbiAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFtcGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZVxuICBgcHJvbWlzZXNgIGFycmF5IGFyZ3VtZW50IGFyZSByZXNvbHZlZCwgYnV0IHRoZSBmaXJzdCBzZXR0bGVkIHByb21pc2UgaGFzXG4gIGJlY29tZSByZWplY3RlZCBiZWZvcmUgdGhlIG90aGVyIHByb21pc2VzIGJlY2FtZSBmdWxmaWxsZWQsIHRoZSByZXR1cm5lZFxuICBwcm9taXNlIHdpbGwgYmVjb21lIHJlamVjdGVkOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ3Byb21pc2UgMicpKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVuc1xuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQgYmVmb3JlXG4gICAgLy8gcHJvbWlzZSAxIGJlY2FtZSBmdWxmaWxsZWRcbiAgfSk7XG4gIGBgYFxuXG4gIEFuIGV4YW1wbGUgcmVhbC13b3JsZCB1c2UgY2FzZSBpcyBpbXBsZW1lbnRpbmcgdGltZW91dHM6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBQcm9taXNlLnJhY2UoW2FqYXgoJ2Zvby5qc29uJyksIHRpbWVvdXQoNTAwMCldKVxuICBgYGBcblxuICBAbWV0aG9kIHJhY2VcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBwcm9taXNlcyBhcnJheSBvZiBwcm9taXNlcyB0byBvYnNlcnZlXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRsZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWRcbiAgcHJvbWlzZSB0byBzZXR0bGUuXG4qL1xuZnVuY3Rpb24gcmFjZShlbnRyaWVzKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKCFpc0FycmF5KGVudHJpZXMpKSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAoXywgcmVqZWN0KSB7XG4gICAgICByZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yZWplY3RgIHJldHVybnMgYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIHBhc3NlZCBgcmVhc29uYC5cbiAgSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgcmVqZWN0XG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBbnl9IHJlYXNvbiB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aC5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgZ2l2ZW4gYHJlYXNvbmAuXG4qL1xuZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcbiAgX3JlamVjdChwcm9taXNlLCByZWFzb24pO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xufVxuXG5mdW5jdGlvbiBuZWVkc05ldygpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcbn1cblxuLyoqXG4gIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcbiAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcbiAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG4gIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXG4gIFRlcm1pbm9sb2d5XG4gIC0tLS0tLS0tLS0tXG5cbiAgLSBgcHJvbWlzZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJlaGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi5cbiAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLlxuICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG4gIC0gYGV4Y2VwdGlvbmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cgc3RhdGVtZW50LlxuICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuXG4gIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG4gIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblxuICBQcm9taXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZhbHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZFxuICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxuXG4gIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYVxuICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG4gIHNldHRsZWQgc3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IHJlamVjdHMgd2lsbFxuICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsXG4gIGl0c2VsZiBmdWxmaWxsLlxuXG5cbiAgQmFzaWMgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLVxuXG4gIGBgYGpzXG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgLy8gb24gc3VjY2Vzc1xuICAgIHJlc29sdmUodmFsdWUpO1xuXG4gICAgLy8gb24gZmFpbHVyZVxuICAgIHJlamVjdChyZWFzb24pO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyBvbiByZWplY3Rpb25cbiAgfSk7XG4gIGBgYFxuXG4gIEFkdmFuY2VkIFVzYWdlOlxuICAtLS0tLS0tLS0tLS0tLS1cblxuICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG4gIGBYTUxIdHRwUmVxdWVzdGBzLlxuXG4gIGBgYGpzXG4gIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICB4aHIuc2VuZCgpO1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcbiAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0IGNvbXBvc2FibGUgcHJpbWl0aXZlcy5cblxuICBgYGBqc1xuICBQcm9taXNlLmFsbChbXG4gICAgZ2V0SlNPTignL3Bvc3RzJyksXG4gICAgZ2V0SlNPTignL2NvbW1lbnRzJylcbiAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cbiAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9KTtcbiAgYGBgXG5cbiAgQGNsYXNzIFByb21pc2VcbiAgQHBhcmFtIHtmdW5jdGlvbn0gcmVzb2x2ZXJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAY29uc3RydWN0b3JcbiovXG5mdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKSB7XG4gIHRoaXNbUFJPTUlTRV9JRF0gPSBuZXh0SWQoKTtcbiAgdGhpcy5fcmVzdWx0ID0gdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cbiAgaWYgKG5vb3AgIT09IHJlc29sdmVyKSB7XG4gICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIG5lZWRzUmVzb2x2ZXIoKTtcbiAgICB0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSA/IGluaXRpYWxpemVQcm9taXNlKHRoaXMsIHJlc29sdmVyKSA6IG5lZWRzTmV3KCk7XG4gIH1cbn1cblxuUHJvbWlzZS5hbGwgPSBhbGw7XG5Qcm9taXNlLnJhY2UgPSByYWNlO1xuUHJvbWlzZS5yZXNvbHZlID0gcmVzb2x2ZTtcblByb21pc2UucmVqZWN0ID0gcmVqZWN0O1xuUHJvbWlzZS5fc2V0U2NoZWR1bGVyID0gc2V0U2NoZWR1bGVyO1xuUHJvbWlzZS5fc2V0QXNhcCA9IHNldEFzYXA7XG5Qcm9taXNlLl9hc2FwID0gYXNhcDtcblxuUHJvbWlzZS5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBQcm9taXNlLFxuXG4gIC8qKlxuICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuICAgIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXG4gICAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlXG4gICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIENoYWluaW5nXG4gICAgLS0tLS0tLS1cbiAgXG4gICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcbiAgICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XG4gICAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICByZXR1cm4gdXNlci5uYW1lO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkge1xuICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXG4gICAgfSk7XG4gIFxuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gaWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jy5cbiAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuICAgIH0pO1xuICAgIGBgYFxuICAgIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBBc3NpbWlsYXRpb25cbiAgICAtLS0tLS0tLS0tLS1cbiAgXG4gICAgU29tZXRpbWVzIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byBwcm9wYWdhdGUgdG8gYSBkb3duc3RyZWFtIHByb21pc2UgY2FuIG9ubHkgYmVcbiAgICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG4gICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcbiAgICB1bnRpbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBzZXR0bGVkLiBUaGlzIGlzIGNhbGxlZCAqYXNzaW1pbGF0aW9uKi5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgcmVqZWN0cywgd2UnbGwgaGF2ZSB0aGUgcmVhc29uIGhlcmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgU2ltcGxlIEV4YW1wbGVcbiAgICAtLS0tLS0tLS0tLS0tLVxuICBcbiAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBsZXQgcmVzdWx0O1xuICBcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfVxuICAgIGBgYFxuICBcbiAgICBFcnJiYWNrIEV4YW1wbGVcbiAgXG4gICAgYGBganNcbiAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgfVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBQcm9taXNlIEV4YW1wbGU7XG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEFkdmFuY2VkIEV4YW1wbGVcbiAgICAtLS0tLS0tLS0tLS0tLVxuICBcbiAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBsZXQgYXV0aG9yLCBib29rcztcbiAgXG4gICAgdHJ5IHtcbiAgICAgIGF1dGhvciA9IGZpbmRBdXRob3IoKTtcbiAgICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEVycmJhY2sgRXhhbXBsZVxuICBcbiAgICBgYGBqc1xuICBcbiAgICBmdW5jdGlvbiBmb3VuZEJvb2tzKGJvb2tzKSB7XG4gIFxuICAgIH1cbiAgXG4gICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcbiAgXG4gICAgfVxuICBcbiAgICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcbiAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFByb21pc2UgRXhhbXBsZTtcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGZpbmRBdXRob3IoKS5cbiAgICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XG4gICAgICAgIC8vIGZvdW5kIGJvb2tzXG4gICAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEBtZXRob2QgdGhlblxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZFxuICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuICB0aGVuOiB0aGVuLFxuXG4gIC8qKlxuICAgIGBjYXRjaGAgaXMgc2ltcGx5IHN1Z2FyIGZvciBgdGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uKWAgd2hpY2ggbWFrZXMgaXQgdGhlIHNhbWVcbiAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuICBcbiAgICBgYGBqc1xuICAgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpO1xuICAgIH1cbiAgXG4gICAgLy8gc3luY2hyb25vdXNcbiAgICB0cnkge1xuICAgICAgZmluZEF1dGhvcigpO1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgIH1cbiAgXG4gICAgLy8gYXN5bmMgd2l0aCBwcm9taXNlc1xuICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCBjYXRjaFxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG4gICdjYXRjaCc6IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikge1xuICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuICB9XG59O1xuXG5mdW5jdGlvbiBwb2x5ZmlsbCgpIHtcbiAgICB2YXIgbG9jYWwgPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbG9jYWwgPSBnbG9iYWw7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbG9jYWwgPSBzZWxmO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgUCA9IGxvY2FsLlByb21pc2U7XG5cbiAgICBpZiAoUCkge1xuICAgICAgICB2YXIgcHJvbWlzZVRvU3RyaW5nID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHByb21pc2VUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIHNpbGVudGx5IGlnbm9yZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcm9taXNlVG9TdHJpbmcgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2NhbC5Qcm9taXNlID0gUHJvbWlzZTtcbn1cblxucG9seWZpbGwoKTtcbi8vIFN0cmFuZ2UgY29tcGF0Li5cblByb21pc2UucG9seWZpbGwgPSBwb2x5ZmlsbDtcblByb21pc2UuUHJvbWlzZSA9IFByb21pc2U7XG5cbnJldHVybiBQcm9taXNlO1xuXG59KSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXM2LXByb21pc2UubWFwIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIi8qIChpZ25vcmVkKSAqLyIsInZhciB4aHIgPSByZXF1aXJlKCd4aHInKTtcclxuXHJcbnZhciBfbGFuZztcclxuXHJcbnZhciBfbXNnID0ge307XHJcblxyXG5mdW5jdGlvbiBnZXROYXZpZ2F0b3JMYW5ndWFnZSgpIHtcclxuICAgIHZhciBsYW5nID0gbmF2aWdhdG9yLmxhbmd1YWdlIHx8IG5hdmlnYXRvci51c2VyTGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLnN5c3RlbUxhbmd1YWdlO1xyXG4gICAgcmV0dXJuIGxhbmcuc3Vic3RyKDAsIDIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRMYW5ndWFnZShpbnB1dExhbmcsIGNhbGxiYWNrKSB7XHJcbiAgICBfbGFuZyA9IGlucHV0TGFuZztcclxuXHJcbiAgICAvLyDsnoXroKXrkJwg7Ja47Ja0IOyEpOyglSDqsJLsnbQg7JeG64qUIOqyveyasCwg67iM65287Jqw7KCAIOyWuOyWtCDshKTsoJXsnYQg6rCA7KC47Ji0XHJcbiAgICBpZiAoIV9sYW5nKSB7XHJcbiAgICAgICAgX2xhbmcgPSBnZXROYXZpZ2F0b3JMYW5ndWFnZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghX21zZ1tpbnB1dExhbmddKSB7XHJcbiAgICAgICAgbG9hZChpbnB1dExhbmcsIGNhbGxiYWNrKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZChpbnB1dExhbmcsIGNhbGxiYWNrKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIF9tc2cgPSByZXF1aXJlKFwiLi9qc29uL1wiICsgXCJtZXNzYWdlLlwiICsgaW5wdXRMYW5nICsgXCIuanNvblwiKTsgICAgICAgIFxyXG4gICAgICAgIHdpbmRvdy5LSUNBX0NPUlBVUyA9IF9tc2c7XHJcbiAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZS5tZXNzYWdlKTtcclxuICAgICAgICBjYWxsYmFjayhcIlRoZSBsYW5ndWFnZSBjb2RlOiAnXCIgKyBfbGFuZyArIFwiJyBpcyBub3Qgc3VwcG9ydGVkLlwiKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0KGlkKSB7XHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiVW5rbm93biBlcnJvci5cIjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbWVzc2FnZSA9IF9tc2cgPyBfbXNnW2lkXSA6IGlkO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UucmVwbGFjZShcInt9XCIsIGFyZ3VtZW50c1tpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1lc3NhZ2U7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgZ2V0OiBnZXQsXHJcbiAgICBzZXRMYW5ndWFnZTogc2V0TGFuZ3VhZ2VcclxufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIHdpbmRvdyA9IHJlcXVpcmUoXCJnbG9iYWwvd2luZG93XCIpXG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoXCJpcy1mdW5jdGlvblwiKVxudmFyIHBhcnNlSGVhZGVycyA9IHJlcXVpcmUoXCJwYXJzZS1oZWFkZXJzXCIpXG52YXIgeHRlbmQgPSByZXF1aXJlKFwieHRlbmRcIilcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVYSFJcbi8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdFxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGNyZWF0ZVhIUjtcbmNyZWF0ZVhIUi5YTUxIdHRwUmVxdWVzdCA9IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCB8fCBub29wXG5jcmVhdGVYSFIuWERvbWFpblJlcXVlc3QgPSBcIndpdGhDcmVkZW50aWFsc1wiIGluIChuZXcgY3JlYXRlWEhSLlhNTEh0dHBSZXF1ZXN0KCkpID8gY3JlYXRlWEhSLlhNTEh0dHBSZXF1ZXN0IDogd2luZG93LlhEb21haW5SZXF1ZXN0XG5cbmZvckVhY2hBcnJheShbXCJnZXRcIiwgXCJwdXRcIiwgXCJwb3N0XCIsIFwicGF0Y2hcIiwgXCJoZWFkXCIsIFwiZGVsZXRlXCJdLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgICBjcmVhdGVYSFJbbWV0aG9kID09PSBcImRlbGV0ZVwiID8gXCJkZWxcIiA6IG1ldGhvZF0gPSBmdW5jdGlvbih1cmksIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICAgIG9wdGlvbnMgPSBpbml0UGFyYW1zKHVyaSwgb3B0aW9ucywgY2FsbGJhY2spXG4gICAgICAgIG9wdGlvbnMubWV0aG9kID0gbWV0aG9kLnRvVXBwZXJDYXNlKClcbiAgICAgICAgcmV0dXJuIF9jcmVhdGVYSFIob3B0aW9ucylcbiAgICB9XG59KVxuXG5mdW5jdGlvbiBmb3JFYWNoQXJyYXkoYXJyYXksIGl0ZXJhdG9yKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpdGVyYXRvcihhcnJheVtpXSlcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzRW1wdHkob2JqKXtcbiAgICBmb3IodmFyIGkgaW4gb2JqKXtcbiAgICAgICAgaWYob2JqLmhhc093blByb3BlcnR5KGkpKSByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbn1cblxuZnVuY3Rpb24gaW5pdFBhcmFtcyh1cmksIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHBhcmFtcyA9IHVyaVxuXG4gICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9ucykpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zXG4gICAgICAgIGlmICh0eXBlb2YgdXJpID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBwYXJhbXMgPSB7dXJpOnVyaX1cbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFtcyA9IHh0ZW5kKG9wdGlvbnMsIHt1cmk6IHVyaX0pXG4gICAgfVxuXG4gICAgcGFyYW1zLmNhbGxiYWNrID0gY2FsbGJhY2tcbiAgICByZXR1cm4gcGFyYW1zXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVhIUih1cmksIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgb3B0aW9ucyA9IGluaXRQYXJhbXModXJpLCBvcHRpb25zLCBjYWxsYmFjaylcbiAgICByZXR1cm4gX2NyZWF0ZVhIUihvcHRpb25zKVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlWEhSKG9wdGlvbnMpIHtcbiAgICBpZih0eXBlb2Ygb3B0aW9ucy5jYWxsYmFjayA9PT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbGxiYWNrIGFyZ3VtZW50IG1pc3NpbmdcIilcbiAgICB9XG5cbiAgICB2YXIgY2FsbGVkID0gZmFsc2VcbiAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYk9uY2UoZXJyLCByZXNwb25zZSwgYm9keSl7XG4gICAgICAgIGlmKCFjYWxsZWQpe1xuICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZVxuICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjayhlcnIsIHJlc3BvbnNlLCBib2R5KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVhZHlzdGF0ZWNoYW5nZSgpIHtcbiAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGxvYWRGdW5jLCAwKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Qm9keSgpIHtcbiAgICAgICAgLy8gQ2hyb21lIHdpdGggcmVxdWVzdFR5cGU9YmxvYiB0aHJvd3MgZXJyb3JzIGFycm91bmQgd2hlbiBldmVuIHRlc3RpbmcgYWNjZXNzIHRvIHJlc3BvbnNlVGV4dFxuICAgICAgICB2YXIgYm9keSA9IHVuZGVmaW5lZFxuXG4gICAgICAgIGlmICh4aHIucmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGJvZHkgPSB4aHIucmVzcG9uc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJvZHkgPSB4aHIucmVzcG9uc2VUZXh0IHx8IGdldFhtbCh4aHIpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNKc29uKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGJvZHkgPSBKU09OLnBhcnNlKGJvZHkpXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJvZHlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlcnJvckZ1bmMoZXZ0KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0VGltZXIpXG4gICAgICAgIGlmKCEoZXZ0IGluc3RhbmNlb2YgRXJyb3IpKXtcbiAgICAgICAgICAgIGV2dCA9IG5ldyBFcnJvcihcIlwiICsgKGV2dCB8fCBcIlVua25vd24gWE1MSHR0cFJlcXVlc3QgRXJyb3JcIikgKVxuICAgICAgICB9XG4gICAgICAgIGV2dC5zdGF0dXNDb2RlID0gMFxuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXZ0LCBmYWlsdXJlUmVzcG9uc2UpXG4gICAgfVxuXG4gICAgLy8gd2lsbCBsb2FkIHRoZSBkYXRhICYgcHJvY2VzcyB0aGUgcmVzcG9uc2UgaW4gYSBzcGVjaWFsIHJlc3BvbnNlIG9iamVjdFxuICAgIGZ1bmN0aW9uIGxvYWRGdW5jKCkge1xuICAgICAgICBpZiAoYWJvcnRlZCkgcmV0dXJuXG4gICAgICAgIHZhciBzdGF0dXNcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRUaW1lcilcbiAgICAgICAgaWYob3B0aW9ucy51c2VYRFIgJiYgeGhyLnN0YXR1cz09PXVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy9JRTggQ09SUyBHRVQgc3VjY2Vzc2Z1bCByZXNwb25zZSBkb2Vzbid0IGhhdmUgYSBzdGF0dXMgZmllbGQsIGJ1dCBib2R5IGlzIGZpbmVcbiAgICAgICAgICAgIHN0YXR1cyA9IDIwMFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhdHVzID0gKHhoci5zdGF0dXMgPT09IDEyMjMgPyAyMDQgOiB4aHIuc3RhdHVzKVxuICAgICAgICB9XG4gICAgICAgIHZhciByZXNwb25zZSA9IGZhaWx1cmVSZXNwb25zZVxuICAgICAgICB2YXIgZXJyID0gbnVsbFxuXG4gICAgICAgIGlmIChzdGF0dXMgIT09IDApe1xuICAgICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgYm9keTogZ2V0Qm9keSgpLFxuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IHN0YXR1cyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7fSxcbiAgICAgICAgICAgICAgICB1cmw6IHVyaSxcbiAgICAgICAgICAgICAgICByYXdSZXF1ZXN0OiB4aHJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMpeyAvL3JlbWVtYmVyIHhociBjYW4gaW4gZmFjdCBiZSBYRFIgZm9yIENPUlMgaW4gSUVcbiAgICAgICAgICAgICAgICByZXNwb25zZS5oZWFkZXJzID0gcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVyciA9IG5ldyBFcnJvcihcIkludGVybmFsIFhNTEh0dHBSZXF1ZXN0IEVycm9yXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgcmVzcG9uc2UsIHJlc3BvbnNlLmJvZHkpXG4gICAgfVxuXG4gICAgdmFyIHhociA9IG9wdGlvbnMueGhyIHx8IG51bGxcblxuICAgIGlmICgheGhyKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmNvcnMgfHwgb3B0aW9ucy51c2VYRFIpIHtcbiAgICAgICAgICAgIHhociA9IG5ldyBjcmVhdGVYSFIuWERvbWFpblJlcXVlc3QoKVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHhociA9IG5ldyBjcmVhdGVYSFIuWE1MSHR0cFJlcXVlc3QoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGtleVxuICAgIHZhciBhYm9ydGVkXG4gICAgdmFyIHVyaSA9IHhoci51cmwgPSBvcHRpb25zLnVyaSB8fCBvcHRpb25zLnVybFxuICAgIHZhciBtZXRob2QgPSB4aHIubWV0aG9kID0gb3B0aW9ucy5tZXRob2QgfHwgXCJHRVRcIlxuICAgIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5IHx8IG9wdGlvbnMuZGF0YVxuICAgIHZhciBoZWFkZXJzID0geGhyLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge31cbiAgICB2YXIgc3luYyA9ICEhb3B0aW9ucy5zeW5jXG4gICAgdmFyIGlzSnNvbiA9IGZhbHNlXG4gICAgdmFyIHRpbWVvdXRUaW1lclxuICAgIHZhciBmYWlsdXJlUmVzcG9uc2UgPSB7XG4gICAgICAgIGJvZHk6IHVuZGVmaW5lZCxcbiAgICAgICAgaGVhZGVyczoge30sXG4gICAgICAgIHN0YXR1c0NvZGU6IDAsXG4gICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICB1cmw6IHVyaSxcbiAgICAgICAgcmF3UmVxdWVzdDogeGhyXG4gICAgfVxuXG4gICAgaWYgKFwianNvblwiIGluIG9wdGlvbnMgJiYgb3B0aW9ucy5qc29uICE9PSBmYWxzZSkge1xuICAgICAgICBpc0pzb24gPSB0cnVlXG4gICAgICAgIGhlYWRlcnNbXCJhY2NlcHRcIl0gfHwgaGVhZGVyc1tcIkFjY2VwdFwiXSB8fCAoaGVhZGVyc1tcIkFjY2VwdFwiXSA9IFwiYXBwbGljYXRpb24vanNvblwiKSAvL0Rvbid0IG92ZXJyaWRlIGV4aXN0aW5nIGFjY2VwdCBoZWFkZXIgZGVjbGFyZWQgYnkgdXNlclxuICAgICAgICBpZiAobWV0aG9kICE9PSBcIkdFVFwiICYmIG1ldGhvZCAhPT0gXCJIRUFEXCIpIHtcbiAgICAgICAgICAgIGhlYWRlcnNbXCJjb250ZW50LXR5cGVcIl0gfHwgaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXSB8fCAoaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXSA9IFwiYXBwbGljYXRpb24vanNvblwiKSAvL0Rvbid0IG92ZXJyaWRlIGV4aXN0aW5nIGFjY2VwdCBoZWFkZXIgZGVjbGFyZWQgYnkgdXNlclxuICAgICAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuanNvbiA9PT0gdHJ1ZSA/IGJvZHkgOiBvcHRpb25zLmpzb24pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gcmVhZHlzdGF0ZWNoYW5nZVxuICAgIHhoci5vbmxvYWQgPSBsb2FkRnVuY1xuICAgIHhoci5vbmVycm9yID0gZXJyb3JGdW5jXG4gICAgLy8gSUU5IG11c3QgaGF2ZSBvbnByb2dyZXNzIGJlIHNldCB0byBhIHVuaXF1ZSBmdW5jdGlvbi5cbiAgICB4aHIub25wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gSUUgbXVzdCBkaWVcbiAgICB9XG4gICAgeGhyLm9uYWJvcnQgPSBmdW5jdGlvbigpe1xuICAgICAgICBhYm9ydGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgeGhyLm9udGltZW91dCA9IGVycm9yRnVuY1xuICAgIHhoci5vcGVuKG1ldGhvZCwgdXJpLCAhc3luYywgb3B0aW9ucy51c2VybmFtZSwgb3B0aW9ucy5wYXNzd29yZClcbiAgICAvL2hhcyB0byBiZSBhZnRlciBvcGVuXG4gICAgaWYoIXN5bmMpIHtcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9ICEhb3B0aW9ucy53aXRoQ3JlZGVudGlhbHNcbiAgICB9XG4gICAgLy8gQ2Fubm90IHNldCB0aW1lb3V0IHdpdGggc3luYyByZXF1ZXN0XG4gICAgLy8gbm90IHNldHRpbmcgdGltZW91dCBvbiB0aGUgeGhyIG9iamVjdCwgYmVjYXVzZSBvZiBvbGQgd2Via2l0cyBldGMuIG5vdCBoYW5kbGluZyB0aGF0IGNvcnJlY3RseVxuICAgIC8vIGJvdGggbnBtJ3MgcmVxdWVzdCBhbmQganF1ZXJ5IDEueCB1c2UgdGhpcyBraW5kIG9mIHRpbWVvdXQsIHNvIHRoaXMgaXMgYmVpbmcgY29uc2lzdGVudFxuICAgIGlmICghc3luYyAmJiBvcHRpb25zLnRpbWVvdXQgPiAwICkge1xuICAgICAgICB0aW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAoYWJvcnRlZCkgcmV0dXJuXG4gICAgICAgICAgICBhYm9ydGVkID0gdHJ1ZS8vSUU5IG1heSBzdGlsbCBjYWxsIHJlYWR5c3RhdGVjaGFuZ2VcbiAgICAgICAgICAgIHhoci5hYm9ydChcInRpbWVvdXRcIilcbiAgICAgICAgICAgIHZhciBlID0gbmV3IEVycm9yKFwiWE1MSHR0cFJlcXVlc3QgdGltZW91dFwiKVxuICAgICAgICAgICAgZS5jb2RlID0gXCJFVElNRURPVVRcIlxuICAgICAgICAgICAgZXJyb3JGdW5jKGUpXG4gICAgICAgIH0sIG9wdGlvbnMudGltZW91dCApXG4gICAgfVxuXG4gICAgaWYgKHhoci5zZXRSZXF1ZXN0SGVhZGVyKSB7XG4gICAgICAgIGZvcihrZXkgaW4gaGVhZGVycyl7XG4gICAgICAgICAgICBpZihoZWFkZXJzLmhhc093blByb3BlcnR5KGtleSkpe1xuICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgaGVhZGVyc1trZXldKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmhlYWRlcnMgJiYgIWlzRW1wdHkob3B0aW9ucy5oZWFkZXJzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJIZWFkZXJzIGNhbm5vdCBiZSBzZXQgb24gYW4gWERvbWFpblJlcXVlc3Qgb2JqZWN0XCIpXG4gICAgfVxuXG4gICAgaWYgKFwicmVzcG9uc2VUeXBlXCIgaW4gb3B0aW9ucykge1xuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gb3B0aW9ucy5yZXNwb25zZVR5cGVcbiAgICB9XG5cbiAgICBpZiAoXCJiZWZvcmVTZW5kXCIgaW4gb3B0aW9ucyAmJlxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5iZWZvcmVTZW5kID09PSBcImZ1bmN0aW9uXCJcbiAgICApIHtcbiAgICAgICAgb3B0aW9ucy5iZWZvcmVTZW5kKHhocilcbiAgICB9XG5cbiAgICAvLyBNaWNyb3NvZnQgRWRnZSBicm93c2VyIHNlbmRzIFwidW5kZWZpbmVkXCIgd2hlbiBzZW5kIGlzIGNhbGxlZCB3aXRoIHVuZGVmaW5lZCB2YWx1ZS5cbiAgICAvLyBYTUxIdHRwUmVxdWVzdCBzcGVjIHNheXMgdG8gcGFzcyBudWxsIGFzIGJvZHkgdG8gaW5kaWNhdGUgbm8gYm9keVxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbmF1Z3R1ci94aHIvaXNzdWVzLzEwMC5cbiAgICB4aHIuc2VuZChib2R5IHx8IG51bGwpXG5cbiAgICByZXR1cm4geGhyXG5cblxufVxuXG5mdW5jdGlvbiBnZXRYbWwoeGhyKSB7XG4gICAgLy8geGhyLnJlc3BvbnNlWE1MIHdpbGwgdGhyb3cgRXhjZXB0aW9uIFwiSW52YWxpZFN0YXRlRXJyb3JcIiBvciBcIkRPTUV4Y2VwdGlvblwiXG4gICAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9YTUxIdHRwUmVxdWVzdC9yZXNwb25zZVhNTC5cbiAgICB0cnkge1xuICAgICAgICBpZiAoeGhyLnJlc3BvbnNlVHlwZSA9PT0gXCJkb2N1bWVudFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geGhyLnJlc3BvbnNlWE1MXG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZpcmVmb3hCdWdUYWtlbkVmZmVjdCA9IHhoci5yZXNwb25zZVhNTCAmJiB4aHIucmVzcG9uc2VYTUwuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lID09PSBcInBhcnNlcmVycm9yXCJcbiAgICAgICAgaWYgKHhoci5yZXNwb25zZVR5cGUgPT09IFwiXCIgJiYgIWZpcmVmb3hCdWdUYWtlbkVmZmVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIHhoci5yZXNwb25zZVhNTFxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cblxuICAgIHJldHVybiBudWxsXG59XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuIiwidmFyIHdpbjtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW4gPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW4gPSBnbG9iYWw7XG59IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKXtcbiAgICB3aW4gPSBzZWxmO1xufSBlbHNlIHtcbiAgICB3aW4gPSB7fTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB3aW47XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGlzRnVuY3Rpb25cblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uIChmbikge1xuICB2YXIgc3RyaW5nID0gdG9TdHJpbmcuY2FsbChmbilcbiAgcmV0dXJuIHN0cmluZyA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJyB8fFxuICAgICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgJiYgc3RyaW5nICE9PSAnW29iamVjdCBSZWdFeHBdJykgfHxcbiAgICAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgLy8gSUU4IGFuZCBiZWxvd1xuICAgICAoZm4gPT09IHdpbmRvdy5zZXRUaW1lb3V0IHx8XG4gICAgICBmbiA9PT0gd2luZG93LmFsZXJ0IHx8XG4gICAgICBmbiA9PT0gd2luZG93LmNvbmZpcm0gfHxcbiAgICAgIGZuID09PSB3aW5kb3cucHJvbXB0KSlcbn07XG4iLCJ2YXIgdHJpbSA9IGZ1bmN0aW9uKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcbn1cbiAgLCBpc0FycmF5ID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChoZWFkZXJzKSB7XG4gIGlmICghaGVhZGVycylcbiAgICByZXR1cm4ge31cblxuICB2YXIgcmVzdWx0ID0ge31cblxuICB2YXIgaGVhZGVyc0FyciA9IHRyaW0oaGVhZGVycykuc3BsaXQoJ1xcbicpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkZXJzQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHJvdyA9IGhlYWRlcnNBcnJbaV1cbiAgICB2YXIgaW5kZXggPSByb3cuaW5kZXhPZignOicpXG4gICAgLCBrZXkgPSB0cmltKHJvdy5zbGljZSgwLCBpbmRleCkpLnRvTG93ZXJDYXNlKClcbiAgICAsIHZhbHVlID0gdHJpbShyb3cuc2xpY2UoaW5kZXggKyAxKSlcblxuICAgIGlmICh0eXBlb2YocmVzdWx0W2tleV0pID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZVxuICAgIH0gZWxzZSBpZiAoaXNBcnJheShyZXN1bHRba2V5XSkpIHtcbiAgICAgIHJlc3VsdFtrZXldLnB1c2godmFsdWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtrZXldID0gWyByZXN1bHRba2V5XSwgdmFsdWUgXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gZXh0ZW5kXG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbmZ1bmN0aW9uIGV4dGVuZCgpIHtcbiAgICB2YXIgdGFyZ2V0ID0ge31cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV1cblxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0XG59XG4iLCJ2YXIgbWFwID0ge1xuXHRcIi4vbWVzc2FnZS5lbi5qc29uXCI6IDM2LFxuXHRcIi4vbWVzc2FnZS5rby5qc29uXCI6IDM3XG59O1xuXG5cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHR2YXIgaWQgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKTtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xufVxuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gbWFwW3JlcV07XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gMzU7IiwidmFyIGJveGVzID0gcmVxdWlyZShcIi4vYm94ZXNcIik7XHJcbnZhciBfcDEyQnVmZmVyLCBfY2VydEJ1ZmZlciwgX2tleUJ1ZmZlcjtcclxuXHJcbnZhciBLSUNBX0RJQUxPRyA9IHtcclxuICAgIGNyZWF0ZURpYWxvZzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWN1a2l0LXdyYXBwZXInKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgX2JveGVzID0gYm94ZXMuYm94ZXMoKTtcclxuICAgICAgICB2YXIgU0VDVUtJVF9ESUFMT0cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIFNFQ1VLSVRfRElBTE9HLmlkID0gXCJzZWN1a2l0LXdyYXBwZXJcIjtcclxuICAgICAgICBTRUNVS0lUX0RJQUxPRy5jbGFzc05hbWUgPSBcImtpY2EtZC1ub25lXCI7XHJcbiAgICAgICAgU0VDVUtJVF9ESUFMT0cubGFuZyA9IHdlYm5wa2lfY29uZmlnLmxhbmd1YWdlLnRvTG9jYWxlTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgU0VDVUtJVF9ESUFMT0cuaW5uZXJIVE1MID0gX2JveGVzLm1haW4gKyBfYm94ZXMucGRmVmlld2VyICsgX2JveGVzLmltcG9ydFBGWCArIF9ib3hlcy5maW5kUEZYXHJcblxyXG4gICAgICAgIEtJQ0FfTE9HR0VSLmluZm8oU0VDVUtJVF9ESUFMT0cpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKFNFQ1VLSVRfRElBTE9HKTtcclxuICAgIH0sXHJcblxyXG4gICAgZW5hYmxlS2V5Ym9hcmRTZWN1cml0eTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8g7YKk67O065OcIOuztOyViCDsoIHsmqlcclxuICAgICAgICBpZiAod2VibnBraV9jb25maWcua2V5Ym9hcmRTZWN1cml0eSA9PT0gJ2RlZmF1bHQnKSB7XHJcbiAgICAgICAgICAgIHZhciBfdm90bWRuamVtID0gJCgnI3FsYWxmcWpzZ2gsICNpbnB1dC1wZngtcWxhbGZxanNnaCcpO1xyXG4gICAgICAgICAgICBfdm90bWRuamVtLm9mZigna2V5cHJlc3Mga2V5ZG93bicpO1xyXG5cclxuICAgICAgICAgICAgX3ZvdG1kbmplbS5vbigna2V5cHJlc3MnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJzb3IgPSB0aGlzLnNlbGVjdGlvblN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSB0aGlzLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvblN0YXJ0ICE9PSB0aGlzLnNlbGVjdGlvbkVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXAgPSB0ZW1wLnN1YnN0cmluZygwLCB0aGlzLnNlbGVjdGlvblN0YXJ0KSArIHRlbXAuc3Vic3RyaW5nKHRoaXMuc2VsZWN0aW9uRW5kKTtcclxuICAgICAgICAgICAgICAgICAgICB3ZWJucGtpLm1vZGlmeVZvdG1kbmplbSh0aGlzLmlkLCB0aGlzLnNlbGVjdGlvblN0YXJ0LCB0aGlzLnNlbGVjdGlvbkVuZCwgOCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0ZW1wICsgU3RyaW5nLmZyb21DaGFyQ29kZShNYXRoLmZsb29yKE1hdGgucmFuZG9tKDEsIDEwKSAqIDExMCkgJSA4MyArIDMzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXRTZWxlY3Rpb25SYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uUmFuZ2UoY3Vyc29yICsgMSwgY3Vyc29yICsgMSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IHRoaXMuY3JlYXRlVGV4dFJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgY3Vyc29yICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCBjdXJzb3IgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICByYW5nZS5zZWxlY3QoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyDruYTrsIDrsojtmLgg7JWU7Zi47ZmUIOynhO2WiSAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB3ZWJucGtpLnNldFZvdG1kbmplbSh0aGlzLmlkLCB0aGlzLnNlbGVjdGlvblN0YXJ0LCBldmVudC53aGljaCB8fCBldmVudC5rZXlDb2RlKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIF92b3RtZG5qZW0ub24oJ2tleWRvd24nLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmFsdEtleSB8fCBldmVudC5zaGlmdEtleSB8fCBldmVudC5tZXRhS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBrZXljb2RlID0gZXZlbnQud2hpY2ggfHwgZXZlbnQua2V5Q29kZTtcclxuICAgICAgICAgICAgICAgIGlmICgoa2V5Y29kZSA9PT0gNDYgfHwga2V5Y29kZSA9PT0gOCkgJiYgISQoXCIjXCIgKyB0aGlzLmlkKS5nZXRrZXlib2FyZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2VibnBraS5tb2RpZnlWb3RtZG5qZW0odGhpcy5pZCwgdGhpcy5zZWxlY3Rpb25TdGFydCwgdGhpcy5zZWxlY3Rpb25FbmQsIGtleWNvZGUsIGV2ZW50LmN0cmxLZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSBlbHNlIGlmICh3ZWJucGtpX2NvbmZpZy5rZXlib2FyZFNlY3VyaXR5ID09PSAna2luZ3MnKSB7XHJcbiAgICAgICAgICAgIGtpbmdzLmluaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9wZW5TZWxlY3RDZXJ0aWZpY2F0ZURpYWxvZzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgX2luaXREaWFsb2coKTtcclxuICAgICAgICBfc2hvd0NlcnRMaXN0KCk7XHJcbiAgICAgICAgJCgnI3NlY3VraXQtd3JhcHBlcicpLnJlbW92ZUNsYXNzKCdraWNhLWQtbm9uZScpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbG9zZVNlbGVjdENlcnRpZmljYXRlRGlhbG9nOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBfZGVzdHJveV92aygpO1xyXG4gICAgICAgICQoJyNzZWxlY3QtY2VydGlmaWNhdGUtY29uZmlybScpLm9mZignY2xpY2snKTtcclxuICAgICAgICAkKCcjc2VjdWtpdC13cmFwcGVyJykuYWRkQ2xhc3MoJ2tpY2EtZC1ub25lJyk7XHJcblxyXG4gICAgICAgIGlmICh3ZWJucGtpX2NvbmZpZy5rZXlib2FyZFNlY3VyaXR5ID09PSAna2luZ3MnKSB7XHJcbiAgICAgICAgICAgIHZLZXlwYWRHbG9iYWwudW5sb2FkQWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvcGVuR3VpZGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkKCcjYnJvd3Nlci1ndWlkZS13cmFwcGVyJykuaGFzQ2xhc3MoJ2tpY2EtZC1ub25lJykpIHtcclxuICAgICAgICAgICAgJCgnI2Jyb3dzZXItZ3VpZGUtd3JhcHBlcicpLnJlbW92ZUNsYXNzKCdraWNhLWQtbm9uZScpO1xyXG4gICAgICAgICAgICAkKCcjc2VjdWtpdC1kaWFsb2cnKS5hZGRDbGFzcygnb3Blbi1ndWlkZScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIEtJQ0FfRElBTE9HLmNsb3NlR3VpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGNsb3NlR3VpZGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQoJyNicm93c2VyLWd1aWRlLXdyYXBwZXInKS5hZGRDbGFzcygna2ljYS1kLW5vbmUnKTtcclxuICAgICAgICAkKCcjc2VjdWtpdC1kaWFsb2cnKS5yZW1vdmVDbGFzcygnb3Blbi1ndWlkZScpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvcGVuRGV0YWlsR3VpZGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICghUERGT2JqZWN0LnN1cHBvcnRzUERGcykge1xyXG4gICAgICAgICAgICBfZG93bmxvYWQod2VibnBraV9jb25maWcucGF0aCArICdhc3NldHMvZ3VpZGUvYnJvd3Nlcl9jZXJ0aWZpY2F0ZV9ndWlkZS5wZGYnLCAnQnJvd3NlciBDZXJ0aWZpY2F0ZSBEZXRhaWwgZ3VpZGUucGRmJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1vZGFsID0gJCgnI2RldGFpbC1ndWlkZScpO1xyXG4gICAgICAgIG1vZGFsLnJlbW92ZUNsYXNzKCdraWNhLWQtbm9uZScpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbG9zZURldGFpbEd1aWRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgbW9kYWwgPSAkKCcjZGV0YWlsLWd1aWRlJyk7XHJcbiAgICAgICAgbW9kYWwuYWRkQ2xhc3MoJ2tpY2EtZC1ub25lJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNlbGVjdENlcnQ6IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgJCgnI2NlcnQtbGlzdCB0cicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKCcjY2VydC1saXN0IHRyW2lkPScgKyBpbmRleCArICddJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbkRyYWdPdmVyQ2VydDogZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJkcmFnb3ZlclwiKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRHJhZ0xlYXZlQ2VydDogZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJkcmFnb3ZlclwiKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRHJvcENlcnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJkcmFnb3ZlclwiKTtcclxuICAgICAgICBpZiAoIWV2ZW50LmRhdGFUcmFuc2ZlciB8fCBldmVudC5kYXRhVHJhbnNmZXIuZmlsZXMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgS0lDQV9ESUFMT0cub25TZWxlY3RDZXJ0KGV2ZW50LmRhdGFUcmFuc2Zlcik7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uU2VsZWN0Q2VydDogZnVuY3Rpb24odGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIGZpbGVzID0gdGFyZ2V0LmZpbGVzO1xyXG4gICAgICAgIGlmIChmaWxlcy5sZW5ndGggPT09IDApIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9ubG9hZFJlYWRlcihmaWxlLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjTmFtZSA9IGZpbGUubmFtZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNOYW1lID09PSBcInNpZ25jZXJ0LmRlclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2NlcnRCdWZmZXIgPSBldmVudC50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY05hbWUgPT09IFwic2lnbnByaS5rZXlcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9rZXlCdWZmZXIgPSBldmVudC50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL1xcLnBmeCR8XFwucDEyJC8udGVzdChjTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBfcDEyQnVmZmVyID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpbGVMb2FkQ2FsbGJhY2socDEyKSB7XHJcbiAgICAgICAgICAgIGlmIChwMTIpIHtcclxuICAgICAgICAgICAgICAgIF9zaG93QXNrUHdkRGlhbG9nKHAxMik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3J0LCBrZXk7XHJcbiAgICAgICAgICAgICAgICBjcnQgPSB0eXBlb2YgX2NlcnRCdWZmZXIgPT09IFwidW5kZWZpbmVkXCIgPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgICAgICAgICBrZXkgPSB0eXBlb2YgX2tleUJ1ZmZlciA9PT0gXCJ1bmRlZmluZWRcIiA/IGZhbHNlIDogdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChjcnQgJiYga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2VibnBraV9jb25maWcuYXNrUHdkID8gX3Nob3dBc2tQd2REaWFsb2cocDEyKSA6IF9pbXBvcnRDZXJ0QW5kS2V5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBpLCByZWFkZXI7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlc1tpXSk7XHJcbiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBvbmxvYWRSZWFkZXIoZmlsZXNbaV0sIGZpbGVMb2FkQ2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRhcmdldC52YWx1ZSkge1xyXG4gICAgICAgICAgICB0YXJnZXQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb3BlbkZpbmRDZXJ0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKCcjZmluZC1wZngtd3JhcHBlcicpLnJlbW92ZUNsYXNzKCdraWNhLWQtbm9uZScpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbG9zZUZpbmRDZXJ0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICBfY2xvc2VGaW5kQ2VydCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBkb3dubG9hZENvbnZlcnRDZXJ0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoX2dldE9TKCkgPT09ICdXaW5kb3dzJykge1xyXG4gICAgICAgICAgICBfZG93bmxvYWQod2VibnBraV9jb25maWcucGF0aCArICdhc3NldHMvcGx1Z2luL1NlY3VLaXRDZXJ0RXhwb3J0LmV4ZScsICdTZWN1S2l0Q2VydEV4cG9ydC5leGUnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBLSUNBX0FMRVJULmVycm9yKFwiSVNfTk9UX1dJTkRPV1NcIiwgS0lDQV9FUlJPUl9NU0cuZ2V0KFwiSVNfTk9UX1dJTkRPV1NcIikpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc2VhcmNoQ2VydDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJCgnI2lucHV0Q2VydHMnKS5jbGljaygpO1xyXG4gICAgfSxcclxuXHJcbiAgICB0b2dnbGVWaXJ0dWFsS2V5Ym9hcmQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICh3ZWJucGtpX2NvbmZpZy5rZXlib2FyZFNlY3VyaXR5ID09PSBcImRlZmF1bHRcIikge1xyXG4gICAgICAgICAgICB2YXIgdmsgPSAkKCcjcWxhbGZxanNnaCcpLmdldGtleWJvYXJkKCk7XHJcbiAgICAgICAgICAgICQoJyNxbGFsZnFqc2doJykudmFsKCcnKTtcclxuICAgICAgICAgICAgd2VibnBraS5zZXRWb3RtZG5qZW0oJ3FsYWxmcWpzZ2gnKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2ayA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICQoJyN2a2V5Ym9hcmQtdG9nZ2xlJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgX2luaXRfdmsoJyNxbGFsZnFqc2doJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjdmtleWJvYXJkLXRvZ2dsZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHZrLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAod2VibnBraV9jb25maWcua2V5Ym9hcmRTZWN1cml0eSA9PT0gXCJraW5nc1wiKSB7XHJcbiAgICAgICAgICAgIGlmICgkKCcjdmtleWJvYXJkLXRvZ2dsZScpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnI3ZrZXlib2FyZC10b2dnbGUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB2S2V5cGFkR2xvYmFsLnVubG9hZEFsbCgpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJyN2a2V5Ym9hcmQtdG9nZ2xlJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdktleXBhZEdsb2JhbC5sb2FkQWxsKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgdmsgPSAkKCcjcWxhbGZxanNnaCcpLmdldGtleWJvYXJkKCk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmsgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjdmtleWJvYXJkLXRvZ2dsZScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIF9pbml0X3ZrKCcjcWxhbGZxanNnaCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnI3ZrZXlib2FyZC10b2dnbGUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB2ay5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHRvZ2dsZVBGWFZpcnR1YWxLZXlib2FyZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHZrID0gJCgnI2lucHV0LXBmeC1xbGFsZnFqc2doJykuZ2V0a2V5Ym9hcmQoKTtcclxuICAgICAgICAkKCcjaW5wdXQtcGZ4LXFsYWxmcWpzZ2gnKS52YWwoXCJcIik7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2ayA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgJCgnI3BmeC12a2V5Ym9hcmQtdG9nZ2xlJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICBfaW5pdF92aygnI2lucHV0LXBmeC1xbGFsZnFqc2doJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnI3BmeC12a2V5Ym9hcmQtdG9nZ2xlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB2ay5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGltcG9ydEJhc2U2NENlcnQ6IGZ1bmN0aW9uKGJhc2U2NENlcnQpIHtcclxuICAgICAgICBLSUNBX0RJQUxPRy5vcGVuU2VsZWN0Q2VydGlmaWNhdGVEaWFsb2coKTtcclxuICAgICAgICAkKCcjc2VjdWtpdC1kaWFsb2cnKS5hZGRDbGFzcygna2ljYS1kLW5vbmUnKTtcclxuICAgICAgICBfc2hvd0Fza1B3ZERpYWxvZyh0cnVlLCBiYXNlNjRDZXJ0KTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gX2Nsb3NlRmluZENlcnQoKSB7XHJcbiAgICAkKCcjZmluZC1wZngtd3JhcHBlcicpLmFkZENsYXNzKCdraWNhLWQtbm9uZScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfc2hvd0Fza1B3ZERpYWxvZyhwMTIsIGJhc2U2NENlcnQpIHtcclxuICAgICQoJyN3ZWJucGtpLXdyYXBwZXInKS5yZW1vdmVDbGFzcygna2ljYS1kLW5vbmUnKTtcclxuICAgICQoJyNpbnB1dC1wZngtcWxhbGZxanNnaCcpLmZvY3VzKCk7XHJcblxyXG4gICAgJCgnI3BmeC1xbGFsZnFqc2doLWNvbmZpcm0nKS51bmJpbmQoJ2NsaWNrJyk7XHJcbiAgICAkKCcjcGZ4LXFsYWxmcWpzZ2gtY29uZmlybScpLmNsaWNrKGZ1bmN0aW9uKCkgeyBfYXNrUHdkT2socDEyLCBiYXNlNjRDZXJ0KTsgfSk7XHJcblxyXG4gICAgJCgnI3BmeC1xbGFsZnFqc2doLWNhbmNlbCcpLnVuYmluZCgnY2xpY2snKTtcclxuICAgICQoJyNwZngtcWxhbGZxanNnaC1jYW5jZWwnKS5jbGljayhmdW5jdGlvbigpIHsgX2Fza1B3ZENhbmNlbChiYXNlNjRDZXJ0KTsgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9hc2tQd2RPayhwMTIsIGJhc2U2NENlcnQpIHtcclxuICAgIHZhciBwd2QgPSAkKCcjaW5wdXQtcGZ4LXFsYWxmcWpzZ2gnKS52YWwoKTtcclxuICAgIGlmIChwd2QubGVuZ3RoID09IDApIHtcclxuICAgICAgICBLSUNBX0FMRVJULmVycm9yKFwiRU1QVFlfUEFTU1dPUkRcIiwgS0lDQV9FUlJPUl9NU0cuZ2V0KFwiRU1QVFlfUEFTU1dPUkRcIiksIHtcclxuICAgICAgICAgICAgb25BZnRlckNsb3NlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICQoJyNpbnB1dC1wZngtcWxhbGZxanNnaCcpLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGltcG9ydEVycm9yKGUpIHtcclxuICAgICAgICBLSUNBX0FMRVJULmVycm9yKGUuY29kZSwgZS5tZXNzYWdlKTtcclxuXHJcbiAgICAgICAgaWYgKHdlYm5wa2lfY29uZmlnLmtleWJvYXJkU2VjdXJpdHkgPT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgICAgICB3ZWJucGtpLnNldFZvdG1kbmplbSgnaW5wdXQtcGZ4LXFsYWxmcWpzZ2gnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnI2lucHV0LXBmeC1xbGFsZnFqc2doJykudmFsKCcnKTtcclxuICAgICAgICAkKCcjaW5wdXQtcGZ4LXFsYWxmcWpzZ2gnKS5mb2N1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChwMTIpIHtcclxuICAgICAgICBpZiAoYmFzZTY0Q2VydCkge1xyXG4gICAgICAgICAgICBfcDEyQnVmZmVyID0gd2VibnBraS5iaW4uZGVjb2RlQmFzZTY0KGJhc2U2NENlcnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2VibnBraS5pbXBvcnRQS0NTMTIoX3AxMkJ1ZmZlciwgcHdkKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBfc2hvd0NlcnRMaXN0KCk7XHJcbiAgICAgICAgICAgICQoJyN3ZWJucGtpLXdyYXBwZXInKS5hZGRDbGFzcygna2ljYS1kLW5vbmUnKTtcclxuICAgICAgICAgICAgX2Nsb3NlRmluZENlcnQoKTtcclxuICAgICAgICAgICAgX2NsZWFyQ2VydEJ1ZmZlcigpO1xyXG4gICAgICAgICAgICBfY2xvc2VfdmsoKTtcclxuXHJcbiAgICAgICAgICAgICQoJyNpbnB1dC1wZngtcWxhbGZxanNnaCcpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgIGlmICh3ZWJucGtpX2NvbmZpZy5rZXlib2FyZFNlY3VyaXR5ID09PSAnZGVmYXVsdCcpIHtcclxuICAgICAgICAgICAgICAgIHdlYm5wa2kuc2V0Vm90bWRuamVtKCdpbnB1dC1wZngtcWxhbGZxanNnaCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoYmFzZTY0Q2VydCkge1xyXG4gICAgICAgICAgICAgICAgS0lDQV9BTEVSVC5zdWNjZXNzKFwiQkFTRTY0X0lNUE9SVF9DRVJUX1NVQ0NFU1NcIiwgS0lDQV9DT1JQVVMuQkFTRTY0X0lNUE9SVF9DRVJUX1NVQ0NFU1MpO1xyXG4gICAgICAgICAgICAgICAgS0lDQV9ESUFMT0cuY2xvc2VTZWxlY3RDZXJ0aWZpY2F0ZURpYWxvZygpO1xyXG4gICAgICAgICAgICAgICAgJCgnI3NlY3VraXQtZGlhbG9nJykucmVtb3ZlQ2xhc3MoJ2tpY2EtZC1ub25lJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpbXBvcnRFcnJvcihlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB3ZWJucGtpLmltcG9ydENlcnRBbmRLZXkoX2NlcnRCdWZmZXIsIF9rZXlCdWZmZXIsIHB3ZCkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgX3Nob3dDZXJ0TGlzdCgpO1xyXG4gICAgICAgICAgICAkKCcjd2VibnBraS13cmFwcGVyJykuYWRkQ2xhc3MoJ2tpY2EtZC1ub25lJyk7XHJcbiAgICAgICAgICAgICQoJyNpbnB1dC1wZngtcWxhbGZxanNnaCcpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgIGlmICh3ZWJucGtpX2NvbmZpZy5rZXlib2FyZFNlY3VyaXR5ID09PSAnZGVmYXVsdCcpIHtcclxuICAgICAgICAgICAgICAgIHdlYm5wa2kuc2V0Vm90bWRuamVtKCdpbnB1dC1wZngtcWxhbGZxanNnaCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9jbG9zZUZpbmRDZXJ0KCk7XHJcbiAgICAgICAgICAgIF9jbGVhckNlcnRCdWZmZXIoKTtcclxuICAgICAgICAgICAgX2Nsb3NlX3ZrKCk7XHJcblxyXG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgIGltcG9ydEVycm9yKGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuXHJcbmZ1bmN0aW9uIF9hc2tQd2RDYW5jZWwoYmFzZTY0Q2VydCkge1xyXG4gICAgJCgnI3dlYm5wa2ktd3JhcHBlcicpLmFkZENsYXNzKCdraWNhLWQtbm9uZScpO1xyXG4gICAgX2NsZWFyQ2VydEJ1ZmZlcigpO1xyXG4gICAgX2Nsb3NlX3ZrKCk7XHJcbiAgICAkKCcjaW5wdXQtcGZ4LXFsYWxmcWpzZ2gnKS52YWwoJycpO1xyXG4gICAgaWYgKHdlYm5wa2lfY29uZmlnLmtleWJvYXJkU2VjdXJpdHkgPT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgIHdlYm5wa2kuc2V0Vm90bWRuamVtKCdpbnB1dC1wZngtcWxhbGZxanNnaCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChiYXNlNjRDZXJ0KSB7XHJcbiAgICAgICAgX2Nsb3NlRmluZENlcnQoKTtcclxuICAgICAgICAkKCcjc2VjdWtpdC1kaWFsb2cnKS5yZW1vdmVDbGFzcygna2ljYS1kLW5vbmUnKTtcclxuICAgICAgICBLSUNBX0RJQUxPRy5jbG9zZVNlbGVjdENlcnRpZmljYXRlRGlhbG9nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gX2ltcG9ydENlcnRBbmRLZXkoKSB7XHJcbiAgICB3ZWJucGtpLmltcG9ydENlcnRBbmRLZXkoX2NlcnRCdWZmZXIsIF9rZXlCdWZmZXIpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgX3Nob3dDZXJ0TGlzdCgpO1xyXG4gICAgICAgIF9jbGVhckNlcnRCdWZmZXIoKTtcclxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgICAgS0lDQV9BTEVSVC5lcnJvcihlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICBfY2xlYXJDZXJ0QnVmZmVyKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gX2luaXREaWFsb2coKSB7XHJcbiAgICB2YXIgcWxhbGZxanNnaCA9ICQoJyNxbGFsZnFqc2doJyk7XHJcbiAgICBxbGFsZnFqc2doLnZhbChcIlwiKTtcclxuICAgIHFsYWxmcWpzZ2guZGF0YShcImtpbmdzXCIsIFwiXCIpO1xyXG4gICAgcWxhbGZxanNnaC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgIHFsYWxmcWpzZ2gucHJvcCgncGxhY2Vob2xkZXInLCBLSUNBX0NPUlBVUy5DRVJUX1BXRF9QTEFDRUhPTERFUik7XHJcblxyXG4gICAgd2VibnBraS5zZXRWb3RtZG5qZW0oJ3FsYWxmcWpzZ2gnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gX3NldENlcnRJbmZvSnNvbihjZXJ0TGlzdCkge1xyXG4gICAgZnVuY3Rpb24gZ2V0RGF0ZUZvcm1hdChkKSB7XHJcbiAgICAgICAgdmFyIHl5ID0gZC5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIHZhciBtbSA9IGQuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgdmFyIGRkID0gZC5nZXREYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIFt5eSwgKG1tID4gOSA/ICcnIDogJzAnKSArIG1tLCAoZGQgPiA5ID8gJycgOiAnMCcpICsgZGRdLmpvaW4oJy0nKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRJc3N1ZXJOYW1lKGlkKSB7XHJcbiAgICAgICAgaWQgPSBpZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIHZhciByc2x0ID0gd2VibnBraV9jb25maWcuaXNzdWVyc1tpZF07XHJcblxyXG4gICAgICAgIHJldHVybiB0eXBlb2YgcnNsdCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5rbm93blwiIDogcnNsdDtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgY250ID0gY2VydExpc3QubGVuZ3RoO1xyXG5cclxuICAgIHZhciBjZXJ0SW5mb09iaiA9IHt9O1xyXG4gICAgY2VydEluZm9PYmouc2l6ZSA9IGNudDtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNudDsgKytpKSB7XHJcbiAgICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICAgIHZhciBpZHggPSAoaSArIDEpLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgIG9iai5jbiA9IGNlcnRMaXN0W2ldLmdldFN1YmplY3RSRE5zKCkuQ047XHJcbiAgICAgICAgb2JqLnVzZXJuYW1lID0gY2VydExpc3RbaV0uZ2V0U3ViamVjdFJETnMoKS5DTjsgLy8gZm9yIGNlcnQgRGV0YWlsXHJcbiAgICAgICAgb2JqLmluZGV4ID0gaWR4O1xyXG5cclxuICAgICAgICB2YXIgdG1wID0gY2VydExpc3RbaV0uZ2V0SXNzdWVyUkROcygpLk87XHJcbiAgICAgICAgdmFyIGlzc3Vlck5hbWUgPSBnZXRJc3N1ZXJOYW1lKHRtcCk7XHJcblxyXG4gICAgICAgIG9iai5pc3N1ZXJUb05hbWUgPSBpc3N1ZXJOYW1lO1xyXG4gICAgICAgIG9iai5pc3N1ZXJUb1N0cmluZyA9IGlzc3Vlck5hbWU7IC8vIGZvciBjZXJ0IERldGFpbFxyXG4gICAgICAgIG9iai5vaWQgPSBjZXJ0TGlzdFtpXS5nZXRQb2xpY3lJRCgpO1xyXG4gICAgICAgIG9iai5wb2xpY3kgPSBjZXJ0TGlzdFtpXS5nZXRQb2xpY3lJRCgpOyAvLyBmb3IgY2VydCBEZXRhaWxcclxuICAgICAgICBvYmoudG9kYXRlID0gZ2V0RGF0ZUZvcm1hdChjZXJ0TGlzdFtpXS5nZXROb3RBZnRlcigpKTtcclxuICAgICAgICBvYmoudmFsaWRhdGVUbyA9IGdldERhdGVGb3JtYXQoY2VydExpc3RbaV0uZ2V0Tm90QWZ0ZXIoKSk7IC8vIGZvciBjZXJ0IERldGFpbFxyXG4gICAgICAgIG9iai52YWxpZGF0ZUZyb20gPSBnZXREYXRlRm9ybWF0KGNlcnRMaXN0W2ldLmdldE5vdEJlZm9yZSgpKTsgLy8gZm9yIGNlcnQgRGV0YWlsXHJcbiAgICAgICAgb2JqLnVzYWdlVG9OYW1lID0gY2VydExpc3RbaV0uZ2V0UG9saWN5U3RyaW5nKCk7XHJcbiAgICAgICAgb2JqLnBvbGljeVRvTmFtZSA9IGNlcnRMaXN0W2ldLmdldFBvbGljeVN0cmluZygpOyAvLyBmb3IgY2VydCBEZXRhaWxcclxuICAgICAgICBvYmoudXNlckROID0gY2VydExpc3RbaV0uZ2V0U3ViamVjdEROKCk7XHJcbiAgICAgICAgb2JqLmlzc3VlRE4gPSBjZXJ0TGlzdFtpXS5nZXRJc3N1ZXJETigpOyAvLyBmb3IgY2VydCBEZXRhaWxcclxuICAgICAgICBvYmoudmVyc2lvbiA9IFwiVmVyc2lvbiBcIiArIGNlcnRMaXN0W2ldLl9mby52ZXJzaW9uOyAvLyBmb3IgY2VydCBEZXRhaWxcclxuICAgICAgICBvYmouc2lnbmF0dXJlQWxnb3JpdGhtSUQgPSBjZXJ0TGlzdFtpXS5nZXRTaWduQWxnb3JpdGhtKCk7IC8vIGZvciBjZXJ0IERldGFpbFxyXG4gICAgICAgIG9iai5rZXlTaXplID0gY2VydExpc3RbaV0uZ2V0S2V5U2l6ZSgpOyAvLyBmb3IgY2VydCBEZXRhaWxcclxuICAgICAgICBvYmouY2VydFBlbSA9IGNlcnRMaXN0W2ldLnRvUGVtKCk7XHJcbiAgICAgICAgb2JqLmNlcnRIZXggPSBjZXJ0TGlzdFtpXS50b0hleCgpO1xyXG4gICAgICAgIG9iai5jZXJ0QmFzZTY0ID0gY2VydExpc3RbaV0udG9CYXNlNjQoKTtcclxuICAgICAgICBvYmouc2VyaWFsID0gY2VydExpc3RbaV0uX2ZvLnNlcmlhbE51bWJlcjtcclxuXHJcbiAgICAgICAgY2VydEluZm9PYmpbaWR4XSA9IG9iajtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY2VydEluZm9PYmo7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9jbGVhckNlcnRCdWZmZXIoKSB7XHJcbiAgICBfY2VydEJ1ZmZlciA9IHVuZGVmaW5lZDtcclxuICAgIF9rZXlCdWZmZXIgPSB1bmRlZmluZWQ7XHJcbiAgICBfcDEyQnVmZmVyID0gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfc2hvd0NlcnRMaXN0KCkge1xyXG4gICAgd2VibnBraS5nZXRDZXJ0aWZpY2F0ZUxpc3QoZnVuY3Rpb24oY2VydGlmaWNhdGVMaXN0LCBlcnJvcikge1xyXG4gICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICBLSUNBX0FMRVJULmVycm9yKGVycm9yLmNkb2UsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2VydGlmaWNhdGVMaXN0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAkKCcjZHJvcHpvbmUtd3JhcHBlcicpLnJlbW92ZUNsYXNzKCdraWNhLWQtbm9uZScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICQoJyNkcm9wem9uZS13cmFwcGVyJykuYWRkQ2xhc3MoJ2tpY2EtZC1ub25lJyk7XHJcblxyXG4gICAgICAgIHZhciBjZXJ0aWZpY2F0ZUxpc3RKU09OID0gX3NldENlcnRJbmZvSnNvbihjZXJ0aWZpY2F0ZUxpc3QpO1xyXG5cclxuICAgICAgICB2YXIgY2VydGlmaWNhdGVMaXN0Um9vdCA9ICQoJyNjZXJ0LWxpc3QnKTtcclxuICAgICAgICBjZXJ0aWZpY2F0ZUxpc3RSb290Lmh0bWwoXCJcIik7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2VydGlmaWNhdGVMaXN0SlNPTi5zaXplOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGNlcnRpZmljYXRlID0gY2VydGlmaWNhdGVMaXN0SlNPTltpICsgMV07XHJcblxyXG4gICAgICAgICAgICB2YXIgcm93Q2xhc3MgPSBcIlwiO1xyXG4gICAgICAgICAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByb3dDbGFzcyA9ICdjbGFzcz1cImFjdGl2ZVwiJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gaSArIDE7XHJcbiAgICAgICAgICAgIHZhciByb3cgPSAkKCc8dHIgJyArIHJvd0NsYXNzICsgJyBpZD0nICsgaW5kZXggKyAnIG9uY2xpY2s9XCJLSUNBX0RJQUxPRy5zZWxlY3RDZXJ0KCcgKyBpbmRleCArICcpXCI+JylcclxuXHJcbiAgICAgICAgICAgIHZhciBodG1sID0gJzx0ZCBzY29wZT1cImNvbFwiPjxzcGFuPjxpIGNsYXNzPVwiaWNvbi1jZXJ0XCI+PC9pPicgKyBjZXJ0aWZpY2F0ZS51c2FnZVRvTmFtZSArICc8L3NwYW4+PC90ZD4nICtcclxuICAgICAgICAgICAgICAgICc8dGQgc2NvcGU9XCJjb2xcIj48c3Bhbj4nICsgY2VydGlmaWNhdGUuY24gKyAnPC9zcGFuPjwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAnPHRkIHNjb3BlPVwiY29sXCI+PHNwYW4gc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7XCI+JyArIGNlcnRpZmljYXRlLnRvZGF0ZSArICc8L3NwYW4+PC90ZD4nICtcclxuICAgICAgICAgICAgICAgICc8dGQgc2NvcGU9XCJjb2xcIj48c3Bhbj4nICsgY2VydGlmaWNhdGUuaXNzdWVyVG9OYW1lICsgJzwvc3Bhbj48L3RkPic7XHJcblxyXG4gICAgICAgICAgICByb3cuaHRtbChodG1sKTtcclxuICAgICAgICAgICAgcm93LmRhdGEoJ2NlcnRpZmljYXRlJywgY2VydGlmaWNhdGVMaXN0W2ldKTtcclxuICAgICAgICAgICAgcm93LmRhdGEoJ2NlcnRpZmljYXRlSlNPTicsIGNlcnRpZmljYXRlKTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgY2VydGlmaWNhdGVMaXN0Um9vdC5hcHBlbmQocm93KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoXCIjY2VydC1saXN0LXRhYmxlXCIpLmNvbFJlc2l6YWJsZSh7IGxpdmVEcmFnOiB0cnVlIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIFZpcnRhdWwgS2V5Ym9yYWRcclxuZnVuY3Rpb24gX2luaXRfdmsoaWQpIHtcclxuICAgIHZhciBub3JtYWwgPSBbXHJcbiAgICAgICAgJ2AgMSAyIDMgNCA1IDYgNyA4IDkgMCAtID0ge2Jrc3B9JyxcclxuICAgICAgICAncSB3IGUgciB0IHkgdSBpIG8gcCBbIF0gXFxcXCcsXHJcbiAgICAgICAgJ2EgcyBkIGYgZyBoIGogayBsIDsgXFwnIHthfScsXHJcbiAgICAgICAgJ3tzaGlmdH0geiB4IGMgdiBiIG4gbSAsIC4gLyB7c2hpZnR9JyxcclxuICAgIF07XHJcbiAgICB2YXIgc2hpZnQgPSBbXHJcbiAgICAgICAgJ34gISBAICMgJCAlIF4gJiAqICggKSBfICsge2Jrc3B9JyxcclxuICAgICAgICAnUSBXIEUgUiBUIFkgVSBJIE8gUCB7IH0gfCcsXHJcbiAgICAgICAgJ0EgUyBEIEYgRyBIIEogSyBMIDogXCIge2F9JyxcclxuICAgICAgICAne3NoaWZ0fSAgWiBYIEMgViBCIE4gTSA8ID4gPyB7c2hpZnR9ICdcclxuICAgIF07XHJcblxyXG4gICAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgbGF5b3V0OiAnY3VzdG9tJyxcclxuICAgICAgICBjdXN0b21MYXlvdXQ6IHtcclxuICAgICAgICAgICAgJ25vcm1hbCc6IG5vcm1hbCxcclxuICAgICAgICAgICAgJ3NoaWZ0Jzogc2hpZnRcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRpc3BsYXk6IHtcclxuICAgICAgICAgICAgJ2EnOiAnJm5ic3A7RW50ZXImbmJzcDsgJyxcclxuICAgICAgICAgICAgJ2InOiAnXFx1MjMyYjpCYWNrc3BhY2UnLFxyXG4gICAgICAgICAgICAnYmtzcCc6ICdCa3NwOkJhY2tzcGFjZScsXHJcbiAgICAgICAgICAgICdjJzogJ1xcdTI3MTY6Q2FuY2VsIChFc2MpJyxcclxuICAgICAgICAgICAgJ2NhbmNlbCc6ICdDYW5jZWw6Q2FuY2VsIChFc2MpJyxcclxuICAgICAgICAgICAgJ3NoaWZ0JzogJyZuYnNwO1NoaWZ0Jm5ic3A7J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY3NzOiB7XHJcbiAgICAgICAgICAgIGJ1dHRvbkRlZmF1bHQ6IFwidmstYnV0dG9uXCIsXHJcbiAgICAgICAgICAgIGJ1dHRvbkFjdGlvbjogXCJ2ay1idXR0b24tZW50ZXJcIixcclxuICAgICAgICAgICAgYnV0dG9uQWN0aXZlOiBcInZrLWJ1dHRvbi1zaGlmdC1kb3duXCIsXHJcbiAgICAgICAgICAgIGNvbnRhaW5lcjogXCJ2ay1jb250YWluZXJcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdXNlUHJldmlldzogZmFsc2UsXHJcbiAgICAgICAgcmVwb3NpdGlvbjogdHJ1ZSxcclxuICAgICAgICByZXN0cmljdElucHV0OiBmYWxzZSxcclxuICAgICAgICBhdXRvQWNjZXB0OiB0cnVlLFxyXG4gICAgICAgIHVzZXJDbG9zZWQ6IHRydWUsXHJcbiAgICAgICAgbG9ja0lucHV0OiB0cnVlXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICh3ZWJucGtpX2NvbmZpZy5rZXlib2FyZFNlY3VyaXR5ID09PSBcImRlZmF1bHRcIikge1xyXG4gICAgICAgIG9wdGlvbnMuYmVmb3JlSW5zZXJ0ID0gZnVuY3Rpb24oZSwga2V5Ym9hcmQsIGVsLCB0eHQpIHtcclxuICAgICAgICAgICAgaWYgKHR4dC5jaGFyQ29kZUF0KDApID09PSA4KSB7XHJcbiAgICAgICAgICAgICAgICB3ZWJucGtpLm1vZGlmeVZvdG1kbmplbShpZC5zdWJzdHJpbmcoMSksIGVsLnNlbGVjdGlvblN0YXJ0LCBlbC5zZWxlY3Rpb25FbmQsIDgsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdlYm5wa2kuc2V0Vm90bWRuamVtKGlkLnN1YnN0cmluZygxKSwgZWwuc2VsZWN0aW9uU3RhcnQgKyAxLCB0eHQuY2hhckNvZGVBdCgwKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShNYXRoLmZsb29yKE1hdGgucmFuZG9tKDEsIDEwKSAqIDExMCkgJSA4MyArIDMzKTs7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3ZWJucGtpLnNldFZvdG1kbmplbShpZC5zdWJzdHJpbmcoMSkpO1xyXG4gICAgfVxyXG5cclxuICAgICQoaWQpLmtleWJvYXJkKG9wdGlvbnMpO1xyXG4gICAgJChpZCkudmFsKCcnKTtcclxuICAgICQoaWQpLmZvY3VzKCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBfY2xvc2VfdmsoKSB7XHJcbiAgICBbJyNxbGFsZnFqc2doJywgJyNpbnB1dC1wZngtcWxhbGZxanNnaCddLmZvckVhY2goZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICB2YXIgdmsgPSAkKGlkKS5nZXRrZXlib2FyZCgpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmsgIT09ICd1bmRlZmluZWQnICYmIHZrLmlzT3BlbikgeyB2ay5jbG9zZSgpOyB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gX2Rlc3Ryb3lfdmsoKSB7XHJcbiAgICBbJyNxbGFsZnFqc2doJywgJyNpbnB1dC1wZngtcWxhbGZxanNnaCddLmZvckVhY2goZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICB2YXIgdmsgPSAkKGlkKS5nZXRrZXlib2FyZCgpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmsgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHZrLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJyN2a2V5Ym9hcmQtdG9nZ2xlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gX2Rvd25sb2FkKGhyZWYsIGZpbGVOYW1lKSB7XHJcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgICBhLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7XHJcblxyXG4gICAgLy8gU2V0IHRoZSBIUkVGIHRvIGEgQmxvYiByZXByZXNlbnRhdGlvbiBvZiB0aGUgZGF0YSB0byBiZSBkb3dubG9hZGVkXHJcbiAgICBhLmhyZWYgPSBocmVmO1xyXG5cclxuICAgIC8vIFVzZSBkb3dubG9hZCBhdHRyaWJ1dGUgdG8gc2V0IHNldCBkZXNpcmVkIGZpbGUgbmFtZVxyXG4gICAgYS5zZXRBdHRyaWJ1dGUoXCJkb3dubG9hZFwiLCBmaWxlTmFtZSk7XHJcblxyXG4gICAgLy8gVHJpZ2dlciB0aGUgZG93bmxvYWQgYnkgc2ltdWxhdGluZyBjbGlja1xyXG4gICAgYS5jbGljaygpO1xyXG5cclxuICAgIC8vIENsZWFudXBcclxuICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGEuaHJlZik7XHJcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfZ2V0T1MoKSB7XHJcbiAgICB2YXIgdXNlckFnZW50ID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQsXHJcbiAgICAgICAgcGxhdGZvcm0gPSB3aW5kb3cubmF2aWdhdG9yLnBsYXRmb3JtLFxyXG4gICAgICAgIG1hY29zUGxhdGZvcm1zID0gWydNYWNpbnRvc2gnLCAnTWFjSW50ZWwnLCAnTWFjUFBDJywgJ01hYzY4SyddLFxyXG4gICAgICAgIHdpbmRvd3NQbGF0Zm9ybXMgPSBbJ1dpbjMyJywgJ1dpbjY0JywgJ1dpbmRvd3MnLCAnV2luQ0UnXSxcclxuICAgICAgICBpb3NQbGF0Zm9ybXMgPSBbJ2lQaG9uZScsICdpUGFkJywgJ2lQb2QnXSxcclxuICAgICAgICBvcyA9IG51bGw7XHJcblxyXG4gICAgaWYgKG1hY29zUGxhdGZvcm1zLmluZGV4T2YocGxhdGZvcm0pICE9PSAtMSkge1xyXG4gICAgICAgIG9zID0gJ01hYyBPUyc7XHJcbiAgICB9IGVsc2UgaWYgKGlvc1BsYXRmb3Jtcy5pbmRleE9mKHBsYXRmb3JtKSAhPT0gLTEpIHtcclxuICAgICAgICBvcyA9ICdpT1MnO1xyXG4gICAgfSBlbHNlIGlmICh3aW5kb3dzUGxhdGZvcm1zLmluZGV4T2YocGxhdGZvcm0pICE9PSAtMSkge1xyXG4gICAgICAgIG9zID0gJ1dpbmRvd3MnO1xyXG4gICAgfSBlbHNlIGlmICgvQW5kcm9pZC8udGVzdCh1c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgb3MgPSAnQW5kcm9pZCc7XHJcbiAgICB9IGVsc2UgaWYgKCFvcyAmJiAvTGludXgvLnRlc3QocGxhdGZvcm0pKSB7XHJcbiAgICAgICAgb3MgPSAnTGludXgnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBvcztcclxufVxyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgS0lDQV9ESUFMT0c7IiwidmFyIFN3YWwgPSByZXF1aXJlKCdzd2VldGFsZXJ0MicpXHJcblxyXG5mdW5jdGlvbiBLSUNBX0FMRVJUICgpIHtcclxuICAgIHZhciBvYmplY3QgPSB7fTtcclxuXHJcbiAgICBvYmplY3QuYWxlcnQgPSBmdW5jdGlvbih0aXRsZSwgdGV4dCwgb3B0aW9ucyl7XHJcbiAgICAgICAgdmFyIGFsZXJ0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaWNvbjogJ2luZm8nLFxyXG4gICAgICAgICAgICB0aXRsZTogdGl0bGUsXHJcbiAgICAgICAgICAgIHRleHQ6IHRleHQsIFxyXG4gICAgICAgIH0gICAgICAgIFxyXG5cclxuICAgICAgICBpZihvcHRpb25zICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9wdGlvbnMpOyAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XHJcbiAgICAgICAgICAgICAgICBhbGVydE9wdGlvbnNba2V5XSA9IG9wdGlvbnNba2V5XTtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBTd2FsLmZpcmUoYWxlcnRPcHRpb25zKTsgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIG9iamVjdC5lcnJvciA9IGZ1bmN0aW9uICh0aXRsZSwgdGV4dCwgb3B0aW9ucykge1xyXG4gICAgICAgIGlmKHdlYm5wa2lfY29uZmlnLmFsZXJ0IDwgMSl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBhbGVydE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGljb246ICdlcnJvcicsXHJcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcclxuICAgICAgICAgICAgdGV4dDogdGV4dCwgXHJcbiAgICAgICAgfSAgICAgICAgXHJcblxyXG4gICAgICAgIGlmKG9wdGlvbnMgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7ICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0T3B0aW9uc1trZXldID0gb3B0aW9uc1trZXldO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIFN3YWwuZmlyZShhbGVydE9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIG9iamVjdC5pbmZvID0gZnVuY3Rpb24gKHRpdGxlLCB0ZXh0LCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYod2VibnBraV9jb25maWcuYWxlcnQgPCAyKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGFsZXJ0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaWNvbjogJ2luZm8nLFxyXG4gICAgICAgICAgICB0aXRsZTogdGl0bGUsXHJcbiAgICAgICAgICAgIHRleHQ6IHRleHQsIFxyXG4gICAgICAgIH0gICAgICAgIFxyXG5cclxuICAgICAgICBpZihvcHRpb25zICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9wdGlvbnMpOyAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XHJcbiAgICAgICAgICAgICAgICBhbGVydE9wdGlvbnNba2V5XSA9IG9wdGlvbnNba2V5XTtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBTd2FsLmZpcmUoYWxlcnRPcHRpb25zKTsgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIG9iamVjdC5zdWNjZXNzID0gZnVuY3Rpb24gKHRpdGxlLCB0ZXh0LCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYod2VibnBraV9jb25maWcuYWxlcnQgPCAyKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGFsZXJ0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgICAgICB0aXRsZTogdGl0bGUsXHJcbiAgICAgICAgICAgIHRleHQ6IHRleHQsIFxyXG4gICAgICAgIH0gICAgICAgIFxyXG5cclxuICAgICAgICBpZihvcHRpb25zICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9wdGlvbnMpOyAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XHJcbiAgICAgICAgICAgICAgICBhbGVydE9wdGlvbnNba2V5XSA9IG9wdGlvbnNba2V5XTtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBTd2FsLmZpcmUoYWxlcnRPcHRpb25zKTsgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIG9iamVjdC53YXJuID0gZnVuY3Rpb24gKHRpdGxlLCB0ZXh0LCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYod2VibnBraV9jb25maWcuYWxlcnQgPCAzKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGFsZXJ0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcclxuICAgICAgICAgICAgdGV4dDogdGV4dCwgXHJcbiAgICAgICAgfSAgICAgICAgXHJcblxyXG4gICAgICAgIGlmKG9wdGlvbnMgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7ICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0T3B0aW9uc1trZXldID0gb3B0aW9uc1trZXldO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIFN3YWwuZmlyZShhbGVydE9wdGlvbnMpOyAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG9iamVjdDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgS0lDQV9BTEVSVCgpOyIsImZ1bmN0aW9uIEtJQ0FfTE9HR0VSICgpIHtcclxuICAgIHZhciBvYmplY3QgPSB7fTtcclxuXHJcbiAgICBvYmplY3QuZGVidWcgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKHdlYm5wa2lfY29uZmlnLmxvZyA8IDMpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUuZGVidWcoYXJndW1lbnRzKTtcclxuICAgIH1cclxuXHJcbiAgICBvYmplY3QuZXJyb3IgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKHdlYm5wa2lfY29uZmlnLmxvZ2dlciA8IDEpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYXJndW1lbnRzKTtcclxuICAgIH1cclxuXHJcbiAgICBvYmplY3QuaW5mbyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYod2VibnBraV9jb25maWcubG9nZ2VyIDwgMil7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5pbmZvKGFyZ3VtZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqZWN0LmxvZyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYod2VibnBraV9jb25maWcubG9nZ2VyIDwgMyl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coYXJndW1lbnRzKTtcclxuICAgIH1cclxuXHJcbiAgICBvYmplY3Qud2FybiA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYod2VibnBraV9jb25maWcubG9nZ2VyIDwgMyl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS53YXJuKGFyZ3VtZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqZWN0LmRpciA9IGZ1bmN0aW9uKG9iamVjdCl7XHJcbiAgICAgICAgaWYod2VibnBraV9jb25maWcubG9nZ2VyIDwgMil7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5kaXIob2JqZWN0KTtcclxuICAgIH1cclxuXHJcbiAgICBvYmplY3QuZ3JvdXAgPSBmdW5jdGlvbihtZXNzYWdlKXtcclxuICAgICAgICBpZih3ZWJucGtpX2NvbmZpZy5sb2dnZXIgPCAzKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmdyb3VwKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIG9iamVjdC5ncm91cEVuZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYod2VibnBraV9jb25maWcubG9nZ2VyIDwgMyl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5ncm91cEVuZCgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4gb2JqZWN0O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBLSUNBX0xPR0dFUigpOyIsImltcG9ydCAnLi92ZW5kb3IvanF1ZXJ5L2pxdWVyeS5rZXlib2FyZCdcclxuaW1wb3J0ICcuL3ZlbmRvci9qcXVlcnkvY29sUmVzaXphYmxlLTEuNidcclxuXHJcbi8vIENTU1xyXG5pbXBvcnQgJy4vY3NzL2RpYWxvZy5jc3MnXHJcbmltcG9ydCAnLi9jc3Mva2V5Ym9hcmQtYmFzaWMuY3NzJ1xyXG5cclxuaW1wb3J0IF9LSUNBX0RJQUxPRyBmcm9tICcuL2pzL2V2ZW50J1xyXG5pbXBvcnQgX0tJQ0FfQUxFUlQgZnJvbSAnLi9qcy9hbGVydCdcclxuaW1wb3J0IF9LSUNBX0xPR0dFUiBmcm9tICcuL2pzL2xvZ2dlcidcclxuaW1wb3J0IFBERk9iamVjdCBmcm9tICcuL3ZlbmRvci9wZGZPYmplY3QvcGRmb2JqZWN0Lm1pbidcclxuXHJcbnZhciBfaTE4biA9IHJlcXVpcmUoXCIuL2xhbmcvaTE4blwiKTtcclxuXHJcbihmdW5jdGlvbigpIHtcclxuICAgIHdpbmRvdy5LSUNBX0RJQUxPRyA9IF9LSUNBX0RJQUxPRztcclxuICAgIHdpbmRvdy5LSUNBX0FMRVJUID0gX0tJQ0FfQUxFUlQ7XHJcbiAgICB3aW5kb3cuS0lDQV9MT0dHRVIgPSBfS0lDQV9MT0dHRVI7XHJcbiAgICB3aW5kb3cuUERGT2JqZWN0ID0gUERGT2JqZWN0O1xyXG5cclxuICAgIF9pMThuLnNldExhbmd1YWdlKHdlYm5wa2lfY29uZmlnLmxhbmd1YWdlLCBmdW5jdGlvbihlcnJvcikge1xyXG4gICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICBLSUNBX0xPR0dFUi5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIEtJQ0FfQUxFUlQuZXJyb3IoXCJMQU5HVUFHRV9OT1RfU1VQUE9SVEVEXCIsIGVycm9yLCB7ICdmb290ZXInOiAnU3VwcG9ydGVkIGxhbmd1YWdlIGNvZGVzIGFyZSBbIDxiPiBLTywgRU4sIGFuZCBGUjwvYj5dLicgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEtJQ0FfTE9HR0VSLmluZm8oS0lDQV9DT1JQVVMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIEtJQ0FfRElBTE9HLmNyZWF0ZURpYWxvZygpO1xyXG4gICAgICAgIEtJQ0FfRElBTE9HLmVuYWJsZUtleWJvYXJkU2VjdXJpdHkoKTsgICAgICAgIFxyXG4gICAgfSk7XHJcbiAgICBLSUNBX0xPR0dFUi5ncm91cEVuZCgpO1xyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiIn0=