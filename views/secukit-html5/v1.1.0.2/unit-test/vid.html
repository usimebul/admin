<div class="card" id="card-vid">
    <div class="card-header"><strong>VID</strong> <small>without Verification</small></div>
    <div class="card-body">
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label" for="select-function">Function</label>
                    <div class="col-sm-8">
                        <select class="form-control form-control-sm" id="select-function" size="1">
                            <option value="verifyVid" selected> verifyVid</option>
                            <option value="getVIDRandom">getVIDRandom</option>
                            <option value="getEncryptedVidRandom">getEncryptedVidRandom</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <h6 class="mt-2 mb-4">Required Forms</h6>
        <!-- row -->
        <div class="row">
            <div class="col-sm-6" id="idn-wrapper">
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label" for="text-idn">ID Number</label>
                    <div class="col-sm-8">
                        <input class="form-control form-control-sm" type="text" id="text-idn" name="text-idn"
                            value="1234561234563">
                    </div>
                </div>
            </div>

            <div class="col-sm-6 d-none" id="encoding-wrapper">
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label" for="select-encoding">Encoding</label>
                    <div class="col-sm-8">
                        <select class="form-control form-control-sm" id="select-encoding" name="select-encoding"
                            size="1">
                            <option selected value="base64"> BASE64</option>
                            <option value="hex">HEX</option>
                            <option value="pem">PEM</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 d-none" id="padding-algorithm-wrapper">
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label" for="select-padding-algorithm">Padding Algorithm</label>
                    <div class="col-sm-8">
                        <select class="form-control form-control-sm" id="select-padding-algorithm"
                            name="select-padding-algorithm" size="1">
                            <option value="RSAES-OAEP">RSAES-OAEP</option>
                            <option selected value="RSAES-PKCS1-V1_5">RSAES-PKCS1-V1_5</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.row-->
        <div class="d-none" id="cert-wrapper">
            <label for="textarea-cert">Certificate to Envelop <small>(한정인(개인) signCert.der)</small></label>
            <textarea class="form-control form-control-sm" id="textarea-cert" name="textarea-cert"
                rows="4">-----BEGIN CERTIFICATE-----MIIFbTCCBFWgAwIBAgIEBOAzezANBgkqhkiG9w0BAQsFADBKMQswCQYDVQQGEwJLUjENMAsGA1UECgwES0lDQTEVMBMGA1UECwwMQWNjcmVkaXRlZENBMRUwEwYDVQQDDAxzaWduR0FURSBDQTUwHhcNMTkwNzA4MDY0NTAwWhcNMjAwNzA4MTQ1OTU5WjCBkjELMAkGA1UEBhMCS1IxDTALBgNVBAoMBEtJQ0ExEzARBgNVBAsMCmxpY2Vuc2VkQ0ExFTATBgNVBAsMDOuTseuhneq4sOq0gDEZMBcGA1UECwwQS0lDQeqzoOqwneyEvO2EsDERMA8GA1UECwwI7IS87YSwUkExGjAYBgNVBAMMEe2VnOygleyduCjqsJzsnbgpMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAjHTwG4ivPqan9UKPfEm29mAd4yozXYRVOI/BLKf/lKDgoelwjAqlpzhj3SVwKAhlUTuKflBY9DYUjLvDy9qGwTTO4sWPZgynyNJ3u2QGWdRCWTHSbVRkFvCJtlrvtXjhiPvcGpLBc6hZQRJRV+SrQzN22SaKT9P3zIaw8hOQbN/jbieZzLVcVWUZT8pO/5a59k/VGTQIQOoj5Q+Ab9/jA49BLkTJWfVU1Kq1NFshRUsFMi3FFwzRCUfoFOlMBPDjOxQ078X+jlREPBqeZ0Lz3BQUhnD6EWEoa+saUigp/sLm5zuawqMnU7PNgAhzZKJtIvbfHN0V8UeP7h+7BFByPQIDAQABo4ICEDCCAgwwgY8GA1UdIwSBhzCBhIAU2L467EWZxZ7jnOqBH9IdErA2PoihaKRmMGQxCzAJBgNVBAYTAktSMQ0wCwYDVQQKDARLSVNBMS4wLAYDVQQLDCVLb3JlYSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eSBDZW50cmFsMRYwFAYDVQQDDA1LSVNBIFJvb3RDQSA0ggIQHTAdBgNVHQ4EFgQUZP5K2MhZ2EOlHY4vLfM2cY6ERV0wDgYDVR0PAQH/BAQDAgUgMBcGA1UdIAQQMA4wDAYKKoMajJpEBQIBAjCBiAYDVR0RBIGAMH6BFXB1cmUyNzEzQHNpZ25nYXRlLmNvbaBlBgkqgxqMmkQKAQGgWDBWDBHtlZzsoJXsnbgo6rCc7J24KTBBMD8GCiqDGoyaRAoBAQEwMTALBglghkgBZQMEAgGgIgQgiCsFhWxpPQRHOfXZqOnOtMJ2BDiQ3iw8ea+lOZQN3z0wXwYDVR0fBFgwVjBUoFKgUIZObGRhcDovL2xkYXAuc2lnbmdhdGUuY29tOjM4OS9vdT1kcDdwMTQ4MDMsb3U9Y3JsZHAsb3U9QWNjcmVkaXRlZENBLG89S0lDQSxjPUtSMEQGCCsGAQUFBwEBBDgwNjA0BggrBgEFBQcwAYYoaHR0cDovL29jc3Auc2lnbmdhdGUuY29tOjkwMjAvT0NTUFNlcnZlcjANBgkqhkiG9w0BAQsFAAOCAQEAXB7becgNCzhBSXHM07XkyOAO2k258wwqZra8CddkpXLnPVyb4OupAgHhR3YiRGFSUqRtttPHUwwAqmPfToCj3HFYS3wEan2L4kLLPq00sOTlHgOVR6KBQ1N8dM1w3atyAH5ezGlcUYWP2CUMQZVPZ+RPgcfEdcX0xoYeOhWw05/Cr1b2hLcG0wLssEruJG3+1dHc4jO7rnucIPANHcSup11vne1KcPmFrMCSzLUAu5PItc/vj+Bppu/mof6llMPpuOx1urGRlOI3Bq+ZRCX0PEDx77kCbnHhp6BTzoOTU0R31umDTxVpYSjybploHbPT2WoXEhhIpvAVH9v6lIj71A==-----END CERTIFICATE-----</textarea>
        </div>

        <button class="btn btn-sm btn-pill btn-block btn-primary mb-4 mt-4" id="button-run" type="button">Run</button>

        <h6 class="mt-2 mb-4">Result</h6>
        <textarea class="form-control form-control-sm" id="textarea-result" name="textarea-result" rows="5"
            placeholder="결과가 여기에 표시됩니다."></textarea>

    </div>
</div>
<script>
    var func;
    $('#select-function').change(function () {
        func = $(this).val();
        $("#idn-wrapper, #encoding-wrapper, #padding-algorithm-wrapper, #cert-wrapper").addClass('d-none');

        if (func === "verifyVid")
            $("#idn-wrapper").removeClass('d-none');
        else if (func === "getVIDRandom")
            $("#encoding-wrapper").removeClass('d-none');
        else if (func === "getEncryptedVidRandom")
            $("#encoding-wrapper, #padding-algorithm-wrapper, #cert-wrapper").removeClass('d-none');
    })

    $('#button-run').click(function () {
        func = $("#select-function").val();
        if (func === "verifyVid") {
            var idn = $('#text-idn').val();
            html5DialogApi.verifyVid(idn, callback)
        }
        else if (func === "getVIDRandom") {
            var options = { outputEncoding: $('#select-encoding').val() };
            html5DialogApi.getVIDRandom(options, callback);
        }
        else if (func === "getEncryptedVidRandom") {
            var cert = $('#textarea-cert').val();
            var options = {
                outputEncoding: $('#select-encoding').val(),
                paddingAlg: $('#select-padding-algorithm').val()
            };
            html5DialogApi.getEncryptedVidRandom(cert, options, callback);
        }
    });

    var callback = function (result, error) {
        if (error) {
            $('#textarea-result').val(error.message);
            return;
        }
        $('#textarea-result').val(result);

        KICA_DIALOG.closeSelectCertificateDialog();
    }
</script>